const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/eruda-indexeddb-B8yAyaUK.js","assets/eruda-CyKdWmHO.js"])))=>i.map(i=>d[i]);
var f$=Object.defineProperty;var tv=t=>{throw TypeError(t)};var p$=(t,e,n)=>e in t?f$(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ht=(t,e,n)=>p$(t,typeof e!="symbol"?e+"":e,n),h$=(t,e,n)=>e.has(t)||tv("Cannot "+n);var Ma=(t,e,n)=>(h$(t,e,"read from private field"),n?n.call(t):e.get(t)),nv=(t,e,n)=>e.has(t)?tv("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();const m$="modulepreload",g$=function(t){return"/"+t},rv={},no=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){let o=function(u){return Promise.all(u.map(c=>Promise.resolve(c).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=o(n.map(u=>{if(u=g$(u),u in rv)return;rv[u]=!0;const c=u.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${d}`))return;const f=document.createElement("link");if(f.rel=c?"stylesheet":m$,c||(f.as="script"),f.crossOrigin="",f.href=u,l&&f.setAttribute("nonce",l),document.head.appendChild(f),c)return new Promise((p,h)=>{f.addEventListener("load",p),f.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},mh=(t,e)=>e.some(n=>t instanceof n);let sv,iv;function y$(){return sv||(sv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function v$(){return iv||(iv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const gh=new WeakMap,gf=new WeakMap,td=new WeakMap;function b$(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(wi(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return td.set(e,t),e}function w$(t){if(gh.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});gh.set(t,e)}let yh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return gh.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return wi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function I_(t){yh=t(yh)}function _$(t){return v$().includes(t)?function(...e){return t.apply(vh(this),e),wi(this.request)}:function(...e){return wi(t.apply(vh(this),e))}}function x$(t){return typeof t=="function"?_$(t):(t instanceof IDBTransaction&&w$(t),mh(t,y$())?new Proxy(t,yh):t)}function wi(t){if(t instanceof IDBRequest)return b$(t);if(gf.has(t))return gf.get(t);const e=x$(t);return e!==t&&(gf.set(t,e),td.set(e,t)),e}const vh=t=>td.get(t);function bh(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=wi(o);return r&&o.addEventListener("upgradeneeded",l=>{r(wi(o.result),l.oldVersion,l.newVersion,wi(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}function ov(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",r=>e(r.oldVersion,r)),wi(n).then(()=>{})}const S$=["get","getKey","getAll","getAllKeys","count"],E$=["put","add","delete","clear"],yf=new Map;function av(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(yf.get(e))return yf.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=E$.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||S$.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),s&&l.done]))[0]};return yf.set(e,i),i}I_(t=>({...t,get:(e,n,r)=>av(e,n)||t.get(e,n,r),has:(e,n)=>!!av(e,n)||t.has(e,n)}));const A$=["continue","continuePrimaryKey","advance"],lv={},wh=new WeakMap,R_=new WeakMap,C$={get(t,e){if(!A$.includes(e))return t[e];let n=lv[e];return n||(n=lv[e]=function(...r){wh.set(this,R_.get(this)[e](...r))}),n}};async function*$$(...t){let e=this;if(e instanceof IDBCursor||(e=await e.openCursor(...t)),!e)return;e=e;const n=new Proxy(e,C$);for(R_.set(n,e),td.set(n,vh(e));e;)yield n,e=await(wh.get(n)||e.continue()),wh.delete(n)}function uv(t,e){return e===Symbol.asyncIterator&&mh(t,[IDBIndex,IDBObjectStore,IDBCursor])||e==="iterate"&&mh(t,[IDBIndex,IDBObjectStore])}I_(t=>({...t,get(e,n,r){return uv(e,n)?$$:t.get(e,n,r)},has(e,n){return uv(e,n)||t.has(e,n)}}));var O_={},k$=Object.defineProperty,I$=(t,e,n)=>e in t?k$(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Cr=(t,e,n)=>I$(t,typeof e!="symbol"?e+"":e,n);function R$(t){return typeof t=="function"?t():t}function O$(t,e,...n){R$(t)||Tt(e,...n)}function Tt(t="Something went wrong",...e){const n=typeof t=="string"?Error:t;throw new n(...typeof t=="string"?[t]:e)}const Wi="items";let T$=class{constructor(e){Cr(this,"db",null),Cr(this,"namespace"),this.namespace=e}async has(e){return await(await this.getConnection()).get(Wi,e)!==void 0}async get(e){return(await this.getConnection()).get(Wi,e)}async require(e){return await this.get(e)??Tt(`Missing required '${e}' IndexedDBMap value`)}async set(e,n){await(await this.getConnection()).put(Wi,n,e)}async delete(e){await(await this.getConnection()).delete(Wi,e)}async clear(){await(await this.getConnection()).clear(Wi)}close(){this.db&&(this.db.close(),this.db=null)}async getConnection(){return this.db=this.db??await this.connect(),this.db}async connect(){const e=`${this.namespace}-map`;return await bh(e,1,{upgrade(n){n.objectStoreNames.contains(Wi)||n.createObjectStore(Wi)},blocked:()=>Tt(`Could not open '${e}' IndexedDB`)})}};function D$(){return typeof global<"u"?global:typeof globalThis<"u"?globalThis:window}const P$=D$().Error;let ya=class extends P${constructor(e,n){super(e,n),this.name=new.target.name==="JSError"?"Error":new.target.name,Object.setPrototypeOf(this,new.target.prototype)}};function M$(t,e){return t==null&&e==null?[t===null?1:0,e===null?1:0]:[t??null,e??null]}function vf(t,e){const[n,r]=M$(t,e);return n>r?1:r>n?-1:0}function Fm(t,e){return t===e?!0:!Lt(t)||!Lt(e)?!1:t instanceof Date&&e instanceof Date?t.getTime()===e.getTime():Object.keys(t).length!==Object.keys(e).length?!1:!Object.keys(t).some(n=>!Fm(t[n],e[n]))}function L$(t){return Object.entries(t).reduce((e,[n,r])=>(e[r]=n,e),{})}const N$=Array.isArray.bind(Array);function T_(t){return t==null?!0:Array.isArray(t)||typeof t=="string"?t.length===0:typeof t=="object"?Object.keys(t).length===0:!1}function Vo(t,e){return t instanceof e}function F$(t){return typeof(t==null?void 0:t[Symbol.iterator])=="function"}function Lt(t){return typeof t=="object"&&t!==null}function j$(t){return typeof t=="string"||t instanceof String}function _h(t){return typeof t>"u"||t===null}function cs(t){t={...t};for(const e in t)U$(t,e)&&(t[e]=cs(t[e]));return t}function uu(t,e){let n=t;const r=e.split(".");for(const s of r){if(!Lt(n))return;n=n[s]}return n}Object.entries.bind(Object);function pc(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function q$(t,e){return t.reduce((n,r)=>(n[r[e]]=r,n),{})}function U$(t,e){let n;return pc(t,e)&&Lt(n=t[e])&&n.constructor===Object}function jm(t,e){if(typeof e=="function"){const s=e,i={};for(const[o,a]of Object.entries(t))s(a)||(i[o]=a);return i}const n={...t},r=Array.isArray(e)?e:[e];for(const s of r)delete n[s];return n}function $r(t){return jm(t,e=>e==null)}function D_(t,e,n){t.prototype[e]=n}function ir(t){return String(t)}function B$(t){t.splice(0,t.length)}function va(t,e,n){const r=t.slice(0),s=[],i=n?(o,a)=>a.findIndex(l=>n(o,l)):(o,a)=>a.indexOf(o);for(const o of e){const a=i(o,r);a!==-1?r.splice(a,1):s.push(o)}return{added:s,removed:r}}function z$(t,e){return t.length!==e.length?!1:!t.some((n,r)=>e[r]!==n)}function Tn(t,e){return e?t.filter(e):t.filter(n=>!!n)}function V$(t,e){for(const n of t)if(e(n))return n;return null}function H$(t,e){return[...t.entries()].flatMap(([n,r])=>e(r,n))}function K$(t,e){const n=typeof e=="string"?r=>ir(r[e]):e;return t.reduce((r,s)=>{var i;return(r[i=n(s)]??(r[i]=[])).push(s),r},{})}function W$(t){return t.length===0}function G$(t,e){return t.map(n=>n[e])}function J$(t){return t.length===0?null:t[Math.floor(Math.random()*t.length)]}function Y$(t,e){const n=t.slice(0),r=[];for(;n.length>0&&r.length<e;){const s=Math.floor(Math.random()*n.length);r.push(n[s]),n.splice(s,1)}return r}function ro(t,e){const n=t.indexOf(e);return n===-1?!1:(t.splice(n,1),!0)}function X$(t,e){return t.splice(Number(e),1).length>0}function P_(t,e,n){const r=t.indexOf(e);return r===-1?!1:(t[r]=n,!0)}function Bu(t,e,n){n=e==="asc"||e==="desc"?e:n;const r={},s=a=>{switch(typeof a){case"string":return"";case"number":return Number.MIN_SAFE_INTEGER;case"boolean":return!1;default:return null}},i=(a,l)=>{if(!(l in r)){const u=uu(t.find(c=>uu(c,l)!==void 0&&uu(c,l)!==null),l);r[l]=s(u)}return uu(a,l)??r[l]},o=()=>{const a=n==="desc"?l=>(u,c)=>vf(i(c,l),i(u,l)):l=>(u,c)=>vf(i(u,l),i(c,l));switch(typeof e){case"function":return e;case"string":return e==="asc"?void 0:e==="desc"?(l,u)=>vf(u,l):a(e);case"object":{const l=e.map(u=>a(u));return(u,c)=>{for(const d of l){const f=d(u,c);if(f!==0)return f}return 0}}}};return t.slice(0).sort(o())}function Ur(t,e){return e?Object.values(t.reduce((n,r)=>{const s=e(r);return n[s]=n[s]??r,n},{})):[...new Set(t)]}function Q$(t,e,n){return t.filter(r=>{const s=r[e],i=typeof s=="function"?s.call(r):s;return n?i===n:!!i})}function Gr(t,e){return Array.isArray(e)?Tn(t,n=>e.indexOf(n)===-1):Z$(t,t.indexOf(e))}function Z$(t,e){return qm(t,[e])}function qm(t,e){return t.map((n,r)=>[n,r]).filter(([n,r])=>!e.includes(r)).map(([n])=>n)}function ur(t,e=!1){return Array.isArray(t)||F$(t)&&!j$(t)?Array.from(t):e&&t==null?[]:[t]}let ek=class{constructor(){Cr(this,"listeners",[])}add(e){return this.listeners.push(e),()=>this.remove(e)}remove(e){ro(this.listeners,e)}async emit(e,...n){for(const r of this.listeners){const s=r[e];typeof s=="function"&&await(s==null?void 0:s.call(r,...n))}}},cv=class{static isConjuring(){return this.__conjuring}static isMagicReady(){return this.__reservedProperties.has(this)}static prepareMagic(){this.__conjuring=!0,this.__reservedProperties.set(this,new Set(Object.getOwnPropertyNames(new this))),this.__conjuring=!1}static isReservedProperty(e){var n;return!!((n=this.__reservedProperties.get(this))!=null&&n.has(e))}constructor(...e){if(!this.static().isConjuring())return this.static().isMagicReady()||this.static().prepareMagic(),this._proxy=this.createProxy(),this.initialize(...e),this._proxy.instance}static(e){const n=this.constructor;return e?n[e]:n}reserveProperty(e){Object.assign(this,{[e]:null})}initialize(...e){}__get(e){return Reflect.get(this._proxy.target,e)}__set(e,n){Reflect.set(this._proxy.target,e,n)}__delete(e){Reflect.deleteProperty(this._proxy.target,e)}createProxy(){const e=this.static();return{target:this,instance:new Proxy(this,{get(n,r,s){return typeof r!="string"||r in n||e.isReservedProperty(r)?Reflect.get(n,r,s):n.__get(r)},set(n,r,s,i){return typeof r!="string"||r in n||e.isReservedProperty(r)?Reflect.set(n,r,s,i):(n.__set(r,s),!0)},deleteProperty(n,r){return typeof r!="string"||r in n||e.isReservedProperty(r)?Reflect.deleteProperty(n,r):(n.__delete(r),!0)}})}}};Cr(cv,"__conjuring"),Cr(cv,"__reservedProperties",new WeakMap);let tk=class M_{constructor(e){Cr(this,"keysToItems"),Cr(this,"itemsToKeys"),Cr(this,"getKey"),this.keysToItems=new Map,this.itemsToKeys=new WeakMap,this.getKey=e??(n=>ir(n))}static createFromArray(e,n){const r=typeof n=="string"?i=>i[n]:n,s=new M_(r);for(const i of e)s.add(i);return s}*[Symbol.iterator](){yield*this.keysToItems}get size(){return this.keysToItems.size}items(){return this.keysToItems.values()}keys(){return this.keysToItems.keys()}entries(){return this.keysToItems.entries()}add(e){const n=this.getKey(e);this.keysToItems.set(n,e),this.itemsToKeys.set(e,n)}require(e){return this.keysToItems.get(e)??Tt(`Couldn't find item with '${e}' key`)}get(e){return this.keysToItems.get(e)}getKeys(){return[...this.keysToItems.keys()]}getItems(){return[...this.keysToItems.values()]}hasKey(e){return this.keysToItems.has(e)}hasItem(e){return this.itemsToKeys.has(e)}delete(e){const n=this.itemsToKeys.get(e);n&&(this.itemsToKeys.delete(e),this.keysToItems.delete(n))}filter(e){const n=this.constructor.createFromArray([],this.getKey);for(const[r,s]of this.entries())e(s,r)&&n.add(s);return n}clear(){this.itemsToKeys=new WeakMap,this.keysToItems.clear()}clone(){const e=this.constructor,n=new e(this.getKey);n.keysToItems=new Map(this.keysToItems),n.itemsToKeys=new WeakMap;for(const[r,s]of n.keysToItems.entries())n.itemsToKeys.set(s,r);return n}},Um=class{constructor(e=1){Cr(this,"count"),Cr(this,"listeners"),this.count=e,this.listeners=new Set}acquire(){return this.count===0?this.waitAvailable().then(()=>this.acquire()):(this.count=Math.max(this.count-1,0),Promise.resolve())}release(){this.count++,this.notifyAvailable()}isAvailable(){return this.count!==0}async run(e){await this.acquire();try{return await e()}finally{this.release()}}async waitAvailable(){for(;!this.isAvailable();)await new Promise(e=>{const n=()=>{this.listeners.delete(n),e(null)};this.listeners.add(n)})}notifyAvailable(){this.listeners.forEach(e=>e())}};const dv={},L_=class N_{static get instance(){return this._instance=this._instance??new N_}constructor(){}set(e,n){typeof n>"u"&&(n="__undefined__"),localStorage.setItem(e,JSON.stringify(n))}get(e,n=null){const r=localStorage.getItem(e);if(r===null)return n;if(r!=="__undefined__")return JSON.parse(r)}require(e){const n=this.get(e,dv);if(n===dv)throw new Error(`Failed getting required key from local storage: '${e}'`);return n}has(e){return localStorage.getItem(e)!==null}remove(e){localStorage.removeItem(e)}pull(e,n=null){if(!this.has(e))return n;const r=this.get(e);return this.remove(e),r}};Cr(L_,"_instance");let nk=L_;nk.instance;const bf={},ra={};function zu(t,e){return bf[t]=bf[t]??e(),bf[t]}function fv(t,e,n){var r,s;return(r=ra[t])!=null&&r.has(e)||Bm(t,e,n()),((s=ra[t])==null?void 0:s.get(e))??Tt()}function Vu(t,e){var n;return((n=ra[t])==null?void 0:n.get(e))??null}function wf(t,e){var n;(n=ra[t])==null||n.delete(e)}function Bm(t,e,n){(ra[t]??(ra[t]=new WeakMap)).set(e,n)}function _f(t){if(!t)return null;try{const e=new Date(t),n=e.getTime();return isNaN(n)||n===0?null:e}catch{return null}}function rk(){return typeof globalThis=="object"&&("Cypress"in globalThis||typeof globalThis.top=="object"&&globalThis.top&&"Cypress"in globalThis.top)?"e2e":typeof process=="object"&&O_.VITEST?"unit":null}function sk(){var t;if(rk())return"testing";if(typeof process=="object"&&(t=O_)!=null&&t.NODE_ENV)return"production";try{return"production"}catch{return null}}function ik(){const t=sk();return t==="development"||t==="testing"}function ok(t){return dk(t)}function xf(t,e){let n=t[0],r=t[1],s=t[2],i=t[3];n=xn(n,r,s,i,e[0],7,-680876936),i=xn(i,n,r,s,e[1],12,-389564586),s=xn(s,i,n,r,e[2],17,606105819),r=xn(r,s,i,n,e[3],22,-1044525330),n=xn(n,r,s,i,e[4],7,-176418897),i=xn(i,n,r,s,e[5],12,1200080426),s=xn(s,i,n,r,e[6],17,-1473231341),r=xn(r,s,i,n,e[7],22,-45705983),n=xn(n,r,s,i,e[8],7,1770035416),i=xn(i,n,r,s,e[9],12,-1958414417),s=xn(s,i,n,r,e[10],17,-42063),r=xn(r,s,i,n,e[11],22,-1990404162),n=xn(n,r,s,i,e[12],7,1804603682),i=xn(i,n,r,s,e[13],12,-40341101),s=xn(s,i,n,r,e[14],17,-1502002290),r=xn(r,s,i,n,e[15],22,1236535329),n=Sn(n,r,s,i,e[1],5,-165796510),i=Sn(i,n,r,s,e[6],9,-1069501632),s=Sn(s,i,n,r,e[11],14,643717713),r=Sn(r,s,i,n,e[0],20,-373897302),n=Sn(n,r,s,i,e[5],5,-701558691),i=Sn(i,n,r,s,e[10],9,38016083),s=Sn(s,i,n,r,e[15],14,-660478335),r=Sn(r,s,i,n,e[4],20,-405537848),n=Sn(n,r,s,i,e[9],5,568446438),i=Sn(i,n,r,s,e[14],9,-1019803690),s=Sn(s,i,n,r,e[3],14,-187363961),r=Sn(r,s,i,n,e[8],20,1163531501),n=Sn(n,r,s,i,e[13],5,-1444681467),i=Sn(i,n,r,s,e[2],9,-51403784),s=Sn(s,i,n,r,e[7],14,1735328473),r=Sn(r,s,i,n,e[12],20,-1926607734),n=En(n,r,s,i,e[5],4,-378558),i=En(i,n,r,s,e[8],11,-2022574463),s=En(s,i,n,r,e[11],16,1839030562),r=En(r,s,i,n,e[14],23,-35309556),n=En(n,r,s,i,e[1],4,-1530992060),i=En(i,n,r,s,e[4],11,1272893353),s=En(s,i,n,r,e[7],16,-155497632),r=En(r,s,i,n,e[10],23,-1094730640),n=En(n,r,s,i,e[13],4,681279174),i=En(i,n,r,s,e[0],11,-358537222),s=En(s,i,n,r,e[3],16,-722521979),r=En(r,s,i,n,e[6],23,76029189),n=En(n,r,s,i,e[9],4,-640364487),i=En(i,n,r,s,e[12],11,-421815835),s=En(s,i,n,r,e[15],16,530742520),r=En(r,s,i,n,e[2],23,-995338651),n=An(n,r,s,i,e[0],6,-198630844),i=An(i,n,r,s,e[7],10,1126891415),s=An(s,i,n,r,e[14],15,-1416354905),r=An(r,s,i,n,e[5],21,-57434055),n=An(n,r,s,i,e[12],6,1700485571),i=An(i,n,r,s,e[3],10,-1894986606),s=An(s,i,n,r,e[10],15,-1051523),r=An(r,s,i,n,e[1],21,-2054922799),n=An(n,r,s,i,e[8],6,1873313359),i=An(i,n,r,s,e[15],10,-30611744),s=An(s,i,n,r,e[6],15,-1560198380),r=An(r,s,i,n,e[13],21,1309151649),n=An(n,r,s,i,e[4],6,-145523070),i=An(i,n,r,s,e[11],10,-1120210379),s=An(s,i,n,r,e[2],15,718787259),r=An(r,s,i,n,e[9],21,-343485551),t[0]=gi(n,t[0]),t[1]=gi(r,t[1]),t[2]=gi(s,t[2]),t[3]=gi(i,t[3])}function nd(t,e,n,r,s,i){return e=gi(gi(e,t),gi(r,i)),gi(e<<s|e>>>32-s,n)}function xn(t,e,n,r,s,i,o){return nd(e&n|~e&r,t,e,s,i,o)}function Sn(t,e,n,r,s,i,o){return nd(e&r|n&~r,t,e,s,i,o)}function En(t,e,n,r,s,i,o){return nd(e^n^r,t,e,s,i,o)}function An(t,e,n,r,s,i,o){return nd(n^(e|~r),t,e,s,i,o)}function ak(t){const e=t.length,n=[1732584193,-271733879,-1732584194,271733878];let r;for(r=64;r<=t.length;r+=64)xf(n,lk(t.substring(r-64,r)));t=t.substring(r-64);const s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(r=0;r<t.length;r++)s[r>>2]|=t.charCodeAt(r)<<(r%4<<3);if(s[r>>2]|=128<<(r%4<<3),r>55)for(xf(n,s),r=0;r<16;r++)s[r]=0;return s[14]=e*8,xf(n,s),n}function lk(t){let e;const n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}const pv="0123456789abcdef".split("");function uk(t){let e="",n=0;for(;n<4;n++)e+=pv[t>>n*8+4&15]+pv[t>>n*8&15];return e}function ck(t){for(let e=0;e<t.length;e++)t[e]=uk(t[e]);return t.join("")}function gi(t,e){return t+e&4294967295}function dk(t){return ck(ak(t))}function F_(t){const e=t;return(e^Math.random()*16>>e/4).toString(16)}function j_(t=9){return(10**(t-1)).toString().replace(/[01]/g,F_)}function Ks(){return("10000000-1000-4000-8000"+-1e11).replace(/[018]/g,F_)}const fk=Object.getPrototypeOf(Object);function pk(t,e){class n extends t{constructor(...s){super(...s);for(const i of e){const o=new i(...s);Object.assign(this,o)}return this}}return Cr(n,"__mixins",e),mk(n,e),n}function hk(t,e){if(e===Object)return;let n=e;do{const r=jm(Object.getOwnPropertyDescriptors(n.prototype),["constructor"]);for(const[s,i]of Object.entries(r))Object.defineProperty(t.prototype,s,i);n=Object.getPrototypeOf(n)}while(n!==fk)}function mk(t,e=[]){for(const n of e)hk(t,n)}function q_(t,e=[]){const n=Array.isArray(t)?Object:t,r=Array.isArray(t)?t:e;return pk(n,r)}function rd(...t){return q_(...t)}function sd(t,e){var n,r;return((t==null?void 0:t.__mixins)??((r=(n=t==null?void 0:t.__proto__)==null?void 0:n.constructor)==null?void 0:r.__mixins)??[]).includes(e)}async function gk(t,e){for(const n of t){const r=await e(n);if(r)return r}return null}function yk(t){return"then"in t}function U_(t,e=null){return typeof t!="function"?t.catch(()=>e):async(...n)=>{try{return await t(...n)}catch{return e??null}}}function vk(t,e){return t.match(e)}function bk(t){return t.split("").reverse().join("")}function zm(t){return t.split(/_|-|\s|(?=[A-Z])/)}function Zi(t){const[e,...n]=zm(t);return(e??"").toLowerCase()+n.map(r=>r.slice(0,1).toUpperCase()+r.slice(1).toLowerCase()).join("")}function B_(t,e="-"){return t=t.normalize("NFD").replace(/[֊־᐀‐‑‒–—―⸗⸚⸺⸻~〜〰゠︱︲﹘﹣－(){}><[\]]/g," ").replace(/[\u0300-\u036f]/g,"").replace(/[\u3000-\u303f]/g,"").replace(/['".,#!$%/\\^&*;:=`@+?]/g,"").toLowerCase().trim().replace(/\s+/g,e),e.length>0&&(t=t.replace(new RegExp(`${e}+`,"g"),e)),t}function wk(t){return zm(t).map(e=>e.slice(0,1).toUpperCase()+e.slice(1).toLowerCase()).join("")}function _k(t){return zm(t).map(e=>e.slice(0,1).toUpperCase()+e.slice(1).toLowerCase()).join(" ")}function Hr(t){return Ar(t)??Tt(`Failed getting parent directory from '${t}'`)}function xk(t){return z_(t)??Tt(`Failed getting directory name from '${t}'`)}function sa(...t){let e=t.shift();for(;t.length>0;){const n=t.shift();n.startsWith("/")?e=ei(e)+n:n.match(/^[\w-]+:\/\//)?e=n:e.endsWith("/")?e+=n:e+="/"+n}return e}function hv(...t){const e=sa(...t);return e.endsWith("/")?e:e+"/"}function ei(t){const e=t.indexOf("://")+3,n=t.substr(e).indexOf("/");return n!==-1?t.substring(0,e+n):t}function Ar(t){if(t.endsWith("/")&&(t=t.substring(0,t.length-1)),ei(t)===t)return null;const e=t.lastIndexOf("/");return e!==-1?t.substr(0,e+1):null}function z_(t){t.endsWith("/")||(t=Ar(t)??t+"/");const e=t.slice(0,-1);return ei(t)===e?null:V_(e)}function V_(t){const e=t.lastIndexOf("/");return(e!==-1?t.slice(e+1):"").replace(/#.*$/,"").replace(/\?.*$/,"")}function id(t){const e=t.trim().match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/);if(!e)return null;const n=e[4]||"",[r,s]=n.indexOf(":")===-1?[n]:n.split(":");return{protocol:e[2]||void 0,domain:r||void 0,port:s||void 0,path:e[5]||void 0,query:e[7]||void 0,fragment:e[9]||void 0}}function H_(t,e){const n=id(t);if(!n)return t;for(const[r,s]of Object.entries(n))n[r]=e[r]!==!1&&s||"";return[n.protocol?`${n.protocol}://`:"",n.domain??"",n.port?`:${n.port}`:"",n.path??"",n.query?`?${n.query}`:"",n.fragment?`#${n.fragment}`:""].join("")}function fs(t){return H_(t,{protocol:!0,domain:!0,port:!0,path:!0,query:!1,fragment:!1})}function K_(t,e){const n=t.prototype;for(const[r,s]of Object.entries(e))n[r]=function(...i){var o;const a=s(this.value,...i);return(o=this.chain)==null?void 0:o.call(this,a)}}function W_(t,e){const n=t.prototype,r=Object.getOwnPropertyDescriptors(e.prototype);for(const[s,i]of Object.entries(r))if(!(s in n)){if(typeof i.value!="function"){Object.defineProperty(n,s,{get(){return this.chain(this.value[s])}});continue}n[s]=function(...o){var a;const l=i.value.call(this.value,...o);return(a=this.chain)==null?void 0:a.call(this,l)}}}let G_=class{constructor(e){this.value=e}static isPrimitive(e){return this.prototype.isPrimitive(e)}create(e){const n=this.constructor;return new n(e)}chain(e){return this.isPrimitive(e)?this.create(e):e}};const Sk={clear:B$,diff:va,filter:Tn,first:V$,flatMap:H$,groupBy:K$,isEmpty:W$,project:G$,randomItem:J$,randomItems:Y$,remove:ro,removeIndex:X$,replace:P_,sorted:Bu,unique:Ur,where:Q$,without:Gr,withoutIndexes:qm};let Vm=class extends G_{static create(e=[]){const{prototype:n}=this;return n.create(e)}*[Symbol.iterator](){yield*this.value}get(e){return this.value[e]}toArray(){return this.value.slice(0)}isPrimitive(e){return Array.isArray(e)}};K_(Vm,Sk);W_(Vm,Array);const Ek={reverse:bk,toCamelCase:Zi,toSlug:B_,toStudlyCase:wk,toTitleCase:_k};let J_=class extends G_{static create(e=""){const{prototype:n}=this;return n.create(e)}toString(){return this.value}isPrimitive(e){return typeof e=="string"}};K_(J_,Ek);W_(J_,String);function Ak(t){const e=new Proxy(t,{get(n,r,s){const i=Reflect.get(n,r,s);return typeof i!="function"?i:(...o)=>(i.call(n,...o),e)}});return e}function Ye(t,e){if(!e)return Ak(t);const n=e(t);return n instanceof Promise?n.then(()=>t):t}let Ck=class{constructor(e,n){this.errorMessage=e,this.getValue=n}get(e,n,r){const s=this.getValue()??Tt(this.errorMessage),i=Reflect.get(s,n,r);return typeof i=="function"?i.bind(s):i}set(e,n,r,s){const i=this.getValue()??Tt(this.errorMessage);return Reflect.set(i,n,r,s)}getPrototypeOf(){const e=this.getValue()??Tt(this.errorMessage);return Object.getPrototypeOf(e)}};function $k(t,e){return e??(e="Required value is missing"),typeof t=="function"?new Proxy({},new Ck(e,t)):t??Tt(e)}function xh(t,e){const n=typeof e=="function"?e(t):!!e;return new Proxy(t,{get(r,s,i){return n?Reflect.get(r,s,i):()=>{}}})}function kk(t=[]){return Vm.create(ur(t))}function Al(t=[],e){if(!Array.isArray(t)||typeof t[0]!="string")return tk.createFromArray(t,e);const n=e;return t.reduce((r,s)=>(r[s]=n(s),r),{})}var Ik=Object.defineProperty,Rk=(t,e,n)=>e in t?Ik(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Yt=(t,e,n)=>Rk(t,typeof e!="symbol"?e+"":e,n);let ze=class extends Error{constructor(e,n){super(...n?[e,n]:[e]),this.name=new.target.name,Object.setPrototypeOf(this,new.target.prototype)}},Hm=class extends ze{constructor(e){super(`Could not create document with id ${e} because it is already in use.`),Yt(this,"id"),this.id=e}},zr=class extends ze{constructor(e,n){super(n?`Couldn't find document with id '${e}' in '${n}' Collection.`:`Couldn't find document with id '${e}'`),Yt(this,"id"),Yt(this,"collection"),this.id=e,this.collection=n}};function Ok(t){return t instanceof Tk||"getProxySubject"in t}let Tk=class{constructor(e,n={}){Yt(this,"subject"),Yt(this,"overrides"),this.subject=e,this.overrides={create:(...r)=>e.create(...r),readOne:(...r)=>e.readOne(...r),readMany:(...r)=>e.readMany(...r),update:(...r)=>e.update(...r),delete:(...r)=>e.delete(...r),...n}}getProxySubject(){return this.subject}async create(e,n,r){return this.overrides.create(e,n,r)}async readOne(e,n){return this.overrides.readOne(e,n)}async readMany(e,n){return this.overrides.readMany(e,n)}async update(e,n,r){return this.overrides.update(e,n,r)}async delete(e,n){return this.overrides.delete(e,n)}},od=class{constructor(){Yt(this,"rootFilters"),Yt(this,"rootUpdates"),Yt(this,"attributeFilters"),Yt(this,"attributeUpdates"),Yt(this,"documentsIn",(e,n,r)=>r.includes(e)),Yt(this,"documentOverwrite",(e,n)=>{for(const r of Object.getOwnPropertyNames(e))delete e[r];Object.assign(e,n)}),Yt(this,"attributeEq",(e,n,r)=>Fm(e[n],r)),Yt(this,"attributeContains",(e,n,r)=>{Array.isArray(r)||(r=[r]);const s=e&&e[n];return Array.isArray(s)?!r.find(i=>!s.find(o=>this.filterValue(o,i))):!1}),Yt(this,"attributeOr",(e,n,r)=>!!r.find(s=>!!this.filterValue(e,{[n]:s}))),Yt(this,"attributeIn",(e,n,r)=>r.includes(e[n])),Yt(this,"attributeUpdate",(e,n,r)=>{if(Array.isArray(r)||!Lt(r)){e[n]=r;return}if(this.isOperation(r,this.attributeUpdates)){this.runOperation(r,this.attributeUpdates,e,n);return}if(!Lt(e[n])){e[n]=r;return}this.updateAttributes(e[n],r)}),Yt(this,"attributeUpdateItems",(e,n,r)=>{Array.isArray(r)||(r=[r]);for(const{$where:s,$update:i,$override:o,$unset:a}of r){s&&s.$in&&(s.$in=s.$in.map(c=>c.toString()));const l=this.requireArrayProperty("$updateItems",e,n),u=this.filterDocuments(l.reduce((c,d,f)=>({...c,[f]:Lt(d)?d:{}}),{}),s||{});i&&Object.keys(u).forEach(c=>{this.updateAttributes(u,{[c]:i}),l[parseInt(c)]=u[c]}),o&&Object.keys(u).forEach(c=>{l[parseInt(c)]=o}),a&&(e[n]=qm(l,Object.keys(u).map(parseInt)))}}),Yt(this,"attributePush",(e,n,r)=>{this.requireArrayProperty("$push",e,n).push(r)}),Yt(this,"attributeUnset",(e,n,r)=>{if(r===!0){delete e[n];return}const s=e[n];if(Lt(s)){r=Array.isArray(r)?r:[r];for(const i of r)delete s[i]}}),Yt(this,"attributeApply",(e,n,r)=>{for(const s of r)this.runOperation(s,this.attributeUpdates,e,n)}),Yt(this,"attributeOverwrite",(e,n,r)=>{e[n]=r}),this.rootFilters={$in:this.documentsIn},this.rootUpdates={$overwrite:this.documentOverwrite},this.attributeFilters={$eq:this.attributeEq,$contains:this.attributeContains,$or:this.attributeOr,$in:this.attributeIn},this.attributeUpdates={$update:this.attributeUpdate,$updateItems:this.attributeUpdateItems,$push:this.attributePush,$unset:this.attributeUnset,$apply:this.attributeApply,$overwrite:this.attributeOverwrite}}filterDocuments(e,n={}){return Object.entries(e).reduce((r,[s,i])=>(this.filterDocument(s,i,n)&&(r[s]=i),r),{})}updateAttributes(e,n){if(this.isOperation(n,{$unset:this.attributeUnset})){const r=n.$unset,s=Array.isArray(r)?r:[r];for(const i of s)this.attributeUnset(e,i,!0);return}if(this.isOperation(n,this.rootUpdates)){const[[r,s]]=Object.entries(n);this.rootUpdates[r](e,s);return}for(const[r,s]of Object.entries(n))this.attributeUpdate(e,r,s)}obtainDocumentId(e){return e??Ks()}filterDocument(e,n,r={}){r={...r};for(const[s,i]of Object.entries(this.rootFilters))if(s in r){if(!i(e,n,r[s]))return!1;delete r[s]}return this.filterValue(n,r)}filterValue(e,n={}){return Lt(n)?this.isOperation(n,this.attributeFilters)?this.runOperation(n,this.attributeFilters,{value:e},"value"):Lt(e)?!Object.entries(n).find(([r,s])=>!(this.isOperation(s,this.attributeFilters)?this.runOperation(s,this.attributeFilters,e,r):this.attributeEq(e,r,s))):!1:this.attributeEq({value:e},"value",n)}isOperation(e,n){if(!Lt(e))return!1;const[r,...s]=Object.keys(e);return!!(r&&s.length===0&&r in n)}runOperation(e,n,...r){const[s,i]=Object.entries(e)[0];return n[s](...r,i)}requireArrayProperty(e,n,r){if(!n||!Lt(n)||!Array.isArray(n[r]))throw new Error(`${e} operator can only be applied to array attributes`);return n[r]}},hc;function cu(t){for(;t&&Ok(t);)t=t.getProxySubject();return t}function Dk(){return hc}function ad(){return hc||Tt(ze,"Engine must be initialized before performing any operations. Learn more at https://soukai.js.org/guide/core-concepts/engines.html")}function Y_(t){if(!t){hc=void 0;return}hc=t}var Pk=Object.defineProperty,Mk=(t,e,n)=>e in t?Pk(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,st=(t,e,n)=>Mk(t,typeof e!="symbol"?e+"":e,n);let X_=class extends ze{constructor(e,n,r){super(`Model ${e}: Invalid attributes (${JSON.stringify(n)}).`,r),st(this,"modelName"),st(this,"attributes"),this.modelName=e,this.attributes=n}},yi=class extends ze{constructor(e,n){super(`Model ${e}: ${n}. Learn more at https://soukai.js.org/guide/core-concepts/models.html`),st(this,"modelName"),this.modelName=e}},Lk=class{constructor(e=null){st(this,"database"),st(this,"helper"),st(this,"lock"),st(this,"_metadata"),st(this,"_metadataConnection"),st(this,"_documentsConnection"),this.database=e?"soukai-"+e:"soukai",this.helper=new od,this.lock=zu(`idb-${this.database}`,()=>new Um)}getCollections(){return this.lock.run(()=>this.__getCollections())}async dropCollections(e){await this.lock.run(async()=>{await this.withMetadataTransaction("readwrite",n=>(e.forEach(r=>{var s;n.store.put({name:r,dropped:!0,updates:(((s=this._metadata)==null?void 0:s[r].updates)??1)+1})}),n.done)),this.closeConnections(),await this.getDocumentsConnection()})}async purgeDatabase(){await this.lock.run(async()=>{this.closeConnections(),await Promise.all([ov(`${this.database}-meta`,{blocked:()=>this.throwDatabaseBlockedError()}),ov(this.database,{blocked:()=>this.throwDatabaseBlockedError()})]),delete this._metadata})}async closeConnections(){this._metadataConnection&&this._metadataConnection.close(),this._documentsConnection&&this._documentsConnection.close(),delete this._metadata,delete this._metadataConnection,delete this._documentsConnection}create(e,n,r){return this.lock.run(async()=>{const s=this.helper.obtainDocumentId(r);if(await this.documentExists(e,s))throw new Hm(s);return await this.createDocument(e,s,n),s})}async readOne(e,n){return this.lock.run(async()=>{if(!await this.collectionExists(e))throw new zr(n,e);const r=await this.getDocument(e,n);if(!r)throw new zr(n,e);return r})}async readMany(e,n){return this.lock.run(async()=>{const r={};return(await this.__getCollections()).indexOf(e)===-1?r:(await this.withDocumentsTransaction(e,"readonly",s=>{const i=async o=>{if(o)return r[o.key]=o.value,o.continue().then(i)};return s.store.openCursor().then(i)}),this.helper.filterDocuments(r,n))})}async update(e,n,r){await this.lock.run(async()=>{const s=await this.getDocument(e,n);if(!s)throw new zr(n,e);this.helper.updateAttributes(s,r),await this.updateDocument(e,n,s)})}async delete(e,n){await this.lock.run(async()=>{if(!await this.documentExists(e,n))throw new zr(n,e);await this.deleteDocument(e,n)})}async __getCollections(){const e=await this.getMetadata();return Object.values(e).filter(({dropped:n})=>!n).map(({name:n})=>n.toString())}async collectionExists(e){return(await this.__getCollections()).indexOf(e)!==-1}async documentExists(e,n){return!!await this.getDocument(e,n)}async getDocument(e,n){try{return(await this.__getCollections()).indexOf(e)===-1?null:await this.withDocumentsTransaction(e,"readonly",r=>r.store.get(n))||null}catch{return null}}async createDocument(e,n,r){const s=await this.__getCollections();return s.indexOf(e)===-1&&(await this.createCollection(e),s.push(e)),this.withDocumentsTransaction(e,"readwrite",i=>(i.store.add(r,n),i.done))}async updateDocument(e,n,r){if((await this.__getCollections()).indexOf(e)!==-1)return this.withDocumentsTransaction(e,"readwrite",s=>(s.store.put(r,n),s.done))}async deleteDocument(e,n){if((await this.__getCollections()).indexOf(e)!==-1)return this.withDocumentsTransaction(e,"readwrite",r=>(r.store.delete(n),r.done))}async withMetadataTransaction(e,n){const r=this._metadataConnection=this._metadataConnection||await bh(`${this.database}-meta`,1,{upgrade(s){s.objectStoreNames.contains("collections")||s.createObjectStore("collections",{keyPath:"name"})},blocked:()=>this.throwDatabaseBlockedError()});return this.retryingOnTransactionInactive(()=>{const s=r.transaction("collections",e);return n(s)})}async withDocumentsTransaction(e,n,r){const s=await this.getDocumentsConnection();return this.retryingOnTransactionInactive(()=>{const i=s.transaction(e,n);return r(i)})}async getDocumentsConnection(){const e=await this.getMetadata(),n=Object.values(e).reduce((r,{updates:s})=>r+(s??1),0);return this._documentsConnection=this._documentsConnection||await bh(this.database,n,{upgrade(r){for(const{name:s,dropped:i}of Object.values(e))r.objectStoreNames.contains(s)&&!i||!r.objectStoreNames.contains(s)&&i||(i?r.deleteObjectStore(s):r.createObjectStore(s))},blocked:()=>this.throwDatabaseBlockedError()})}async getMetadata(){return this._metadata??(this._metadata=await this.initializeMetadata())}async initializeMetadata(){return(await this.withMetadataTransaction("readonly",e=>e.store.getAll())).reduce((e,n)=>(e[n.name]=n,e),{})}retryingOnTransactionInactive(e){try{return e()}catch(n){if(!(n instanceof Error)||!n.name.toLowerCase().includes("inactive")&&!n.message.toLowerCase().includes("inactive"))throw n;return e()}}async createCollection(e){await this.withMetadataTransaction("readwrite",n=>(n.store.add({name:e}),n.done)),delete this._metadata,this._documentsConnection&&(this._documentsConnection.close(),delete this._documentsConnection)}throwDatabaseBlockedError(){throw new ze("An attempt to open an IndexedDB connection has been blocked, remember to call IndexedDBEngine.closeConnections when necessary. Learn more at https://developer.mozilla.org/en-US/docs/Web/API/IDBOpenDBRequest/blocked_event")}},lr=class Sh{constructor(e){st(this,"value"),this.value=String(e)}static from(e){return e instanceof Sh?e:new Sh(e)}equals(e){return this.value===e.value}toString(){return this.value}};const Nk={},Fk={},Sf=new WeakMap;let Hu=new WeakMap;function mv(t){if(t==null)return Nk;switch(typeof t){case"string":return zu(`listeners-string-key-${t}`,()=>new String(t));case"number":return zu(`listeners-number-key-${t}`,()=>new Number(t));case"boolean":return zu(`listeners-boolean-key-${t}`,()=>new Boolean(t));case"object":return t;default:return Fk}}function jk(t,e,n){Hu.has(t)||Hu.set(t,{});const r=Hu.get(t),s=r[e]??(r[e]=[]);return s.push(n),()=>ro(s,n)}async function mc(...t){var e;const n="__attributeGetters"in t[0]?t[0]:t[0].static(),r="__attributeGetters"in t[0]?null:t[0],s=t[1],i=t[2],o=r??n,a=(e=Hu.get(n))==null?void 0:e[s],l=mv(s),u=mv(i),c=Sf.has(l)?Sf.get(l):Ye(new WeakMap,f=>Sf.set(l,f)),d=c.has(u)?c.get(u):Ye(new WeakSet,f=>c.set(u,f));!a||d.has(o)||(d.add(o),await Promise.all(a.map(f=>r?f(r,i):f(i))),d.delete(o))}const La=new WeakMap;function gv(t){const e=t.target,[n,r]=La.get(e)??[t.getTargetEngine(),0],s=()=>{const[o,a]=La.get(e);if(a>1){La.set(e,[o,a-1]);return}La.delete(e),e.setEngine(o)},i=o=>{const a=o();return a instanceof Promise?a.then(()=>Ye(a,()=>s())):Ye(a,()=>s())};return La.set(e,[n,r+1]),e.setEngine(t.engine),t.operation?i(t.operation):new Proxy(e,{get(o,a,l){const u=Reflect.get(o,a,l);return typeof u!="function"?(s(),u):(...c)=>i(()=>u.call(o,...c))}})}function yv(t,e){let n=t;for(;n;){if(n!==e){n=Object.getPrototypeOf(n);continue}return!0}return!1}let gc=class{constructor(e,n,r,s){st(this,"name"),st(this,"parent"),st(this,"relatedClass"),st(this,"foreignKeyName"),st(this,"localKeyName"),st(this,"enabled",!0),st(this,"deleteStrategy",null),st(this,"_related"),this.parent=e,this.relatedClass=n,this.foreignKeyName=r,this.localKeyName=s||n.primaryKey}get loaded(){return this.related!==void 0}get related(){return this._related}set related(e){const n=this._related;this._related=e,this.onRelatedUpdated(n,e)}static(){return this.constructor}enable(){this.enabled=!0}disable(){this.enabled=!1}resolve(){return this.load()}isEmpty(){return null}async getModels(){return this.loaded||await this.load(),this.getLoadedModels()}getLoadedModels(){return this.related?ur(this.related):[]}unload(){this.related=void 0}onDelete(e){return this.deleteStrategy=e,this}clone(e={}){const n=e.clones??new WeakMap,r=e.constructors??new WeakMap,s=Object.create(Object.getPrototypeOf(this));return s.name=this.name,s.parent=this.parent,s.foreignKeyName=this.foreignKeyName,s.localKeyName=this.localKeyName,s.deleteStrategy=this.deleteStrategy,s.enabled=this.enabled,s.relatedClass=r.get(this.relatedClass)??this.relatedClass,this.related===null?s.related=null:Array.isArray(this.related)?s.related=this.related.map(i=>i.clone({clones:n,constructors:r})):this.related&&(s.related=this.related.clone({clones:n,constructors:r})),s}initializeInverseRelations(e){for(const n of this.relatedClass.relations){const r=e.requireRelation(n);!r.enabled||!r.isInverseOf(this)||(r.setForeignAttributes(this.parent),r.addRelated(this.parent))}}clearInverseRelations(e){for(const n of this.relatedClass.relations){const r=e.requireRelation(n);!r.enabled||!r.isInverseOf(this)||(r.clearForeignAttributes(this.parent),r.removeRelated(this.parent))}}isInverseOf(e){const n=r=>e instanceof r;return this.static().inverseBelongsToRelationClasses.some(n)?yv(e.parent.static(),this.relatedClass)&&e.foreignKeyName===this.foreignKeyName&&e.localKeyName===this.localKeyName:this.static().inverseHasRelationClasses.some(n)?yv(e.parent.static(),this.relatedClass)&&this.foreignKeyName===e.foreignKeyName&&this.localKeyName===e.localKeyName:!1}onRelatedUpdated(e,n){}};st(gc,"inverseHasRelationClasses",[]),st(gc,"inverseBelongsToRelationClasses",[]);let _i=class extends gc{constructor(e,n,r,s){super(e,n,r||Zi(n.modelName+"_"+n.primaryKey+"s"),s)}get related(){return this._related}set related(e){const n=this.related;this._related=e,this.onRelatedUpdated(n,e)}attach(e={}){const n=e instanceof this.relatedClass?e:this.relatedClass.newInstance(e);return Ye(n,()=>{!this.assertLoaded("attach")||this.isRelated(n)||(this.addRelated(n),this.initializeInverseRelations(n),this.setForeignAttributes(n))})}async create(e={}){const n=this.attach(e);return await n.save(),n}addRelated(e){var n;(n=this.related)!=null&&n.includes(e)||(this.related=(this.related??[]).concat(e))}removeRelated(e){var n;(n=this.related)!=null&&n.includes(e)&&(this.related=Gr(this.related,e))}isRelated(e){var n;return!!((n=this.related)!=null&&n.includes(e))}onRelatedUpdated(e,n){}assertLoaded(e){if(this.loaded)return!0;if(!this.parent.exists())return this.related=[],!0;throw new ze(`The "${e}" method can't be called before loading the relationship`)}},Ho=class extends _i{isEmpty(){return this.parent.getAttribute(this.foreignKeyName).length===0}async load(){const e=this.parent.getAttribute(this.foreignKeyName);return this.related=this.isEmpty()?[]:this.localKeyName===this.relatedClass.primaryKey?await this.relatedClass.all({$in:e}):await this.relatedClass.all({[this.localKeyName]:{$or:[...e.map(n=>({$eq:n})),...e.map(n=>({$contains:n}))]}}),this.related}setForeignAttributes(e){const n=e.getAttribute(this.localKeyName);if(!n)return;const r=this.parent.getAttribute(this.foreignKeyName);r.includes(n)||this.parent.setAttribute(this.foreignKeyName,r.concat([n]))}clearForeignAttributes(e){const n=e.getAttribute(this.localKeyName);if(!n)return;const r=this.parent.getAttribute(this.foreignKeyName);r.includes(n)&&this.parent.setAttribute(this.foreignKeyName,Gr(r,n))}},ba=class extends gc{constructor(e,n,r,s){super(e,n,r||Zi(n.modelName+"_"+n.primaryKey),s)}get related(){return this._related}set related(e){const n=this.related;this._related=e,this.onRelatedUpdated(n,e)}attach(e={}){const n=e instanceof this.relatedClass?e:this.relatedClass.newInstance(e);return Ye(n,()=>{if(this.loaded&&this.related&&!this.isRelated(n))throw new ze(`The "attach" method can't be called because a related model already exists, use a hasMany relationship if you want to support multiple related models.`);this.addRelated(n),this.initializeInverseRelations(n),this.setForeignAttributes(n)})}addRelated(e){e!==this.related&&(this.related=e)}removeRelated(e){e===this.related&&(this.related=null)}isRelated(e){return e===this.related}onRelatedUpdated(e,n){}},ol=class extends ba{isEmpty(){return!this.parent.getAttribute(this.foreignKeyName)}async load(){const e=this.parent.getAttribute(this.foreignKeyName);return this.related=this.isEmpty()?null:this.localKeyName===this.relatedClass.primaryKey?await this.relatedClass.find(e):await this.relatedClass.first({[this.localKeyName]:e}),this.related}setForeignAttributes(e){const n=e.getAttribute(this.localKeyName);n&&this.parent.setAttribute(this.foreignKeyName,n)}clearForeignAttributes(e){e.getAttribute(this.localKeyName)===this.parent.getAttribute(this.foreignKeyName)&&this.parent.setAttribute(this.foreignKeyName,null)}},Ko=class extends _i{async load(){const e=this.parent.getAttribute(this.localKeyName);return this.related=await this.relatedClass.all({[this.foreignKeyName]:{$or:[{$eq:e},{$contains:e}]}}),this.related}setForeignAttributes(e){const n=this.parent.getAttribute(this.localKeyName);if(!n)return;const r=e.getAttribute(this.foreignKeyName);if(!Array.isArray(r)){e.setAttribute(this.foreignKeyName,n);return}r.includes(n)||e.setAttribute(this.foreignKeyName,r.concat([n]))}clearForeignAttributes(e){const n=this.parent.getAttribute(this.localKeyName);if(!n)return;const r=e.getAttribute(this.foreignKeyName);if(!Array.isArray(r)){e.getAttribute(this.foreignKeyName)===n&&e.setAttribute(this.foreignKeyName,null);return}r.includes(n)&&e.setAttribute(this.foreignKeyName,Gr(r,n))}},eo=class extends ba{async load(){const e=this.parent.getAttribute(this.localKeyName);return this.related=await this.relatedClass.first({[this.foreignKeyName]:{$or:[{$eq:e},{$contains:e}]}}),this.related}setForeignAttributes(e){const n=this.parent.getAttribute(this.localKeyName);if(!n)return;const r=e.getAttribute(this.foreignKeyName);if(!Array.isArray(r)){e.setAttribute(this.foreignKeyName,n);return}r.includes(n)||e.setAttribute(this.foreignKeyName,r.concat([n]))}clearForeignAttributes(e){const n=this.parent.getAttribute(this.localKeyName);if(!n)return;const r=e.getAttribute(this.foreignKeyName);if(!Array.isArray(r)){e.getAttribute(this.foreignKeyName)===n&&e.setAttribute(this.foreignKeyName,null);return}r.includes(n)&&e.setAttribute(this.foreignKeyName,Gr(r,n))}};const $e={Number:"number",String:"string",Boolean:"boolean",Array:"array",Object:"object",Date:"date",Key:"key",Any:"any"},vv=Object.values($e);function Eh(t,e,n,r=!1){let s={};if(typeof n=="string"&&vv.indexOf(n)!==-1)s.type=n;else if(typeof n=="object")s=n;else throw new yi(t,`Invalid field definition ${e}`);if(typeof s.type>"u")s={type:$e.Object,fields:s};else if(vv.indexOf(s.type)===-1)throw new yi(t,`Invalid field definition ${e}`);switch(r||(s.required=!!s.required),s.type){case $e.Object:if(typeof s.fields>"u")throw new yi(t,`Field definition of type object requires fields attribute ${e}`);for(const i in s.fields)pc(s.fields,i)&&(s.fields[i]=Eh(t,i,s.fields[i]));break;case $e.Array:if(typeof s.items>"u")throw new yi(t,`Field definition of type array requires items attribute. Field: '${e}'`);s.items=Eh(t,"items",s.items,!0);break}return s}function Q_(t){return t.type===$e.Array}function Z_(t,e){for(const[n,r]of Object.entries(e)){if(!(n in t))switch(r.type){case $e.Object:t[n]={};break;case $e.Array:t[n]=[];break;default:t[n]=void 0;break}if(r.type===$e.Object){const s=t[n];if(!Lt(s))throw new ze(`Invalid value for field ${n}`);t[n]=Z_(s,r.fields)}}return t}function Ah(t,e){for(const[n,r]of Object.entries(e)){if(r.required&&(!(n in t)||_h(t[n])))throw new ze(`The ${n} attribute is required.`);if(n in t&&!_h(t[n])&&r.type===$e.Object){const s=t[n];if(!Lt(s))throw new ze(`Invalid value for field ${n}`);Ah(s,r.fields)}}}function Ku(t,e){t=cs(t);for(const n in t){const r=e[n];if(typeof t[n]>"u")delete t[n];else if(n in e&&r.type===$e.Object){const s=Ku(t[n],r.fields);T_(s)?delete t[n]:t[n]=s}}return t}const Rt={CreatedAt:"createdAt",UpdatedAt:"updatedAt"},bv=Object.values(Rt);function qk(){eo.inverseBelongsToRelationClasses.length>0||(eo.inverseBelongsToRelationClasses=[ol,Ho],Ko.inverseBelongsToRelationClasses=[ol,Ho],ol.inverseHasRelationClasses=[eo,Ko],Ho.inverseHasRelationClasses=[eo,Ko])}const wv=new WeakSet,Ef=new WeakMap,hn=class Wu{static boot(e){qk();const n={};this.bootedModels.set(this,!0),this.modelName=this.bootModelName(e),this.collection=this.bootCollection(),this.timestamps=this.bootTimestamps(this.timestamps,n);const{fields:r,fieldAliases:s}=this.bootFields(this.fields,this.primaryKey,this.timestamps,n);this.fields=r,this.fieldAliases=s;const{classFields:i,relations:o,attributeGetters:a,attributeSetters:l}=this.bootClassDefinitions();this.classFields=i,this.relations=o,this.__attributeGetters=a,this.__attributeSetters=l;const u=this.bootHooks(this.hooks);this.hooks=u}static ensureBooted(){this.bootedModels.has(this)||this.boot()}static async updateSchema(e){await this.performSchemaUpdate(e),await mc(this,"schema-updated",e)}static create(e={}){return new this(e).save()}static createFromEngineDocument(e,n){return this.instance().createFromEngineDocument(e,n)}static createManyFromEngineDocuments(e){return this.instance().createManyFromEngineDocuments(e)}static async findOrFail(e){return await this.find(e)??Tt(`Failed getting required model ${e}`)}static async find(e){this.ensureBooted();try{const n=await this.requireEngine().readOne(this.collection,this.instance().serializeKey(e));return await this.createFromEngineDocument(e,n)}catch{return null}}static async all(e){this.ensureBooted();const n=await this.requireEngine().readMany(this.collection,e);return await this.createManyFromEngineDocuments(n)}static async first(e){const[n]=await this.all(e);return n||null}static newInstance(...e){return this.instance().newInstance(...e)}static on(e,n){return jk(this,e,n)}static instance(){return this.instances.has(this)||this.instances.set(this,new this),this.instances.get(this)}static hasAutomaticTimestamp(e){return this.timestamps.indexOf(e)!==-1}static hasAutomaticTimestamps(){return this.timestamps.length>0}static getEngine(){return this.engines.get(this)??Dk()}static getFinalEngine(){const e=this.getEngine();return e&&cu(e)}static requireEngine(){return this.engines.get(this)??ad()}static requireFinalEngine(){return cu(this.requireEngine())}static setEngine(e){if(!e){this.engines.delete(this);return}this.engines.set(this,e)}static withEngine(e,n){return gv({target:this,getTargetEngine:()=>this.engines.get(this),engine:e,operation:n})}static async withCollection(e,n){return this.collection===e?n():this.exclusive(async()=>{const r=this.collection;this.collection=e||r;try{return await n()}finally{this.collection=r}})}static async withoutTimestamps(e){return this.ignoringTimestamps.set(this,!0),Ye(await e(),()=>this.ignoringTimestamps.delete(this))}static async exclusive(e){return Ef.has(this)||Ef.set(this,new Um),$k(Ef.get(this)).run(async()=>e())}static pureInstance(){return this.pureInstances.has(this)||this.pureInstances.set(this,new this({__pureInstance:!0})),this.pureInstances.get(this)}static bootModelName(e){const n=Object.getOwnPropertyDescriptor(this,"modelName");return(n==null?void 0:n.value)??e??this.name}static bootCollection(){let e=this;for(;e!==Wu&&(!e.hasOwnProperty("collection")||wv.has(e));)e=Object.getPrototypeOf(e);return e===Wu&&wv.add(this),e.collection??this.pureInstance().getDefaultCollection()}static bootTimestamps(e,n){if(typeof e!="boolean"&&typeof e<"u"&&!Array.isArray(e))throw new yi(this.modelName,"Invalid timestamps definition");if(e===!1)return[];Array.isArray(e)||(e=bv);const r=e.find(s=>!bv.includes(s));if(r)throw new yi(this.modelName,`Invalid timestamp field defined (${r})`);for(const s of e)n[s]={type:$e.Date,required:!1};return e}static bootFields(e,n,r,s){if(typeof e>"u")return s[n]={type:$e.Key,required:!1},{fields:s,fieldAliases:{}};const i={};for(const[o,a]of Object.entries(e)){if(!pc(e,o))continue;const l=s[o]=Eh(this.modelName,o,a);if(l.alias&&(i[o]=l.alias,i[l.alias]=o),r.includes(o)&&(l.type!==$e.Date||l.required))throw new yi(this.modelName,`Field ${o} definition must be type Date and not required because it is used an automatic timestamp. Learn more at https://soukai.js.org/guide/core-concepts/models.html#automatic-timestamps`)}return n in s||(s[n]={type:$e.Key,required:!1}),{fields:s,fieldAliases:i}}static bootClassDefinitions(){const e=this.pureInstance(),n=["_engine","_recentlyDeletedPrimaryKey"],r=Object.getOwnPropertyNames(e).concat(n),s=[],i=new Map,o=new Map;let a=Object.getPrototypeOf(e);for(;a!==Wu.prototype;){a.constructor.classFields&&r.push(...a.constructor.classFields);for(const[l,u]of Object.entries(Object.getOwnPropertyDescriptors(a))){const c=l;typeof u.value=="function"&&(c.endsWith("Relationship")?s.push(c.slice(0,-12)):c.match(/get.+Attribute/)?i.set(Zi(c.slice(3,-9)),e[c]):c.match(/set.+Attribute/)&&o.set(Zi(c.slice(3,-9)),e[c]))}a=Object.getPrototypeOf(a)}return{classFields:Ur(r),relations:Ur(s),attributeGetters:i,attributeSetters:o}}static bootHooks(e){return e??{}}static async performSchemaUpdate(e){const n=e.primaryKey??"id",r={},s=this.bootTimestamps(e.timestamps,r),i=this.bootHooks(e.hooks),{fields:o,fieldAliases:a}=this.bootFields(e.fields,n,s,r);this.primaryKey=n,this.timestamps=s,this.hooks=i,this.fields=o,this.fieldAliases=a}constructor(e={},n){var r;if("__pureInstance"in e)return;this.static().ensureBooted(),this.initializeProxy();const s=arguments[1]??!1;return this.initialize(e,s),(r=this.static("hooks").afterInitialize)==null||r.call(this._proxy),this._proxy}static(e){const n=this.constructor;return e?n[e]:n}newInstance(...e){const n=this.constructor;return new n(...e)}async fresh(){const e=this.getPrimaryKey(),n=e?await this.static().find(e):null;if(!n)throw new ze(`Couldn't get fresh instance for ${this.static("modelName")} with id '${e}'`);return n}update(e={}){e=this.castAttributes(e,this.static("fields"));for(const n in e)this.setAttribute(n,e[n]);return this.save()}hasRelation(e){return this.static("relations").indexOf(e)!==-1}getRelation(e){return this._relations[e]||null}requireRelation(e){return this._relations[e]??Tt(ze,`Attempting to use undefined ${e} relation.`)}getEngine(){return this._engine??this.static().getEngine()}getFinalEngine(){const e=this.getEngine();return e&&cu(e)}requireEngine(){return this._engine??this.static().requireEngine()}requireFinalEngine(){return cu(this.requireEngine())}getDefaultCollection(){return this.static("modelName").toLowerCase()+"s"}async loadRelation(e){const n=this.requireRelation(e),r=await n.relatedClass.withEngine(this.requireEngine(),()=>n.load());return this.emit("relation-loaded",n),r}async loadRelationIfUnloaded(e){const n=this.requireRelation(e);return n.loaded?n.getLoadedModels():this.loadRelation(e)}unloadRelation(e){this.requireRelation(e).unload()}getRelationModel(e){var n;const r=this.requireRelation(e);return r instanceof _i?(console.warn(`You're getting a single model from the multi-model '${e}' relation in the '${this.static("modelName")}' model.`),((n=r.related)==null?void 0:n[0])??null):r.related??null}getRelationModels(e){const n=this.requireRelation(e);return n instanceof ba?n.related?[n.related]:null:n.related??null}setRelationModel(e,n){const r=this.requireRelation(e);if(r instanceof _i){console.warn(`You're setting a single model for the multi-model '${e}' relation in the '${this.static("modelName")}' model.`),r.related=[n];return}r.related=n}setRelationModels(e,n){const r=this.requireRelation(e),s=()=>{if(n===null||r instanceof _i)return n;if(n.length>0)throw new ze("Can't set multiple models for SingleModelRelation, use setRelationModel instead");return n[0]??null};r.related=s()}isRelationLoaded(e){return this.requireRelation(e).loaded}hasAttribute(e){const n=e.split(".");let r=Ku(this._attributes,this.static("fields"));for(const s of n){if(!Lt(r)||!(s in r))return!1;r=r[s]}return r!==void 0}setAttribute(e,n){const r=this.static().fieldAliases[e],s=this.getAttribute(e);this.hasAttributeSetter(e)?this.callAttributeSetter(e,n):this.setAttributeValue(e,n),r&&this.attributeValueChanged(this.getAttribute(r),n)&&this.setAttribute(r,n),this.attributeValueChanged(s,n)&&this.emit("modified",e)}setAttributeValue(e,n){this._attributes[e]=n=this.castAttribute(n,{definition:this.static("fields")[e]}),this.markAttributeDirty(e,this._originalAttributes[e],n)?this._dirtyAttributes[e]=n:delete this._dirtyAttributes[e]}hasAttributeSetter(e){var n;return this.static("__attributeSetters").has(e)||!!((n=this.static("fields")[e])!=null&&n.set)}callAttributeSetter(e,n){var r;const s=this.static("__attributeSetters").get(e)??((r=this.static("fields")[e])==null?void 0:r.set);return s==null?void 0:s.call(this,n)}getOriginalAttribute(e){return this._originalAttributes[e]}getDeletedPrimaryKey(){return this._recentlyDeletedPrimaryKey??null}setOriginalAttribute(e,n){n=this.castAttribute(n,{definition:this.static("fields")[e]}),this._originalAttributes[e]=n,this._attributes[e]=n,delete this._dirtyAttributes[e]}setAttributes(e){for(const[n,r]of Object.entries(e))this.setAttribute(n,r)}getMalformedDocumentAttributes(){return this._malformedDocumentAttributes}setMalformedDocumentAttributes(e){this._malformedDocumentAttributes=e}setEngine(e){if(!e){delete this._engine;return}this._engine=e}withEngine(e,n){return gv({target:this,getTargetEngine:()=>this._engine,operation:n&&(()=>n(this)),engine:e})}async withoutTimestamps(e){return this.static().ignoringTimestamps.set(this,!0),Ye(await e(),()=>this.static().ignoringTimestamps.delete(this))}getAttribute(e,n=!1){return this.hasAttributeGetter(e)?this.callAttributeGetter(e):this.getAttributeValue(e,n)}getAttributeValue(e,n=!1){const r=e.split(".");let s=this.getAttributes(n);for(;r.length>0;){const i=s[r.shift()];if(!Lt(i))return i;s=i}return s}getAttributes(e=!1){return e?cs(this._attributes):Ku(this._attributes,this.static("fields"))}hasAttributeGetter(e){var n;return this.static("__attributeGetters").has(e)||!!((n=this.static("fields")[e])!=null&&n.get)}callAttributeGetter(e){var n;const r=this.static("__attributeGetters").get(e)??((n=this.static("fields")[e])==null?void 0:n.get);return r==null?void 0:r.call(this)}unsetAttribute(e){pc(this._attributes,e)&&(e in this.static("fields")?this._attributes[e]=void 0:delete this._attributes[e],this.markAttributeDirty(e,this._originalAttributes[e],void 0)?this._dirtyAttributes[e]=void 0:delete this._dirtyAttributes[e])}hasIncompleteAttributes(){try{return Ah(this._attributes,this.static("fields")),!1}catch{return!0}}is(e){return this.getPrimaryKey()===e.getPrimaryKey()}isDirty(e){return e?e in this._dirtyAttributes:Object.values(this._dirtyAttributes).length>0}cleanDirty(){this._originalAttributes=cs(this._attributes),this._dirtyAttributes={},this._exists=!0}reset(){delete this._attributes[this.static("primaryKey")],this._exists=!1,this._dirtyAttributes=cs(this._attributes)}getPrimaryKey(){return this._attributes[this.static("primaryKey")]??null}getSerializedPrimaryKey(){const e=this.getPrimaryKey();return e?this.serializeKey(e):null}async delete(){return this._exists?(await this.performDelete(),await this.emit("deleted"),this):this}async save(){var e,n;Ah(this._attributes,this.static("fields"));const r=this.exists();return r&&!this.isDirty()?this:(await((e=this.static("hooks").beforeSave)==null?void 0:e.call(this)),await this.beforeSave(),await this.performSave(),await((n=this.static("hooks").afterSave)==null?void 0:n.call(this)),await this.afterSave(),await this.emit(r?"updated":"created"),this)}fixMalformedAttributes(){this.performMalformedAttributeFixes(),this._malformedDocumentAttributes={}}touch(){this.setAttribute(Rt.UpdatedAt,new Date)}setExists(e){this._exists=e}exists(){return this._exists}wasRecentlyCreated(){return this._wasRecentlyCreated}wasRecentlyDeleted(){return!!this._recentlyDeletedPrimaryKey}clone(e={}){const n=e.clones??new WeakMap;if(n.has(this))return n.get(this);const r=e.constructors,s=Array.isArray(r)?Ye(new WeakMap,a=>{r.forEach(([l,u])=>a.set(l,u))}):r??new WeakMap,i=s.get(this.static())??this.static(),o=new i(this.getAttributes());n.set(this,o);for(const[a,l]of Object.entries(this._relations))o._relations[a]=Ye(l.clone({clones:n,constructors:s}),u=>u.parent=o);return e.clean&&o.cleanDirty(),o}initialize(e,n){this._exists=n,this._wasRecentlyCreated=!1,this.initializeAttributes(e,n),this.initializeRelations()}initializeProxy(){this._proxy=new Proxy(this,{get(e,n,r){if(typeof n!="string"||n in e||e.static("classFields").indexOf(n)!==-1)return Reflect.get(e,n,r);if(e.hasRelation(n))return e._proxy.isRelationLoaded(n)?e._proxy.requireRelation(n).related:void 0;if(n.startsWith("related")){const s=Zi(n.substr(7));if(e._proxy.hasRelation(s))return e._relations[s]}return e._proxy.getAttribute(n)},set(e,n,r,s){return typeof n!="string"||n in e||e.static("classFields").indexOf(n)!==-1?Reflect.set(e,n,r,s):e._proxy.hasRelation(n)?(e._proxy.requireRelation(n).related=r,!0):(e._proxy.setAttribute(n,r),!0)},deleteProperty(e,n){return typeof n!="string"||n in e?Reflect.deleteProperty(e,n):e._proxy.hasRelation(n)?(e._proxy.unloadRelation(n),!0):!(n in e._attributes)||e.static("classFields").indexOf(n)!==-1?Reflect.deleteProperty(e,n):(e._proxy.unsetAttribute(n),!0)}})}initializeAttributes(e,n){try{const r=this.static("fields");this._malformedDocumentAttributes={},this._attributes=cs(e),this._attributes=this.castAttributes(Z_(this._attributes,r),r,this._malformedDocumentAttributes);for(const[s,i]of Object.entries(this.static().fieldAliases)){const o=this._attributes[s]??this._attributes[i];this._attributes[s]=o,this._attributes[i]=o}this._originalAttributes=n?cs(this._attributes):{},this._dirtyAttributes=n?{}:cs(this._attributes),delete this._malformedDocumentAttributes[this.static("primaryKey")]}catch(r){throw new X_(this.static("modelName"),e,{cause:r})}}initializeRelations(){this._relations=this.static("relations").reduce((e,n)=>{var r;const s=this._proxy,i=(r=s[Zi(n)+"Relationship"])==null?void 0:r.call(s);return i.name=n,e[n]=i,e},{})}async createFromEngineDocument(e,n){const r=await this.parseEngineDocumentAttributes(e,n);r[this.static("primaryKey")]=e;for(const[s,i]of Object.entries(this.static("fields")))i.deserialize&&(r[s]=i.deserialize(r[s]));return this.newInstance(r,!0)}async createManyFromEngineDocuments(e){return Promise.all(Object.entries(e).map(([n,r])=>this.createFromEngineDocument(this.parseKey(n),r)))}async beforeSave(){const e=new Date,n=this.static().ignoringTimestamps;if(!n.has(this)&&!n.has(this.static())&&(this.static().hasAutomaticTimestamp(Rt.CreatedAt)&&this.setAttribute(Rt.CreatedAt,this.getAttribute(Rt.CreatedAt)??e),this.static().hasAutomaticTimestamp(Rt.UpdatedAt))){const r=this.isDirty(Rt.UpdatedAt)?this.getAttribute(Rt.UpdatedAt):e;this.setAttribute(Rt.UpdatedAt,r??e)}}async performSave(){const e=this.exists(),n=await this.syncDirty();this._wasRecentlyCreated=this._wasRecentlyCreated||!e,this._attributes[this.static("primaryKey")]=this.parseKey(n)}async afterSave(){this.cleanDirty(),await this.loadEmptyRelations()}async performDelete(){const e=this.getPrimaryKey(),n=await this.getCascadeModels();await this.deleteModelsFromEngine(n),n.forEach(r=>r.reset()),this._recentlyDeletedPrimaryKey=e}performMalformedAttributeFixes(){const e=Object.keys(this._malformedDocumentAttributes),n=(r,s)=>s.type===$e.Array?e.some(i=>i.startsWith(`${r}.`)):r in this._malformedDocumentAttributes;for(const[r,s]of Object.entries(this.static("fields")))n(r,s)&&(this._dirtyAttributes[r]=this._attributes[r])}async emit(...e){return mc(this,...e)}async syncDirty(){if(!this.exists())return this.requireEngine().create(this.static("collection"),this.toEngineDocument(),this.getSerializedPrimaryKey()||void 0);const e=this.getDirtyEngineDocumentUpdates(),n=this.getSerializedPrimaryKey();return await this.requireEngine().update(this.static("collection"),n,e),n}async getCascadeModels(){let e=Vu("cascade-models",this);if(!e){const n=new Set;await this.populateCascadeModels(n),e=Array.from(n).filter(r=>r.exists()),Bm("cascade-models",this,e)}return e}async deleteModelsFromEngine(e){const n=e.map(r=>[r.static("collection"),r.getSerializedPrimaryKey()]);await Promise.all(n.map(([r,s])=>this.requireEngine().delete(r,s)))}resetEngineData(){this.reset()}hasOne(e,n,r){return new eo(this,e,n,r)}belongsToOne(e,n,r){return new ol(this,e,n,r)}hasMany(e,n,r){return new Ko(this,e,n,r)}belongsToMany(e,n,r){return new Ho(this,e,n,r)}async loadEmptyRelations(){const e=this.wasRecentlyCreated();for(const n of Object.values(this._relations))if(!(!n.enabled||n.loaded)){if(e&&n instanceof Ko){n.related=[];continue}if(e&&n instanceof eo){n.related=null;continue}n.isEmpty()&&await n.load()}}attributeValueChanged(e,n){return e instanceof lr?ir(e)!==ir(n):!Fm(e,n)}markAttributeDirty(e,n,r){return this.attributeValueChanged(n,r)}castAttributes(e,n,r,s=""){const i={};for(const o in e)i[o]=this.castAttribute(e[o],{field:s+o,malformedAttributes:r,definition:n[o]});return i}castAttribute(e,{field:n,definition:r,malformedAttributes:s}={}){if(_h(e))return e;if(r!=null&&r.cast)return r.cast(e);if(typeof r>"u")switch(typeof e){case"object":return Array.isArray(e)?e.map((i,o)=>this.castAttribute(i,{field:n&&`${n}.${o}`,malformedAttributes:s})):e instanceof Date||e instanceof lr?e:ir(e);case"symbol":case"function":case"undefined":return;default:return e}switch(r.type){case $e.Date:if(!["string","number"].includes(typeof e)&&!(e instanceof Date))throw new ze(`Invalid Date value (${e}) found in ${this.static("modelName")} ${this.getPrimaryKey()}.`);return new Date(e);case $e.Object:if(!Lt(e))throw new ze(`Invalid Object value (${e}) found in ${this.static("modelName")} ${this.getPrimaryKey()}.`);return this.castAttributes(e,r.fields,s,n&&`${n}.`);case $e.Array:if(!Array.isArray(e))throw new ze(`Invalid Array value (${e}) found in ${this.static("modelName")} ${this.getPrimaryKey()}.`);return e.map((i,o)=>this.castAttribute(i,{field:n&&`${n}.${o}`,definition:r.items,malformedAttributes:s}));case $e.Boolean:return!!e;case $e.Number:{const i=parseFloat(e);if(isNaN(i))throw new ze(`Invalid Number value (${e}) found in ${this.static("modelName")} ${this.getPrimaryKey()}.`);return i}case $e.String:return ir(e);case $e.Key:{if(e instanceof lr)return ir(e);if(n&&s){const i=s[n]??[];s[n]=i.concat(["malformed-key"])}return e}default:return e}}toEngineDocument(){const e=this.static("fields"),n=Ku(this._attributes,e);for(const[r,s]of Object.entries(e))s.serialize&&(n[r]=s.serialize(n[r]));return n}getDirtyEngineDocumentUpdates(){const e=cs(this._dirtyAttributes);for(const n in e)e[n]===void 0&&(e[n]={$unset:!0});return e}async populateCascadeModels(e){if(!e.has(this)){e.add(this);for(const n of Object.values(this._relations))!n.enabled||n.deleteStrategy!=="cascade"||(await n.getModels()).forEach(r=>r.populateCascadeModels(e))}}async parseEngineDocumentAttributes(e,n){return{...n}}serializeKey(e){return ir(e)}parseKey(e){return e}};st(hn,"collection"),st(hn,"primaryKey","id"),st(hn,"timestamps"),st(hn,"fields"),st(hn,"modelName"),st(hn,"classFields",[]),st(hn,"relations",[]),st(hn,"hooks",{}),st(hn,"__attributeGetters",new Map),st(hn,"__attributeSetters",new Map),st(hn,"instances",new WeakMap),st(hn,"pureInstances",new WeakMap),st(hn,"bootedModels",new WeakMap),st(hn,"engines",new WeakMap),st(hn,"ignoringTimestamps",new WeakMap),st(hn,"fieldAliases",{});let to=hn;function Uk(t,e){const n=e?t:to;return Ye(class extends n{},r=>{Object.assign(r,e??t)})}const Km=new Map;function e1(){return new Map(Km)}function en(t){return Km.get(t)??Tt(ze,`Could not find Model with name '${t}', are you sure it's booted?`)}function Wm(t){for(const[e,n]of Object.entries(t))n.boot(e),Km.set(e,n)}function Bk(t){let e=Object.getPrototypeOf(t);for(;e;){if(e!==to){e=Object.getPrototypeOf(e);continue}return!0}return!1}function zk(t,e=[".schema",".test"]){const n={};for(const[r,s]of Object.entries(t)){const i=(r.match(/^(.*\/)?(.+)\.(j|t)s$/)||[])[2];if(typeof i>"u"||e.some(a=>i.endsWith(a)))continue;const o=s.default??s[Object.keys(s)[0]];!o||!Bk(o)||(n[i]=o)}return n}function Vk(t,e=[".schema"]){const n=zk(t,e);Wm(n)}var _v=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Hk(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Kk(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var Af={},Cf,xv;function Gm(){return xv||(xv=1,Cf=class t1{constructor(e,n=new Map,r=0){this.prefix=e,this._existing=n,this.counter=r}clone(){const{prefix:e,_existing:n,counter:r}=this;return new t1(e,new Map(n),r)}getId(e){const n=e&&this._existing.get(e);if(n)return n;const r=this.prefix+this.counter;return this.counter++,e&&this._existing.set(e,r),r}hasId(e){return this._existing.has(e)}getOldIds(){return[...this._existing.keys()]}}),Cf}var $f={},Sv;function Wk(){return Sv||(Sv=1,(function(t,e){if(t.setImmediate)return;var n=1,r={},s=!1,i=t.document,o;function a(A){typeof A!="function"&&(A=new Function(""+A));for(var E=new Array(arguments.length-1),m=0;m<E.length;m++)E[m]=arguments[m+1];var v={callback:A,args:E};return r[n]=v,o(n),n++}function l(A){delete r[A]}function u(A){var E=A.callback,m=A.args;switch(m.length){case 0:E();break;case 1:E(m[0]);break;case 2:E(m[0],m[1]);break;case 3:E(m[0],m[1],m[2]);break;default:E.apply(e,m);break}}function c(A){if(s)setTimeout(c,0,A);else{var E=r[A];if(E){s=!0;try{u(E)}finally{l(A),s=!1}}}}function d(){o=function(A){process.nextTick(function(){c(A)})}}function f(){if(t.postMessage&&!t.importScripts){var A=!0,E=t.onmessage;return t.onmessage=function(){A=!1},t.postMessage("","*"),t.onmessage=E,A}}function p(){var A="setImmediate$"+Math.random()+"$",E=function(m){m.source===t&&typeof m.data=="string"&&m.data.indexOf(A)===0&&c(+m.data.slice(A.length))};t.addEventListener?t.addEventListener("message",E,!1):t.attachEvent("onmessage",E),o=function(m){t.postMessage(A+m,"*")}}function h(){var A=new MessageChannel;A.port1.onmessage=function(E){var m=E.data;c(m)},o=function(E){A.port2.postMessage(E)}}function g(){var A=i.documentElement;o=function(E){var m=i.createElement("script");m.onreadystatechange=function(){c(E),m.onreadystatechange=null,A.removeChild(m),m=null},A.appendChild(m)}}function w(){o=function(A){setTimeout(c,0,A)}}var x=Object.getPrototypeOf&&Object.getPrototypeOf(t);x=x&&x.setTimeout?x:t,{}.toString.call(t.process)==="[object process]"?d():f()?p():t.MessageChannel?h():i&&"onreadystatechange"in i.createElement("script")?g():w(),x.setImmediate=a,x.clearImmediate=l})(typeof self>"u"?typeof _v>"u"?$f:_v:self)),$f}/*!
 * Copyright (c) 2016-2022 Digital Bazaar, Inc. All rights reserved.
 */var kf,Ev;function ld(){if(Ev)return kf;Ev=1,Wk();const t=self.crypto||self.msCrypto;return kf=class{constructor(n){if(!(t&&t.subtle))throw new Error("crypto.subtle not found.");if(n==="sha256")this.algorithm={name:"SHA-256"};else if(n==="sha1")this.algorithm={name:"SHA-1"};else throw new Error(`Unsupported algorithm "${n}".`);this._content=""}update(n){this._content+=n}async digest(){const n=new TextEncoder().encode(this._content),r=new Uint8Array(await t.subtle.digest(this.algorithm,n));let s="";for(let i=0;i<r.length;++i)s+=r[i].toString(16).padStart(2,"0");return s}},kf}/*!
 * Copyright (c) 2016-2022 Digital Bazaar, Inc. All rights reserved.
 */var If,Av;function n1(){return Av||(Av=1,If=class{constructor(e){this.current=e.sort(),this.done=!1,this.dir=new Map;for(let n=0;n<e.length;++n)this.dir.set(e[n],!0)}hasNext(){return!this.done}next(){const{current:e,dir:n}=this,r=e.slice();let s=null,i=0;const o=e.length;for(let a=0;a<o;++a){const l=e[a],u=n.get(l);(s===null||l>s)&&(u&&a>0&&l>e[a-1]||!u&&a<o-1&&l>e[a+1])&&(s=l,i=a)}if(s===null)this.done=!0;else{const a=n.get(s)?i-1:i+1;e[i]=e[a],e[a]=s;for(const l of e)l>s&&n.set(l,!n.get(l))}return r}}),If}/*!
 * Copyright (c) 2016-2022 Digital Bazaar, Inc. All rights reserved.
 */var Rf,Cv;function Jm(){if(Cv)return Rf;Cv=1;const e="http://www.w3.org/1999/02/22-rdf-syntax-ns#"+"langString",n="http://www.w3.org/2001/XMLSchema#string",r="NamedNode",s="BlankNode",i="Literal",o="DefaultGraph",a={};(()=>{const p="(?:<([^:]+:[^>]*)>)",g="A-Za-zÀ-ÖØ-öø-˿Ͱ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�"+"_",w=g+"0-9-·̀-ͯ‿-⁀",A="(_:(?:["+g+"0-9])(?:(?:["+w+".])*(?:["+w+"]))?)",E='"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"',m="(?:\\^\\^"+p+")",_="(?:"+E+"(?:"+m+"|"+"(?:@([a-zA-Z]+(?:-[a-zA-Z0-9]+)*))"+")?)",C="[ \\t]+",$="[ \\t]*",k="(?:"+p+"|"+A+")"+C,D=p+C,G="(?:"+p+"|"+A+"|"+_+")"+$,J="(?:\\.|(?:(?:"+p+"|"+A+")"+$+"\\.))";a.eoln=/(?:\r\n)|(?:\n)|(?:\r)/g,a.empty=new RegExp("^"+$+"$"),a.quad=new RegExp("^"+$+k+D+G+J+$+"$")})(),Rf=class Gu{static parse(h){const g=[],w={},x=h.split(a.eoln);let A=0;for(const E of x){if(A++,a.empty.test(E))continue;const m=E.match(a.quad);if(m===null)throw new Error("N-Quads parse error on line "+A+".");const v={subject:null,predicate:null,object:null,graph:null};if(m[1]!==void 0?v.subject={termType:r,value:m[1]}:v.subject={termType:s,value:m[2]},v.predicate={termType:r,value:m[3]},m[4]!==void 0?v.object={termType:r,value:m[4]}:m[5]!==void 0?v.object={termType:s,value:m[5]}:(v.object={termType:i,value:void 0,datatype:{termType:r}},m[7]!==void 0?v.object.datatype.value=m[7]:m[8]!==void 0?(v.object.datatype.value=e,v.object.language=m[8]):v.object.datatype.value=n,v.object.value=f(m[6])),m[9]!==void 0?v.graph={termType:r,value:m[9]}:m[10]!==void 0?v.graph={termType:s,value:m[10]}:v.graph={termType:o,value:""},!(v.graph.value in w))w[v.graph.value]=[v],g.push(v);else{let _=!0;const C=w[v.graph.value];for(const $ of C)if(l($,v)){_=!1;break}_&&(C.push(v),g.push(v))}}return g}static serialize(h){Array.isArray(h)||(h=Gu.legacyDatasetToQuads(h));const g=[];for(const w of h)g.push(Gu.serializeQuad(w));return g.sort().join("")}static serializeQuadComponents(h,g,w,x){let A="";return h.termType===r?A+=`<${h.value}>`:A+=`${h.value}`,A+=` <${g.value}> `,w.termType===r?A+=`<${w.value}>`:w.termType===s?A+=w.value:(A+=`"${c(w.value)}"`,w.datatype.value===e?w.language&&(A+=`@${w.language}`):w.datatype.value!==n&&(A+=`^^<${w.datatype.value}>`)),x.termType===r?A+=` <${x.value}>`:x.termType===s&&(A+=` ${x.value}`),A+=` .
`,A}static serializeQuad(h){return Gu.serializeQuadComponents(h.subject,h.predicate,h.object,h.graph)}static legacyDatasetToQuads(h){const g=[],w={"blank node":s,IRI:r,literal:i};for(const x in h)h[x].forEach(E=>{const m={};for(const v in E){const _=E[v],C={termType:w[_.type],value:_.value};C.termType===i&&(C.datatype={termType:r},"datatype"in _&&(C.datatype.value=_.datatype),"language"in _?("datatype"in _||(C.datatype.value=e),C.language=_.language):"datatype"in _||(C.datatype.value=n)),m[v]=C}x==="@default"?m.graph={termType:o,value:""}:m.graph={termType:x.startsWith("_:")?s:r,value:x},g.push(m)});return g}};function l(p,h){return!(p.subject.termType===h.subject.termType&&p.object.termType===h.object.termType)||!(p.subject.value===h.subject.value&&p.predicate.value===h.predicate.value&&p.object.value===h.object.value)?!1:p.object.termType!==i?!0:p.object.datatype.termType===h.object.datatype.termType&&p.object.language===h.object.language&&p.object.datatype.value===h.object.datatype.value}const u=/["\\\n\r]/g;function c(p){return p.replace(u,function(h){switch(h){case'"':return'\\"';case"\\":return"\\\\";case`
`:return"\\n";case"\r":return"\\r"}})}const d=/(?:\\([tbnrf"'\\]))|(?:\\u([0-9A-Fa-f]{4}))|(?:\\U([0-9A-Fa-f]{8}))/g;function f(p){return p.replace(d,function(h,g,w,x){if(g)switch(g){case"t":return"	";case"b":return"\b";case"n":return`
`;case"r":return"\r";case"f":return"\f";case'"':return'"';case"'":return"'";case"\\":return"\\"}if(w)return String.fromCharCode(parseInt(w,16));if(x)throw new Error("Unsupported U escape")})}return Rf}/*!
 * Copyright (c) 2016-2022 Digital Bazaar, Inc. All rights reserved.
 */var Of,$v;function r1(){if($v)return Of;$v=1;const t=Gm(),e=ld(),n=n1(),r=Jm();Of=class{constructor({createMessageDigest:o=()=>new e("sha256"),canonicalIdMap:a=new Map,maxDeepIterations:l=1/0}={}){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new t("_:c14n",a),this.createMessageDigest=o,this.maxDeepIterations=l,this.quads=null,this.deepIterations=null}async main(o){this.deepIterations=new Map,this.quads=o;for(const p of o)this._addBlankNodeQuadInfo({quad:p,component:p.subject}),this._addBlankNodeQuadInfo({quad:p,component:p.object}),this._addBlankNodeQuadInfo({quad:p,component:p.graph});const a=new Map,l=[...this.blankNodeInfo.keys()];let u=0;for(const p of l)++u%100===0&&await this._yield(),await this._hashAndTrackBlankNode({id:p,hashToBlankNodes:a});const c=[...a.keys()].sort(),d=[];for(const p of c){const h=a.get(p);if(h.length>1){d.push(h);continue}const g=h[0];this.canonicalIssuer.getId(g)}for(const p of d){const h=[];for(const g of p){if(this.canonicalIssuer.hasId(g))continue;const w=new t("_:b");w.getId(g);const x=await this.hashNDegreeQuads(g,w);h.push(x)}h.sort(s);for(const g of h){const w=g.issuer.getOldIds();for(const x of w)this.canonicalIssuer.getId(x)}}const f=[];for(const p of this.quads){const h=r.serializeQuadComponents(this._componentWithCanonicalId(p.subject),p.predicate,this._componentWithCanonicalId(p.object),this._componentWithCanonicalId(p.graph));f.push(h)}return f.sort(),f.join("")}async hashFirstDegreeQuads(o){const a=[],l=this.blankNodeInfo.get(o),u=l.quads;for(const d of u){const f={subject:null,predicate:d.predicate,object:null,graph:null};f.subject=this.modifyFirstDegreeComponent(o,d.subject,"subject"),f.object=this.modifyFirstDegreeComponent(o,d.object,"object"),f.graph=this.modifyFirstDegreeComponent(o,d.graph,"graph"),a.push(r.serializeQuad(f))}a.sort();const c=this.createMessageDigest();for(const d of a)c.update(d);return l.hash=await c.digest(),l.hash}async hashRelatedBlankNode(o,a,l,u){let c;this.canonicalIssuer.hasId(o)?c=this.canonicalIssuer.getId(o):l.hasId(o)?c=l.getId(o):c=this.blankNodeInfo.get(o).hash;const d=this.createMessageDigest();return d.update(u),u!=="g"&&d.update(this.getRelatedPredicate(a)),d.update(c),d.digest()}async hashNDegreeQuads(o,a){const l=this.deepIterations.get(o)||0;if(l>this.maxDeepIterations)throw new Error(`Maximum deep iterations (${this.maxDeepIterations}) exceeded.`);this.deepIterations.set(o,l+1);const u=this.createMessageDigest(),c=await this.createHashToRelated(o,a),d=[...c.keys()].sort();for(const f of d){u.update(f);let p="",h;const g=new n(c.get(f));let w=0;for(;g.hasNext();){const x=g.next();++w%3===0&&await this._yield();let A=a.clone(),E="";const m=[];let v=!1;for(const _ of x)if(this.canonicalIssuer.hasId(_)?E+=this.canonicalIssuer.getId(_):(A.hasId(_)||m.push(_),E+=A.getId(_)),p.length!==0&&E>p){v=!0;break}if(!v){for(const _ of m){const C=await this.hashNDegreeQuads(_,A);if(E+=A.getId(_),E+=`<${C.hash}>`,A=C.issuer,p.length!==0&&E>p){v=!0;break}}v||(p.length===0||E<p)&&(p=E,h=A)}}u.update(p),a=h}return{hash:await u.digest(),issuer:a}}modifyFirstDegreeComponent(o,a){return a.termType!=="BlankNode"?a:{termType:"BlankNode",value:a.value===o?"_:a":"_:z"}}getRelatedPredicate(o){return`<${o.predicate.value}>`}async createHashToRelated(o,a){const l=new Map,u=this.blankNodeInfo.get(o).quads;let c=0;for(const d of u)++c%100===0&&await this._yield(),await Promise.all([this._addRelatedBlankNodeHash({quad:d,component:d.subject,position:"s",id:o,issuer:a,hashToRelated:l}),this._addRelatedBlankNodeHash({quad:d,component:d.object,position:"o",id:o,issuer:a,hashToRelated:l}),this._addRelatedBlankNodeHash({quad:d,component:d.graph,position:"g",id:o,issuer:a,hashToRelated:l})]);return l}async _hashAndTrackBlankNode({id:o,hashToBlankNodes:a}){const l=await this.hashFirstDegreeQuads(o),u=a.get(l);u?u.push(o):a.set(l,[o])}_addBlankNodeQuadInfo({quad:o,component:a}){if(a.termType!=="BlankNode")return;const l=a.value,u=this.blankNodeInfo.get(l);u?u.quads.add(o):this.blankNodeInfo.set(l,{quads:new Set([o]),hash:null})}async _addRelatedBlankNodeHash({quad:o,component:a,position:l,id:u,issuer:c,hashToRelated:d}){if(!(a.termType==="BlankNode"&&a.value!==u))return;const f=a.value,p=await this.hashRelatedBlankNode(f,o,c,l),h=d.get(p);h?h.push(f):d.set(p,[f])}_componentWithCanonicalId(o){return o.termType==="BlankNode"&&!o.value.startsWith(this.canonicalIssuer.prefix)?{termType:"BlankNode",value:this.canonicalIssuer.getId(o.value)}:o}async _yield(){return new Promise(o=>setImmediate(o))}};function s(i,o){return i.hash<o.hash?-1:i.hash>o.hash?1:0}return Of}/*!
 * Copyright (c) 2016-2022 Digital Bazaar, Inc. All rights reserved.
 */var Tf,kv;function Gk(){if(kv)return Tf;kv=1;const t=ld(),e=r1();return Tf=class extends e{constructor(){super(),this.name="URGNA2012",this.createMessageDigest=()=>new t("sha1")}modifyFirstDegreeComponent(r,s,i){return s.termType!=="BlankNode"?s:i==="graph"?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:s.value===r?"_:a":"_:z"}}getRelatedPredicate(r){return r.predicate.value}async createHashToRelated(r,s){const i=new Map,o=this.blankNodeInfo.get(r).quads;let a=0;for(const l of o){let u,c;if(l.subject.termType==="BlankNode"&&l.subject.value!==r)c=l.subject.value,u="p";else if(l.object.termType==="BlankNode"&&l.object.value!==r)c=l.object.value,u="r";else continue;++a%100===0&&await this._yield();const d=await this.hashRelatedBlankNode(c,l,s,u),f=i.get(d);f?f.push(c):i.set(d,[c])}return i}},Tf}/*!
 * Copyright (c) 2016-2022 Digital Bazaar, Inc. All rights reserved.
 */var Df,Iv;function s1(){if(Iv)return Df;Iv=1;const t=Gm(),e=ld(),n=n1(),r=Jm();Df=class{constructor({createMessageDigest:o=()=>new e("sha256"),canonicalIdMap:a=new Map,maxDeepIterations:l=1/0}={}){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new t("_:c14n",a),this.createMessageDigest=o,this.maxDeepIterations=l,this.quads=null,this.deepIterations=null}main(o){this.deepIterations=new Map,this.quads=o;for(const f of o)this._addBlankNodeQuadInfo({quad:f,component:f.subject}),this._addBlankNodeQuadInfo({quad:f,component:f.object}),this._addBlankNodeQuadInfo({quad:f,component:f.graph});const a=new Map,l=[...this.blankNodeInfo.keys()];for(const f of l)this._hashAndTrackBlankNode({id:f,hashToBlankNodes:a});const u=[...a.keys()].sort(),c=[];for(const f of u){const p=a.get(f);if(p.length>1){c.push(p);continue}const h=p[0];this.canonicalIssuer.getId(h)}for(const f of c){const p=[];for(const h of f){if(this.canonicalIssuer.hasId(h))continue;const g=new t("_:b");g.getId(h);const w=this.hashNDegreeQuads(h,g);p.push(w)}p.sort(s);for(const h of p){const g=h.issuer.getOldIds();for(const w of g)this.canonicalIssuer.getId(w)}}const d=[];for(const f of this.quads){const p=r.serializeQuadComponents(this._componentWithCanonicalId({component:f.subject}),f.predicate,this._componentWithCanonicalId({component:f.object}),this._componentWithCanonicalId({component:f.graph}));d.push(p)}return d.sort(),d.join("")}hashFirstDegreeQuads(o){const a=[],l=this.blankNodeInfo.get(o),u=l.quads;for(const d of u){const f={subject:null,predicate:d.predicate,object:null,graph:null};f.subject=this.modifyFirstDegreeComponent(o,d.subject,"subject"),f.object=this.modifyFirstDegreeComponent(o,d.object,"object"),f.graph=this.modifyFirstDegreeComponent(o,d.graph,"graph"),a.push(r.serializeQuad(f))}a.sort();const c=this.createMessageDigest();for(const d of a)c.update(d);return l.hash=c.digest(),l.hash}hashRelatedBlankNode(o,a,l,u){let c;this.canonicalIssuer.hasId(o)?c=this.canonicalIssuer.getId(o):l.hasId(o)?c=l.getId(o):c=this.blankNodeInfo.get(o).hash;const d=this.createMessageDigest();return d.update(u),u!=="g"&&d.update(this.getRelatedPredicate(a)),d.update(c),d.digest()}hashNDegreeQuads(o,a){const l=this.deepIterations.get(o)||0;if(l>this.maxDeepIterations)throw new Error(`Maximum deep iterations (${this.maxDeepIterations}) exceeded.`);this.deepIterations.set(o,l+1);const u=this.createMessageDigest(),c=this.createHashToRelated(o,a),d=[...c.keys()].sort();for(const f of d){u.update(f);let p="",h;const g=new n(c.get(f));for(;g.hasNext();){const w=g.next();let x=a.clone(),A="";const E=[];let m=!1;for(const v of w)if(this.canonicalIssuer.hasId(v)?A+=this.canonicalIssuer.getId(v):(x.hasId(v)||E.push(v),A+=x.getId(v)),p.length!==0&&A>p){m=!0;break}if(!m){for(const v of E){const _=this.hashNDegreeQuads(v,x);if(A+=x.getId(v),A+=`<${_.hash}>`,x=_.issuer,p.length!==0&&A>p){m=!0;break}}m||(p.length===0||A<p)&&(p=A,h=x)}}u.update(p),a=h}return{hash:u.digest(),issuer:a}}modifyFirstDegreeComponent(o,a){return a.termType!=="BlankNode"?a:{termType:"BlankNode",value:a.value===o?"_:a":"_:z"}}getRelatedPredicate(o){return`<${o.predicate.value}>`}createHashToRelated(o,a){const l=new Map,u=this.blankNodeInfo.get(o).quads;for(const c of u)this._addRelatedBlankNodeHash({quad:c,component:c.subject,position:"s",id:o,issuer:a,hashToRelated:l}),this._addRelatedBlankNodeHash({quad:c,component:c.object,position:"o",id:o,issuer:a,hashToRelated:l}),this._addRelatedBlankNodeHash({quad:c,component:c.graph,position:"g",id:o,issuer:a,hashToRelated:l});return l}_hashAndTrackBlankNode({id:o,hashToBlankNodes:a}){const l=this.hashFirstDegreeQuads(o),u=a.get(l);u?u.push(o):a.set(l,[o])}_addBlankNodeQuadInfo({quad:o,component:a}){if(a.termType!=="BlankNode")return;const l=a.value,u=this.blankNodeInfo.get(l);u?u.quads.add(o):this.blankNodeInfo.set(l,{quads:new Set([o]),hash:null})}_addRelatedBlankNodeHash({quad:o,component:a,position:l,id:u,issuer:c,hashToRelated:d}){if(!(a.termType==="BlankNode"&&a.value!==u))return;const f=a.value,p=this.hashRelatedBlankNode(f,o,c,l),h=d.get(p);h?h.push(f):d.set(p,[f])}_componentWithCanonicalId({component:o}){return o.termType==="BlankNode"&&!o.value.startsWith(this.canonicalIssuer.prefix)?{termType:"BlankNode",value:this.canonicalIssuer.getId(o.value)}:o}};function s(i,o){return i.hash<o.hash?-1:i.hash>o.hash?1:0}return Df}/*!
 * Copyright (c) 2016-2021 Digital Bazaar, Inc. All rights reserved.
 */var Pf,Rv;function Jk(){if(Rv)return Pf;Rv=1;const t=ld(),e=s1();return Pf=class extends e{constructor(){super(),this.name="URGNA2012",this.createMessageDigest=()=>new t("sha1")}modifyFirstDegreeComponent(r,s,i){return s.termType!=="BlankNode"?s:i==="graph"?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:s.value===r?"_:a":"_:z"}}getRelatedPredicate(r){return r.predicate.value}createHashToRelated(r,s){const i=new Map,o=this.blankNodeInfo.get(r).quads;for(const a of o){let l,u;if(a.subject.termType==="BlankNode"&&a.subject.value!==r)u=a.subject.value,l="p";else if(a.object.termType==="BlankNode"&&a.object.value!==r)u=a.object.value,l="r";else continue;const c=this.hashRelatedBlankNode(u,a,s,l),d=i.get(c);d?d.push(u):i.set(c,[u])}return i}},Pf}const Yk={},Xk=Object.freeze(Object.defineProperty({__proto__:null,default:Yk},Symbol.toStringTag,{value:"Module"})),Qk=Kk(Xk);var Ov;function Zk(){return Ov||(Ov=1,(function(t){const e=r1(),n=Gk(),r=s1(),s=Jk();let i;try{i=Qk}catch{}function o(a){return Array.isArray(a)?a:t.NQuads.legacyDatasetToQuads(a)}t.NQuads=Jm(),t.IdentifierIssuer=Gm(),t._rdfCanonizeNative=function(a){return a&&(i=a),i},t.canonize=async function(a,l){const u=o(a);if(l.useNative){if(!i)throw new Error("rdf-canonize-native not available");if(l.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "useNative".');return new Promise((c,d)=>i.canonize(u,l,(f,p)=>f?d(f):c(p)))}if(l.algorithm==="URDNA2015")return new e(l).main(u);if(l.algorithm==="URGNA2012"){if(l.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "URGNA2012".');return new n(l).main(u)}throw"algorithm"in l?new Error("Invalid RDF Dataset Canonicalization algorithm: "+l.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")},t._canonizeSync=function(a,l){const u=o(a);if(l.useNative){if(!i)throw new Error("rdf-canonize-native not available");if(l.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "useNative".');return i.canonizeSync(u,l)}if(l.algorithm==="URDNA2015")return new r(l).main(u);if(l.algorithm==="URGNA2012"){if(l.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "URGNA2012".');return new s(l).main(u)}throw"algorithm"in l?new Error("Invalid RDF Dataset Canonicalization algorithm: "+l.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")}})(Af)),Af}var Mf,Tv;function Ym(){return Tv||(Tv=1,Mf=Zk()),Mf}var Lf,Dv;function gr(){if(Dv)return Lf;Dv=1;const t={};return Lf=t,t.isArray=Array.isArray,t.isBoolean=e=>typeof e=="boolean"||Object.prototype.toString.call(e)==="[object Boolean]",t.isDouble=e=>t.isNumber(e)&&(String(e).indexOf(".")!==-1||Math.abs(e)>=1e21),t.isEmptyObject=e=>t.isObject(e)&&Object.keys(e).length===0,t.isNumber=e=>typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]",t.isNumeric=e=>!isNaN(parseFloat(e))&&isFinite(e),t.isObject=e=>Object.prototype.toString.call(e)==="[object Object]",t.isString=e=>typeof e=="string"||Object.prototype.toString.call(e)==="[object String]",t.isUndefined=e=>typeof e>"u",Lf}var Nf,Pv;function ti(){if(Pv)return Nf;Pv=1;const t=gr(),e={};return Nf=e,e.isSubject=n=>t.isObject(n)&&!("@value"in n||"@set"in n||"@list"in n)?Object.keys(n).length>1||!("@id"in n):!1,e.isSubjectReference=n=>t.isObject(n)&&Object.keys(n).length===1&&"@id"in n,e.isValue=n=>t.isObject(n)&&"@value"in n,e.isList=n=>t.isObject(n)&&"@list"in n,e.isGraph=n=>t.isObject(n)&&"@graph"in n&&Object.keys(n).filter(r=>r!=="@id"&&r!=="@index").length===1,e.isSimpleGraph=n=>e.isGraph(n)&&!("@id"in n),e.isBlankNode=n=>{if(t.isObject(n)){if("@id"in n){const r=n["@id"];return!t.isString(r)||r.indexOf("_:")===0}return Object.keys(n).length===0||!("@value"in n||"@set"in n||"@list"in n)}return!1},Nf}var Ff,Mv;function Lr(){return Mv||(Mv=1,Ff=class extends Error{constructor(e="An unspecified JSON-LD error occurred.",n="jsonld.Error",r={}){super(e),this.name=n,this.message=e,this.details=r}}),Ff}var jf,Lv;function Tr(){if(Lv)return jf;Lv=1;const t=ti(),e=gr(),n=Ym().IdentifierIssuer,r=Lr(),s=/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/,i=/(?:<[^>]*?>|"[^"]*?"|[^,])+/g,o=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,a=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g,l=/^@[a-zA-Z]+$/,u={headers:{accept:"application/ld+json, application/json"}},c={};jf=c,c.IdentifierIssuer=n,c.REGEX_BCP47=s,c.REGEX_KEYWORD=l,c.clone=function(f){if(f&&typeof f=="object"){let p;if(e.isArray(f)){p=[];for(let h=0;h<f.length;++h)p[h]=c.clone(f[h])}else if(f instanceof Map){p=new Map;for(const[h,g]of f)p.set(h,c.clone(g))}else if(f instanceof Set){p=new Set;for(const h of f)p.add(c.clone(h))}else if(e.isObject(f)){p={};for(const h in f)p[h]=c.clone(f[h])}else p=f.toString();return p}return f},c.asArray=function(f){return Array.isArray(f)?f:[f]},c.buildHeaders=(f={})=>{if(Object.keys(f).some(h=>h.toLowerCase()==="accept"))throw new RangeError('Accept header may not be specified; only "'+u.headers.accept+'" is supported.');return Object.assign({Accept:u.headers.accept},f)},c.parseLinkHeader=f=>{const p={},h=f.match(i);for(let g=0;g<h.length;++g){let w=h[g].match(o);if(!w)continue;const x={target:w[1]},A=w[2];for(;w=a.exec(A);)x[w[1]]=w[2]===void 0?w[3]:w[2];const E=x.rel||"";Array.isArray(p[E])?p[E].push(x):p.hasOwnProperty(E)?p[E]=[p[E],x]:p[E]=x}return p},c.validateTypeValue=(f,p)=>{if(!e.isString(f)&&!(e.isArray(f)&&f.every(h=>e.isString(h)))){if(p&&e.isObject(f))switch(Object.keys(f).length){case 0:return;case 1:if("@default"in f&&c.asArray(f["@default"]).every(h=>e.isString(h)))return}throw new r('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, an empty object, or a default object.',"jsonld.SyntaxError",{code:"invalid type value",value:f})}},c.hasProperty=(f,p)=>{if(f.hasOwnProperty(p)){const h=f[p];return!e.isArray(h)||h.length>0}return!1},c.hasValue=(f,p,h)=>{if(c.hasProperty(f,p)){let g=f[p];const w=t.isList(g);if(e.isArray(g)||w){w&&(g=g["@list"]);for(let x=0;x<g.length;++x)if(c.compareValues(h,g[x]))return!0}else if(!e.isArray(h))return c.compareValues(h,g)}return!1},c.addValue=(f,p,h,g)=>{if(g=g||{},"propertyIsArray"in g||(g.propertyIsArray=!1),"valueIsArray"in g||(g.valueIsArray=!1),"allowDuplicate"in g||(g.allowDuplicate=!0),"prependValue"in g||(g.prependValue=!1),g.valueIsArray)f[p]=h;else if(e.isArray(h)){h.length===0&&g.propertyIsArray&&!f.hasOwnProperty(p)&&(f[p]=[]),g.prependValue&&(h=h.concat(f[p]),f[p]=[]);for(let w=0;w<h.length;++w)c.addValue(f,p,h[w],g)}else if(f.hasOwnProperty(p)){const w=!g.allowDuplicate&&c.hasValue(f,p,h);!e.isArray(f[p])&&(!w||g.propertyIsArray)&&(f[p]=[f[p]]),w||(g.prependValue?f[p].unshift(h):f[p].push(h))}else f[p]=g.propertyIsArray?[h]:h},c.getValues=(f,p)=>[].concat(f[p]||[]),c.removeProperty=(f,p)=>{delete f[p]},c.removeValue=(f,p,h,g)=>{g=g||{},"propertyIsArray"in g||(g.propertyIsArray=!1);const w=c.getValues(f,p).filter(x=>!c.compareValues(x,h));w.length===0?c.removeProperty(f,p):w.length===1&&!g.propertyIsArray?f[p]=w[0]:f[p]=w},c.relabelBlankNodes=(f,p)=>{p=p||{};const h=p.issuer||new n("_:b");return d(h,f)},c.compareValues=(f,p)=>f===p||t.isValue(f)&&t.isValue(p)&&f["@value"]===p["@value"]&&f["@type"]===p["@type"]&&f["@language"]===p["@language"]&&f["@index"]===p["@index"]?!0:e.isObject(f)&&"@id"in f&&e.isObject(p)&&"@id"in p?f["@id"]===p["@id"]:!1,c.compareShortestLeast=(f,p)=>f.length<p.length?-1:p.length<f.length?1:f===p?0:f<p?-1:1;function d(f,p){if(e.isArray(p))for(let h=0;h<p.length;++h)p[h]=d(f,p[h]);else if(t.isList(p))p["@list"]=d(f,p["@list"]);else if(e.isObject(p)){t.isBlankNode(p)&&(p["@id"]=f.getId(p["@id"]));const h=Object.keys(p).sort();for(let g=0;g<h.length;++g){const w=h[g];w!=="@id"&&(p[w]=d(f,p[w]))}}return p}return jf}var qf,Nv;function Xm(){if(Nv)return qf;Nv=1;const t="http://www.w3.org/1999/02/22-rdf-syntax-ns#",e="http://www.w3.org/2001/XMLSchema#";return qf={LINK_HEADER_REL:"http://www.w3.org/ns/json-ld#context",LINK_HEADER_CONTEXT:"http://www.w3.org/ns/json-ld#context",RDF:t,RDF_LIST:t+"List",RDF_FIRST:t+"first",RDF_REST:t+"rest",RDF_NIL:t+"nil",RDF_TYPE:t+"type",RDF_PLAIN_LITERAL:t+"PlainLiteral",RDF_XML_LITERAL:t+"XMLLiteral",RDF_JSON_LITERAL:t+"JSON",RDF_OBJECT:t+"object",RDF_LANGSTRING:t+"langString",XSD:e,XSD_BOOLEAN:e+"boolean",XSD_DOUBLE:e+"double",XSD_INTEGER:e+"integer",XSD_STRING:e+"string"},qf}var Uf,Fv;function i1(){return Fv||(Fv=1,Uf=class{constructor(){this._requests={}}wrapLoader(e){const n=this;return n._loader=e,function(){return n.add.apply(n,arguments)}}async add(e){let n=this._requests[e];if(n)return Promise.resolve(n);n=this._requests[e]=this._loader(e);try{return await n}finally{delete this._requests[e]}}}),Uf}var Bf,jv;function Li(){if(jv)return Bf;jv=1;const t=gr(),e={};Bf=e,e.parsers={simple:{keys:["href","scheme","authority","path","query","fragment"],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:["href","protocol","scheme","authority","auth","user","password","hostname","port","path","directory","file","query","fragment"],regex:/^(([a-zA-Z][a-zA-Z0-9+-.]*):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}},e.parse=(r,s)=>{const i={},o=e.parsers[s||"full"],a=o.regex.exec(r);let l=o.keys.length;for(;l--;)i[o.keys[l]]=a[l]===void 0?null:a[l];return(i.scheme==="https"&&i.port==="443"||i.scheme==="http"&&i.port==="80")&&(i.href=i.href.replace(":"+i.port,""),i.authority=i.authority.replace(":"+i.port,""),i.port=null),i.normalizedPath=e.removeDotSegments(i.path),i},e.prependBase=(r,s)=>{if(r===null||e.isAbsolute(s))return s;(!r||t.isString(r))&&(r=e.parse(r||""));const i=e.parse(s),o={protocol:r.protocol||""};if(i.authority!==null)o.authority=i.authority,o.path=i.path,o.query=i.query;else if(o.authority=r.authority,i.path==="")o.path=r.path,i.query!==null?o.query=i.query:o.query=r.query;else{if(i.path.indexOf("/")===0)o.path=i.path;else{let l=r.path;l=l.substr(0,l.lastIndexOf("/")+1),(l.length>0||r.authority)&&l.substr(-1)!=="/"&&(l+="/"),l+=i.path,o.path=l}o.query=i.query}i.path!==""&&(o.path=e.removeDotSegments(o.path));let a=o.protocol;return o.authority!==null&&(a+="//"+o.authority),a+=o.path,o.query!==null&&(a+="?"+o.query),i.fragment!==null&&(a+="#"+i.fragment),a===""&&(a="./"),a},e.removeBase=(r,s)=>{if(r===null)return s;(!r||t.isString(r))&&(r=e.parse(r||""));let i="";if(r.href!==""?i+=(r.protocol||"")+"//"+(r.authority||""):s.indexOf("//")&&(i+="//"),s.indexOf(i)!==0)return s;const o=e.parse(s.substr(i.length)),a=r.normalizedPath.split("/"),l=o.normalizedPath.split("/"),u=o.fragment||o.query?0:1;for(;a.length>0&&l.length>u&&a[0]===l[0];)a.shift(),l.shift();let c="";if(a.length>0){a.pop();for(let d=0;d<a.length;++d)c+="../"}return c+=l.join("/"),o.query!==null&&(c+="?"+o.query),o.fragment!==null&&(c+="#"+o.fragment),c===""&&(c="./"),c},e.removeDotSegments=r=>{if(r.length===0)return"";const s=r.split("/"),i=[];for(;s.length>0;){const o=s.shift(),a=s.length===0;if(o==="."){a&&i.push("");continue}if(o===".."){i.pop(),a&&i.push("");continue}i.push(o)}return r[0]==="/"&&i.length>0&&i[0]!==""&&i.unshift(""),i.length===1&&i[0]===""?"/":i.join("/")};const n=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^\s]*$/;return e.isAbsolute=r=>t.isString(r)&&n.test(r),e.isRelative=r=>t.isString(r),Bf}var zf,qv;function eI(){if(qv)return zf;qv=1;const{parseLinkHeader:t,buildHeaders:e}=Tr(),{LINK_HEADER_CONTEXT:n}=Xm(),r=Lr(),s=i1(),{prependBase:i}=Li(),o=/(^|(\r\n))link:/i;zf=({secure:l,headers:u={},xhr:c}={headers:{}})=>{return u=e(u),new s().wrapLoader(f);async function f(p){if(p.indexOf("http:")!==0&&p.indexOf("https:")!==0)throw new r('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:p});if(l&&p.indexOf("https")!==0)throw new r(`URL could not be dereferenced; secure mode is enabled and the URL's scheme is not "https".`,"jsonld.InvalidUrl",{code:"loading document failed",url:p});let h;try{h=await a(c,p,u)}catch(E){throw new r("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:p,cause:E})}if(h.status>=400)throw new r("URL could not be dereferenced: "+h.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:p,httpStatusCode:h.status});let g={contextUrl:null,documentUrl:p,document:h.response},w=null;const x=h.getResponseHeader("Content-Type");let A;if(o.test(h.getAllResponseHeaders())&&(A=h.getResponseHeader("Link")),A&&x!=="application/ld+json"){const E=t(A),m=E[n];if(Array.isArray(m))throw new r("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:p});m&&(g.contextUrl=m.target),w=E.alternate,w&&w.type=="application/ld+json"&&!(x||"").match(/^application\/(\w*\+)?json$/)&&(g=await f(i(p,w.target)))}return g}};function a(l,u,c){l=l||XMLHttpRequest;const d=new l;return new Promise((f,p)=>{d.onload=()=>f(d),d.onerror=h=>p(h),d.open("GET",u,!0);for(const h in c)d.setRequestHeader(h,c[h]);d.send()})}return zf}var Vf,Uv;function tI(){if(Uv)return Vf;Uv=1;const t=eI(),e={};return Vf=e,e.setupDocumentLoaders=function(n){typeof XMLHttpRequest<"u"&&(n.documentLoaders.xhr=t,n.useDocumentLoader("xhr"))},e.setupGlobals=function(n){typeof globalThis.JsonLdProcessor>"u"&&Object.defineProperty(globalThis,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:n.JsonLdProcessor})},Vf}var Hf,Bv;function nI(){return Bv||(Bv=1,Hf=function(t){t.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}),Hf}var Kf,zv;function rI(){if(zv)return Kf;zv=1,Kf=t,t.Node=s,t.create=t;function t(i){var o=this;if(o instanceof t||(o=new t),o.tail=null,o.head=null,o.length=0,i&&typeof i.forEach=="function")i.forEach(function(u){o.push(u)});else if(arguments.length>0)for(var a=0,l=arguments.length;a<l;a++)o.push(arguments[a]);return o}t.prototype.removeNode=function(i){if(i.list!==this)throw new Error("removing node which does not belong to this list");var o=i.next,a=i.prev;return o&&(o.prev=a),a&&(a.next=o),i===this.head&&(this.head=o),i===this.tail&&(this.tail=a),i.list.length--,i.next=null,i.prev=null,i.list=null,o},t.prototype.unshiftNode=function(i){if(i!==this.head){i.list&&i.list.removeNode(i);var o=this.head;i.list=this,i.next=o,o&&(o.prev=i),this.head=i,this.tail||(this.tail=i),this.length++}},t.prototype.pushNode=function(i){if(i!==this.tail){i.list&&i.list.removeNode(i);var o=this.tail;i.list=this,i.prev=o,o&&(o.next=i),this.tail=i,this.head||(this.head=i),this.length++}},t.prototype.push=function(){for(var i=0,o=arguments.length;i<o;i++)n(this,arguments[i]);return this.length},t.prototype.unshift=function(){for(var i=0,o=arguments.length;i<o;i++)r(this,arguments[i]);return this.length},t.prototype.pop=function(){if(this.tail){var i=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,i}},t.prototype.shift=function(){if(this.head){var i=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,i}},t.prototype.forEach=function(i,o){o=o||this;for(var a=this.head,l=0;a!==null;l++)i.call(o,a.value,l,this),a=a.next},t.prototype.forEachReverse=function(i,o){o=o||this;for(var a=this.tail,l=this.length-1;a!==null;l--)i.call(o,a.value,l,this),a=a.prev},t.prototype.get=function(i){for(var o=0,a=this.head;a!==null&&o<i;o++)a=a.next;if(o===i&&a!==null)return a.value},t.prototype.getReverse=function(i){for(var o=0,a=this.tail;a!==null&&o<i;o++)a=a.prev;if(o===i&&a!==null)return a.value},t.prototype.map=function(i,o){o=o||this;for(var a=new t,l=this.head;l!==null;)a.push(i.call(o,l.value,this)),l=l.next;return a},t.prototype.mapReverse=function(i,o){o=o||this;for(var a=new t,l=this.tail;l!==null;)a.push(i.call(o,l.value,this)),l=l.prev;return a},t.prototype.reduce=function(i,o){var a,l=this.head;if(arguments.length>1)a=o;else if(this.head)l=this.head.next,a=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var u=0;l!==null;u++)a=i(a,l.value,u),l=l.next;return a},t.prototype.reduceReverse=function(i,o){var a,l=this.tail;if(arguments.length>1)a=o;else if(this.tail)l=this.tail.prev,a=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var u=this.length-1;l!==null;u--)a=i(a,l.value,u),l=l.prev;return a},t.prototype.toArray=function(){for(var i=new Array(this.length),o=0,a=this.head;a!==null;o++)i[o]=a.value,a=a.next;return i},t.prototype.toArrayReverse=function(){for(var i=new Array(this.length),o=0,a=this.tail;a!==null;o++)i[o]=a.value,a=a.prev;return i},t.prototype.slice=function(i,o){o=o||this.length,o<0&&(o+=this.length),i=i||0,i<0&&(i+=this.length);var a=new t;if(o<i||o<0)return a;i<0&&(i=0),o>this.length&&(o=this.length);for(var l=0,u=this.head;u!==null&&l<i;l++)u=u.next;for(;u!==null&&l<o;l++,u=u.next)a.push(u.value);return a},t.prototype.sliceReverse=function(i,o){o=o||this.length,o<0&&(o+=this.length),i=i||0,i<0&&(i+=this.length);var a=new t;if(o<i||o<0)return a;i<0&&(i=0),o>this.length&&(o=this.length);for(var l=this.length,u=this.tail;u!==null&&l>o;l--)u=u.prev;for(;u!==null&&l>i;l--,u=u.prev)a.push(u.value);return a},t.prototype.splice=function(i,o,...a){i>this.length&&(i=this.length-1),i<0&&(i=this.length+i);for(var l=0,u=this.head;u!==null&&l<i;l++)u=u.next;for(var c=[],l=0;u&&l<o;l++)c.push(u.value),u=this.removeNode(u);u===null&&(u=this.tail),u!==this.head&&u!==this.tail&&(u=u.prev);for(var l=0;l<a.length;l++)u=e(this,u,a[l]);return c},t.prototype.reverse=function(){for(var i=this.head,o=this.tail,a=i;a!==null;a=a.prev){var l=a.prev;a.prev=a.next,a.next=l}return this.head=o,this.tail=i,this};function e(i,o,a){var l=o===i.head?new s(a,null,o,i):new s(a,o,o.next,i);return l.next===null&&(i.tail=l),l.prev===null&&(i.head=l),i.length++,l}function n(i,o){i.tail=new s(o,i.tail,null,i),i.head||(i.head=i.tail),i.length++}function r(i,o){i.head=new s(o,null,i.head,i),i.tail||(i.tail=i.head),i.length++}function s(i,o,a,l){if(!(this instanceof s))return new s(i,o,a,l);this.list=l,this.value=i,o?(o.next=this,this.prev=o):this.prev=null,a?(a.prev=this,this.next=a):this.next=null}try{nI()(t)}catch{}return Kf}var Wf,Vv;function o1(){if(Vv)return Wf;Vv=1;const t=rI(),e=Symbol("max"),n=Symbol("length"),r=Symbol("lengthCalculator"),s=Symbol("allowStale"),i=Symbol("maxAge"),o=Symbol("dispose"),a=Symbol("noDisposeOnSet"),l=Symbol("lruList"),u=Symbol("cache"),c=Symbol("updateAgeOnGet"),d=()=>1;class f{constructor(m){if(typeof m=="number"&&(m={max:m}),m||(m={}),m.max&&(typeof m.max!="number"||m.max<0))throw new TypeError("max must be a non-negative number");this[e]=m.max||1/0;const v=m.length||d;if(this[r]=typeof v!="function"?d:v,this[s]=m.stale||!1,m.maxAge&&typeof m.maxAge!="number")throw new TypeError("maxAge must be a number");this[i]=m.maxAge||0,this[o]=m.dispose,this[a]=m.noDisposeOnSet||!1,this[c]=m.updateAgeOnGet||!1,this.reset()}set max(m){if(typeof m!="number"||m<0)throw new TypeError("max must be a non-negative number");this[e]=m||1/0,g(this)}get max(){return this[e]}set allowStale(m){this[s]=!!m}get allowStale(){return this[s]}set maxAge(m){if(typeof m!="number")throw new TypeError("maxAge must be a non-negative number");this[i]=m,g(this)}get maxAge(){return this[i]}set lengthCalculator(m){typeof m!="function"&&(m=d),m!==this[r]&&(this[r]=m,this[n]=0,this[l].forEach(v=>{v.length=this[r](v.value,v.key),this[n]+=v.length})),g(this)}get lengthCalculator(){return this[r]}get length(){return this[n]}get itemCount(){return this[l].length}rforEach(m,v){v=v||this;for(let _=this[l].tail;_!==null;){const C=_.prev;A(this,m,_,v),_=C}}forEach(m,v){v=v||this;for(let _=this[l].head;_!==null;){const C=_.next;A(this,m,_,v),_=C}}keys(){return this[l].toArray().map(m=>m.key)}values(){return this[l].toArray().map(m=>m.value)}reset(){this[o]&&this[l]&&this[l].length&&this[l].forEach(m=>this[o](m.key,m.value)),this[u]=new Map,this[l]=new t,this[n]=0}dump(){return this[l].map(m=>h(this,m)?!1:{k:m.key,v:m.value,e:m.now+(m.maxAge||0)}).toArray().filter(m=>m)}dumpLru(){return this[l]}set(m,v,_){if(_=_||this[i],_&&typeof _!="number")throw new TypeError("maxAge must be a number");const C=_?Date.now():0,$=this[r](v,m);if(this[u].has(m)){if($>this[e])return w(this,this[u].get(m)),!1;const G=this[u].get(m).value;return this[o]&&(this[a]||this[o](m,G.value)),G.now=C,G.maxAge=_,G.value=v,this[n]+=$-G.length,G.length=$,this.get(m),g(this),!0}const k=new x(m,v,$,C,_);return k.length>this[e]?(this[o]&&this[o](m,v),!1):(this[n]+=k.length,this[l].unshift(k),this[u].set(m,this[l].head),g(this),!0)}has(m){if(!this[u].has(m))return!1;const v=this[u].get(m).value;return!h(this,v)}get(m){return p(this,m,!0)}peek(m){return p(this,m,!1)}pop(){const m=this[l].tail;return m?(w(this,m),m.value):null}del(m){w(this,this[u].get(m))}load(m){this.reset();const v=Date.now();for(let _=m.length-1;_>=0;_--){const C=m[_],$=C.e||0;if($===0)this.set(C.k,C.v);else{const k=$-v;k>0&&this.set(C.k,C.v,k)}}}prune(){this[u].forEach((m,v)=>p(this,v,!1))}}const p=(E,m,v)=>{const _=E[u].get(m);if(_){const C=_.value;if(h(E,C)){if(w(E,_),!E[s])return}else v&&(E[c]&&(_.value.now=Date.now()),E[l].unshiftNode(_));return C.value}},h=(E,m)=>{if(!m||!m.maxAge&&!E[i])return!1;const v=Date.now()-m.now;return m.maxAge?v>m.maxAge:E[i]&&v>E[i]},g=E=>{if(E[n]>E[e])for(let m=E[l].tail;E[n]>E[e]&&m!==null;){const v=m.prev;w(E,m),m=v}},w=(E,m)=>{if(m){const v=m.value;E[o]&&E[o](v.key,v.value),E[n]-=v.length,E[u].delete(v.key),E[l].removeNode(m)}};class x{constructor(m,v,_,C,$){this.key=m,this.value=v,this.length=_,this.now=C,this.maxAge=$||0}}const A=(E,m,v,_)=>{let C=v.value;h(E,C)&&(w(E,v),E[s]||(C=void 0)),C&&m.call(_,C.value,C.key,E)};return Wf=f,Wf}var Gf,Hv;function sI(){if(Hv)return Gf;Hv=1;const t=o1(),e=10;return Gf=class{constructor({document:r}){this.document=r,this.cache=new t({max:e})}getProcessed(r){return this.cache.get(r)}setProcessed(r,s){this.cache.set(r,s)}},Gf}var Jf,Kv;function iI(){if(Kv)return Jf;Kv=1;const{isArray:t,isObject:e,isString:n}=gr(),{asArray:r}=Tr(),{prependBase:s}=Li(),i=Lr(),o=sI(),a=10;Jf=class{constructor({sharedCache:d}){this.perOpCache=new Map,this.sharedCache=d}async resolve({activeCtx:d,context:f,documentLoader:p,base:h,cycles:g=new Set}){f&&e(f)&&f["@context"]&&(f=f["@context"]),f=r(f);const w=[];for(const x of f){if(n(x)){let m=this._get(x);m||(m=await this._resolveRemoteContext({activeCtx:d,url:x,documentLoader:p,base:h,cycles:g})),t(m)?w.push(...m):w.push(m);continue}if(x===null){w.push(new o({document:null}));continue}e(x)||l(f);const A=JSON.stringify(x);let E=this._get(A);E||(E=new o({document:x}),this._cacheResolvedContext({key:A,resolved:E,tag:"static"})),w.push(E)}return w}_get(d){let f=this.perOpCache.get(d);if(!f){const p=this.sharedCache.get(d);p&&(f=p.get("static"),f&&this.perOpCache.set(d,f))}return f}_cacheResolvedContext({key:d,resolved:f,tag:p}){if(this.perOpCache.set(d,f),p!==void 0){let h=this.sharedCache.get(d);h||(h=new Map,this.sharedCache.set(d,h)),h.set(p,f)}return f}async _resolveRemoteContext({activeCtx:d,url:f,documentLoader:p,base:h,cycles:g}){f=s(h,f);const{context:w,remoteDoc:x}=await this._fetchContext({activeCtx:d,url:f,documentLoader:p,cycles:g});h=x.documentUrl||f,u({context:w,base:h});const A=await this.resolve({activeCtx:d,context:w,documentLoader:p,base:h,cycles:g});return this._cacheResolvedContext({key:f,resolved:A,tag:x.tag}),A}async _fetchContext({activeCtx:d,url:f,documentLoader:p,cycles:h}){if(h.size>a)throw new i("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:d.processingMode==="json-ld-1.0"?"loading remote context failed":"context overflow",max:a});if(h.has(f))throw new i("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:d.processingMode==="json-ld-1.0"?"recursive context inclusion":"context overflow",url:f});h.add(f);let g,w;try{w=await p(f),g=w.document||null,n(g)&&(g=JSON.parse(g))}catch(x){throw new i(`Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context. URL: "${f}".`,"jsonld.InvalidUrl",{code:"loading remote context failed",url:f,cause:x})}if(!e(g))throw new i(`Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object. URL: "${f}".`,"jsonld.InvalidUrl",{code:"invalid remote context",url:f});return"@context"in g?g={"@context":g["@context"]}:g={"@context":{}},w.contextUrl&&(t(g["@context"])||(g["@context"]=[g["@context"]]),g["@context"].push(w.contextUrl)),{context:g,remoteDoc:w}}};function l(c){throw new i("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:c})}function u({context:c,base:d}){if(!c)return;const f=c["@context"];if(n(f)){c["@context"]=s(d,f);return}if(t(f)){for(let p=0;p<f.length;++p){const h=f[p];if(n(h)){f[p]=s(d,h);continue}e(h)&&u({context:{"@context":h},base:d})}return}if(e(f))for(const p in f)u({context:f[p],base:d})}return Jf}var Yf,Wv;function oI(){return Wv||(Wv=1,Yf=Ym().NQuads),Yf}var Xf,Gv;function Bl(){if(Gv)return Xf;Gv=1;const t=Lr(),{isArray:e}=gr(),{asArray:n}=Tr(),r={};Xf=r,r.defaultEventHandler=null,r.setupEventHandler=({options:o={}})=>{const a=[].concat(o.safe?r.safeEventHandler:[],o.eventHandler?n(o.eventHandler):[],r.defaultEventHandler?r.defaultEventHandler:[]);return a.length===0?null:a},r.handleEvent=({event:o,options:a})=>{s({event:o,handlers:a.eventHandler})};function s({event:o,handlers:a}){let l=!0;for(let u=0;l&&u<a.length;++u){l=!1;const c=a[u];if(e(c))l=s({event:o,handlers:c});else if(typeof c=="function")c({event:o,next:()=>{l=!0}});else if(typeof c=="object")o.code in c?c[o.code]({event:o,next:()=>{l=!0}}):l=!0;else throw new t("Invalid event handler.","jsonld.InvalidEventHandler",{event:o})}return l}const i=new Set(["empty object","free-floating scalar","invalid @language value","invalid property","null @id value","null @value value","object with only @id","object with only @language","object with only @list","object with only @value","relative @id reference","relative @type reference","relative @vocab reference","reserved @id value","reserved @reverse value","reserved term","blank node predicate","relative graph reference","relative object reference","relative predicate reference","relative subject reference","rdfDirection not set"]);return r.safeEventHandler=function({event:a,next:l}){if(a.level==="warning"&&i.has(a.code))throw new t("Safe mode validation error.","jsonld.ValidationError",{event:a});l()},r.logEventHandler=function({event:a,next:l}){console.log(`EVENT: ${a.message}`,{event:a}),l()},r.logWarningEventHandler=function({event:a,next:l}){a.level==="warning"&&console.warn(`WARNING: ${a.message}`,{event:a}),l()},r.unhandledEventHandler=function({event:a}){throw new t("No handler for event.","jsonld.UnhandledEvent",{event:a})},r.setDefaultEventHandler=function({eventHandler:o}={}){r.defaultEventHandler=o?n(o):null},Xf}var Qf,Jv;function co(){if(Jv)return Qf;Jv=1;const t=Tr(),e=Lr(),{isArray:n,isObject:r,isString:s,isUndefined:i}=gr(),{isAbsolute:o,isRelative:a,prependBase:l}=Li(),{handleEvent:u}=Bl(),{REGEX_BCP47:c,REGEX_KEYWORD:d,asArray:f,compareShortestLeast:p}=Tr(),h=new Map,g=1e4,w={};Qf=w,w.process=async({activeCtx:E,localCtx:m,options:v,propagate:_=!0,overrideProtected:C=!1,cycles:$=new Set})=>{if(r(m)&&"@context"in m&&n(m["@context"])&&(m=m["@context"]),f(m).length===0)return E;const D=[],G=[({event:se,next:R})=>{D.push(se),R()}];v.eventHandler&&G.push(v.eventHandler);const J=v;v={...v,eventHandler:G};const W=await v.contextResolver.resolve({activeCtx:E,context:m,documentLoader:v.documentLoader,base:v.base});r(W[0].document)&&typeof W[0].document["@propagate"]=="boolean"&&(_=W[0].document["@propagate"]);let j=E;!_&&!j.previousContext&&(j=j.clone(),j.previousContext=E);for(const se of W){let{document:R}=se;if(E=j,R===null){if(!C&&Object.keys(E.protected).length!==0)throw new e("Tried to nullify a context with protected terms outside of a term definition.","jsonld.SyntaxError",{code:"invalid context nullification"});j=E=w.getInitialContext(v).clone();continue}const V=se.getProcessed(E);if(V){if(J.eventHandler)for(const ee of V.events)u({event:ee,options:J});j=E=V.context;continue}if(r(R)&&"@context"in R&&(R=R["@context"]),!r(R))throw new e("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:R});j=j.clone();const F=new Map;if("@version"in R){if(R["@version"]!==1.1)throw new e("Unsupported JSON-LD version: "+R["@version"],"jsonld.UnsupportedVersion",{code:"invalid @version value",context:R});if(E.processingMode&&E.processingMode==="json-ld-1.0")throw new e("@version: "+R["@version"]+" not compatible with "+E.processingMode,"jsonld.ProcessingModeConflict",{code:"processing mode conflict",context:R});j.processingMode="json-ld-1.1",j["@version"]=R["@version"],F.set("@version",!0)}if(j.processingMode=j.processingMode||E.processingMode,"@base"in R){let ee=R["@base"];if(!(ee===null||o(ee)))if(a(ee))ee=l(j["@base"],ee);else throw new e('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI, a relative IRI, or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:R});j["@base"]=ee,F.set("@base",!0)}if("@vocab"in R){const ee=R["@vocab"];if(ee===null)delete j["@vocab"];else if(s(ee)){if(!o(ee)&&w.processingMode(j,1))throw new e('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:R});{const z=x(j,ee,{vocab:!0,base:!0},void 0,void 0,v);o(z)||v.eventHandler&&u({event:{type:["JsonLdEvent"],code:"relative @vocab reference",level:"warning",message:"Relative @vocab reference found.",details:{vocab:z}},options:v}),j["@vocab"]=z}}else throw new e('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:R});F.set("@vocab",!0)}if("@language"in R){const ee=R["@language"];if(ee===null)delete j["@language"];else if(s(ee))ee.match(c)||v.eventHandler&&u({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:ee}},options:v}),j["@language"]=ee.toLowerCase();else throw new e('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:R});F.set("@language",!0)}if("@direction"in R){const ee=R["@direction"];if(E.processingMode==="json-ld-1.0")throw new e("Invalid JSON-LD syntax; @direction not compatible with "+E.processingMode,"jsonld.SyntaxError",{code:"invalid context member",context:R});if(ee===null)delete j["@direction"];else{if(ee!=="ltr"&&ee!=="rtl")throw new e('Invalid JSON-LD syntax; the value of "@direction" in a @context must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:R});j["@direction"]=ee}F.set("@direction",!0)}if("@propagate"in R){const ee=R["@propagate"];if(E.processingMode==="json-ld-1.0")throw new e("Invalid JSON-LD syntax; @propagate not compatible with "+E.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:R});if(typeof ee!="boolean")throw new e("Invalid JSON-LD syntax; @propagate value must be a boolean.","jsonld.SyntaxError",{code:"invalid @propagate value",context:m});F.set("@propagate",!0)}if("@import"in R){const ee=R["@import"];if(E.processingMode==="json-ld-1.0")throw new e("Invalid JSON-LD syntax; @import not compatible with "+E.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:R});if(!s(ee))throw new e("Invalid JSON-LD syntax; @import must be a string.","jsonld.SyntaxError",{code:"invalid @import value",context:m});const z=await v.contextResolver.resolve({activeCtx:E,context:ee,documentLoader:v.documentLoader,base:v.base});if(z.length!==1)throw new e("Invalid JSON-LD syntax; @import must reference a single context.","jsonld.SyntaxError",{code:"invalid remote context",context:m});const ie=z[0].getProcessed(E);if(ie)R=ie;else{const pe=z[0].document;if("@import"in pe)throw new e("Invalid JSON-LD syntax: imported context must not include @import.","jsonld.SyntaxError",{code:"invalid context entry",context:m});for(const he in pe)R.hasOwnProperty(he)||(R[he]=pe[he]);z[0].setProcessed(E,R)}F.set("@import",!0)}F.set("@protected",R["@protected"]||!1);for(const ee in R)if(w.createTermDefinition({activeCtx:j,localCtx:R,term:ee,defined:F,options:v,overrideProtected:C}),r(R[ee])&&"@context"in R[ee]){const z=R[ee]["@context"];let ie=!0;if(s(z)){const pe=l(v.base,z);$.has(pe)?ie=!1:$.add(pe)}if(ie)try{await w.process({activeCtx:j.clone(),localCtx:R[ee]["@context"],overrideProtected:!0,options:v,cycles:$})}catch{throw new e("Invalid JSON-LD syntax; invalid scoped context.","jsonld.SyntaxError",{code:"invalid scoped context",context:R[ee]["@context"],term:ee})}}se.setProcessed(E,{context:j,events:D})}return j},w.createTermDefinition=({activeCtx:E,localCtx:m,term:v,defined:_,options:C,overrideProtected:$=!1})=>{if(_.has(v)){if(_.get(v))return;throw new e("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:m,term:v})}_.set(v,!1);let k;if(m.hasOwnProperty(v)&&(k=m[v]),v==="@type"&&r(k)&&(k["@container"]||"@set")==="@set"&&w.processingMode(E,1.1)){const R=["@container","@id","@protected"],V=Object.keys(k);if(V.length===0||V.some(F=>!R.includes(F)))throw new e("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:m,term:v})}else{if(w.isKeyword(v))throw new e("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:m,term:v});if(v.match(d)){C.eventHandler&&u({event:{type:["JsonLdEvent"],code:"reserved term",level:"warning",message:'Terms beginning with "@" are reserved for future use and dropped.',details:{term:v}},options:C});return}else if(v==="")throw new e("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:m})}const D=E.mappings.get(v);E.mappings.has(v)&&E.mappings.delete(v);let G=!1;if((s(k)||k===null)&&(G=!0,k={"@id":k}),!r(k))throw new e("Invalid JSON-LD syntax; @context term values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:m});const J={};E.mappings.set(v,J),J.reverse=!1;const W=["@container","@id","@language","@reverse","@type"];w.processingMode(E,1.1)&&W.push("@context","@direction","@index","@nest","@prefix","@protected");for(const R in k)if(!W.includes(R))throw new e("Invalid JSON-LD syntax; a term definition must not contain "+R,"jsonld.SyntaxError",{code:"invalid term definition",context:m});const j=v.indexOf(":");if(J._termHasColon=j>0,"@reverse"in k){if("@id"in k)throw new e("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:m});if("@nest"in k)throw new e("Invalid JSON-LD syntax; a @reverse term definition must not contain @nest.","jsonld.SyntaxError",{code:"invalid reverse property",context:m});const R=k["@reverse"];if(!s(R))throw new e("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:m});if(R.match(d)){C.eventHandler&&u({event:{type:["JsonLdEvent"],code:"reserved @reverse value",level:"warning",message:'@reverse values beginning with "@" are reserved for future use and dropped.',details:{reverse:R}},options:C}),D?E.mappings.set(v,D):E.mappings.delete(v);return}const V=x(E,R,{vocab:!0,base:!1},m,_,C);if(!o(V))throw new e("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:m});J["@id"]=V,J.reverse=!0}else if("@id"in k){let R=k["@id"];if(R&&!s(R))throw new e("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:m});if(R===null)J["@id"]=null;else if(!w.isKeyword(R)&&R.match(d)){C.eventHandler&&u({event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:'@id values beginning with "@" are reserved for future use and dropped.',details:{id:R}},options:C}),D?E.mappings.set(v,D):E.mappings.delete(v);return}else if(R!==v){if(R=x(E,R,{vocab:!0,base:!1},m,_,C),!o(R)&&!w.isKeyword(R))throw new e("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:m});if(v.match(/(?::[^:])|\//)){const V=new Map(_).set(v,!0);if(x(E,v,{vocab:!0,base:!1},m,V,C)!==R)throw new e("Invalid JSON-LD syntax; term in form of IRI must expand to definition.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:m})}J["@id"]=R,J._prefix=G&&!J._termHasColon&&R.match(/[:\/\?#\[\]@]$/)!==null}}if(!("@id"in J))if(J._termHasColon){const R=v.substr(0,j);if(m.hasOwnProperty(R)&&w.createTermDefinition({activeCtx:E,localCtx:m,term:R,defined:_,options:C}),E.mappings.has(R)){const V=v.substr(j+1);J["@id"]=E.mappings.get(R)["@id"]+V}else J["@id"]=v}else if(v==="@type")J["@id"]=v;else{if(!("@vocab"in E))throw new e("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:m,term:v});J["@id"]=E["@vocab"]+v}if((k["@protected"]===!0||_.get("@protected")===!0&&k["@protected"]!==!1)&&(E.protected[v]=!0,J.protected=!0),_.set(v,!0),"@type"in k){let R=k["@type"];if(!s(R))throw new e("Invalid JSON-LD syntax; an @context @type value must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:m});if(R==="@json"||R==="@none"){if(w.processingMode(E,1))throw new e(`Invalid JSON-LD syntax; an @context @type value must not be "${R}" in JSON-LD 1.0 mode.`,"jsonld.SyntaxError",{code:"invalid type mapping",context:m})}else if(R!=="@id"&&R!=="@vocab"){if(R=x(E,R,{vocab:!0,base:!1},m,_,C),!o(R))throw new e("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:m});if(R.indexOf("_:")===0)throw new e("Invalid JSON-LD syntax; an @context @type value must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:m})}J["@type"]=R}if("@container"in k){const R=s(k["@container"])?[k["@container"]]:k["@container"]||[],V=["@list","@set","@index","@language"];let F=!0;const ee=R.includes("@set");if(w.processingMode(E,1.1)){if(V.push("@graph","@id","@type"),R.includes("@list")){if(R.length!==1)throw new e("Invalid JSON-LD syntax; @context @container with @list must have no other values","jsonld.SyntaxError",{code:"invalid container mapping",context:m})}else if(R.includes("@graph")){if(R.some(z=>z!=="@graph"&&z!=="@id"&&z!=="@index"&&z!=="@set"))throw new e("Invalid JSON-LD syntax; @context @container with @graph must have no other values other than @id, @index, and @set","jsonld.SyntaxError",{code:"invalid container mapping",context:m})}else F&=R.length<=(ee?2:1);if(R.includes("@type")&&(J["@type"]=J["@type"]||"@id",!["@id","@vocab"].includes(J["@type"])))throw new e("Invalid JSON-LD syntax; container: @type requires @type to be @id or @vocab.","jsonld.SyntaxError",{code:"invalid type mapping",context:m})}else F&=!n(k["@container"]),F&=R.length<=1;if(F&=R.every(z=>V.includes(z)),F&=!(ee&&R.includes("@list")),!F)throw new e("Invalid JSON-LD syntax; @context @container value must be one of the following: "+V.join(", "),"jsonld.SyntaxError",{code:"invalid container mapping",context:m});if(J.reverse&&!R.every(z=>["@index","@set"].includes(z)))throw new e("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:m});J["@container"]=R}if("@index"in k){if(!("@container"in k)||!J["@container"].includes("@index"))throw new e(`Invalid JSON-LD syntax; @index without @index in @container: "${k["@index"]}" on term "${v}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:m});if(!s(k["@index"])||k["@index"].indexOf("@")===0)throw new e(`Invalid JSON-LD syntax; @index must expand to an IRI: "${k["@index"]}" on term "${v}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:m});J["@index"]=k["@index"]}if("@context"in k&&(J["@context"]=k["@context"]),"@language"in k&&!("@type"in k)){let R=k["@language"];if(R!==null&&!s(R))throw new e("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:m});R!==null&&(R=R.toLowerCase()),J["@language"]=R}if("@prefix"in k){if(v.match(/:|\//))throw new e("Invalid JSON-LD syntax; @context @prefix used on a compact IRI term","jsonld.SyntaxError",{code:"invalid term definition",context:m});if(w.isKeyword(J["@id"]))throw new e("Invalid JSON-LD syntax; keywords may not be used as prefixes","jsonld.SyntaxError",{code:"invalid term definition",context:m});if(typeof k["@prefix"]=="boolean")J._prefix=k["@prefix"]===!0;else throw new e("Invalid JSON-LD syntax; @context value for @prefix must be boolean","jsonld.SyntaxError",{code:"invalid @prefix value",context:m})}if("@direction"in k){const R=k["@direction"];if(R!==null&&R!=="ltr"&&R!=="rtl")throw new e('Invalid JSON-LD syntax; @direction value must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:m});J["@direction"]=R}if("@nest"in k){const R=k["@nest"];if(!s(R)||R!=="@nest"&&R.indexOf("@")===0)throw new e("Invalid JSON-LD syntax; @context @nest value must be a string which is not a keyword other than @nest.","jsonld.SyntaxError",{code:"invalid @nest value",context:m});J["@nest"]=R}// disallow aliasing @context and @preserve
const se=J["@id"];if(se==="@context"||se==="@preserve")throw new e("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:m});if(D&&D.protected&&!$&&(E.protected[v]=!0,J.protected=!0,!A(D,J)))throw new e("Invalid JSON-LD syntax; tried to redefine a protected term.","jsonld.SyntaxError",{code:"protected term redefinition",context:m,term:v})},w.expandIri=(E,m,v,_)=>x(E,m,v,void 0,void 0,_);function x(E,m,v,_,C,$){if(m===null||!s(m)||w.isKeyword(m))return m;if(m.match(d))return null;if(_&&_.hasOwnProperty(m)&&C.get(m)!==!0&&w.createTermDefinition({activeCtx:E,localCtx:_,term:m,defined:C,options:$}),v=v||{},v.vocab){const D=E.mappings.get(m);if(D===null)return null;if(r(D)&&"@id"in D)return D["@id"]}const k=m.indexOf(":");if(k>0){const D=m.substr(0,k),G=m.substr(k+1);if(D==="_"||G.indexOf("//")===0)return m;_&&_.hasOwnProperty(D)&&w.createTermDefinition({activeCtx:E,localCtx:_,term:D,defined:C,options:$});const J=E.mappings.get(D);if(J&&J._prefix)return J["@id"]+G;if(o(m))return m}if(v.vocab&&"@vocab"in E)m=E["@vocab"]+m;else if(v.base){let D,G;"@base"in E?E["@base"]?(G=l($.base,E["@base"]),D=l(G,m)):(G=E["@base"],D=m):(G=$.base,D=l($.base,m)),m=D}return m}w.getInitialContext=E=>{const m=JSON.stringify({processingMode:E.processingMode}),v=h.get(m);if(v)return v;const _={processingMode:E.processingMode,mappings:new Map,inverse:null,getInverse:C,clone:D,revertToPreviousContext:G,protected:{}};return h.size===g&&h.clear(),h.set(m,_),_;function C(){const J=this;if(J.inverse)return J.inverse;const W=J.inverse={},j=J.fastCurieMap={},se={},R=(J["@language"]||"@none").toLowerCase(),V=J["@direction"],F=J.mappings,ee=[...F.keys()].sort(p);for(const z of ee){const ie=F.get(z);if(ie===null)continue;let pe=ie["@container"]||"@none";if(pe=[].concat(pe).sort().join(""),ie["@id"]===null)continue;const he=f(ie["@id"]);for(const Ae of he){let X=W[Ae];const te=w.isKeyword(Ae);if(X)!te&&!ie._termHasColon&&se[Ae].push(z);else if(W[Ae]=X={},!te&&!ie._termHasColon){se[Ae]=[z];const T={iri:Ae,terms:se[Ae]};Ae[0]in j?j[Ae[0]].push(T):j[Ae[0]]=[T]}if(X[pe]||(X[pe]={"@language":{},"@type":{},"@any":{}}),X=X[pe],k(z,X["@any"],"@none"),ie.reverse)k(z,X["@type"],"@reverse");else if(ie["@type"]==="@none")k(z,X["@any"],"@none"),k(z,X["@language"],"@none"),k(z,X["@type"],"@none");else if("@type"in ie)k(z,X["@type"],ie["@type"]);else if("@language"in ie&&"@direction"in ie){const T=ie["@language"],Y=ie["@direction"];T&&Y?k(z,X["@language"],`${T}_${Y}`.toLowerCase()):T?k(z,X["@language"],T.toLowerCase()):Y?k(z,X["@language"],`_${Y}`):k(z,X["@language"],"@null")}else"@language"in ie?k(z,X["@language"],(ie["@language"]||"@null").toLowerCase()):"@direction"in ie?ie["@direction"]?k(z,X["@language"],`_${ie["@direction"]}`):k(z,X["@language"],"@none"):V?(k(z,X["@language"],`_${V}`),k(z,X["@language"],"@none"),k(z,X["@type"],"@none")):(k(z,X["@language"],R),k(z,X["@language"],"@none"),k(z,X["@type"],"@none"))}}for(const z in j)$(j,z,1);return W}function $(J,W,j){const se=J[W],R=J[W]={};let V,F;for(const ee of se)V=ee.iri,j>=V.length?F="":F=V[j],F in R?R[F].push(ee):R[F]=[ee];for(const ee in R)ee!==""&&$(R,ee,j+1)}function k(J,W,j){W.hasOwnProperty(j)||(W[j]=J)}function D(){const J={};return J.mappings=t.clone(this.mappings),J.clone=this.clone,J.inverse=null,J.getInverse=this.getInverse,J.protected=t.clone(this.protected),this.previousContext&&(J.previousContext=this.previousContext.clone()),J.revertToPreviousContext=this.revertToPreviousContext,"@base"in this&&(J["@base"]=this["@base"]),"@language"in this&&(J["@language"]=this["@language"]),"@vocab"in this&&(J["@vocab"]=this["@vocab"]),J}function G(){return this.previousContext?this.previousContext.clone():this}},w.getContextValue=(E,m,v)=>{if(m===null)return v==="@context"?void 0:null;if(E.mappings.has(m)){const _=E.mappings.get(m);if(i(v))return _;if(_.hasOwnProperty(v))return _[v]}if(v==="@language"&&v in E||v==="@direction"&&v in E)return E[v];if(v!=="@context")return null},w.processingMode=(E,m)=>m.toString()>="1.1"?!E.processingMode||E.processingMode>="json-ld-"+m.toString():E.processingMode==="json-ld-1.0",w.isKeyword=E=>{if(!s(E)||E[0]!=="@")return!1;switch(E){case"@base":case"@container":case"@context":case"@default":case"@direction":case"@embed":case"@explicit":case"@graph":case"@id":case"@included":case"@index":case"@json":case"@language":case"@list":case"@nest":case"@none":case"@omitDefault":case"@prefix":case"@preserve":case"@protected":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@version":case"@vocab":return!0}return!1};function A(E,m){if(!(E&&typeof E=="object")||!(m&&typeof m=="object"))return E===m;const v=Array.isArray(E);if(v!==Array.isArray(m))return!1;if(v){if(E.length!==m.length)return!1;for(let $=0;$<E.length;++$)if(!A(E[$],m[$]))return!1;return!0}const _=Object.keys(E),C=Object.keys(m);if(_.length!==C.length)return!1;for(const $ in E){let k=E[$],D=m[$];if($==="@container"&&Array.isArray(k)&&Array.isArray(D)&&(k=k.slice().sort(),D=D.slice().sort()),!A(k,D))return!1}return!0}return Qf}var Zf,Yv;function aI(){if(Yv)return Zf;Yv=1;const t=Lr(),{isArray:e,isObject:n,isEmptyObject:r,isString:s,isUndefined:i}=gr(),{isList:o,isValue:a,isGraph:l,isSubject:u}=ti(),{expandIri:c,getContextValue:d,isKeyword:f,process:p,processingMode:h}=co(),{isAbsolute:g}=Li(),{REGEX_BCP47:w,REGEX_KEYWORD:x,addValue:A,asArray:E,getValues:m,validateTypeValue:v}=Tr(),{handleEvent:_}=Bl(),C={};Zf=C,C.expand=async({activeCtx:W,activeProperty:j=null,element:se,options:R={},insideList:V=!1,insideIndex:F=!1,typeScopedContext:ee=null})=>{if(se==null)return null;if(j==="@default"&&(R=Object.assign({},R,{isFrame:!1})),!e(se)&&!n(se))return!V&&(j===null||c(W,j,{vocab:!0},R)==="@graph")?(R.eventHandler&&_({event:{type:["JsonLdEvent"],code:"free-floating scalar",level:"warning",message:"Dropping free-floating scalar not in a list.",details:{value:se}},options:R}),null):D({activeCtx:W,activeProperty:j,value:se,options:R});if(e(se)){let T=[];const Y=d(W,j,"@container")||[];V=V||Y.includes("@list");for(let re=0;re<se.length;++re){let ne=await C.expand({activeCtx:W,activeProperty:j,element:se[re],options:R,insideIndex:F,typeScopedContext:ee});V&&e(ne)&&(ne={"@list":ne}),ne!==null&&(e(ne)?T=T.concat(ne):T.push(ne))}return T}const z=c(W,j,{vocab:!0},R),ie=d(W,j,"@context");ee=ee||(W.previousContext?W:null);let pe=Object.keys(se).sort(),he=!F;if(he&&ee&&pe.length<=2&&!pe.includes("@context"))for(const T of pe){const Y=c(ee,T,{vocab:!0},R);if(Y==="@value"){he=!1,W=ee;break}if(Y==="@id"&&pe.length===1){he=!1;break}}he&&(W=W.revertToPreviousContext()),i(ie)||(W=await p({activeCtx:W,localCtx:ie,propagate:!0,overrideProtected:!0,options:R})),"@context"in se&&(W=await p({activeCtx:W,localCtx:se["@context"],options:R})),ee=W;let Ae=null;for(const T of pe)if(c(W,T,{vocab:!0},R)==="@type"){Ae=Ae||T;const re=se[T],ne=Array.isArray(re)?re.length>1?re.slice().sort():re:[re];for(const xe of ne){const M=d(ee,xe,"@context");i(M)||(W=await p({activeCtx:W,localCtx:M,options:R,propagate:!1}))}}let X={};await k({activeCtx:W,activeProperty:j,expandedActiveProperty:z,element:se,expandedParent:X,options:R,insideList:V,typeKey:Ae,typeScopedContext:ee}),pe=Object.keys(X);let te=pe.length;if("@value"in X){if("@type"in X&&("@language"in X||"@direction"in X))throw new t('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and either "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:X});let T=te-1;if("@type"in X&&(T-=1),"@index"in X&&(T-=1),"@language"in X&&(T-=1),"@direction"in X&&(T-=1),T!==0)throw new t('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and either "@type" or either or both "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:X});const Y=X["@value"]===null?[]:E(X["@value"]),re=m(X,"@type");if(!(h(W,1.1)&&re.includes("@json")&&re.length===1))if(Y.length===0)R.eventHandler&&_({event:{type:["JsonLdEvent"],code:"null @value value",level:"warning",message:"Dropping null @value value.",details:{value:X}},options:R}),X=null;else{if(!Y.every(ne=>s(ne)||r(ne))&&"@language"in X)throw new t("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:X});if(!re.every(ne=>g(ne)&&!(s(ne)&&ne.indexOf("_:")===0)||r(ne)))throw new t('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:X})}}else if("@type"in X&&!e(X["@type"]))X["@type"]=[X["@type"]];else if("@set"in X||"@list"in X){if(te>1&&!(te===2&&"@index"in X))throw new t('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:X});"@set"in X&&(X=X["@set"],pe=Object.keys(X),te=pe.length)}else te===1&&"@language"in X&&(R.eventHandler&&_({event:{type:["JsonLdEvent"],code:"object with only @language",level:"warning",message:"Dropping object with only @language.",details:{value:X}},options:R}),X=null);return n(X)&&!R.keepFreeFloatingNodes&&!V&&(j===null||z==="@graph"||(d(W,j,"@container")||[]).includes("@graph"))&&(X=$({value:X,count:te,options:R})),X};function $({value:W,count:j,options:se}){if(j===0||"@value"in W||"@list"in W||j===1&&"@id"in W){if(se.eventHandler){let R,V;j===0?(R="empty object",V="Dropping empty object."):"@value"in W?(R="object with only @value",V="Dropping object with only @value."):"@list"in W?(R="object with only @list",V="Dropping object with only @list."):j===1&&"@id"in W&&(R="object with only @id",V="Dropping object with only @id."),_({event:{type:["JsonLdEvent"],code:R,level:"warning",message:V,details:{value:W}},options:se})}return null}return W}async function k({activeCtx:W,activeProperty:j,expandedActiveProperty:se,element:R,expandedParent:V,options:F={},insideList:ee,typeKey:z,typeScopedContext:ie}){const pe=Object.keys(R).sort(),he=[];let Ae;const X=R[z]&&c(W,e(R[z])?R[z][0]:R[z],{vocab:!0},{...F,typeExpansion:!0})==="@json";for(const te of pe){let T=R[te],Y;if(te==="@context")continue;const re=c(W,te,{vocab:!0},F);if(re===null||!(g(re)||f(re))){F.eventHandler&&_({event:{type:["JsonLdEvent"],code:"invalid property",level:"warning",message:"Dropping property that did not expand into an absolute IRI or keyword.",details:{property:te,expandedProperty:re}},options:F});continue}if(f(re)){if(se==="@reverse")throw new t("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:T});if(re in V&&re!=="@included"&&re!=="@type")throw new t("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:re})}if(re==="@id"){if(!s(T)){if(!F.isFrame)throw new t('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:T});if(n(T)){if(!r(T))throw new t('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:T})}else if(e(T)){if(!T.every(P=>s(P)))throw new t('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:T})}else throw new t('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:T})}A(V,"@id",E(T).map(P=>{if(s(P)){const Q=c(W,P,{base:!0},F);return F.eventHandler&&(Q===null?_(P===null?{event:{type:["JsonLdEvent"],code:"null @id value",level:"warning",message:"Null @id found.",details:{id:P}},options:F}:{event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:"Reserved @id found.",details:{id:P}},options:F}):g(Q)||_({event:{type:["JsonLdEvent"],code:"relative @id reference",level:"warning",message:"Relative @id reference found.",details:{id:P,expandedId:Q}},options:F})),Q}return P}),{propertyIsArray:F.isFrame});continue}if(re==="@type"){n(T)&&(T=Object.fromEntries(Object.entries(T).map(([P,Q])=>[c(ie,P,{vocab:!0}),E(Q).map(ye=>c(ie,ye,{base:!0,vocab:!0},{...F,typeExpansion:!0}))]))),v(T,F.isFrame),A(V,"@type",E(T).map(P=>{if(s(P)){const Q=c(ie,P,{base:!0,vocab:!0},{...F,typeExpansion:!0});return Q!=="@json"&&!g(Q)&&F.eventHandler&&_({event:{type:["JsonLdEvent"],code:"relative @type reference",level:"warning",message:"Relative @type reference found.",details:{type:P}},options:F}),Q}return P}),{propertyIsArray:!!F.isFrame});continue}if(re==="@included"&&h(W,1.1)){const P=E(await C.expand({activeCtx:W,activeProperty:j,element:T,options:F}));if(!P.every(Q=>u(Q)))throw new t("Invalid JSON-LD syntax; values of @included must expand to node objects.","jsonld.SyntaxError",{code:"invalid @included value",value:T});A(V,"@included",P,{propertyIsArray:!0});continue}if(re==="@graph"&&!(n(T)||e(T)))throw new t('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:T});if(re==="@value"){Ae=T,X&&h(W,1.1)?V["@value"]=T:A(V,"@value",T,{propertyIsArray:F.isFrame});continue}if(re==="@language"){if(T===null)continue;if(!s(T)&&!F.isFrame)throw new t('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:T});T=E(T).map(P=>s(P)?P.toLowerCase():P);for(const P of T)s(P)&&!P.match(w)&&F.eventHandler&&_({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:P}},options:F});A(V,"@language",T,{propertyIsArray:F.isFrame});continue}if(re==="@direction"){if(!s(T)&&!F.isFrame)throw new t('Invalid JSON-LD syntax; "@direction" value must be a string.',"jsonld.SyntaxError",{code:"invalid base direction",value:T});T=E(T);for(const P of T)if(s(P)&&P!=="ltr"&&P!=="rtl")throw new t('Invalid JSON-LD syntax; "@direction" must be "ltr" or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",value:T});A(V,"@direction",T,{propertyIsArray:F.isFrame});continue}if(re==="@index"){if(!s(T))throw new t('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:T});A(V,"@index",T);continue}if(re==="@reverse"){if(!n(T))throw new t('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:T});if(Y=await C.expand({activeCtx:W,activeProperty:"@reverse",element:T,options:F}),"@reverse"in Y)for(const Q in Y["@reverse"])A(V,Q,Y["@reverse"][Q],{propertyIsArray:!0});let P=V["@reverse"]||null;for(const Q in Y){if(Q==="@reverse")continue;P===null&&(P=V["@reverse"]={}),A(P,Q,[],{propertyIsArray:!0});const ye=Y[Q];for(let _e=0;_e<ye.length;++_e){const be=ye[_e];if(a(be)||o(be))throw new t('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:Y});A(P,Q,be,{propertyIsArray:!0})}}continue}if(re==="@nest"){he.push(te);continue}let ne=W;const xe=d(W,te,"@context");i(xe)||(ne=await p({activeCtx:W,localCtx:xe,propagate:!0,overrideProtected:!0,options:F}));const M=d(W,te,"@container")||[];if(M.includes("@language")&&n(T)){const P=d(ne,te,"@direction");Y=G(ne,T,P,F)}else if(M.includes("@index")&&n(T)){const P=M.includes("@graph"),Q=d(ne,te,"@index")||"@index",ye=Q!=="@index"&&c(W,Q,{vocab:!0},F);Y=await J({activeCtx:ne,options:F,activeProperty:te,value:T,asGraph:P,indexKey:Q,propertyIndex:ye})}else if(M.includes("@id")&&n(T)){const P=M.includes("@graph");Y=await J({activeCtx:ne,options:F,activeProperty:te,value:T,asGraph:P,indexKey:"@id"})}else if(M.includes("@type")&&n(T))Y=await J({activeCtx:ne.revertToPreviousContext(),options:F,activeProperty:te,value:T,asGraph:!1,indexKey:"@type"});else{const P=re==="@list";if(P||re==="@set"){let Q=j;P&&se==="@graph"&&(Q=null),Y=await C.expand({activeCtx:ne,activeProperty:Q,element:T,options:F,insideList:P})}else d(W,te,"@type")==="@json"?Y={"@type":"@json","@value":T}:Y=await C.expand({activeCtx:ne,activeProperty:te,element:T,options:F,insideList:!1})}if(!(Y===null&&re!=="@value")){if(re!=="@list"&&!o(Y)&&M.includes("@list")&&(Y={"@list":E(Y)}),M.includes("@graph")&&!M.some(P=>P==="@id"||P==="@index")){if(Y=E(Y),F.isFrame||(Y=Y.filter(P=>{const Q=Object.keys(P).length;return $({value:P,count:Q,options:F})!==null})),Y.length===0)continue;Y=Y.map(P=>({"@graph":E(P)}))}if(ne.mappings.has(te)&&ne.mappings.get(te).reverse){const P=V["@reverse"]=V["@reverse"]||{};Y=E(Y);for(let Q=0;Q<Y.length;++Q){const ye=Y[Q];if(a(ye)||o(ye))throw new t('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:Y});A(P,re,ye,{propertyIsArray:!0})}continue}A(V,re,Y,{propertyIsArray:!0})}}if("@value"in V&&!(V["@type"]==="@json"&&h(W,1.1))){if((n(Ae)||e(Ae))&&!F.isFrame)throw new t('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:Ae})}for(const te of he){const T=e(R[te])?R[te]:[R[te]];for(const Y of T){if(!n(Y)||Object.keys(Y).some(re=>c(W,re,{vocab:!0},F)==="@value"))throw new t("Invalid JSON-LD syntax; nested value must be a node object.","jsonld.SyntaxError",{code:"invalid @nest value",value:Y});await k({activeCtx:W,activeProperty:j,expandedActiveProperty:se,element:Y,expandedParent:V,options:F,insideList:ee,typeScopedContext:ie,typeKey:z})}}}function D({activeCtx:W,activeProperty:j,value:se,options:R}){if(se==null)return null;const V=c(W,j,{vocab:!0},R);if(V==="@id")return c(W,se,{base:!0},R);if(V==="@type")return c(W,se,{vocab:!0,base:!0},{...R,typeExpansion:!0});const F=d(W,j,"@type");if((F==="@id"||V==="@graph")&&s(se)){const z=c(W,se,{base:!0},R);return z===null&&se.match(x)&&R.eventHandler&&_({event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:"Reserved @id found.",details:{id:j}},options:R}),{"@id":z}}if(F==="@vocab"&&s(se))return{"@id":c(W,se,{vocab:!0,base:!0},R)};if(f(V))return se;const ee={};if(F&&!["@id","@vocab","@none"].includes(F))ee["@type"]=F;else if(s(se)){const z=d(W,j,"@language");z!==null&&(ee["@language"]=z);const ie=d(W,j,"@direction");ie!==null&&(ee["@direction"]=ie)}return["boolean","number","string"].includes(typeof se)||(se=se.toString()),ee["@value"]=se,ee}function G(W,j,se,R){const V=[],F=Object.keys(j).sort();for(const ee of F){const z=c(W,ee,{vocab:!0},R);let ie=j[ee];e(ie)||(ie=[ie]);for(const pe of ie){if(pe===null)continue;if(!s(pe))throw new t("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:j});const he={"@value":pe};z!=="@none"&&(ee.match(w)||R.eventHandler&&_({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:ee}},options:R}),he["@language"]=ee.toLowerCase()),se&&(he["@direction"]=se),V.push(he)}}return V}async function J({activeCtx:W,options:j,activeProperty:se,value:R,asGraph:V,indexKey:F,propertyIndex:ee}){const z=[],ie=Object.keys(R).sort(),pe=F==="@type";for(let he of ie){if(pe){const te=d(W,he,"@context");i(te)||(W=await p({activeCtx:W,localCtx:te,propagate:!1,options:j}))}let Ae=R[he];e(Ae)||(Ae=[Ae]),Ae=await C.expand({activeCtx:W,activeProperty:se,element:Ae,options:j,insideList:!1,insideIndex:!0});let X;ee?he==="@none"?X="@none":X=D({activeCtx:W,activeProperty:F,value:he,options:j}):X=c(W,he,{vocab:!0},j),F==="@id"?he=c(W,he,{base:!0},j):pe&&(he=X);for(let te of Ae){if(V&&!l(te)&&(te={"@graph":[te]}),F==="@type")X==="@none"||(te["@type"]?te["@type"]=[he].concat(te["@type"]):te["@type"]=[he]);else{if(a(te)&&!["@language","@type","@index"].includes(F))throw new t(`Invalid JSON-LD syntax; Attempt to add illegal key to value object: "${F}".`,"jsonld.SyntaxError",{code:"invalid value object",value:te});ee?X!=="@none"&&A(te,ee,X,{propertyIsArray:!0,prependValue:!0}):X!=="@none"&&!(F in te)&&(te[F]=he)}z.push(te)}}return z}return Zf}var ep,Xv;function ud(){if(Xv)return ep;Xv=1;const{isKeyword:t}=co(),e=ti(),n=gr(),r=Tr(),s=Lr(),i={};return ep=i,i.createMergedNodeMap=(o,a)=>{a=a||{};const l=a.issuer||new r.IdentifierIssuer("_:b"),u={"@default":{}};return i.createNodeMap(o,u,"@default",l),i.mergeNodeMaps(u)},i.createNodeMap=(o,a,l,u,c,d)=>{if(n.isArray(o)){for(const g of o)i.createNodeMap(g,a,l,u,void 0,d);return}if(!n.isObject(o)){d&&d.push(o);return}if(e.isValue(o)){if("@type"in o){let g=o["@type"];g.indexOf("_:")===0&&(o["@type"]=g=u.getId(g))}d&&d.push(o);return}else if(d&&e.isList(o)){const g=[];i.createNodeMap(o["@list"],a,l,u,c,g),d.push({"@list":g});return}if("@type"in o){const g=o["@type"];for(const w of g)w.indexOf("_:")===0&&u.getId(w)}n.isUndefined(c)&&(c=e.isBlankNode(o)?u.getId(o["@id"]):o["@id"]),d&&d.push({"@id":c});const f=a[l],p=f[c]=f[c]||{};p["@id"]=c;const h=Object.keys(o).sort();for(let g of h){if(g==="@id")continue;if(g==="@reverse"){const x={"@id":c},A=o["@reverse"];for(const E in A){const m=A[E];for(const v of m){let _=v["@id"];e.isBlankNode(v)&&(_=u.getId(_)),i.createNodeMap(v,a,l,u,_),r.addValue(f[_],E,x,{propertyIsArray:!0,allowDuplicate:!1})}}continue}if(g==="@graph"){c in a||(a[c]={}),i.createNodeMap(o[g],a,c,u);continue}if(g==="@included"){i.createNodeMap(o[g],a,l,u);continue}if(g!=="@type"&&t(g)){if(g==="@index"&&g in p&&(o[g]!==p[g]||o[g]["@id"]!==p[g]["@id"]))throw new s("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:p});p[g]=o[g];continue}const w=o[g];if(g.indexOf("_:")===0&&(g=u.getId(g)),w.length===0){r.addValue(p,g,[],{propertyIsArray:!0});continue}for(let x of w)if(g==="@type"&&(x=x.indexOf("_:")===0?u.getId(x):x),e.isSubject(x)||e.isSubjectReference(x)){if("@id"in x&&!x["@id"])continue;const A=e.isBlankNode(x)?u.getId(x["@id"]):x["@id"];r.addValue(p,g,{"@id":A},{propertyIsArray:!0,allowDuplicate:!1}),i.createNodeMap(x,a,l,u,A)}else if(e.isValue(x))r.addValue(p,g,x,{propertyIsArray:!0,allowDuplicate:!1});else if(e.isList(x)){const A=[];i.createNodeMap(x["@list"],a,l,u,c,A),x={"@list":A},r.addValue(p,g,x,{propertyIsArray:!0,allowDuplicate:!1})}else i.createNodeMap(x,a,l,u,c),r.addValue(p,g,x,{propertyIsArray:!0,allowDuplicate:!1})}},i.mergeNodeMapGraphs=o=>{const a={};for(const l of Object.keys(o).sort())for(const u of Object.keys(o[l]).sort()){const c=o[l][u];u in a||(a[u]={"@id":u});const d=a[u];for(const f of Object.keys(c).sort())if(t(f)&&f!=="@type")d[f]=r.clone(c[f]);else for(const p of c[f])r.addValue(d,f,r.clone(p),{propertyIsArray:!0,allowDuplicate:!1})}return a},i.mergeNodeMaps=o=>{const a=o["@default"],l=Object.keys(o).sort();for(const u of l){if(u==="@default")continue;const c=o[u];let d=a[u];d?"@graph"in d||(d["@graph"]=[]):a[u]=d={"@id":u,"@graph":[]};const f=d["@graph"];for(const p of Object.keys(c).sort()){const h=c[p];e.isSubjectReference(h)||f.push(h)}}return a},ep}var tp,Qv;function lI(){if(Qv)return tp;Qv=1;const{isSubjectReference:t}=ti(),{createMergedNodeMap:e}=ud(),n={};return tp=n,n.flatten=r=>{const s=e(r),i=[],o=Object.keys(s).sort();for(let a=0;a<o.length;++a){const l=s[o[a]];t(l)||i.push(l)}return i},tp}var np,Zv;function uI(){if(Zv)return np;Zv=1;const t=Lr(),e=ti(),n=gr(),{REGEX_BCP47:r,addValue:s}=Tr(),{handleEvent:i}=Bl(),{RDF_LIST:o,RDF_FIRST:a,RDF_REST:l,RDF_NIL:u,RDF_TYPE:c,RDF_JSON_LITERAL:d,XSD_BOOLEAN:f,XSD_DOUBLE:p,XSD_INTEGER:h,XSD_STRING:g}=Xm(),w={};np=w,w.fromRDF=async(A,E)=>{const{useRdfType:m=!1,useNativeTypes:v=!1,rdfDirection:_=null}=E,C={},$={"@default":C},k={};if(_){if(_==="compound-literal")throw new t("Unsupported rdfDirection value.","jsonld.InvalidRdfDirection",{value:_});if(_!=="i18n-datatype")throw new t("Unknown rdfDirection value.","jsonld.InvalidRdfDirection",{value:_})}for(const J of A){const W=J.graph.termType==="DefaultGraph"?"@default":J.graph.value;W in $||($[W]={}),W!=="@default"&&!(W in C)&&(C[W]={"@id":W});const j=$[W],se=J.subject.value,R=J.predicate.value,V=J.object;se in j||(j[se]={"@id":se});const F=j[se],ee=V.termType.endsWith("Node");if(ee&&!(V.value in j)&&(j[V.value]={"@id":V.value}),R===c&&!m&&ee){s(F,"@type",V.value,{propertyIsArray:!0});continue}const z=x(V,v,_,E);if(s(F,R,z,{propertyIsArray:!0}),ee)if(V.value===u){const ie=j[V.value];"usages"in ie||(ie.usages=[]),ie.usages.push({node:F,property:R,value:z})}else V.value in k?k[V.value]=!1:k[V.value]={node:F,property:R,value:z}}for(const J in $){const W=$[J];if(!(u in W))continue;const j=W[u];if(j.usages){for(let se of j.usages){let R=se.node,V=se.property,F=se.value;const ee=[],z=[];let ie=Object.keys(R).length;for(;V===l&&n.isObject(k[R["@id"]])&&n.isArray(R[a])&&R[a].length===1&&n.isArray(R[l])&&R[l].length===1&&(ie===3||ie===4&&n.isArray(R["@type"])&&R["@type"].length===1&&R["@type"][0]===o)&&(ee.push(R[a][0]),z.push(R["@id"]),se=k[R["@id"]],R=se.node,V=se.property,F=se.value,ie=Object.keys(R).length,!!e.isBlankNode(R)););delete F["@id"],F["@list"]=ee.reverse();for(const pe of z)delete W[pe]}delete j.usages}}const D=[],G=Object.keys(C).sort();for(const J of G){const W=C[J];if(J in $){const j=W["@graph"]=[],se=$[J],R=Object.keys(se).sort();for(const V of R){const F=se[V];e.isSubjectReference(F)||j.push(F)}}e.isSubjectReference(W)||D.push(W)}return D};function x(A,E,m,v){if(A.termType.endsWith("Node"))return{"@id":A.value};const _={"@value":A.value};if(A.language)A.language.match(r)||v.eventHandler&&i({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:A.language}},options:v}),_["@language"]=A.language;else{let C=A.datatype.value;if(C||(C=g),C===d){C="@json";try{_["@value"]=JSON.parse(_["@value"])}catch($){throw new t("JSON literal could not be parsed.","jsonld.InvalidJsonLiteral",{code:"invalid JSON literal",value:_["@value"],cause:$})}}if(E){if(C===f)_["@value"]==="true"?_["@value"]=!0:_["@value"]==="false"&&(_["@value"]=!1);else if(n.isNumeric(_["@value"]))if(C===h){const $=parseInt(_["@value"],10);$.toFixed(0)===_["@value"]&&(_["@value"]=$)}else C===p&&(_["@value"]=parseFloat(_["@value"]));[f,h,p,g].includes(C)||(_["@type"]=C)}else if(m==="i18n-datatype"&&C.startsWith("https://www.w3.org/ns/i18n#")){const[,$,k]=C.split(/[#_]/);$.length>0&&(_["@language"]=$,$.match(r)||v.eventHandler&&i({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:$}},options:v})),_["@direction"]=k}else C!==g&&(_["@type"]=C)}return _}return np}var rp,eb;function cI(){return eb||(eb=1,rp=function t(e){return e===null||typeof e!="object"||e.toJSON!=null?JSON.stringify(e):Array.isArray(e)?"["+e.reduce((n,r,s)=>{const i=s===0?"":",",o=r===void 0||typeof r=="symbol"?null:r;return n+i+t(o)},"")+"]":"{"+Object.keys(e).sort().reduce((n,r,s)=>{if(e[r]===void 0||typeof e[r]=="symbol")return n;const i=n.length===0?"":",";return n+i+t(r)+":"+t(e[r])},"")+"}"}),rp}var sp,tb;function dI(){if(tb)return sp;tb=1;const{createNodeMap:t}=ud(),{isKeyword:e}=co(),n=ti(),r=cI(),s=Lr(),i=gr(),o=Tr(),{handleEvent:a}=Bl(),{RDF_FIRST:l,RDF_REST:u,RDF_NIL:c,RDF_TYPE:d,RDF_JSON_LITERAL:f,RDF_LANGSTRING:p,XSD_BOOLEAN:h,XSD_DOUBLE:g,XSD_INTEGER:w,XSD_STRING:x}=Xm(),{isAbsolute:A}=Li(),E={};sp=E,E.toRDF=(C,$)=>{const k=new o.IdentifierIssuer("_:b"),D={"@default":{}};t(C,D,"@default",k);const G=[],J=Object.keys(D).sort();for(const W of J){let j;if(W==="@default")j={termType:"DefaultGraph",value:""};else if(A(W))W.startsWith("_:")?j={termType:"BlankNode"}:j={termType:"NamedNode"},j.value=W;else{$.eventHandler&&a({event:{type:["JsonLdEvent"],code:"relative graph reference",level:"warning",message:"Relative graph reference found.",details:{graph:W}},options:$});continue}m(G,D[W],j,k,$)}return G};function m(C,$,k,D,G){const J=Object.keys($).sort();for(const W of J){const j=$[W],se=Object.keys(j).sort();for(let R of se){const V=j[R];if(R==="@type")R=d;else if(e(R))continue;for(const F of V){const ee={termType:W.startsWith("_:")?"BlankNode":"NamedNode",value:W};if(!A(W)){G.eventHandler&&a({event:{type:["JsonLdEvent"],code:"relative subject reference",level:"warning",message:"Relative subject reference found.",details:{subject:W}},options:G});continue}const z={termType:R.startsWith("_:")?"BlankNode":"NamedNode",value:R};if(!A(R)){G.eventHandler&&a({event:{type:["JsonLdEvent"],code:"relative predicate reference",level:"warning",message:"Relative predicate reference found.",details:{predicate:R}},options:G});continue}if(z.termType==="BlankNode"&&!G.produceGeneralizedRdf){G.eventHandler&&a({event:{type:["JsonLdEvent"],code:"blank node predicate",level:"warning",message:"Dropping blank node predicate.",details:{property:D.getOldIds().find(pe=>D.getId(pe)===R)}},options:G});continue}const ie=_(F,D,C,k,G.rdfDirection,G);ie&&C.push({subject:ee,predicate:z,object:ie,graph:k})}}}}function v(C,$,k,D,G,J){const W={termType:"NamedNode",value:l},j={termType:"NamedNode",value:u},se={termType:"NamedNode",value:c},R=C.pop(),V=R?{termType:"BlankNode",value:$.getId()}:se;let F=V;for(const ee of C){const z=_(ee,$,k,D,G,J),ie={termType:"BlankNode",value:$.getId()};k.push({subject:F,predicate:W,object:z,graph:D}),k.push({subject:F,predicate:j,object:ie,graph:D}),F=ie}if(R){const ee=_(R,$,k,D,G,J);k.push({subject:F,predicate:W,object:ee,graph:D}),k.push({subject:F,predicate:j,object:se,graph:D})}return V}function _(C,$,k,D,G,J){const W={};if(n.isValue(C)){W.termType="Literal",W.value=void 0,W.datatype={termType:"NamedNode"};let j=C["@value"];const se=C["@type"]||null;if(se==="@json")W.value=r(j),W.datatype.value=f;else if(i.isBoolean(j))W.value=j.toString(),W.datatype.value=se||h;else if(i.isDouble(j)||se===g)i.isDouble(j)||(j=parseFloat(j)),W.value=j.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),W.datatype.value=se||g;else if(i.isNumber(j))W.value=j.toFixed(0),W.datatype.value=se||w;else if("@direction"in C&&G==="i18n-datatype"){const R=(C["@language"]||"").toLowerCase(),V=C["@direction"],F=`https://www.w3.org/ns/i18n#${R}_${V}`;W.datatype.value=F,W.value=j}else{if("@direction"in C&&G==="compound-literal")throw new s("Unsupported rdfDirection value.","jsonld.InvalidRdfDirection",{value:G});if("@direction"in C&&G)throw new s("Unknown rdfDirection value.","jsonld.InvalidRdfDirection",{value:G});"@language"in C?("@direction"in C&&!G&&J.eventHandler&&a({event:{type:["JsonLdEvent"],code:"rdfDirection not set",level:"warning",message:"rdfDirection not set for @direction.",details:{object:W.value}},options:J}),W.value=j,W.datatype.value=se||p,W.language=C["@language"]):("@direction"in C&&!G&&J.eventHandler&&a({event:{type:["JsonLdEvent"],code:"rdfDirection not set",level:"warning",message:"rdfDirection not set for @direction.",details:{object:W.value}},options:J}),W.value=j,W.datatype.value=se||x)}}else if(n.isList(C)){const j=v(C["@list"],$,k,D,G,J);W.termType=j.termType,W.value=j.value}else{const j=i.isObject(C)?C["@id"]:C;W.termType=j.startsWith("_:")?"BlankNode":"NamedNode",W.value=j}return W.termType==="NamedNode"&&!A(W.value)?(J.eventHandler&&a({event:{type:["JsonLdEvent"],code:"relative object reference",level:"warning",message:"Relative object reference found.",details:{object:W.value}},options:J}),null):W}return sp}var ip,nb;function fI(){if(nb)return ip;nb=1;const{isKeyword:t}=co(),e=ti(),n=gr(),r=Tr(),s=Li(),i=Lr(),{createNodeMap:o,mergeNodeMapGraphs:a}=ud(),l={};ip=l,l.frameMergedOrDefault=(m,v,_)=>{const C={options:_,embedded:!1,graph:"@default",graphMap:{"@default":{}},subjectStack:[],link:{},bnodeMap:{}},$=new r.IdentifierIssuer("_:b");o(m,C.graphMap,"@default",$),_.merged&&(C.graphMap["@merged"]=a(C.graphMap),C.graph="@merged"),C.subjects=C.graphMap[C.graph];const k=[];l.frame(C,Object.keys(C.subjects).sort(),v,k),_.pruneBlankNodeIdentifiers&&(_.bnodesToClear=Object.keys(C.bnodeMap).filter(D=>C.bnodeMap[D].length===1));// remove @preserve from results
return _.link={},w(k,_)},l.frame=(m,v,_,C,$=null)=>{f(_),_=_[0];const k=m.options,D={embed:d(_,k,"embed"),explicit:d(_,k,"explicit"),requireAll:d(_,k,"requireAll")};m.link.hasOwnProperty(m.graph)||(m.link[m.graph]={});const G=m.link[m.graph],J=p(m,v,_,D),W=Object.keys(J).sort();for(const j of W){const se=J[j];if($===null?m.uniqueEmbeds={[m.graph]:{}}:m.uniqueEmbeds[m.graph]=m.uniqueEmbeds[m.graph]||{},D.embed==="@link"&&j in G){x(C,$,G[j]);continue}const R={"@id":j};if(j.indexOf("_:")===0&&r.addValue(m.bnodeMap,j,R,{propertyIsArray:!0}),G[j]=R,(D.embed==="@first"||D.embed==="@last")&&m.is11)throw new i("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:_});if(!(!m.embedded&&m.uniqueEmbeds[m.graph].hasOwnProperty(j))){if(m.embedded&&(D.embed==="@never"||c(se,m.graph,m.subjectStack))){x(C,$,R);continue}if(m.embedded&&(D.embed=="@first"||D.embed=="@once")&&m.uniqueEmbeds[m.graph].hasOwnProperty(j)){x(C,$,R);continue}if(D.embed==="@last"&&j in m.uniqueEmbeds[m.graph]&&g(m,j),m.uniqueEmbeds[m.graph][j]={parent:C,property:$},m.subjectStack.push({subject:se,graph:m.graph}),j in m.graphMap){let V=!1,F=null;"@graph"in _?(F=_["@graph"][0],V=!(j==="@merged"||j==="@default"),n.isObject(F)||(F={})):(V=m.graph!=="@merged",F={}),V&&l.frame({...m,graph:j,embedded:!1},Object.keys(m.graphMap[j]).sort(),[F],R,"@graph")}"@included"in _&&l.frame({...m,embedded:!1},v,_["@included"],R,"@included");for(const V of Object.keys(se).sort()){if(t(V)){if(R[V]=r.clone(se[V]),V==="@type")for(const F of se["@type"])F.indexOf("_:")===0&&r.addValue(m.bnodeMap,F,R,{propertyIsArray:!0});continue}if(!(D.explicit&&!(V in _)))for(const F of se[V]){const ee=V in _?_[V]:u(D);if(e.isList(F)){const z=_[V]&&_[V][0]&&_[V][0]["@list"]?_[V][0]["@list"]:u(D),ie={"@list":[]};x(R,V,ie);const pe=F["@list"];for(const he of pe)e.isSubjectReference(he)?l.frame({...m,embedded:!0},[he["@id"]],z,ie,"@list"):x(ie,"@list",r.clone(he))}else e.isSubjectReference(F)?l.frame({...m,embedded:!0},[F["@id"]],ee,R,V):E(ee[0],F)&&x(R,V,r.clone(F))}}for(const V of Object.keys(_).sort()){if(V==="@type"){if(!n.isObject(_[V][0])||!("@default"in _[V][0]))continue}else if(t(V))continue;const F=_[V][0]||{};if(!d(F,k,"omitDefault")&&!(V in R)){let z="@null";"@default"in F&&(z=r.clone(F["@default"])),n.isArray(z)||(z=[z]),R[V]=[{"@preserve":z}]}}for(const V of Object.keys(_["@reverse"]||{}).sort()){const F=_["@reverse"][V];for(const ee of Object.keys(m.subjects))r.getValues(m.subjects[ee],V).some(ie=>ie["@id"]===j)&&(R["@reverse"]=R["@reverse"]||{},r.addValue(R["@reverse"],V,[],{propertyIsArray:!0}),l.frame({...m,embedded:!0},[ee],F,R["@reverse"][V],$))}x(C,$,R),m.subjectStack.pop()}}},l.cleanupNull=(m,v)=>{if(n.isArray(m))return m.map(C=>l.cleanupNull(C,v)).filter(C=>C);if(m==="@null")return null;if(n.isObject(m)){if("@id"in m){const _=m["@id"];if(v.link.hasOwnProperty(_)){const C=v.link[_].indexOf(m);if(C!==-1)return v.link[_][C];v.link[_].push(m)}else v.link[_]=[m]}for(const _ in m)m[_]=l.cleanupNull(m[_],v)}return m};function u(m){const v={};for(const _ in m)m[_]!==void 0&&(v["@"+_]=[m[_]]);return[v]}function c(m,v,_){for(let C=_.length-1;C>=0;--C){const $=_[C];if($.graph===v&&$.subject["@id"]===m["@id"])return!0}return!1}function d(m,v,_){const C="@"+_;let $=C in m?m[C][0]:v[_];if(_==="embed"){if($===!0)$="@once";else if($===!1)$="@never";else if($!=="@always"&&$!=="@never"&&$!=="@link"&&$!=="@first"&&$!=="@last"&&$!=="@once")throw new i("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:m})}return $}function f(m){if(!n.isArray(m)||m.length!==1||!n.isObject(m[0]))throw new i("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:m});if("@id"in m[0]){for(const v of r.asArray(m[0]["@id"]))if(!(n.isObject(v)||s.isAbsolute(v))||n.isString(v)&&v.indexOf("_:")===0)throw new i("Invalid JSON-LD syntax; invalid @id in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:m})}if("@type"in m[0]){for(const v of r.asArray(m[0]["@type"]))if(!(n.isObject(v)||s.isAbsolute(v)||v==="@json")||n.isString(v)&&v.indexOf("_:")===0)throw new i("Invalid JSON-LD syntax; invalid @type in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:m})}}function p(m,v,_,C){const $={};for(const k of v){const D=m.graphMap[m.graph][k];h(m,D,_,C)&&($[k]=D)}return $}function h(m,v,_,C){let $=!0,k=!1;for(const D in _){let G=!1;const J=r.getValues(v,D),W=r.getValues(_,D).length===0;if(D==="@id"){if(n.isEmptyObject(_["@id"][0]||{})?G=!0:_["@id"].length>=0&&(G=_["@id"].includes(J[0])),!C.requireAll)return G}else if(D==="@type"){if($=!1,W){if(J.length>0)return!1;G=!0}else if(_["@type"].length===1&&n.isEmptyObject(_["@type"][0]))G=J.length>0;else for(const j of _["@type"])n.isObject(j)&&"@default"in j?G=!0:G=G||J.some(se=>se===j);if(!C.requireAll)return G}else{if(t(D))continue;{const j=r.getValues(_,D)[0];let se=!1;if(j&&(f([j]),se="@default"in j),$=!1,J.length===0&&se)continue;if(J.length>0&&W)return!1;if(j===void 0){if(J.length>0)return!1;G=!0}else if(e.isList(j)){const R=j["@list"][0];if(e.isList(J[0])){const V=J[0]["@list"];e.isValue(R)?G=V.some(F=>E(R,F)):(e.isSubject(R)||e.isSubjectReference(R))&&(G=V.some(F=>A(m,R,F,C)))}}else e.isValue(j)?G=J.some(R=>E(j,R)):e.isSubjectReference(j)?G=J.some(R=>A(m,j,R,C)):n.isObject(j)?G=J.length>0:G=!1}}if(!G&&C.requireAll)return!1;k=k||G}return $||k}function g(m,v){const _=m.uniqueEmbeds[m.graph],C=_[v],$=C.parent,k=C.property,D={"@id":v};if(n.isArray($)){for(let J=0;J<$.length;++J)if(r.compareValues($[J],D)){$[J]=D;break}}else{const J=n.isArray($[k]);r.removeValue($,k,D,{propertyIsArray:J}),r.addValue($,k,D,{propertyIsArray:J})}const G=J=>{const W=Object.keys(_);for(const j of W)j in _&&n.isObject(_[j].parent)&&_[j].parent["@id"]===J&&(delete _[j],G(j))};G(v)}/**
 * Removes the @preserve keywords from expanded result of framing.
 *
 * @param input the framed, framed output.
 * @param options the framing options used.
 *
 * @return the resulting output.
 */function w(m,v){if(n.isArray(m))return m.map(_=>w(_,v));if(n.isObject(m)){// remove @preserve
if("@preserve"in m)return m["@preserve"][0];if(e.isValue(m))return m;if(e.isList(m))return m["@list"]=w(m["@list"],v),m;if("@id"in m){const _=m["@id"];if(v.link.hasOwnProperty(_)){const C=v.link[_].indexOf(m);if(C!==-1)return v.link[_][C];v.link[_].push(m)}else v.link[_]=[m]}for(const _ in m){if(_==="@id"&&v.bnodesToClear.includes(m[_])){delete m["@id"];continue}m[_]=w(m[_],v)}}return m}function x(m,v,_){n.isObject(m)?r.addValue(m,v,_,{propertyIsArray:!0}):m.push(_)}function A(m,v,_,C){if(!("@id"in _))return!1;const $=m.subjects[_["@id"]];return $&&h(m,$,v,C)}function E(m,v){const _=v["@value"],C=v["@type"],$=v["@language"],k=m["@value"]?n.isArray(m["@value"])?m["@value"]:[m["@value"]]:[],D=m["@type"]?n.isArray(m["@type"])?m["@type"]:[m["@type"]]:[],G=m["@language"]?n.isArray(m["@language"])?m["@language"]:[m["@language"]]:[];return k.length===0&&D.length===0&&G.length===0?!0:!(!(k.includes(_)||n.isEmptyObject(k[0]))||!(!C&&D.length===0||D.includes(C)||C&&n.isEmptyObject(D[0]))||!(!$&&G.length===0||G.includes($)||$&&n.isEmptyObject(G[0])))}return ip}var op,rb;function pI(){if(rb)return op;rb=1;const t=Lr(),{isArray:e,isObject:n,isString:r,isUndefined:s}=gr(),{isList:i,isValue:o,isGraph:a,isSimpleGraph:l,isSubjectReference:u}=ti(),{expandIri:c,getContextValue:d,isKeyword:f,process:p,processingMode:h}=co(),{removeBase:g,prependBase:w}=Li(),{REGEX_KEYWORD:x,addValue:A,asArray:E,compareShortestLeast:m}=Tr(),v={};op=v,v.compact=async({activeCtx:$,activeProperty:k=null,element:D,options:G={}})=>{if(e(D)){let W=[];for(let j=0;j<D.length;++j){const se=await v.compact({activeCtx:$,activeProperty:k,element:D[j],options:G});se!==null&&W.push(se)}return G.compactArrays&&W.length===1&&(d($,k,"@container")||[]).length===0&&(W=W[0]),W}const J=d($,k,"@context");if(s(J)||($=await p({activeCtx:$,localCtx:J,propagate:!0,overrideProtected:!0,options:G})),n(D)){if(G.link&&"@id"in D&&G.link.hasOwnProperty(D["@id"])){const z=G.link[D["@id"]];for(let ie=0;ie<z.length;++ie)if(z[ie].expanded===D)return z[ie].compacted}if(o(D)||u(D)){const z=v.compactValue({activeCtx:$,activeProperty:k,value:D,options:G});return G.link&&u(D)&&(G.link.hasOwnProperty(D["@id"])||(G.link[D["@id"]]=[]),G.link[D["@id"]].push({expanded:D,compacted:z})),z}if(i(D)&&(d($,k,"@container")||[]).includes("@list"))return v.compact({activeCtx:$,activeProperty:k,element:D["@list"],options:G});const W=k==="@reverse",j={},se=$;!o(D)&&!u(D)&&($=$.revertToPreviousContext());const R=d(se,k,"@context");s(R)||($=await p({activeCtx:$,localCtx:R,propagate:!0,overrideProtected:!0,options:G})),G.link&&"@id"in D&&(G.link.hasOwnProperty(D["@id"])||(G.link[D["@id"]]=[]),G.link[D["@id"]].push({expanded:D,compacted:j}));let V=D["@type"]||[];V.length>1&&(V=Array.from(V).sort());const F=$;for(const z of V){const ie=v.compactIri({activeCtx:F,iri:z,relativeTo:{vocab:!0}}),pe=d(se,ie,"@context");s(pe)||($=await p({activeCtx:$,localCtx:pe,options:G,propagate:!1}))}const ee=Object.keys(D).sort();for(const z of ee){const ie=D[z];if(z==="@id"){let pe=E(ie).map(Ae=>v.compactIri({activeCtx:$,iri:Ae,relativeTo:{vocab:!1},base:G.base}));pe.length===1&&(pe=pe[0]);const he=v.compactIri({activeCtx:$,iri:"@id",relativeTo:{vocab:!0}});j[he]=pe;continue}if(z==="@type"){let pe=E(ie).map(T=>v.compactIri({activeCtx:se,iri:T,relativeTo:{vocab:!0}}));pe.length===1&&(pe=pe[0]);const he=v.compactIri({activeCtx:$,iri:"@type",relativeTo:{vocab:!0}}),te=(d($,he,"@container")||[]).includes("@set")&&h($,1.1)||e(pe)&&ie.length===0;A(j,he,pe,{propertyIsArray:te});continue}if(z==="@reverse"){const pe=await v.compact({activeCtx:$,activeProperty:"@reverse",element:ie,options:G});for(const he in pe)if($.mappings.has(he)&&$.mappings.get(he).reverse){const Ae=pe[he],te=(d($,he,"@container")||[]).includes("@set")||!G.compactArrays;A(j,he,Ae,{propertyIsArray:te}),delete pe[he]}if(Object.keys(pe).length>0){const he=v.compactIri({activeCtx:$,iri:z,relativeTo:{vocab:!0}});A(j,he,pe)}continue}if(z==="@preserve"){const pe=await v.compact({activeCtx:$,activeProperty:k,element:ie,options:G});e(pe)&&pe.length===0||A(j,z,pe);continue}if(z==="@index"){if((d($,k,"@container")||[]).includes("@index"))continue;const he=v.compactIri({activeCtx:$,iri:z,relativeTo:{vocab:!0}});A(j,he,ie);continue}if(z!=="@graph"&&z!=="@list"&&z!=="@included"&&f(z)){const pe=v.compactIri({activeCtx:$,iri:z,relativeTo:{vocab:!0}});A(j,pe,ie);continue}if(!e(ie))throw new t("JSON-LD expansion error; expanded value must be an array.","jsonld.SyntaxError");if(ie.length===0){const pe=v.compactIri({activeCtx:$,iri:z,value:ie,relativeTo:{vocab:!0},reverse:W}),he=$.mappings.has(pe)?$.mappings.get(pe)["@nest"]:null;let Ae=j;he&&(C($,he,G),n(j[he])||(j[he]={}),Ae=j[he]),A(Ae,pe,ie,{propertyIsArray:!0})}for(const pe of ie){const he=v.compactIri({activeCtx:$,iri:z,value:pe,relativeTo:{vocab:!0},reverse:W}),Ae=$.mappings.has(he)?$.mappings.get(he)["@nest"]:null;let X=j;Ae&&(C($,Ae,G),n(j[Ae])||(j[Ae]={}),X=j[Ae]);const te=d($,he,"@container")||[],T=a(pe),Y=i(pe);let re;Y?re=pe["@list"]:T&&(re=pe["@graph"]);let ne=await v.compact({activeCtx:$,activeProperty:he,element:Y||T?re:pe,options:G});if(Y)if(e(ne)||(ne=[ne]),!te.includes("@list"))ne={[v.compactIri({activeCtx:$,iri:"@list",relativeTo:{vocab:!0}})]:ne},"@index"in pe&&(ne[v.compactIri({activeCtx:$,iri:"@index",relativeTo:{vocab:!0}})]=pe["@index"]);else{A(X,he,ne,{valueIsArray:!0,allowDuplicate:!0});continue}if(T)if(te.includes("@graph")&&(te.includes("@id")||te.includes("@index")&&l(pe))){let xe;X.hasOwnProperty(he)?xe=X[he]:X[he]=xe={};const M=(te.includes("@id")?pe["@id"]:pe["@index"])||v.compactIri({activeCtx:$,iri:"@none",relativeTo:{vocab:!0}});A(xe,M,ne,{propertyIsArray:!G.compactArrays||te.includes("@set")})}else te.includes("@graph")&&l(pe)?(e(ne)&&ne.length>1&&(ne={"@included":ne}),A(X,he,ne,{propertyIsArray:!G.compactArrays||te.includes("@set")})):(e(ne)&&ne.length===1&&G.compactArrays&&(ne=ne[0]),ne={[v.compactIri({activeCtx:$,iri:"@graph",relativeTo:{vocab:!0}})]:ne},"@id"in pe&&(ne[v.compactIri({activeCtx:$,iri:"@id",relativeTo:{vocab:!0}})]=pe["@id"]),"@index"in pe&&(ne[v.compactIri({activeCtx:$,iri:"@index",relativeTo:{vocab:!0}})]=pe["@index"]),A(X,he,ne,{propertyIsArray:!G.compactArrays||te.includes("@set")}));else if(te.includes("@language")||te.includes("@index")||te.includes("@id")||te.includes("@type")){let xe;X.hasOwnProperty(he)?xe=X[he]:X[he]=xe={};let M;if(te.includes("@language"))o(ne)&&(ne=ne["@value"]),M=pe["@language"];else if(te.includes("@index")){const P=d($,he,"@index")||"@index",Q=v.compactIri({activeCtx:$,iri:P,relativeTo:{vocab:!0}});if(P==="@index")M=pe["@index"],delete ne[Q];else{let ye;if([M,...ye]=E(ne[P]||[]),!r(M))M=null;else switch(ye.length){case 0:delete ne[P];break;case 1:ne[P]=ye[0];break;default:ne[P]=ye;break}}}else if(te.includes("@id")){const P=v.compactIri({activeCtx:$,iri:"@id",relativeTo:{vocab:!0}});M=ne[P],delete ne[P]}else if(te.includes("@type")){const P=v.compactIri({activeCtx:$,iri:"@type",relativeTo:{vocab:!0}});let Q;switch([M,...Q]=E(ne[P]||[]),Q.length){case 0:delete ne[P];break;case 1:ne[P]=Q[0];break;default:ne[P]=Q;break}Object.keys(ne).length===1&&"@id"in pe&&(ne=await v.compact({activeCtx:$,activeProperty:he,element:{"@id":pe["@id"]},options:G}))}M||(M=v.compactIri({activeCtx:$,iri:"@none",relativeTo:{vocab:!0}})),A(xe,M,ne,{propertyIsArray:te.includes("@set")})}else{const xe=!G.compactArrays||te.includes("@set")||te.includes("@list")||e(ne)&&ne.length===0||z==="@list"||z==="@graph";A(X,he,ne,{propertyIsArray:xe})}}}return j}return D},v.compactIri=({activeCtx:$,iri:k,value:D=null,relativeTo:G={vocab:!1},reverse:J=!1,base:W=null})=>{if(k===null)return k;$.isPropertyTermScoped&&$.previousContext&&($=$.previousContext);const j=$.getInverse();if(f(k)&&k in j&&"@none"in j[k]&&"@type"in j[k]["@none"]&&"@none"in j[k]["@none"]["@type"])return j[k]["@none"]["@type"]["@none"];if(G.vocab&&k in j){const ee=$["@language"]||"@none",z=[];n(D)&&"@index"in D&&!("@graph"in D)&&z.push("@index","@index@set"),n(D)&&"@preserve"in D&&(D=D["@preserve"][0]),a(D)?("@index"in D&&z.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in D&&z.push("@graph@id","@graph@id@set"),z.push("@graph","@graph@set","@set"),"@index"in D||z.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in D||z.push("@graph@id","@graph@id@set")):n(D)&&!o(D)&&z.push("@id","@id@set","@type","@set@type");let ie="@language",pe="@null";if(J)ie="@type",pe="@reverse",z.push("@set");else if(i(D)){"@index"in D||z.push("@list");const Ae=D["@list"];if(Ae.length===0)ie="@any",pe="@none";else{let X=Ae.length===0?ee:null,te=null;for(let T=0;T<Ae.length;++T){const Y=Ae[T];let re="@none",ne="@none";if(o(Y))if("@direction"in Y){const xe=(Y["@language"]||"").toLowerCase(),M=Y["@direction"];re=`${xe}_${M}`}else"@language"in Y?re=Y["@language"].toLowerCase():"@type"in Y?ne=Y["@type"]:re="@null";else ne="@id";if(X===null?X=re:re!==X&&o(Y)&&(X="@none"),te===null?te=ne:ne!==te&&(te="@none"),X==="@none"&&te==="@none")break}X=X||"@none",te=te||"@none",te!=="@none"?(ie="@type",pe=te):pe=X}}else{if(o(D))if("@language"in D&&!("@index"in D)){z.push("@language","@language@set"),pe=D["@language"];const Ae=D["@direction"];Ae&&(pe=`${pe}_${Ae}`)}else"@direction"in D&&!("@index"in D)?pe=`_${D["@direction"]}`:"@type"in D&&(ie="@type",pe=D["@type"]);else ie="@type",pe="@id";z.push("@set")}z.push("@none"),n(D)&&!("@index"in D)&&z.push("@index","@index@set"),o(D)&&Object.keys(D).length===1&&z.push("@language","@language@set");const he=_($,k,D,z,ie,pe);if(he!==null)return he}if(G.vocab&&"@vocab"in $){const ee=$["@vocab"];if(k.indexOf(ee)===0&&k!==ee){const z=k.substr(ee.length);if(!$.mappings.has(z))return z}}let se=null;const R=[];let V=$.fastCurieMap;const F=k.length-1;for(let ee=0;ee<F&&k[ee]in V;++ee)V=V[k[ee]],""in V&&R.push(V[""][0]);for(let ee=R.length-1;ee>=0;--ee){const z=R[ee],ie=z.terms;for(const pe of ie){const he=pe+":"+k.substr(z.iri.length);$.mappings.get(pe)._prefix&&(!$.mappings.has(he)||D===null&&$.mappings.get(he)["@id"]===k)&&(se===null||m(he,se)<0)&&(se=he)}}if(se!==null)return se;for(const[ee,z]of $.mappings)if(z&&z._prefix&&k.startsWith(ee+":"))throw new t(`Absolute IRI "${k}" confused with prefix "${ee}".`,"jsonld.SyntaxError",{code:"IRI confused with prefix",context:$});if(!G.vocab)if("@base"in $)if($["@base"]){const ee=g(w(W,$["@base"]),k);return x.test(ee)?`./${ee}`:ee}else return k;else return g(W,k);return k},v.compactValue=({activeCtx:$,activeProperty:k,value:D,options:G})=>{if(o(D)){const se=d($,k,"@type"),R=d($,k,"@language"),V=d($,k,"@direction"),F=d($,k,"@container")||[],ee="@index"in D&&!F.includes("@index");if(!ee&&se!=="@none"&&(D["@type"]===se||"@language"in D&&D["@language"]===R&&"@direction"in D&&D["@direction"]===V||"@language"in D&&D["@language"]===R||"@direction"in D&&D["@direction"]===V))return D["@value"];const z=Object.keys(D).length,ie=z===1||z===2&&"@index"in D&&!ee,pe="@language"in $,he=r(D["@value"]),Ae=$.mappings.has(k)&&$.mappings.get(k)["@language"]===null;if(ie&&se!=="@none"&&(!pe||!he||Ae))return D["@value"];const X={};return ee&&(X[v.compactIri({activeCtx:$,iri:"@index",relativeTo:{vocab:!0}})]=D["@index"]),"@type"in D?X[v.compactIri({activeCtx:$,iri:"@type",relativeTo:{vocab:!0}})]=v.compactIri({activeCtx:$,iri:D["@type"],relativeTo:{vocab:!0}}):"@language"in D&&(X[v.compactIri({activeCtx:$,iri:"@language",relativeTo:{vocab:!0}})]=D["@language"]),"@direction"in D&&(X[v.compactIri({activeCtx:$,iri:"@direction",relativeTo:{vocab:!0}})]=D["@direction"]),X[v.compactIri({activeCtx:$,iri:"@value",relativeTo:{vocab:!0}})]=D["@value"],X}const J=c($,k,{vocab:!0},G),W=d($,k,"@type"),j=v.compactIri({activeCtx:$,iri:D["@id"],relativeTo:{vocab:W==="@vocab"},base:G.base});return W==="@id"||W==="@vocab"||J==="@graph"?j:{[v.compactIri({activeCtx:$,iri:"@id",relativeTo:{vocab:!0}})]:j}};function _($,k,D,G,J,W){W===null&&(W="@null");const j=[];if((W==="@id"||W==="@reverse")&&n(D)&&"@id"in D){W==="@reverse"&&j.push("@reverse");const R=v.compactIri({activeCtx:$,iri:D["@id"],relativeTo:{vocab:!0}});$.mappings.has(R)&&$.mappings.get(R)&&$.mappings.get(R)["@id"]===D["@id"]?j.push.apply(j,["@vocab","@id"]):j.push.apply(j,["@id","@vocab"])}else{j.push(W);const R=j.find(V=>V.includes("_"));R&&j.push(R.replace(/^[^_]+_/,"_"))}j.push("@none");const se=$.inverse[k];for(const R of G){if(!(R in se))continue;const V=se[R][J];for(const F of j)if(F in V)return V[F]}return null}function C($,k,D){if(c($,k,{vocab:!0},D)!=="@nest")throw new t("JSON-LD compact error; nested property must have an @nest value resolving to @nest.","jsonld.SyntaxError",{code:"invalid @nest value"})}return op}var ap,sb;function hI(){return sb||(sb=1,ap=t=>{class e{toString(){return"[object JsonLdProcessor]"}}return Object.defineProperty(e,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(e.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:e}),e.compact=function(n,r){return arguments.length<2?Promise.reject(new TypeError("Could not compact, too few arguments.")):t.compact(n,r)},e.expand=function(n){return arguments.length<1?Promise.reject(new TypeError("Could not expand, too few arguments.")):t.expand(n)},e.flatten=function(n){return arguments.length<1?Promise.reject(new TypeError("Could not flatten, too few arguments.")):t.flatten(n)},e}),ap}/**
 * A JavaScript implementation of the JSON-LD API.
 *
 * @author Dave Longley
 *
 * @license BSD 3-Clause License
 * Copyright (c) 2011-2022 Digital Bazaar, Inc.
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * Redistributions of source code must retain the above copyright notice,
 * this list of conditions and the following disclaimer.
 *
 * Redistributions in binary form must reproduce the above copyright
 * notice, this list of conditions and the following disclaimer in the
 * documentation and/or other materials provided with the distribution.
 *
 * Neither the name of the Digital Bazaar, Inc. nor the names of its
 * contributors may be used to endorse or promote products derived from
 * this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
 * IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED
 * TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A
 * PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 * HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
 * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */var lp,ib;function mI(){if(ib)return lp;ib=1;const t=Ym(),e=tI(),n=Tr(),r=iI(),s=n.IdentifierIssuer,i=Lr(),o=o1(),a=oI(),{expand:l}=aI(),{flatten:u}=lI(),{fromRDF:c}=uI(),{toRDF:d}=dI(),{frameMergedOrDefault:f,cleanupNull:p}=fI(),{isArray:h,isObject:g,isString:w}=gr(),{isSubjectReference:x}=ti(),{expandIri:A,getInitialContext:E,process:m,processingMode:v}=co(),{compact:_,compactIri:C}=pI(),{createNodeMap:$,createMergedNodeMap:k,mergeNodeMaps:D}=ud(),{logEventHandler:G,logWarningEventHandler:J,safeEventHandler:W,setDefaultEventHandler:j,setupEventHandler:se,strictEventHandler:R,unhandledEventHandler:V}=Bl(),F=function(z){const ie={},he=new o({max:100});z.compact=async function(X,te,T){if(arguments.length<2)throw new TypeError("Could not compact, too few arguments.");if(te===null)throw new i("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"});if(X===null)return null;T=Ae(T,{base:w(X)?X:"",compactArrays:!0,compactToRelative:!0,graph:!1,skipExpansion:!1,link:!1,issuer:new s("_:b"),contextResolver:new r({sharedCache:he})}),T.link&&(T.skipExpansion=!0),T.compactToRelative||delete T.base;let Y;T.skipExpansion?Y=X:Y=await z.expand(X,T);const re=await z.processContext(E(T),te,T);let ne=await _({activeCtx:re,element:Y,options:T});T.compactArrays&&!T.graph&&h(ne)?ne.length===1?ne=ne[0]:ne.length===0&&(ne={}):T.graph&&g(ne)&&(ne=[ne]),g(te)&&"@context"in te&&(te=te["@context"]),te=n.clone(te),h(te)||(te=[te]);const xe=te;te=[];for(let P=0;P<xe.length;++P)(!g(xe[P])||Object.keys(xe[P]).length>0)&&te.push(xe[P]);const M=te.length>0;if(te.length===1&&(te=te[0]),h(ne)){const P=C({activeCtx:re,iri:"@graph",relativeTo:{vocab:!0}}),Q=ne;ne={},M&&(ne["@context"]=te),ne[P]=Q}else if(g(ne)&&M){const P=ne;ne={"@context":te};for(const Q in P)ne[Q]=P[Q]}return ne},z.expand=async function(X,te){if(arguments.length<1)throw new TypeError("Could not expand, too few arguments.");te=Ae(te,{keepFreeFloatingNodes:!1,contextResolver:new r({sharedCache:he})});const T={},Y=[];if("expandContext"in te){const M=n.clone(te.expandContext);g(M)&&"@context"in M?T.expandContext=M:T.expandContext={"@context":M},Y.push(T.expandContext)}let re;if(!w(X))T.input=n.clone(X);else{const M=await z.get(X,te);re=M.documentUrl,T.input=M.document,M.contextUrl&&(T.remoteContext={"@context":M.contextUrl},Y.push(T.remoteContext))}"base"in te||(te.base=re||"");let ne=E(te);for(const M of Y)ne=await m({activeCtx:ne,localCtx:M,options:te});let xe=await l({activeCtx:ne,element:T.input,options:te});return g(xe)&&"@graph"in xe&&Object.keys(xe).length===1?xe=xe["@graph"]:xe===null&&(xe=[]),h(xe)||(xe=[xe]),xe},z.flatten=async function(X,te,T){if(arguments.length<1)return new TypeError("Could not flatten, too few arguments.");typeof te=="function"?te=null:te=te||null,T=Ae(T,{base:w(X)?X:"",contextResolver:new r({sharedCache:he})});const Y=await z.expand(X,T),re=u(Y);return te===null?re:(T.graph=!0,T.skipExpansion=!0,await z.compact(re,te,T))},z.frame=async function(X,te,T){if(arguments.length<2)throw new TypeError("Could not frame, too few arguments.");if(T=Ae(T,{base:w(X)?X:"",embed:"@once",explicit:!1,requireAll:!1,omitDefault:!1,bnodesToClear:[],contextResolver:new r({sharedCache:he})}),w(te)){const _e=await z.get(te,T);if(te=_e.document,_e.contextUrl){let be=te["@context"];be?h(be)?be.push(_e.contextUrl):be=[be,_e.contextUrl]:be=_e.contextUrl,te["@context"]=be}}const Y=te?te["@context"]||{}:{},re=await z.processContext(E(T),Y,T);T.hasOwnProperty("omitGraph")||(T.omitGraph=v(re,1.1)),T.hasOwnProperty("pruneBlankNodeIdentifiers")||(T.pruneBlankNodeIdentifiers=v(re,1.1));const ne=await z.expand(X,T),xe={...T};xe.isFrame=!0,xe.keepFreeFloatingNodes=!0;const M=await z.expand(te,xe),P=Object.keys(te).map(_e=>A(re,_e,{vocab:!0}));xe.merged=!P.includes("@graph"),xe.is11=v(re,1.1);const Q=f(ne,M,xe);xe.graph=!T.omitGraph,xe.skipExpansion=!0,xe.link={},xe.framing=!0;let ye=await z.compact(Q,Y,xe);return xe.link={},ye=p(ye,xe),ye},z.link=async function(X,te,T){const Y={};return te&&(Y["@context"]=te),Y["@embed"]="@link",z.frame(X,Y,T)},z.normalize=z.canonize=async function(X,te){if(arguments.length<1)throw new TypeError("Could not canonize, too few arguments.");if(te=Ae(te,{base:w(X)?X:null,algorithm:"URDNA2015",skipExpansion:!1,safe:!0,contextResolver:new r({sharedCache:he})}),"inputFormat"in te){if(te.inputFormat!=="application/n-quads"&&te.inputFormat!=="application/nquads")throw new i("Unknown canonicalization input format.","jsonld.CanonizeError");const re=a.parse(X);return t.canonize(re,te)}const T={...te};delete T.format,T.produceGeneralizedRdf=!1;const Y=await z.toRDF(X,T);return t.canonize(Y,te)},z.fromRDF=async function(X,te){if(arguments.length<1)throw new TypeError("Could not convert from RDF, too few arguments.");te=Ae(te,{format:w(X)?"application/n-quads":void 0});const{format:T}=te;let{rdfParser:Y}=te;if(T){if(Y=Y||ie[T],!Y)throw new i("Unknown input format.","jsonld.UnknownFormat",{format:T})}else Y=()=>X;const re=await Y(X);return c(re,te)},z.toRDF=async function(X,te){if(arguments.length<1)throw new TypeError("Could not convert to RDF, too few arguments.");te=Ae(te,{base:w(X)?X:"",skipExpansion:!1,contextResolver:new r({sharedCache:he})});let T;te.skipExpansion?T=X:T=await z.expand(X,te);const Y=d(T,te);if(te.format){if(te.format==="application/n-quads"||te.format==="application/nquads")return a.serialize(Y);throw new i("Unknown output format.","jsonld.UnknownFormat",{format:te.format})}return Y},z.createNodeMap=async function(X,te){if(arguments.length<1)throw new TypeError("Could not create node map, too few arguments.");te=Ae(te,{base:w(X)?X:"",contextResolver:new r({sharedCache:he})});const T=await z.expand(X,te);return k(T,te)},z.merge=async function(X,te,T){if(arguments.length<1)throw new TypeError("Could not merge, too few arguments.");if(!h(X))throw new TypeError('Could not merge, "docs" must be an array.');typeof te=="function"?te=null:te=te||null,T=Ae(T,{contextResolver:new r({sharedCache:he})});const Y=await Promise.all(X.map(_e=>{const be={...T};return z.expand(_e,be)}));let re=!0;"mergeNodes"in T&&(re=T.mergeNodes);const ne=T.issuer||new s("_:b"),xe={"@default":{}};for(let _e=0;_e<Y.length;++_e){const be=n.relabelBlankNodes(Y[_e],{issuer:new s("_:b"+_e+"-")}),U=re||_e===0?xe:{"@default":{}};if($(be,U,"@default",ne),U!==xe)for(const B in U){const ce=U[B];if(!(B in xe)){xe[B]=ce;continue}const me=xe[B];for(const Ie in ce)Ie in me||(me[Ie]=ce[Ie])}}const M=D(xe),P=[],Q=Object.keys(M).sort();for(let _e=0;_e<Q.length;++_e){const be=M[Q[_e]];x(be)||P.push(be)}return te===null?P:(T.graph=!0,T.skipExpansion=!0,await z.compact(P,te,T))},Object.defineProperty(z,"documentLoader",{get:()=>z._documentLoader,set:X=>z._documentLoader=X}),z.documentLoader=async X=>{throw new i("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",url:X})},z.get=async function(X,te){let T;typeof te.documentLoader=="function"?T=te.documentLoader:T=z.documentLoader;const Y=await T(X);try{if(!Y.document)throw new i("No remote document found at the given URL.","jsonld.NullRemoteDocument");w(Y.document)&&(Y.document=JSON.parse(Y.document))}catch(re){throw new i("Could not retrieve a JSON-LD document from the URL.","jsonld.LoadDocumentError",{code:"loading document failed",cause:re,remoteDoc:Y})}return Y},z.processContext=async function(X,te,T){return T=Ae(T,{base:"",contextResolver:new r({sharedCache:he})}),te===null?E(T):(te=n.clone(te),g(te)&&"@context"in te||(te={"@context":te}),m({activeCtx:X,localCtx:te,options:T}))},z.getContextValue=co().getContextValue,z.documentLoaders={},z.useDocumentLoader=function(X){if(!(X in z.documentLoaders))throw new i('Unknown document loader type: "'+X+'"',"jsonld.UnknownDocumentLoader",{type:X});z.documentLoader=z.documentLoaders[X].apply(z,Array.prototype.slice.call(arguments,1))},z.registerRDFParser=function(X,te){ie[X]=te},z.unregisterRDFParser=function(X){delete ie[X]},z.registerRDFParser("application/n-quads",a.parse),z.registerRDFParser("application/nquads",a.parse),z.url=Li(),z.logEventHandler=G,z.logWarningEventHandler=J,z.safeEventHandler=W,z.setDefaultEventHandler=j,z.strictEventHandler=R,z.unhandledEventHandler=V,z.util=n,Object.assign(z,n),z.promises=z,z.RequestQueue=i1(),z.JsonLdProcessor=hI()(z),e.setupGlobals(z),e.setupDocumentLoaders(z);function Ae(X,{documentLoader:te=z.documentLoader,...T}){if(X&&"compactionMap"in X)throw new i('"compactionMap" not supported.',"jsonld.OptionsError");if(X&&"expansionMap"in X)throw new i('"expansionMap" not supported.',"jsonld.OptionsError");return Object.assign({},{documentLoader:te},T,X,{eventHandler:se({options:X})})}return z},ee=function(){return F(function(){return ee()})};return F(ee),lp=ee,lp}var gI=mI();const Qm=Hk(gI);var up={exports:{}},cp={exports:{}},ob;function yI(){return ob||(ob=1,(function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e={rotl:function(n,r){return n<<r|n>>>32-r},rotr:function(n,r){return n<<32-r|n>>>r},endian:function(n){if(n.constructor==Number)return e.rotl(n,8)&16711935|e.rotl(n,24)&4278255360;for(var r=0;r<n.length;r++)n[r]=e.endian(n[r]);return n},randomBytes:function(n){for(var r=[];n>0;n--)r.push(Math.floor(Math.random()*256));return r},bytesToWords:function(n){for(var r=[],s=0,i=0;s<n.length;s++,i+=8)r[i>>>5]|=n[s]<<24-i%32;return r},wordsToBytes:function(n){for(var r=[],s=0;s<n.length*32;s+=8)r.push(n[s>>>5]>>>24-s%32&255);return r},bytesToHex:function(n){for(var r=[],s=0;s<n.length;s++)r.push((n[s]>>>4).toString(16)),r.push((n[s]&15).toString(16));return r.join("")},hexToBytes:function(n){for(var r=[],s=0;s<n.length;s+=2)r.push(parseInt(n.substr(s,2),16));return r},bytesToBase64:function(n){for(var r=[],s=0;s<n.length;s+=3)for(var i=n[s]<<16|n[s+1]<<8|n[s+2],o=0;o<4;o++)s*8+o*6<=n.length*8?r.push(t.charAt(i>>>6*(3-o)&63)):r.push("=");return r.join("")},base64ToBytes:function(n){n=n.replace(/[^A-Z0-9+\/]/ig,"");for(var r=[],s=0,i=0;s<n.length;i=++s%4)i!=0&&r.push((t.indexOf(n.charAt(s-1))&Math.pow(2,-2*i+8)-1)<<i*2|t.indexOf(n.charAt(s))>>>6-i*2);return r}};cp.exports=e})()),cp.exports}var dp,ab;function lb(){if(ab)return dp;ab=1;var t={utf8:{stringToBytes:function(e){return t.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(t.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var n=[],r=0;r<e.length;r++)n.push(e.charCodeAt(r)&255);return n},bytesToString:function(e){for(var n=[],r=0;r<e.length;r++)n.push(String.fromCharCode(e[r]));return n.join("")}}};return dp=t,dp}/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var fp,ub;function vI(){if(ub)return fp;ub=1,fp=function(n){return n!=null&&(t(n)||e(n)||!!n._isBuffer)};function t(n){return!!n.constructor&&typeof n.constructor.isBuffer=="function"&&n.constructor.isBuffer(n)}function e(n){return typeof n.readFloatLE=="function"&&typeof n.slice=="function"&&t(n.slice(0,0))}return fp}var cb;function bI(){return cb||(cb=1,(function(){var t=yI(),e=lb().utf8,n=vI(),r=lb().bin,s=function(i,o){i.constructor==String?o&&o.encoding==="binary"?i=r.stringToBytes(i):i=e.stringToBytes(i):n(i)?i=Array.prototype.slice.call(i,0):!Array.isArray(i)&&i.constructor!==Uint8Array&&(i=i.toString());for(var a=t.bytesToWords(i),l=i.length*8,u=1732584193,c=-271733879,d=-1732584194,f=271733878,p=0;p<a.length;p++)a[p]=(a[p]<<8|a[p]>>>24)&16711935|(a[p]<<24|a[p]>>>8)&4278255360;a[l>>>5]|=128<<l%32,a[(l+64>>>9<<4)+14]=l;for(var h=s._ff,g=s._gg,w=s._hh,x=s._ii,p=0;p<a.length;p+=16){var A=u,E=c,m=d,v=f;u=h(u,c,d,f,a[p+0],7,-680876936),f=h(f,u,c,d,a[p+1],12,-389564586),d=h(d,f,u,c,a[p+2],17,606105819),c=h(c,d,f,u,a[p+3],22,-1044525330),u=h(u,c,d,f,a[p+4],7,-176418897),f=h(f,u,c,d,a[p+5],12,1200080426),d=h(d,f,u,c,a[p+6],17,-1473231341),c=h(c,d,f,u,a[p+7],22,-45705983),u=h(u,c,d,f,a[p+8],7,1770035416),f=h(f,u,c,d,a[p+9],12,-1958414417),d=h(d,f,u,c,a[p+10],17,-42063),c=h(c,d,f,u,a[p+11],22,-1990404162),u=h(u,c,d,f,a[p+12],7,1804603682),f=h(f,u,c,d,a[p+13],12,-40341101),d=h(d,f,u,c,a[p+14],17,-1502002290),c=h(c,d,f,u,a[p+15],22,1236535329),u=g(u,c,d,f,a[p+1],5,-165796510),f=g(f,u,c,d,a[p+6],9,-1069501632),d=g(d,f,u,c,a[p+11],14,643717713),c=g(c,d,f,u,a[p+0],20,-373897302),u=g(u,c,d,f,a[p+5],5,-701558691),f=g(f,u,c,d,a[p+10],9,38016083),d=g(d,f,u,c,a[p+15],14,-660478335),c=g(c,d,f,u,a[p+4],20,-405537848),u=g(u,c,d,f,a[p+9],5,568446438),f=g(f,u,c,d,a[p+14],9,-1019803690),d=g(d,f,u,c,a[p+3],14,-187363961),c=g(c,d,f,u,a[p+8],20,1163531501),u=g(u,c,d,f,a[p+13],5,-1444681467),f=g(f,u,c,d,a[p+2],9,-51403784),d=g(d,f,u,c,a[p+7],14,1735328473),c=g(c,d,f,u,a[p+12],20,-1926607734),u=w(u,c,d,f,a[p+5],4,-378558),f=w(f,u,c,d,a[p+8],11,-2022574463),d=w(d,f,u,c,a[p+11],16,1839030562),c=w(c,d,f,u,a[p+14],23,-35309556),u=w(u,c,d,f,a[p+1],4,-1530992060),f=w(f,u,c,d,a[p+4],11,1272893353),d=w(d,f,u,c,a[p+7],16,-155497632),c=w(c,d,f,u,a[p+10],23,-1094730640),u=w(u,c,d,f,a[p+13],4,681279174),f=w(f,u,c,d,a[p+0],11,-358537222),d=w(d,f,u,c,a[p+3],16,-722521979),c=w(c,d,f,u,a[p+6],23,76029189),u=w(u,c,d,f,a[p+9],4,-640364487),f=w(f,u,c,d,a[p+12],11,-421815835),d=w(d,f,u,c,a[p+15],16,530742520),c=w(c,d,f,u,a[p+2],23,-995338651),u=x(u,c,d,f,a[p+0],6,-198630844),f=x(f,u,c,d,a[p+7],10,1126891415),d=x(d,f,u,c,a[p+14],15,-1416354905),c=x(c,d,f,u,a[p+5],21,-57434055),u=x(u,c,d,f,a[p+12],6,1700485571),f=x(f,u,c,d,a[p+3],10,-1894986606),d=x(d,f,u,c,a[p+10],15,-1051523),c=x(c,d,f,u,a[p+1],21,-2054922799),u=x(u,c,d,f,a[p+8],6,1873313359),f=x(f,u,c,d,a[p+15],10,-30611744),d=x(d,f,u,c,a[p+6],15,-1560198380),c=x(c,d,f,u,a[p+13],21,1309151649),u=x(u,c,d,f,a[p+4],6,-145523070),f=x(f,u,c,d,a[p+11],10,-1120210379),d=x(d,f,u,c,a[p+2],15,718787259),c=x(c,d,f,u,a[p+9],21,-343485551),u=u+A>>>0,c=c+E>>>0,d=d+m>>>0,f=f+v>>>0}return t.endian([u,c,d,f])};s._ff=function(i,o,a,l,u,c,d){var f=i+(o&a|~o&l)+(u>>>0)+d;return(f<<c|f>>>32-c)+o},s._gg=function(i,o,a,l,u,c,d){var f=i+(o&l|a&~l)+(u>>>0)+d;return(f<<c|f>>>32-c)+o},s._hh=function(i,o,a,l,u,c,d){var f=i+(o^a^l)+(u>>>0)+d;return(f<<c|f>>>32-c)+o},s._ii=function(i,o,a,l,u,c,d){var f=i+(a^(o|~l))+(u>>>0)+d;return(f<<c|f>>>32-c)+o},s._blocksize=16,s._digestsize=16,up.exports=function(i,o){if(i==null)throw new Error("Illegal argument "+i);var a=t.wordsToBytes(s(i,o));return o&&o.asBytes?a:o&&o.asString?r.bytesToString(a):t.bytesToHex(a)}})()),up.exports}bI();var pp={},Na={},db;function wI(){if(db)return Na;db=1,Na.byteLength=a,Na.toByteArray=u,Na.fromByteArray=f;for(var t=[],e=[],n=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,i=r.length;s<i;++s)t[s]=r[s],e[r.charCodeAt(s)]=s;e[45]=62,e[95]=63;function o(p){var h=p.length;if(h%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var g=p.indexOf("=");g===-1&&(g=h);var w=g===h?0:4-g%4;return[g,w]}function a(p){var h=o(p),g=h[0],w=h[1];return(g+w)*3/4-w}function l(p,h,g){return(h+g)*3/4-g}function u(p){var h,g=o(p),w=g[0],x=g[1],A=new n(l(p,w,x)),E=0,m=x>0?w-4:w,v;for(v=0;v<m;v+=4)h=e[p.charCodeAt(v)]<<18|e[p.charCodeAt(v+1)]<<12|e[p.charCodeAt(v+2)]<<6|e[p.charCodeAt(v+3)],A[E++]=h>>16&255,A[E++]=h>>8&255,A[E++]=h&255;return x===2&&(h=e[p.charCodeAt(v)]<<2|e[p.charCodeAt(v+1)]>>4,A[E++]=h&255),x===1&&(h=e[p.charCodeAt(v)]<<10|e[p.charCodeAt(v+1)]<<4|e[p.charCodeAt(v+2)]>>2,A[E++]=h>>8&255,A[E++]=h&255),A}function c(p){return t[p>>18&63]+t[p>>12&63]+t[p>>6&63]+t[p&63]}function d(p,h,g){for(var w,x=[],A=h;A<g;A+=3)w=(p[A]<<16&16711680)+(p[A+1]<<8&65280)+(p[A+2]&255),x.push(c(w));return x.join("")}function f(p){for(var h,g=p.length,w=g%3,x=[],A=16383,E=0,m=g-w;E<m;E+=A)x.push(d(p,E,E+A>m?m:E+A));return w===1?(h=p[g-1],x.push(t[h>>2]+t[h<<4&63]+"==")):w===2&&(h=(p[g-2]<<8)+p[g-1],x.push(t[h>>10]+t[h>>4&63]+t[h<<2&63]+"=")),x.join("")}return Na}var du={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var fb;function _I(){return fb||(fb=1,du.read=function(t,e,n,r,s){var i,o,a=s*8-r-1,l=(1<<a)-1,u=l>>1,c=-7,d=n?s-1:0,f=n?-1:1,p=t[e+d];for(d+=f,i=p&(1<<-c)-1,p>>=-c,c+=a;c>0;i=i*256+t[e+d],d+=f,c-=8);for(o=i&(1<<-c)-1,i>>=-c,c+=r;c>0;o=o*256+t[e+d],d+=f,c-=8);if(i===0)i=1-u;else{if(i===l)return o?NaN:(p?-1:1)*(1/0);o=o+Math.pow(2,r),i=i-u}return(p?-1:1)*o*Math.pow(2,i-r)},du.write=function(t,e,n,r,s,i){var o,a,l,u=i*8-s-1,c=(1<<u)-1,d=c>>1,f=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:i-1,h=r?1:-1,g=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=c):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+d>=1?e+=f/l:e+=f*Math.pow(2,1-d),e*l>=2&&(o++,l/=2),o+d>=c?(a=0,o=c):o+d>=1?(a=(e*l-1)*Math.pow(2,s),o=o+d):(a=e*Math.pow(2,d-1)*Math.pow(2,s),o=0));s>=8;t[n+p]=a&255,p+=h,a/=256,s-=8);for(o=o<<s|a,u+=s;u>0;t[n+p]=o&255,p+=h,o/=256,u-=8);t[n+p-h]|=g*128}),du}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var pb;function xI(){return pb||(pb=1,(function(t){const e=wI(),n=_I(),r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=a,t.SlowBuffer=A,t.INSPECT_MAX_BYTES=50;const s=2147483647;t.kMaxLength=s,a.TYPED_ARRAY_SUPPORT=i(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{const O=new Uint8Array(1),b={foo:function(){return 42}};return Object.setPrototypeOf(b,Uint8Array.prototype),Object.setPrototypeOf(O,b),O.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function o(O){if(O>s)throw new RangeError('The value "'+O+'" is invalid for option "size"');const b=new Uint8Array(O);return Object.setPrototypeOf(b,a.prototype),b}function a(O,b,S){if(typeof O=="number"){if(typeof b=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return d(O)}return l(O,b,S)}a.poolSize=8192;function l(O,b,S){if(typeof O=="string")return f(O,b);if(ArrayBuffer.isView(O))return h(O);if(O==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof O);if(Ie(O,ArrayBuffer)||O&&Ie(O.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ie(O,SharedArrayBuffer)||O&&Ie(O.buffer,SharedArrayBuffer)))return g(O,b,S);if(typeof O=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const q=O.valueOf&&O.valueOf();if(q!=null&&q!==O)return a.from(q,b,S);const oe=w(O);if(oe)return oe;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof O[Symbol.toPrimitive]=="function")return a.from(O[Symbol.toPrimitive]("string"),b,S);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof O)}a.from=function(O,b,S){return l(O,b,S)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function u(O){if(typeof O!="number")throw new TypeError('"size" argument must be of type number');if(O<0)throw new RangeError('The value "'+O+'" is invalid for option "size"')}function c(O,b,S){return u(O),O<=0?o(O):b!==void 0?typeof S=="string"?o(O).fill(b,S):o(O).fill(b):o(O)}a.alloc=function(O,b,S){return c(O,b,S)};function d(O){return u(O),o(O<0?0:x(O)|0)}a.allocUnsafe=function(O){return d(O)},a.allocUnsafeSlow=function(O){return d(O)};function f(O,b){if((typeof b!="string"||b==="")&&(b="utf8"),!a.isEncoding(b))throw new TypeError("Unknown encoding: "+b);const S=E(O,b)|0;let q=o(S);const oe=q.write(O,b);return oe!==S&&(q=q.slice(0,oe)),q}function p(O){const b=O.length<0?0:x(O.length)|0,S=o(b);for(let q=0;q<b;q+=1)S[q]=O[q]&255;return S}function h(O){if(Ie(O,Uint8Array)){const b=new Uint8Array(O);return g(b.buffer,b.byteOffset,b.byteLength)}return p(O)}function g(O,b,S){if(b<0||O.byteLength<b)throw new RangeError('"offset" is outside of buffer bounds');if(O.byteLength<b+(S||0))throw new RangeError('"length" is outside of buffer bounds');let q;return b===void 0&&S===void 0?q=new Uint8Array(O):S===void 0?q=new Uint8Array(O,b):q=new Uint8Array(O,b,S),Object.setPrototypeOf(q,a.prototype),q}function w(O){if(a.isBuffer(O)){const b=x(O.length)|0,S=o(b);return S.length===0||O.copy(S,0,0,b),S}if(O.length!==void 0)return typeof O.length!="number"||Ce(O.length)?o(0):p(O);if(O.type==="Buffer"&&Array.isArray(O.data))return p(O.data)}function x(O){if(O>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return O|0}function A(O){return+O!=O&&(O=0),a.alloc(+O)}a.isBuffer=function(b){return b!=null&&b._isBuffer===!0&&b!==a.prototype},a.compare=function(b,S){if(Ie(b,Uint8Array)&&(b=a.from(b,b.offset,b.byteLength)),Ie(S,Uint8Array)&&(S=a.from(S,S.offset,S.byteLength)),!a.isBuffer(b)||!a.isBuffer(S))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(b===S)return 0;let q=b.length,oe=S.length;for(let ge=0,Se=Math.min(q,oe);ge<Se;++ge)if(b[ge]!==S[ge]){q=b[ge],oe=S[ge];break}return q<oe?-1:oe<q?1:0},a.isEncoding=function(b){switch(String(b).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(b,S){if(!Array.isArray(b))throw new TypeError('"list" argument must be an Array of Buffers');if(b.length===0)return a.alloc(0);let q;if(S===void 0)for(S=0,q=0;q<b.length;++q)S+=b[q].length;const oe=a.allocUnsafe(S);let ge=0;for(q=0;q<b.length;++q){let Se=b[q];if(Ie(Se,Uint8Array))ge+Se.length>oe.length?(a.isBuffer(Se)||(Se=a.from(Se)),Se.copy(oe,ge)):Uint8Array.prototype.set.call(oe,Se,ge);else if(a.isBuffer(Se))Se.copy(oe,ge);else throw new TypeError('"list" argument must be an Array of Buffers');ge+=Se.length}return oe};function E(O,b){if(a.isBuffer(O))return O.length;if(ArrayBuffer.isView(O)||Ie(O,ArrayBuffer))return O.byteLength;if(typeof O!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof O);const S=O.length,q=arguments.length>2&&arguments[2]===!0;if(!q&&S===0)return 0;let oe=!1;for(;;)switch(b){case"ascii":case"latin1":case"binary":return S;case"utf8":case"utf-8":return be(O).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S*2;case"hex":return S>>>1;case"base64":return ce(O).length;default:if(oe)return q?-1:be(O).length;b=(""+b).toLowerCase(),oe=!0}}a.byteLength=E;function m(O,b,S){let q=!1;if((b===void 0||b<0)&&(b=0),b>this.length||((S===void 0||S>this.length)&&(S=this.length),S<=0)||(S>>>=0,b>>>=0,S<=b))return"";for(O||(O="utf8");;)switch(O){case"hex":return ee(this,b,S);case"utf8":case"utf-8":return j(this,b,S);case"ascii":return V(this,b,S);case"latin1":case"binary":return F(this,b,S);case"base64":return W(this,b,S);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return z(this,b,S);default:if(q)throw new TypeError("Unknown encoding: "+O);O=(O+"").toLowerCase(),q=!0}}a.prototype._isBuffer=!0;function v(O,b,S){const q=O[b];O[b]=O[S],O[S]=q}a.prototype.swap16=function(){const b=this.length;if(b%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let S=0;S<b;S+=2)v(this,S,S+1);return this},a.prototype.swap32=function(){const b=this.length;if(b%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let S=0;S<b;S+=4)v(this,S,S+3),v(this,S+1,S+2);return this},a.prototype.swap64=function(){const b=this.length;if(b%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let S=0;S<b;S+=8)v(this,S,S+7),v(this,S+1,S+6),v(this,S+2,S+5),v(this,S+3,S+4);return this},a.prototype.toString=function(){const b=this.length;return b===0?"":arguments.length===0?j(this,0,b):m.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(b){if(!a.isBuffer(b))throw new TypeError("Argument must be a Buffer");return this===b?!0:a.compare(this,b)===0},a.prototype.inspect=function(){let b="";const S=t.INSPECT_MAX_BYTES;return b=this.toString("hex",0,S).replace(/(.{2})/g,"$1 ").trim(),this.length>S&&(b+=" ... "),"<Buffer "+b+">"},r&&(a.prototype[r]=a.prototype.inspect),a.prototype.compare=function(b,S,q,oe,ge){if(Ie(b,Uint8Array)&&(b=a.from(b,b.offset,b.byteLength)),!a.isBuffer(b))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof b);if(S===void 0&&(S=0),q===void 0&&(q=b?b.length:0),oe===void 0&&(oe=0),ge===void 0&&(ge=this.length),S<0||q>b.length||oe<0||ge>this.length)throw new RangeError("out of range index");if(oe>=ge&&S>=q)return 0;if(oe>=ge)return-1;if(S>=q)return 1;if(S>>>=0,q>>>=0,oe>>>=0,ge>>>=0,this===b)return 0;let Se=ge-oe,Je=q-S;const We=Math.min(Se,Je),Xe=this.slice(oe,ge),St=b.slice(S,q);for(let lt=0;lt<We;++lt)if(Xe[lt]!==St[lt]){Se=Xe[lt],Je=St[lt];break}return Se<Je?-1:Je<Se?1:0};function _(O,b,S,q,oe){if(O.length===0)return-1;if(typeof S=="string"?(q=S,S=0):S>2147483647?S=2147483647:S<-2147483648&&(S=-2147483648),S=+S,Ce(S)&&(S=oe?0:O.length-1),S<0&&(S=O.length+S),S>=O.length){if(oe)return-1;S=O.length-1}else if(S<0)if(oe)S=0;else return-1;if(typeof b=="string"&&(b=a.from(b,q)),a.isBuffer(b))return b.length===0?-1:C(O,b,S,q,oe);if(typeof b=="number")return b=b&255,typeof Uint8Array.prototype.indexOf=="function"?oe?Uint8Array.prototype.indexOf.call(O,b,S):Uint8Array.prototype.lastIndexOf.call(O,b,S):C(O,[b],S,q,oe);throw new TypeError("val must be string, number or Buffer")}function C(O,b,S,q,oe){let ge=1,Se=O.length,Je=b.length;if(q!==void 0&&(q=String(q).toLowerCase(),q==="ucs2"||q==="ucs-2"||q==="utf16le"||q==="utf-16le")){if(O.length<2||b.length<2)return-1;ge=2,Se/=2,Je/=2,S/=2}function We(St,lt){return ge===1?St[lt]:St.readUInt16BE(lt*ge)}let Xe;if(oe){let St=-1;for(Xe=S;Xe<Se;Xe++)if(We(O,Xe)===We(b,St===-1?0:Xe-St)){if(St===-1&&(St=Xe),Xe-St+1===Je)return St*ge}else St!==-1&&(Xe-=Xe-St),St=-1}else for(S+Je>Se&&(S=Se-Je),Xe=S;Xe>=0;Xe--){let St=!0;for(let lt=0;lt<Je;lt++)if(We(O,Xe+lt)!==We(b,lt)){St=!1;break}if(St)return Xe}return-1}a.prototype.includes=function(b,S,q){return this.indexOf(b,S,q)!==-1},a.prototype.indexOf=function(b,S,q){return _(this,b,S,q,!0)},a.prototype.lastIndexOf=function(b,S,q){return _(this,b,S,q,!1)};function $(O,b,S,q){S=Number(S)||0;const oe=O.length-S;q?(q=Number(q),q>oe&&(q=oe)):q=oe;const ge=b.length;q>ge/2&&(q=ge/2);let Se;for(Se=0;Se<q;++Se){const Je=parseInt(b.substr(Se*2,2),16);if(Ce(Je))return Se;O[S+Se]=Je}return Se}function k(O,b,S,q){return me(be(b,O.length-S),O,S,q)}function D(O,b,S,q){return me(U(b),O,S,q)}function G(O,b,S,q){return me(ce(b),O,S,q)}function J(O,b,S,q){return me(B(b,O.length-S),O,S,q)}a.prototype.write=function(b,S,q,oe){if(S===void 0)oe="utf8",q=this.length,S=0;else if(q===void 0&&typeof S=="string")oe=S,q=this.length,S=0;else if(isFinite(S))S=S>>>0,isFinite(q)?(q=q>>>0,oe===void 0&&(oe="utf8")):(oe=q,q=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const ge=this.length-S;if((q===void 0||q>ge)&&(q=ge),b.length>0&&(q<0||S<0)||S>this.length)throw new RangeError("Attempt to write outside buffer bounds");oe||(oe="utf8");let Se=!1;for(;;)switch(oe){case"hex":return $(this,b,S,q);case"utf8":case"utf-8":return k(this,b,S,q);case"ascii":case"latin1":case"binary":return D(this,b,S,q);case"base64":return G(this,b,S,q);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return J(this,b,S,q);default:if(Se)throw new TypeError("Unknown encoding: "+oe);oe=(""+oe).toLowerCase(),Se=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function W(O,b,S){return b===0&&S===O.length?e.fromByteArray(O):e.fromByteArray(O.slice(b,S))}function j(O,b,S){S=Math.min(O.length,S);const q=[];let oe=b;for(;oe<S;){const ge=O[oe];let Se=null,Je=ge>239?4:ge>223?3:ge>191?2:1;if(oe+Je<=S){let We,Xe,St,lt;switch(Je){case 1:ge<128&&(Se=ge);break;case 2:We=O[oe+1],(We&192)===128&&(lt=(ge&31)<<6|We&63,lt>127&&(Se=lt));break;case 3:We=O[oe+1],Xe=O[oe+2],(We&192)===128&&(Xe&192)===128&&(lt=(ge&15)<<12|(We&63)<<6|Xe&63,lt>2047&&(lt<55296||lt>57343)&&(Se=lt));break;case 4:We=O[oe+1],Xe=O[oe+2],St=O[oe+3],(We&192)===128&&(Xe&192)===128&&(St&192)===128&&(lt=(ge&15)<<18|(We&63)<<12|(Xe&63)<<6|St&63,lt>65535&&lt<1114112&&(Se=lt))}}Se===null?(Se=65533,Je=1):Se>65535&&(Se-=65536,q.push(Se>>>10&1023|55296),Se=56320|Se&1023),q.push(Se),oe+=Je}return R(q)}const se=4096;function R(O){const b=O.length;if(b<=se)return String.fromCharCode.apply(String,O);let S="",q=0;for(;q<b;)S+=String.fromCharCode.apply(String,O.slice(q,q+=se));return S}function V(O,b,S){let q="";S=Math.min(O.length,S);for(let oe=b;oe<S;++oe)q+=String.fromCharCode(O[oe]&127);return q}function F(O,b,S){let q="";S=Math.min(O.length,S);for(let oe=b;oe<S;++oe)q+=String.fromCharCode(O[oe]);return q}function ee(O,b,S){const q=O.length;(!b||b<0)&&(b=0),(!S||S<0||S>q)&&(S=q);let oe="";for(let ge=b;ge<S;++ge)oe+=de[O[ge]];return oe}function z(O,b,S){const q=O.slice(b,S);let oe="";for(let ge=0;ge<q.length-1;ge+=2)oe+=String.fromCharCode(q[ge]+q[ge+1]*256);return oe}a.prototype.slice=function(b,S){const q=this.length;b=~~b,S=S===void 0?q:~~S,b<0?(b+=q,b<0&&(b=0)):b>q&&(b=q),S<0?(S+=q,S<0&&(S=0)):S>q&&(S=q),S<b&&(S=b);const oe=this.subarray(b,S);return Object.setPrototypeOf(oe,a.prototype),oe};function ie(O,b,S){if(O%1!==0||O<0)throw new RangeError("offset is not uint");if(O+b>S)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(b,S,q){b=b>>>0,S=S>>>0,q||ie(b,S,this.length);let oe=this[b],ge=1,Se=0;for(;++Se<S&&(ge*=256);)oe+=this[b+Se]*ge;return oe},a.prototype.readUintBE=a.prototype.readUIntBE=function(b,S,q){b=b>>>0,S=S>>>0,q||ie(b,S,this.length);let oe=this[b+--S],ge=1;for(;S>0&&(ge*=256);)oe+=this[b+--S]*ge;return oe},a.prototype.readUint8=a.prototype.readUInt8=function(b,S){return b=b>>>0,S||ie(b,1,this.length),this[b]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(b,S){return b=b>>>0,S||ie(b,2,this.length),this[b]|this[b+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(b,S){return b=b>>>0,S||ie(b,2,this.length),this[b]<<8|this[b+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(b,S){return b=b>>>0,S||ie(b,4,this.length),(this[b]|this[b+1]<<8|this[b+2]<<16)+this[b+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(b,S){return b=b>>>0,S||ie(b,4,this.length),this[b]*16777216+(this[b+1]<<16|this[b+2]<<8|this[b+3])},a.prototype.readBigUInt64LE=ve(function(b){b=b>>>0,P(b,"offset");const S=this[b],q=this[b+7];(S===void 0||q===void 0)&&Q(b,this.length-8);const oe=S+this[++b]*2**8+this[++b]*2**16+this[++b]*2**24,ge=this[++b]+this[++b]*2**8+this[++b]*2**16+q*2**24;return BigInt(oe)+(BigInt(ge)<<BigInt(32))}),a.prototype.readBigUInt64BE=ve(function(b){b=b>>>0,P(b,"offset");const S=this[b],q=this[b+7];(S===void 0||q===void 0)&&Q(b,this.length-8);const oe=S*2**24+this[++b]*2**16+this[++b]*2**8+this[++b],ge=this[++b]*2**24+this[++b]*2**16+this[++b]*2**8+q;return(BigInt(oe)<<BigInt(32))+BigInt(ge)}),a.prototype.readIntLE=function(b,S,q){b=b>>>0,S=S>>>0,q||ie(b,S,this.length);let oe=this[b],ge=1,Se=0;for(;++Se<S&&(ge*=256);)oe+=this[b+Se]*ge;return ge*=128,oe>=ge&&(oe-=Math.pow(2,8*S)),oe},a.prototype.readIntBE=function(b,S,q){b=b>>>0,S=S>>>0,q||ie(b,S,this.length);let oe=S,ge=1,Se=this[b+--oe];for(;oe>0&&(ge*=256);)Se+=this[b+--oe]*ge;return ge*=128,Se>=ge&&(Se-=Math.pow(2,8*S)),Se},a.prototype.readInt8=function(b,S){return b=b>>>0,S||ie(b,1,this.length),this[b]&128?(255-this[b]+1)*-1:this[b]},a.prototype.readInt16LE=function(b,S){b=b>>>0,S||ie(b,2,this.length);const q=this[b]|this[b+1]<<8;return q&32768?q|4294901760:q},a.prototype.readInt16BE=function(b,S){b=b>>>0,S||ie(b,2,this.length);const q=this[b+1]|this[b]<<8;return q&32768?q|4294901760:q},a.prototype.readInt32LE=function(b,S){return b=b>>>0,S||ie(b,4,this.length),this[b]|this[b+1]<<8|this[b+2]<<16|this[b+3]<<24},a.prototype.readInt32BE=function(b,S){return b=b>>>0,S||ie(b,4,this.length),this[b]<<24|this[b+1]<<16|this[b+2]<<8|this[b+3]},a.prototype.readBigInt64LE=ve(function(b){b=b>>>0,P(b,"offset");const S=this[b],q=this[b+7];(S===void 0||q===void 0)&&Q(b,this.length-8);const oe=this[b+4]+this[b+5]*2**8+this[b+6]*2**16+(q<<24);return(BigInt(oe)<<BigInt(32))+BigInt(S+this[++b]*2**8+this[++b]*2**16+this[++b]*2**24)}),a.prototype.readBigInt64BE=ve(function(b){b=b>>>0,P(b,"offset");const S=this[b],q=this[b+7];(S===void 0||q===void 0)&&Q(b,this.length-8);const oe=(S<<24)+this[++b]*2**16+this[++b]*2**8+this[++b];return(BigInt(oe)<<BigInt(32))+BigInt(this[++b]*2**24+this[++b]*2**16+this[++b]*2**8+q)}),a.prototype.readFloatLE=function(b,S){return b=b>>>0,S||ie(b,4,this.length),n.read(this,b,!0,23,4)},a.prototype.readFloatBE=function(b,S){return b=b>>>0,S||ie(b,4,this.length),n.read(this,b,!1,23,4)},a.prototype.readDoubleLE=function(b,S){return b=b>>>0,S||ie(b,8,this.length),n.read(this,b,!0,52,8)},a.prototype.readDoubleBE=function(b,S){return b=b>>>0,S||ie(b,8,this.length),n.read(this,b,!1,52,8)};function pe(O,b,S,q,oe,ge){if(!a.isBuffer(O))throw new TypeError('"buffer" argument must be a Buffer instance');if(b>oe||b<ge)throw new RangeError('"value" argument is out of bounds');if(S+q>O.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(b,S,q,oe){if(b=+b,S=S>>>0,q=q>>>0,!oe){const Je=Math.pow(2,8*q)-1;pe(this,b,S,q,Je,0)}let ge=1,Se=0;for(this[S]=b&255;++Se<q&&(ge*=256);)this[S+Se]=b/ge&255;return S+q},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(b,S,q,oe){if(b=+b,S=S>>>0,q=q>>>0,!oe){const Je=Math.pow(2,8*q)-1;pe(this,b,S,q,Je,0)}let ge=q-1,Se=1;for(this[S+ge]=b&255;--ge>=0&&(Se*=256);)this[S+ge]=b/Se&255;return S+q},a.prototype.writeUint8=a.prototype.writeUInt8=function(b,S,q){return b=+b,S=S>>>0,q||pe(this,b,S,1,255,0),this[S]=b&255,S+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(b,S,q){return b=+b,S=S>>>0,q||pe(this,b,S,2,65535,0),this[S]=b&255,this[S+1]=b>>>8,S+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(b,S,q){return b=+b,S=S>>>0,q||pe(this,b,S,2,65535,0),this[S]=b>>>8,this[S+1]=b&255,S+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(b,S,q){return b=+b,S=S>>>0,q||pe(this,b,S,4,4294967295,0),this[S+3]=b>>>24,this[S+2]=b>>>16,this[S+1]=b>>>8,this[S]=b&255,S+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(b,S,q){return b=+b,S=S>>>0,q||pe(this,b,S,4,4294967295,0),this[S]=b>>>24,this[S+1]=b>>>16,this[S+2]=b>>>8,this[S+3]=b&255,S+4};function he(O,b,S,q,oe){M(b,q,oe,O,S,7);let ge=Number(b&BigInt(4294967295));O[S++]=ge,ge=ge>>8,O[S++]=ge,ge=ge>>8,O[S++]=ge,ge=ge>>8,O[S++]=ge;let Se=Number(b>>BigInt(32)&BigInt(4294967295));return O[S++]=Se,Se=Se>>8,O[S++]=Se,Se=Se>>8,O[S++]=Se,Se=Se>>8,O[S++]=Se,S}function Ae(O,b,S,q,oe){M(b,q,oe,O,S,7);let ge=Number(b&BigInt(4294967295));O[S+7]=ge,ge=ge>>8,O[S+6]=ge,ge=ge>>8,O[S+5]=ge,ge=ge>>8,O[S+4]=ge;let Se=Number(b>>BigInt(32)&BigInt(4294967295));return O[S+3]=Se,Se=Se>>8,O[S+2]=Se,Se=Se>>8,O[S+1]=Se,Se=Se>>8,O[S]=Se,S+8}a.prototype.writeBigUInt64LE=ve(function(b,S=0){return he(this,b,S,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=ve(function(b,S=0){return Ae(this,b,S,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(b,S,q,oe){if(b=+b,S=S>>>0,!oe){const We=Math.pow(2,8*q-1);pe(this,b,S,q,We-1,-We)}let ge=0,Se=1,Je=0;for(this[S]=b&255;++ge<q&&(Se*=256);)b<0&&Je===0&&this[S+ge-1]!==0&&(Je=1),this[S+ge]=(b/Se>>0)-Je&255;return S+q},a.prototype.writeIntBE=function(b,S,q,oe){if(b=+b,S=S>>>0,!oe){const We=Math.pow(2,8*q-1);pe(this,b,S,q,We-1,-We)}let ge=q-1,Se=1,Je=0;for(this[S+ge]=b&255;--ge>=0&&(Se*=256);)b<0&&Je===0&&this[S+ge+1]!==0&&(Je=1),this[S+ge]=(b/Se>>0)-Je&255;return S+q},a.prototype.writeInt8=function(b,S,q){return b=+b,S=S>>>0,q||pe(this,b,S,1,127,-128),b<0&&(b=255+b+1),this[S]=b&255,S+1},a.prototype.writeInt16LE=function(b,S,q){return b=+b,S=S>>>0,q||pe(this,b,S,2,32767,-32768),this[S]=b&255,this[S+1]=b>>>8,S+2},a.prototype.writeInt16BE=function(b,S,q){return b=+b,S=S>>>0,q||pe(this,b,S,2,32767,-32768),this[S]=b>>>8,this[S+1]=b&255,S+2},a.prototype.writeInt32LE=function(b,S,q){return b=+b,S=S>>>0,q||pe(this,b,S,4,2147483647,-2147483648),this[S]=b&255,this[S+1]=b>>>8,this[S+2]=b>>>16,this[S+3]=b>>>24,S+4},a.prototype.writeInt32BE=function(b,S,q){return b=+b,S=S>>>0,q||pe(this,b,S,4,2147483647,-2147483648),b<0&&(b=4294967295+b+1),this[S]=b>>>24,this[S+1]=b>>>16,this[S+2]=b>>>8,this[S+3]=b&255,S+4},a.prototype.writeBigInt64LE=ve(function(b,S=0){return he(this,b,S,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=ve(function(b,S=0){return Ae(this,b,S,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function X(O,b,S,q,oe,ge){if(S+q>O.length)throw new RangeError("Index out of range");if(S<0)throw new RangeError("Index out of range")}function te(O,b,S,q,oe){return b=+b,S=S>>>0,oe||X(O,b,S,4),n.write(O,b,S,q,23,4),S+4}a.prototype.writeFloatLE=function(b,S,q){return te(this,b,S,!0,q)},a.prototype.writeFloatBE=function(b,S,q){return te(this,b,S,!1,q)};function T(O,b,S,q,oe){return b=+b,S=S>>>0,oe||X(O,b,S,8),n.write(O,b,S,q,52,8),S+8}a.prototype.writeDoubleLE=function(b,S,q){return T(this,b,S,!0,q)},a.prototype.writeDoubleBE=function(b,S,q){return T(this,b,S,!1,q)},a.prototype.copy=function(b,S,q,oe){if(!a.isBuffer(b))throw new TypeError("argument should be a Buffer");if(q||(q=0),!oe&&oe!==0&&(oe=this.length),S>=b.length&&(S=b.length),S||(S=0),oe>0&&oe<q&&(oe=q),oe===q||b.length===0||this.length===0)return 0;if(S<0)throw new RangeError("targetStart out of bounds");if(q<0||q>=this.length)throw new RangeError("Index out of range");if(oe<0)throw new RangeError("sourceEnd out of bounds");oe>this.length&&(oe=this.length),b.length-S<oe-q&&(oe=b.length-S+q);const ge=oe-q;return this===b&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(S,q,oe):Uint8Array.prototype.set.call(b,this.subarray(q,oe),S),ge},a.prototype.fill=function(b,S,q,oe){if(typeof b=="string"){if(typeof S=="string"?(oe=S,S=0,q=this.length):typeof q=="string"&&(oe=q,q=this.length),oe!==void 0&&typeof oe!="string")throw new TypeError("encoding must be a string");if(typeof oe=="string"&&!a.isEncoding(oe))throw new TypeError("Unknown encoding: "+oe);if(b.length===1){const Se=b.charCodeAt(0);(oe==="utf8"&&Se<128||oe==="latin1")&&(b=Se)}}else typeof b=="number"?b=b&255:typeof b=="boolean"&&(b=Number(b));if(S<0||this.length<S||this.length<q)throw new RangeError("Out of range index");if(q<=S)return this;S=S>>>0,q=q===void 0?this.length:q>>>0,b||(b=0);let ge;if(typeof b=="number")for(ge=S;ge<q;++ge)this[ge]=b;else{const Se=a.isBuffer(b)?b:a.from(b,oe),Je=Se.length;if(Je===0)throw new TypeError('The value "'+b+'" is invalid for argument "value"');for(ge=0;ge<q-S;++ge)this[ge+S]=Se[ge%Je]}return this};const Y={};function re(O,b,S){Y[O]=class extends S{constructor(){super(),Object.defineProperty(this,"message",{value:b.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${O}]`,this.stack,delete this.name}get code(){return O}set code(oe){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:oe,writable:!0})}toString(){return`${this.name} [${O}]: ${this.message}`}}}re("ERR_BUFFER_OUT_OF_BOUNDS",function(O){return O?`${O} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),re("ERR_INVALID_ARG_TYPE",function(O,b){return`The "${O}" argument must be of type number. Received type ${typeof b}`},TypeError),re("ERR_OUT_OF_RANGE",function(O,b,S){let q=`The value of "${O}" is out of range.`,oe=S;return Number.isInteger(S)&&Math.abs(S)>2**32?oe=ne(String(S)):typeof S=="bigint"&&(oe=String(S),(S>BigInt(2)**BigInt(32)||S<-(BigInt(2)**BigInt(32)))&&(oe=ne(oe)),oe+="n"),q+=` It must be ${b}. Received ${oe}`,q},RangeError);function ne(O){let b="",S=O.length;const q=O[0]==="-"?1:0;for(;S>=q+4;S-=3)b=`_${O.slice(S-3,S)}${b}`;return`${O.slice(0,S)}${b}`}function xe(O,b,S){P(b,"offset"),(O[b]===void 0||O[b+S]===void 0)&&Q(b,O.length-(S+1))}function M(O,b,S,q,oe,ge){if(O>S||O<b){const Se=typeof b=="bigint"?"n":"";let Je;throw b===0||b===BigInt(0)?Je=`>= 0${Se} and < 2${Se} ** ${(ge+1)*8}${Se}`:Je=`>= -(2${Se} ** ${(ge+1)*8-1}${Se}) and < 2 ** ${(ge+1)*8-1}${Se}`,new Y.ERR_OUT_OF_RANGE("value",Je,O)}xe(q,oe,ge)}function P(O,b){if(typeof O!="number")throw new Y.ERR_INVALID_ARG_TYPE(b,"number",O)}function Q(O,b,S){throw Math.floor(O)!==O?(P(O,S),new Y.ERR_OUT_OF_RANGE("offset","an integer",O)):b<0?new Y.ERR_BUFFER_OUT_OF_BOUNDS:new Y.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${b}`,O)}const ye=/[^+/0-9A-Za-z-_]/g;function _e(O){if(O=O.split("=")[0],O=O.trim().replace(ye,""),O.length<2)return"";for(;O.length%4!==0;)O=O+"=";return O}function be(O,b){b=b||1/0;let S;const q=O.length;let oe=null;const ge=[];for(let Se=0;Se<q;++Se){if(S=O.charCodeAt(Se),S>55295&&S<57344){if(!oe){if(S>56319){(b-=3)>-1&&ge.push(239,191,189);continue}else if(Se+1===q){(b-=3)>-1&&ge.push(239,191,189);continue}oe=S;continue}if(S<56320){(b-=3)>-1&&ge.push(239,191,189),oe=S;continue}S=(oe-55296<<10|S-56320)+65536}else oe&&(b-=3)>-1&&ge.push(239,191,189);if(oe=null,S<128){if((b-=1)<0)break;ge.push(S)}else if(S<2048){if((b-=2)<0)break;ge.push(S>>6|192,S&63|128)}else if(S<65536){if((b-=3)<0)break;ge.push(S>>12|224,S>>6&63|128,S&63|128)}else if(S<1114112){if((b-=4)<0)break;ge.push(S>>18|240,S>>12&63|128,S>>6&63|128,S&63|128)}else throw new Error("Invalid code point")}return ge}function U(O){const b=[];for(let S=0;S<O.length;++S)b.push(O.charCodeAt(S)&255);return b}function B(O,b){let S,q,oe;const ge=[];for(let Se=0;Se<O.length&&!((b-=2)<0);++Se)S=O.charCodeAt(Se),q=S>>8,oe=S%256,ge.push(oe),ge.push(q);return ge}function ce(O){return e.toByteArray(_e(O))}function me(O,b,S,q){let oe;for(oe=0;oe<q&&!(oe+S>=b.length||oe>=O.length);++oe)b[oe+S]=O[oe];return oe}function Ie(O,b){return O instanceof b||O!=null&&O.constructor!=null&&O.constructor.name!=null&&O.constructor.name===b.name}function Ce(O){return O!==O}const de=(function(){const O="0123456789abcdef",b=new Array(256);for(let S=0;S<16;++S){const q=S*16;for(let oe=0;oe<16;++oe)b[q+oe]=O[S]+O[oe]}return b})();function ve(O){return typeof BigInt>"u"?Oe:O}function Oe(){throw new Error("BigInt not supported")}})(pp)),pp}var SI=xI();const Fa="http://www.w3.org/1999/02/22-rdf-syntax-ns#",ja="http://www.w3.org/2001/XMLSchema#",fu="http://www.w3.org/2000/10/swap/",br={xsd:{decimal:`${ja}decimal`,boolean:`${ja}boolean`,double:`${ja}double`,integer:`${ja}integer`,string:`${ja}string`},rdf:{type:`${Fa}type`,nil:`${Fa}nil`,first:`${Fa}first`,rest:`${Fa}rest`,langString:`${Fa}langString`},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:`${fu}reify#forSome`,forAll:`${fu}reify#forAll`},log:{implies:`${fu}log#implies`,isImpliedBy:`${fu}log#isImpliedBy`}},{xsd:pu}=br,EI=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,hb={"\\":"\\","'":"'",'"':'"',n:`
`,r:"\r",t:"	",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},AI=/[\x00-\x20<>\\"\{\}\|\^\`]/,CI={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},$I=/$0^/;class kI{constructor(e){if(this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<>]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<>])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<>]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<>])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<>])/,this._keyword=/^@[a-z]+(?=[\s#<:])/i,this._sparqlKeyword=/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s#()\[\]\{\}"'<>])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,e=e||{},this._isImpliedBy=e.isImpliedBy,this._lineMode=!!e.lineMode){this._n3Mode=!1;for(const n in this)!(n in CI)&&this[n]instanceof RegExp&&(this[n]=$I)}else this._n3Mode=e.n3!==!1;this.comments=!!e.comments,this._literalClosingPos=0}_tokenizeToEnd(e,n){let r=this._input,s=r.length;for(;;){let a,l;for(;a=this._newline.exec(r);)this.comments&&(l=this._comment.exec(a[0]))&&i("comment",l[1],"",this._line,a[0].length),r=r.substr(a[0].length,r.length),s=r.length,this._line++;if(!a&&(a=this._whitespace.exec(r))&&(r=r.substr(a[0].length,r.length)),this._endOfFile.test(r))return n&&(this.comments&&(l=this._comment.exec(r))&&i("comment",l[1],"",this._line,r.length),r=null,i("eof","","",this._line,0)),this._input=r;const u=this._line,c=r[0];let d="",f="",p="",h=null,g=0,w=!1;switch(c){case"^":if(r.length<3)break;if(r[1]==="^"){if(this._previousMarker="^^",r=r.substr(2),r[0]!=="<"){w=!0;break}}else{this._n3Mode&&(g=1,d="^");break}case"<":if(h=this._unescapedIri.exec(r))d="IRI",f=h[1];else if(h=this._iri.exec(r)){if(f=this._unescape(h[1]),f===null||AI.test(f))return o(this);d="IRI"}else r.length>1&&r[1]==="<"?(d="<<",g=2):this._n3Mode&&r.length>1&&r[1]==="="&&(g=2,this._isImpliedBy?(d="abbreviation",f="<"):(d="inverse",f=">"));break;case">":r.length>1&&r[1]===">"&&(d=">>",g=2);break;case"_":((h=this._blank.exec(r))||n&&(h=this._blank.exec(`${r} `)))&&(d="blank",p="_",f=h[1]);break;case'"':if(h=this._simpleQuotedString.exec(r))f=h[1];else if({value:f,matchLength:g}=this._parseLiteral(r),f===null)return o(this);(h!==null||g!==0)&&(d="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(h=this._simpleApostropheString.exec(r))f=h[1];else if({value:f,matchLength:g}=this._parseLiteral(r),f===null)return o(this);(h!==null||g!==0)&&(d="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(h=this._variable.exec(r))&&(d="var",f=h[0]);break;case"@":this._previousMarker==="literal"&&(h=this._langcode.exec(r))?(d="langcode",f=h[1]):(h=this._keyword.exec(r))&&(d=h[0]);break;case".":if(r.length===1?n:r[1]<"0"||r[1]>"9"){d=".",g=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(h=this._number.exec(r)||n&&(h=this._number.exec(`${r} `)))&&(d="literal",f=h[0],p=typeof h[1]=="string"?pu.double:typeof h[2]=="string"?pu.decimal:pu.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":(h=this._sparqlKeyword.exec(r))?d=h[0].toUpperCase():w=!0;break;case"f":case"t":(h=this._boolean.exec(r))?(d="literal",f=h[0],p=pu.boolean):w=!0;break;case"a":(h=this._shortPredicates.exec(r))?(d="abbreviation",f="a"):w=!0;break;case"=":this._n3Mode&&r.length>1&&(d="abbreviation",r[1]!==">"?(g=1,f="="):(g=2,f=">"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"}":this._lineMode||(g=1,d=c);break;case"{":!this._lineMode&&r.length>=2&&(r[1]==="|"?(d="{|",g=2):(d=c,g=1));break;case"|":r.length>=2&&r[1]==="}"&&(d="|}",g=2);break;default:w=!0}if(w&&((this._previousMarker==="@prefix"||this._previousMarker==="PREFIX")&&(h=this._prefix.exec(r))?(d="prefix",f=h[1]||""):((h=this._prefixed.exec(r))||n&&(h=this._prefixed.exec(`${r} `)))&&(d="prefixed",p=h[1]||"",f=this._unescape(h[2]))),this._previousMarker==="^^")switch(d){case"prefixed":d="type";break;case"IRI":d="typeIRI";break;default:d=""}if(!d)return n||!/^'''|^"""/.test(r)&&/\n|\r/.test(r)?o(this):this._input=r;const x=g||h[0].length,A=i(d,f,p,u,x);this.previousToken=A,this._previousMarker=d,r=r.substr(x,r.length)}function i(a,l,u,c,d){const f=r?s-r.length:s,p=f+d,h={type:a,value:l,prefix:u,line:c,start:f,end:p};return e(null,h),h}function o(a){e(a._syntaxError(/^\S*/.exec(r)[0]))}}_unescape(e){let n=!1;const r=e.replace(EI,(s,i,o,a)=>{if(typeof i=="string")return String.fromCharCode(Number.parseInt(i,16));if(typeof o=="string"){let l=Number.parseInt(o,16);return l<=65535?String.fromCharCode(Number.parseInt(o,16)):String.fromCharCode(55296+((l-=65536)>>10),56320+(l&1023))}return a in hb?hb[a]:(n=!0,"")});return n?null:r}_parseLiteral(e){if(e.length>=3){const n=e.match(/^(?:"""|"|'''|'|)/)[0],r=n.length;let s=Math.max(this._literalClosingPos,r);for(;(s=e.indexOf(n,s))>0;){let i=0;for(;e[s-i-1]==="\\";)i++;if(i%2===0){const o=e.substring(r,s),a=o.split(/\r\n|\r|\n/).length-1,l=s+r;if(r===1&&a!==0||r===3&&this._lineMode)break;return this._line+=a,{value:this._unescape(o),matchLength:l}}s++}this._literalClosingPos=e.length-r+1}return{value:"",matchLength:0}}_syntaxError(e){this._input=null;const n=new Error(`Unexpected "${e}" on line ${this._line}.`);return n.context={token:void 0,line:this._line,previousToken:this.previousToken},n}_readStartingBom(e){return e.startsWith("\uFEFF")?e.substr(1):e}tokenize(e,n){if(this._line=1,typeof e=="string")if(this._input=this._readStartingBom(e),typeof n=="function")queueMicrotask(()=>this._tokenizeToEnd(n,!0));else{const r=[];let s;if(this._tokenizeToEnd((i,o)=>i?s=i:r.push(o),!0),s)throw s;return r}else this._pendingBuffer=null,typeof e.setEncoding=="function"&&e.setEncoding("utf8"),e.on("data",r=>{this._input!==null&&r.length!==0&&(this._pendingBuffer&&(r=SI.Buffer.concat([this._pendingBuffer,r]),this._pendingBuffer=null),r[r.length-1]&128?this._pendingBuffer=r:(typeof this._input>"u"?this._input=this._readStartingBom(typeof r=="string"?r:r.toString()):this._input+=r,this._tokenizeToEnd(n,!1)))}),e.on("end",()=>{typeof this._input=="string"&&this._tokenizeToEnd(n,!0)}),e.on("error",n)}}const{rdf:II,xsd:Po}=br;let zl,RI=0;const a1={namedNode:c1,blankNode:d1,variable:p1,literal:f1,defaultGraph:PI,quad:Ch,triple:Ch,fromTerm:nl,fromQuad:h1};class _s{constructor(e){this.id=e}get value(){return this.id}equals(e){return e instanceof _s?this.id===e.id:!!e&&this.termType===e.termType&&this.value===e.value}hashCode(){return 0}toJSON(){return{termType:this.termType,value:this.value}}}class l1 extends _s{get termType(){return"NamedNode"}}class al extends _s{get termType(){return"Literal"}get value(){return this.id.substring(1,this.id.lastIndexOf('"'))}get language(){const e=this.id;let n=e.lastIndexOf('"')+1;return n<e.length&&e[n++]==="@"?e.substr(n).toLowerCase():""}get datatype(){return new l1(this.datatypeString)}get datatypeString(){const e=this.id,n=e.lastIndexOf('"')+1,r=n<e.length?e[n]:"";return r==="^"?e.substr(n+2):r!=="@"?Po.string:II.langString}equals(e){return e instanceof al?this.id===e.id:!!e&&!!e.datatype&&this.termType===e.termType&&this.value===e.value&&this.language===e.language&&this.datatype.value===e.datatype.value}toJSON(){return{termType:this.termType,value:this.value,language:this.language,datatype:{termType:"NamedNode",value:this.datatypeString}}}}class OI extends _s{constructor(e){super(`_:${e}`)}get termType(){return"BlankNode"}get value(){return this.id.substr(2)}}class TI extends _s{constructor(e){super(`?${e}`)}get termType(){return"Variable"}get value(){return this.id.substr(1)}}class DI extends _s{constructor(){return super(""),zl||this}get termType(){return"DefaultGraph"}equals(e){return this===e||!!e&&this.termType===e.termType}}zl=new DI;class u1 extends _s{constructor(e,n,r,s){super(""),this._subject=e,this._predicate=n,this._object=r,this._graph=s||zl}get termType(){return"Quad"}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}get graph(){return this._graph}toJSON(){return{termType:this.termType,subject:this._subject.toJSON(),predicate:this._predicate.toJSON(),object:this._object.toJSON(),graph:this._graph.toJSON()}}equals(e){return!!e&&this._subject.equals(e.subject)&&this._predicate.equals(e.predicate)&&this._object.equals(e.object)&&this._graph.equals(e.graph)}}function c1(t){return new l1(t)}function d1(t){return new OI(t||`n3-${RI++}`)}function f1(t,e){if(typeof e=="string")return new al(`"${t}"@${e.toLowerCase()}`);let n=e?e.value:"";return n===""&&(typeof t=="boolean"?n=Po.boolean:typeof t=="number"&&(Number.isFinite(t)?n=Number.isInteger(t)?Po.integer:Po.double:(n=Po.double,Number.isNaN(t)||(t=t>0?"INF":"-INF")))),n===""||n===Po.string?new al(`"${t}"`):new al(`"${t}"^^${n}`)}function p1(t){return new TI(t)}function PI(){return zl}function Ch(t,e,n,r){return new u1(t,e,n,r)}function nl(t){if(t instanceof _s)return t;switch(t.termType){case"NamedNode":return c1(t.value);case"BlankNode":return d1(t.value);case"Variable":return p1(t.value);case"DefaultGraph":return zl;case"Literal":return f1(t.value,t.language||t.datatype);case"Quad":return h1(t);default:throw new Error(`Unexpected termType: ${t.termType}`)}}function h1(t){if(t instanceof u1)return t;if(t.termType!=="Quad")throw new Error(`Unexpected termType: ${t.termType}`);return Ch(nl(t.subject),nl(t.predicate),nl(t.object),nl(t.graph))}let mb=0;class m1{constructor(e){this._contextStack=[],this._graph=null,e=e||{},this._setBase(e.baseIRI),e.factory&&g1(this,e.factory);const n=typeof e.format=="string"?e.format.match(/\w*$/)[0].toLowerCase():"",r=/turtle/.test(n),s=/trig/.test(n),i=/triple/.test(n),o=/quad/.test(n),a=this._n3Mode=/n3/.test(n),l=i||o;(this._supportsNamedGraphs=!(r||a))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(r||s||i||a),this._isImpliedBy=e.isImpliedBy,this._supportsRDFStar=n===""||/star|\*$/.test(n),l&&(this._resolveRelativeIRI=u=>null),this._blankNodePrefix=typeof e.blankNodePrefix!="string"?"":e.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=e.lexer||new kI({lineMode:l,n3:a,isImpliedBy:this._isImpliedBy}),this._explicitQuantifiers=!!e.explicitQuantifiers}static _resetBlankNodePrefix(){mb=0}_setBase(e){if(!e)this._base="",this._basePath="";else{const n=e.indexOf("#");n>=0&&(e=e.substr(0,n)),this._base=e,this._basePath=e.indexOf("/")<0?e:e.replace(/[^\/?]*(?:\?.*)?$/,""),e=e.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=e[0],this._baseScheme=e[1]}}_saveContext(e,n,r,s,i){const o=this._n3Mode;this._contextStack.push({type:e,subject:r,predicate:s,object:i,graph:n,inverse:o?this._inversePredicate:!1,blankPrefix:o?this._prefixes._:"",quantified:o?this._quantified:null}),o&&(this._inversePredicate=!1,this._prefixes._=this._graph?`${this._graph.value}.`:".",this._quantified=Object.create(this._quantified))}_restoreContext(e,n){const r=this._contextStack.pop();if(!r||r.type!==e)return this._error(`Unexpected ${n.type}`,n);this._subject=r.subject,this._predicate=r.predicate,this._object=r.object,this._graph=r.graph,this._n3Mode&&(this._inversePredicate=r.inverse,this._prefixes._=r.blankPrefix,this._quantified=r.quantified)}_readInTopContext(e){switch(e.type){case"eof":return this._graph!==null?this._error("Unclosed graph",e):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(e)}}_readEntity(e,n){let r;switch(e.type){case"IRI":case"typeIRI":const s=this._resolveIRI(e.value);if(s===null)return this._error("Invalid IRI",e);r=this._factory.namedNode(s);break;case"type":case"prefixed":const i=this._prefixes[e.prefix];if(i===void 0)return this._error(`Undefined prefix "${e.prefix}:"`,e);r=this._factory.namedNode(i+e.value);break;case"blank":r=this._factory.blankNode(this._prefixes[e.prefix]+e.value);break;case"var":r=this._factory.variable(e.value.substr(1));break;default:return this._error(`Expected entity but got ${e.type}`,e)}return!n&&this._n3Mode&&r.id in this._quantified&&(r=this._quantified[r.id]),r}_readSubject(e){switch(this._predicate=null,e.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._factory.blankNode(),null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph=this._factory.blankNode(),null,null),this._readSubject):this._error("Unexpected graph",e);case"}":return this._readPunctuation(e);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier="blankNode",this._readQuantifierList):this._error('Unexpected "@forSome"',e);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORALL,this._quantifier="variable",this._readQuantifierList):this._error('Unexpected "@forAll"',e);case"literal":if(!this._n3Mode)return this._error("Unexpected literal",e);if(e.prefix.length===0)return this._literalValue=e.value,this._completeSubjectLiteral;this._subject=this._factory.literal(e.value,this._factory.namedNode(e.prefix));break;case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,null,null,null),this._graph=null,this._readSubject):this._error("Unexpected RDF-star syntax",e);default:if((this._subject=this._readEntity(e))===void 0)return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}_readPredicate(e){const n=e.type;switch(n){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[e.value];break;case".":case"]":case"}":return this._predicate===null?this._error(`Unexpected ${n}`,e):(this._subject=null,n==="]"?this._readBlankNodeTail(e):this._readPunctuation(e));case";":return this._predicate!==null?this._readPredicate:this._error("Expected predicate but got ;",e);case"[":if(this._n3Mode)return this._saveContext("blank",this._graph,this._subject,this._subject=this._factory.blankNode(),null),this._readBlankNodeHead;case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",e);default:if((this._predicate=this._readEntity(e))===void 0)return}return this._readObject}_readObject(e){switch(e.type){case"literal":if(e.prefix.length===0)return this._literalValue=e.value,this._readDataTypeOrLang;this._object=this._factory.literal(e.value,this._factory.namedNode(e.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._factory.blankNode()),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._factory.blankNode()),this._readSubject):this._error("Unexpected graph",e);case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject):this._error("Unexpected RDF-star syntax",e);default:if((this._object=this._readEntity(e))===void 0)return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}_readPredicateOrNamedGraph(e){return e.type==="{"?this._readGraph(e):this._readPredicate(e)}_readGraph(e){return e.type!=="{"?this._error(`Expected graph but got ${e.type}`,e):(this._graph=this._subject,this._subject=null,this._readSubject)}_readBlankNodeHead(e){return e.type==="]"?(this._subject=null,this._readBlankNodeTail(e)):(this._predicate=null,this._readPredicate(e))}_readBlankNodeTail(e){if(e.type!=="]")return this._readBlankNodePunctuation(e);this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph);const n=this._predicate===null;return this._restoreContext("blank",e),this._object!==null?this._getContextEndReader():this._predicate!==null?this._readObject:n?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank}_readPredicateAfterBlank(e){switch(e.type){case".":case"}":return this._subject=null,this._readPunctuation(e);default:return this._readPredicate(e)}}_readListItem(e){let n=null,r=null,s=this._readListItem;const i=this._subject,o=this._contextStack,a=o[o.length-1];switch(e.type){case"[":this._saveContext("blank",this._graph,r=this._factory.blankNode(),this.RDF_FIRST,this._subject=n=this._factory.blankNode()),s=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,r=this._factory.blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext("list",e),o.length!==0&&o[o.length-1].type==="list"&&this._emit(this._subject,this._predicate,this._object,this._graph),this._predicate===null){if(s=this._readPredicate,this._subject===this.RDF_NIL)return s}else if(s=this._getContextEndReader(),this._object===this.RDF_NIL)return s;r=this.RDF_NIL;break;case"literal":e.prefix.length===0?(this._literalValue=e.value,s=this._readListItemDataTypeOrLang):(n=this._factory.literal(e.value,this._factory.namedNode(e.prefix)),s=this._getContextEndReader());break;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._factory.blankNode()),this._readSubject):this._error("Unexpected graph",e);default:if((n=this._readEntity(e))===void 0)return}if(r===null&&(this._subject=r=this._factory.blankNode()),i===null?a.predicate===null?a.subject=r:a.object=r:this._emit(i,this.RDF_REST,r,this._graph),n!==null){if(this._n3Mode&&(e.type==="IRI"||e.type==="prefixed"))return this._saveContext("item",this._graph,r,this.RDF_FIRST,n),this._subject=n,this._predicate=null,this._getPathReader(this._readListItem);this._emit(r,this.RDF_FIRST,n,this._graph)}return s}_readDataTypeOrLang(e){return this._completeObjectLiteral(e,!1)}_readListItemDataTypeOrLang(e){return this._completeObjectLiteral(e,!0)}_completeLiteral(e){let n=this._factory.literal(this._literalValue);switch(e.type){case"type":case"typeIRI":const r=this._readEntity(e);if(r===void 0)return;n=this._factory.literal(this._literalValue,r),e=null;break;case"langcode":n=this._factory.literal(this._literalValue,e.value),e=null;break}return{token:e,literal:n}}_completeSubjectLiteral(e){return this._subject=this._completeLiteral(e).literal,this._readPredicateOrNamedGraph}_completeObjectLiteral(e,n){const r=this._completeLiteral(e);if(r)return this._object=r.literal,n&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),r.token===null?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(r.token))}_readFormulaTail(e){return e.type!=="}"?this._readPunctuation(e):(this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext("formula",e),this._object===null?this._readPredicate:this._getContextEndReader())}_readPunctuation(e){let n,r=this._graph;const s=this._subject,i=this._inversePredicate;switch(e.type){case"}":if(this._graph===null)return this._error("Unexpected graph closing",e);if(this._n3Mode)return this._readFormulaTail(e);this._graph=null;case".":this._subject=null,n=this._contextStack.length?this._readSubject:this._readInTopContext,i&&(this._inversePredicate=!1);break;case";":n=this._readPredicate;break;case",":n=this._readObject;break;case"{|":if(!this._supportsRDFStar)return this._error("Unexpected RDF-star syntax",e);const o=this._predicate,a=this._object;this._subject=this._factory.quad(s,o,a,this.DEFAULTGRAPH),n=this._readPredicate;break;case"|}":if(this._subject.termType!=="Quad")return this._error("Unexpected asserted triple closing",e);this._subject=null,n=this._readPunctuation;break;default:if(this._supportsQuads&&this._graph===null&&(r=this._readEntity(e))!==void 0){n=this._readQuadPunctuation;break}return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}if(s!==null){const o=this._predicate,a=this._object;i?this._emit(a,o,s,r):this._emit(s,o,a,r)}return n}_readBlankNodePunctuation(e){let n;switch(e.type){case";":n=this._readPredicate;break;case",":n=this._readObject;break;default:return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}return this._emit(this._subject,this._predicate,this._object,this._graph),n}_readQuadPunctuation(e){return e.type!=="."?this._error("Expected dot to follow quad",e):this._readInTopContext}_readPrefix(e){return e.type!=="prefix"?this._error("Expected prefix to follow @prefix",e):(this._prefix=e.value,this._readPrefixIRI)}_readPrefixIRI(e){if(e.type!=="IRI")return this._error(`Expected IRI to follow prefix "${this._prefix}:"`,e);const n=this._readEntity(e);return this._prefixes[this._prefix]=n.value,this._prefixCallback(this._prefix,n),this._readDeclarationPunctuation}_readBaseIRI(e){const n=e.type==="IRI"&&this._resolveIRI(e.value);return n?(this._setBase(n),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",e)}_readNamedGraphLabel(e){switch(e.type){case"IRI":case"blank":case"prefixed":return this._readSubject(e),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",e)}}_readNamedGraphBlankLabel(e){return e.type!=="]"?this._error("Invalid graph label",e):(this._subject=this._factory.blankNode(),this._readGraph)}_readDeclarationPunctuation(e){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(e)):e.type!=="."?this._error("Expected declaration to end with a dot",e):this._readInTopContext}_readQuantifierList(e){let n;switch(e.type){case"IRI":case"prefixed":if((n=this._readEntity(e,!0))!==void 0)break;default:return this._error(`Unexpected ${e.type}`,e)}return this._explicitQuantifiers?(this._subject===null?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._factory.blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._factory.blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,n,this.QUANTIFIERS_GRAPH)):this._quantified[n.id]=this._factory[this._quantifier](this._factory.blankNode().value),this._readQuantifierPunctuation}_readQuantifierPunctuation(e){return e.type===","?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(e))}_getPathReader(e){return this._afterPath=e,this._readPath}_readPath(e){switch(e.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:const n=this._contextStack,r=n.length&&n[n.length-1];if(r&&r.type==="item"){const s=this._subject;this._restoreContext("item",e),this._emit(this._subject,this.RDF_FIRST,s,this._graph)}return this._afterPath(e)}}_readForwardPath(e){let n,r;const s=this._factory.blankNode();if((r=this._readEntity(e))!==void 0)return this._predicate===null?(n=this._subject,this._subject=s):(n=this._object,this._object=s),this._emit(n,r,s,this._graph),this._readPath}_readBackwardPath(e){const n=this._factory.blankNode();let r,s;if((r=this._readEntity(e))!==void 0)return this._predicate===null?(s=this._subject,this._subject=n):(s=this._object,this._object=n),this._emit(n,r,s,this._graph),this._readPath}_readRDFStarTailOrGraph(e){return e.type!==">>"?this._supportsQuads&&this._graph===null&&(this._graph=this._readEntity(e))!==void 0?this._readRDFStarTail:this._error(`Expected >> to follow "${this._object.id}"`,e):this._readRDFStarTail(e)}_readRDFStarTail(e){if(e.type!==">>")return this._error(`Expected >> but got ${e.type}`,e);const n=this._factory.quad(this._subject,this._predicate,this._object,this._graph||this.DEFAULTGRAPH);return this._restoreContext("<<",e),this._subject===null?(this._subject=n,this._readPredicate):(this._object=n,this._getContextEndReader())}_getContextEndReader(){const e=this._contextStack;if(!e.length)return this._readPunctuation;switch(e[e.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail;case"<<":return this._readRDFStarTailOrGraph}}_emit(e,n,r,s){this._callback(null,this._factory.quad(e,n,r,s||this.DEFAULTGRAPH))}_error(e,n){const r=new Error(`${e} on line ${n.line}.`);r.context={token:n,line:n.line,previousToken:this._lexer.previousToken},this._callback(r),this._callback=hu}_resolveIRI(e){return/^[a-z][a-z0-9+.-]*:/i.test(e)?e:this._resolveRelativeIRI(e)}_resolveRelativeIRI(e){if(!e.length)return this._base;switch(e[0]){case"#":return this._base+e;case"?":return this._base.replace(/(?:\?.*)?$/,e);case"/":return(e[1]==="/"?this._baseScheme:this._baseRoot)+this._removeDotSegments(e);default:return/^[^/:]*:/.test(e)?null:this._removeDotSegments(this._basePath+e)}}_removeDotSegments(e){if(!/(^|\/)\.\.?($|[/#?])/.test(e))return e;const n=e.length;let r="",s=-1,i=-1,o=0,a="/";for(;s<n;){switch(a){case":":if(i<0&&e[++s]==="/"&&e[++s]==="/")for(;(i=s+1)<n&&e[i]!=="/";)s=i;break;case"?":case"#":s=n;break;case"/":if(e[s+1]===".")switch(a=e[++s+1],a){case"/":r+=e.substring(o,s-1),o=s+1;break;case void 0:case"?":case"#":return r+e.substring(o,s)+e.substr(s+1);case".":if(a=e[++s+1],a===void 0||a==="/"||a==="?"||a==="#"){if(r+=e.substring(o,s-2),(o=r.lastIndexOf("/"))>=i&&(r=r.substr(0,o)),a!=="/")return`${r}/${e.substr(s+1)}`;o=s+1}}}a=e[++s]}return r+e.substring(o)}parse(e,n,r){let s,i,o;if(n&&(n.onQuad||n.onPrefix||n.onComment)?(s=n.onQuad,i=n.onPrefix,o=n.onComment):(s=n,i=r),this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):`b${mb++}_`,this._prefixCallback=i||hu,this._inversePredicate=!1,this._quantified=Object.create(null),!s){const l=[];let u;if(this._callback=(c,d)=>{c?u=c:d&&l.push(d)},this._lexer.tokenize(e).every(c=>this._readCallback=this._readCallback(c)),u)throw u;return l}let a=(l,u)=>{l!==null?(this._callback(l),this._callback=hu):this._readCallback&&(this._readCallback=this._readCallback(u))};o&&(this._lexer.comments=!0,a=(l,u)=>{l!==null?(this._callback(l),this._callback=hu):this._readCallback&&(u.type==="comment"?o(u.value):this._readCallback=this._readCallback(u))}),this._callback=s,this._lexer.tokenize(e,a)}}function hu(){}function g1(t,e){t._factory=e,t.DEFAULTGRAPH=e.defaultGraph(),t.RDF_FIRST=e.namedNode(br.rdf.first),t.RDF_REST=e.namedNode(br.rdf.rest),t.RDF_NIL=e.namedNode(br.rdf.nil),t.N3_FORALL=e.namedNode(br.r.forAll),t.N3_FORSOME=e.namedNode(br.r.forSome),t.ABBREVIATIONS={a:e.namedNode(br.rdf.type),"=":e.namedNode(br.owl.sameAs),">":e.namedNode(br.log.implies),"<":e.namedNode(br.log.isImpliedBy)},t.QUANTIFIERS_GRAPH=e.namedNode("urn:n3:quantifiers")}g1(m1.prototype,a1);function MI(t){return!!t&&t.termType==="DefaultGraph"}function Ju(t){return t.replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&")}const LI=/^:?[^:?#]*(?:[?#]|$)|^file:|^[^:]*:\/*[^?#]+?\/(?:\.\.?(?:\/|$)|\/)/i,NI=/^(?:(?:[^/?#]{3,}|\.?[^/?#.]\.?)(?:\/[^/?#]{3,}|\.?[^/?#.]\.?)*\/?)?(?:[?#]|$)/,gb="./",FI="../",hp="?",yb="#";class Zm{constructor(e){this.base=e,this._baseLength=0,this._baseMatcher=null,this._pathReplacements=new Array(e.length+1)}static supports(e){return!LI.test(e)}_getBaseMatcher(){if(this._baseMatcher)return this._baseMatcher;if(!Zm.supports(this.base))return this._baseMatcher=/.^/;const e=/^[^:]*:\/*/.exec(this.base)[0],n=["^",Ju(e)],r=[],s=[],i=/[^/?#]*([/?#])/y;let o,a=0,l=0,u=i.lastIndex=e.length;for(;!a&&!l&&(o=i.exec(this.base));)o[1]===yb?l=i.lastIndex-1:(n.push(Ju(o[0]),"(?:"),r.push(")?"),o[1]!==hp?s.push(u=i.lastIndex):(a=u=i.lastIndex,l=this.base.indexOf(yb,a),this._pathReplacements[a]=hp));for(let c=0;c<s.length;c++)this._pathReplacements[s[c]]=FI.repeat(s.length-c-1);return this._pathReplacements[s[s.length-1]]=gb,this._baseLength=l>0?l:this.base.length,n.push(Ju(this.base.substring(u,this._baseLength)),a?"(?:#|$)":"(?:[?#]|$)"),this._baseMatcher=new RegExp([...n,...r].join(""))}toRelative(e){const n=this._getBaseMatcher().exec(e);if(!n)return e;const r=n[0].length;if(r===this._baseLength&&r===e.length)return"";const s=this._pathReplacements[r];if(s){const i=e.substring(r);return s!==hp&&!NI.test(i)?e:s===gb&&/^[^?#]/.test(i)?i:s+i}return e.substring(r-1)}}const qa=a1.defaultGraph(),{rdf:jI,xsd:Co}=br,vb=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,bb=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,qI={"\\":"\\\\",'"':'\\"',"	":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};class Ua extends _s{equals(e){return e===this}}class UI{constructor(e,n){if(this._prefixRegex=/$0^/,e&&typeof e.write!="function"&&(n=e,e=null),n=n||{},this._lists=n.lists,e)this._outputStream=e,this._endStream=n.end===void 0?!0:!!n.end;else{let r="";this._outputStream={write(s,i,o){r+=s,o&&o()},end:s=>{s&&s(null,r)}},this._endStream=!0}this._subject=null,/triple|quad/i.test(n.format)?(this._lineMode=!0,this._writeQuad=this._writeQuadLine):(this._lineMode=!1,this._graph=qa,this._prefixIRIs=Object.create(null),n.prefixes&&this.addPrefixes(n.prefixes),n.baseIRI&&(this._baseIri=new Zm(n.baseIRI)))}get _inDefaultGraph(){return qa.equals(this._graph)}_write(e,n){this._outputStream.write(e,"utf8",n)}_writeQuad(e,n,r,s,i){try{s.equals(this._graph)||(this._write((this._subject===null?"":this._inDefaultGraph?`.
`:`
}
`)+(qa.equals(s)?"":`${this._encodeIriOrBlank(s)} {
`)),this._graph=s,this._subject=null),e.equals(this._subject)?n.equals(this._predicate)?this._write(`, ${this._encodeObject(r)}`,i):this._write(`;
    ${this._encodePredicate(this._predicate=n)} ${this._encodeObject(r)}`,i):this._write(`${(this._subject===null?"":`.
`)+this._encodeSubject(this._subject=e)} ${this._encodePredicate(this._predicate=n)} ${this._encodeObject(r)}`,i)}catch(o){i&&i(o)}}_writeQuadLine(e,n,r,s,i){delete this._prefixMatch,this._write(this.quadToString(e,n,r,s),i)}quadToString(e,n,r,s){return`${this._encodeSubject(e)} ${this._encodeIriOrBlank(n)} ${this._encodeObject(r)}${s&&s.value?` ${this._encodeIriOrBlank(s)} .
`:` .
`}`}quadsToString(e){let n="";for(const r of e)n+=this.quadToString(r.subject,r.predicate,r.object,r.graph);return n}_encodeSubject(e){return e.termType==="Quad"?this._encodeQuad(e):this._encodeIriOrBlank(e)}_encodeIriOrBlank(e){if(e.termType!=="NamedNode")return this._lists&&e.value in this._lists&&(e=this.list(this._lists[e.value])),"id"in e?e.id:`_:${e.value}`;let n=e.value;this._baseIri&&(n=this._baseIri.toRelative(n)),vb.test(n)&&(n=n.replace(bb,wb));const r=this._prefixRegex.exec(n);return r?r[1]?this._prefixIRIs[r[1]]+r[2]:n:`<${n}>`}_encodeLiteral(e){let n=e.value;if(vb.test(n)&&(n=n.replace(bb,wb)),e.language)return`"${n}"@${e.language}`;if(this._lineMode){if(e.datatype.value===Co.string)return`"${n}"`}else switch(e.datatype.value){case Co.string:return`"${n}"`;case Co.boolean:if(n==="true"||n==="false")return n;break;case Co.integer:if(/^[+-]?\d+$/.test(n))return n;break;case Co.decimal:if(/^[+-]?\d*\.\d+$/.test(n))return n;break;case Co.double:if(/^[+-]?(?:\d+\.\d*|\.?\d+)[eE][+-]?\d+$/.test(n))return n;break}return`"${n}"^^${this._encodeIriOrBlank(e.datatype)}`}_encodePredicate(e){return e.value===jI.type?"a":this._encodeIriOrBlank(e)}_encodeObject(e){switch(e.termType){case"Quad":return this._encodeQuad(e);case"Literal":return this._encodeLiteral(e);default:return this._encodeIriOrBlank(e)}}_encodeQuad({subject:e,predicate:n,object:r,graph:s}){return`<<${this._encodeSubject(e)} ${this._encodePredicate(n)} ${this._encodeObject(r)}${MI(s)?"":` ${this._encodeIriOrBlank(s)}`}>>`}_blockedWrite(){throw new Error("Cannot write because the writer has been closed.")}addQuad(e,n,r,s,i){r===void 0?this._writeQuad(e.subject,e.predicate,e.object,e.graph,n):typeof s=="function"?this._writeQuad(e,n,r,qa,s):this._writeQuad(e,n,r,s||qa,i)}addQuads(e){for(let n=0;n<e.length;n++)this.addQuad(e[n])}addPrefix(e,n,r){const s={};s[e]=n,this.addPrefixes(s,r)}addPrefixes(e,n){if(!this._prefixIRIs)return n&&n();let r=!1;for(let s in e){let i=e[s];typeof i!="string"&&(i=i.value),r=!0,this._subject!==null&&(this._write(this._inDefaultGraph?`.
`:`
}
`),this._subject=null,this._graph=""),this._prefixIRIs[i]=s+=":",this._write(`@prefix ${s} <${i}>.
`)}if(r){let s="",i="";for(const o in this._prefixIRIs)s+=s?`|${o}`:o,i+=(i?"|":"")+this._prefixIRIs[o];s=Ju(s),this._prefixRegex=new RegExp(`^(?:${i})[^/]*$|^(${s})([_a-zA-Z0-9][\\-_a-zA-Z0-9]*)$`)}this._write(r?`
`:"",n)}blank(e,n){let r=e,s,i;switch(e===void 0?r=[]:e.termType?r=[{predicate:e,object:n}]:"length"in e||(r=[e]),i=r.length){case 0:return new Ua("[]");case 1:if(s=r[0],!(s.object instanceof Ua))return new Ua(`[ ${this._encodePredicate(s.predicate)} ${this._encodeObject(s.object)} ]`);default:let o="[";for(let a=0;a<i;a++)s=r[a],s.predicate.equals(e)?o+=`, ${this._encodeObject(s.object)}`:(o+=`${(a?`;
  `:`
  `)+this._encodePredicate(s.predicate)} ${this._encodeObject(s.object)}`,e=s.predicate);return new Ua(`${o}
]`)}}list(e){const n=e&&e.length||0,r=new Array(n);for(let s=0;s<n;s++)r[s]=this._encodeObject(e[s]);return new Ua(`(${r.join(" ")})`)}end(e){this._subject!==null&&(this._write(this._inDefaultGraph?`.
`:`
}
`),this._subject=null),this._write=this._blockedWrite;let n=e&&((r,s)=>{n=null,e(r,s)});if(this._endStream)try{return this._outputStream.end(n)}catch{}n&&n()}}function wb(t){let e=qI[t];return e===void 0&&(t.length===1?(e=t.charCodeAt(0).toString(16),e="\\u0000".substr(0,6-e.length)+e):(e=((t.charCodeAt(0)-55296)*1024+t.charCodeAt(1)+9216).toString(16),e="\\U00000000".substr(0,10-e.length)+e)),e}var BI=Object.defineProperty,zI=(t,e,n)=>e in t?BI(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,kr=(t,e,n)=>zI(t,typeof e!="symbol"?e+"":e,n);function VI(t,e,n){return t?`Malformed ${e} document found at ${t} - ${n}`:`Malformed ${e} document - ${n}`}var y1=(t=>(t.Turtle="Turtle",t))(y1||{});let v1=class extends ya{constructor(e,n,r){super(VI(e,n,r)),kr(this,"documentUrl"),kr(this,"documentFormat"),kr(this,"malformationDetails"),this.documentUrl=e,this.documentFormat=n,this.malformationDetails=r}},b1=class extends ya{constructor(e,n){super(`Request failed trying to fetch ${e}`,n),kr(this,"url"),this.url=e}},$h=class extends ya{constructor(e){super(`Document with '${e}' url not found`),kr(this,"url"),this.url=e}};function HI(t,e){return`Unauthorized${e===403?" (Forbidden)":""}: ${t}`}let kh=class extends ya{constructor(e,n){super(HI(e,n)),kr(this,"url"),kr(this,"responseStatus"),this.url=e,this.responseStatus=n}get forbidden(){return typeof this.responseStatus<"u"?this.responseStatus===403:void 0}};const KI={acl:"http://www.w3.org/ns/auth/acl#",foaf:"http://xmlns.com/foaf/0.1/",ldp:"http://www.w3.org/ns/ldp#",pim:"http://www.w3.org/ns/pim/space#",purl:"http://purl.org/dc/terms/",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",schema:"https://schema.org/",solid:"http://www.w3.org/ns/solid/terms#",vcard:"http://www.w3.org/2006/vcard/ns#"};function xi(t,e={}){var n;if(t.startsWith("http"))return t;const[r,s]=t.split(":");if(r&&s){const i=KI[r]??((n=e.extraContext)==null?void 0:n[r])??null;if(!i)throw new Error(`Can't expand IRI with unknown prefix: '${t}'`);return i+s}if(!e.defaultPrefix)throw new Error(`Can't expand IRI without a default prefix: '${t}'`);return e.defaultPrefix+r}let WI=class{constructor(e,n){kr(this,"url"),kr(this,"quads"),this.url=e,this.quads=n}value(e){var n;return(n=this.quads.find(r=>r.predicate.value===xi(e)))==null?void 0:n.object.value}values(e){return this.quads.filter(n=>n.predicate.value===xi(e)).map(n=>n.object.value)}},w1=class{constructor(e=[]){kr(this,"quads"),this.quads=e}isEmpty(){return this.statements.length===0}getQuads(){return this.quads.slice(0)}addQuads(e){this.quads.push(...e)}statements(e,n,r){return this.quads.filter(s=>(!r||this.termMatches(s.object,r))&&(!e||this.termMatches(s.subject,e))&&(!n||this.termMatches(s.predicate,n)))}statement(e,n,r){return this.quads.find(s=>(!r||this.termMatches(s.object,r))&&(!e||this.termMatches(s.subject,e))&&(!n||this.termMatches(s.predicate,n)))??null}contains(e,n,r){return this.statement(e,n,r)!==null}getThing(e){const n=this.statements(e);return new WI(e,n)}expandIRI(e){return xi(e)}termMatches(e,n){return typeof n=="string"?this.expandIRI(n)===e.value:e.termType===e.termType&&e.value===n.value}};var vi=(t=>(t.Read="read",t.Write="write",t.Append="append",t.Control="control",t))(vi||{});let yc=class extends w1{constructor(e,n,r){super(n),kr(this,"url"),kr(this,"headers"),this.url=e,this.headers=r}isACPResource(){var e;return!!((e=this.headers.get("Link"))!=null&&e.match(/<http:\/\/www\.w3\.org\/ns\/solid\/acp#AccessControlResource>;[^,]+rel="type"/))}isPersonalProfile(){return!!this.statement(this.url,xi("rdf:type"),xi("foaf:PersonalProfileDocument"))}isStorage(){var e;return!!((e=this.headers.get("Link"))!=null&&e.match(/<http:\/\/www\.w3\.org\/ns\/pim\/space#Storage>;[^,]+rel="type"/))}isUserWritable(){return this.getUserPermissions().includes("write")}getUserPermissions(){return this.getPermissionsFromWAC("user")}getPublicPermissions(){return this.getPermissionsFromWAC("public")}getLastModified(){var e;return _f(this.headers.get("last-modified"))??_f((e=this.statement(this.url,"purl:modified"))==null?void 0:e.object.value)??this.getLatestDocumentDate()??null}expandIRI(e){return xi(e,{defaultPrefix:this.url})}getLatestDocumentDate(){const e=[...this.statements(void 0,"purl:modified"),...this.statements(void 0,"purl:created")].map(n=>_f(n.object.value)).filter(n=>n!==null);return e.length>0?e.reduce((n,r)=>n>r?n:r):null}getPermissionsFromWAC(e){var n;const r=this.headers.get("WAC-Allow")??"",s=((n=vk(r,new RegExp(`${e}="([^"]+)"`)))==null?void 0:n[1])??"";return Tn([s.includes("read")&&"read",s.includes("write")&&"write",s.includes("append")&&"append",s.includes("control")&&"control"])}};async function GI(t){const e=await Qm.compact(t,{});return"@graph"in e?e:"@id"in e?{"@graph":[e]}:{"@graph":[]}}function JI(t){return"@graph"in t}const vc="anonymous://",_b=vc.length;async function YI(t,e){const n={headers:{Accept:"text/turtle"}};e!=null&&e.cache&&(n.cache=e.cache);try{const r=await((e==null?void 0:e.fetch)??window.fetch)(t,n);if(r.status===404)throw new $h(t);if([401,403].includes(r.status))throw new kh(t,r.status);return{body:await r.text(),headers:r.headers}}catch(r){throw r instanceof kh||r instanceof $h?r:new b1(t,{cause:r})}}function _1(t){var e;if((e=t["@id"])!=null&&e.startsWith("#")){t["@id"]=vc+t["@id"];for(const[n,r]of Object.entries(t))typeof r!="object"||r===null||!("@id"in r)||_1(t[n])}}function XI(t){for(const e of t)e.subject.value.startsWith(vc)&&(e.subject.value=e.subject.value.slice(_b)),e.object.value.startsWith(vc)&&(e.object.value=e.object.value.slice(_b))}async function QI(t,e,n){n=n??window.fetch.bind(window);const r=await tg(e);return await n(t,{method:"PUT",headers:{"Content-Type":"text/turtle"},body:e}),new yc(t,r,new Headers({}))}async function ia(t,e){const{body:n,headers:r}=await YI(t,e),s=await tg(n,{baseIRI:t});return new yc(t,s,r)}async function ZI(t,e){try{return await ia(t,e)}catch(n){if(!(n instanceof $h))throw n;return null}}async function eg(t,e){if(JI(t))return(await Promise.all(t["@graph"].map(r=>eg(r,e)))).flat();_1(t);const n=await Qm.toRDF(t,{base:e});return XI(n),n}function x1(t,e={}){const n=$r({baseIRI:e.baseIRI}),r=new m1(n),s={quads:[],containsRelativeIRIs:!1};return new Promise((i,o)=>{const a=r._resolveRelativeIRI;r._resolveRelativeIRI=(...l)=>(s.containsRelativeIRIs=!0,r._resolveRelativeIRI=a,r._resolveRelativeIRI(...l)),r.parse(t,(l,u)=>{if(l){o(new v1(e.baseIRI??null,y1.Turtle,l.message));return}if(!u){i(s);return}s.quads.push(u)})})}async function cd(t){return{"@graph":await Qm.fromRDF(t)}}function eR(t){return new UI().quadsToString(t)}async function tR(t,e){try{return!(await ia(t,e)).isEmpty()}catch{return!1}}async function tg(t,e={}){const{quads:n}=await x1(t,e);return n}async function nR(t,e,n){n=n??window.fetch.bind(window),await n(t,{method:"PATCH",headers:{"Content-Type":"application/sparql-update"},body:e})}var rR=Object.defineProperty,sR=(t,e,n)=>e in t?rR(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ih=(t,e,n)=>sR(t,typeof e!="symbol"?e+"":e,n);function iR(t,e){return e=e??t,typeof t=="string"?`${t} (returned ${e.status} status code)`:`Request to ${e.url} returned ${e.status} status code`}let oR=class extends ya{constructor(e,n){super(iR(e,n)),Ih(this,"response"),this.response=n??e}},aR=class extends ya{constructor(e,n,r){super(`The resource at ${e} is using an unsupported authorization protocol (${n})`,r),Ih(this,"url"),Ih(this,"protocol"),this.url=e,this.protocol=n}};async function lR(t,e){var n;const r=new w1(t.getQuads()),s={[t.url]:t},i=a=>{a.statements(void 0,"foaf:isPrimaryTopicOf").map(l=>l.object.value).forEach(l=>s[l]=s[l]??null),a.statements(void 0,"foaf:primaryTopic").map(l=>l.subject.value).forEach(l=>s[l]=s[l]??null)},o=async()=>{for(const[a,l]of Object.entries(s))if(l===null)try{const u=await ia(a,e);s[a]=u,r.addQuads(u.getQuads()),i(u)}catch(u){if(u instanceof kh){s[a]=!1;continue}throw u}};i(t);do await o();while(Object.values(s).some(a=>a===null));return{store:r,cloaked:Object.values(s).some(a=>a===!1),writableProfileUrl:t.isUserWritable()?t.url:((n=Object.values(s).find(a=>!!a&&a.isUserWritable()))==null?void 0:n.url)??null}}async function xb(t,e={}){var n,r,s,i,o,a;const l={fetch:e.fetch,cache:"no-store"},u=fs(t),c=await ia(u,l);if(!c.isPersonalProfile()&&!c.contains(t,"solid:oidcIssuer"))throw new Error(`${t} is not a valid webId.`);const{store:d,writableProfileUrl:f,cloaked:p}=await lR(c,e),h=d.statements(t,"pim:storage").map(A=>A.object.value),g=d.statement(t,"solid:publicTypeIndex"),w=d.statement(t,"solid:privateTypeIndex");let x=Ar(u);for(;x&&h.length===0;){const A=await U_(ia(x,l));if(A!=null&&A.isStorage()){h.push(x);break}x=Ar(x)}if(h.length===0)throw new Error(`Could not find any storage for ${t}.`);return await((n=e.onLoaded)==null?void 0:n.call(e,d)),{webId:t,cloaked:p,writableProfileUrl:f,storageUrls:Ur(h),...$r({name:((r=d.statement(t,"vcard:fn"))==null?void 0:r.object.value)??((s=d.statement(t,"foaf:name"))==null?void 0:s.object.value),avatarUrl:((i=d.statement(t,"vcard:hasPhoto"))==null?void 0:i.object.value)??((o=d.statement(t,"foaf:img"))==null?void 0:o.object.value),oidcIssuerUrl:(a=d.statement(t,"solid:oidcIssuer"))==null?void 0:a.object.value,publicTypeIndexUrl:g==null?void 0:g.object.value,privateTypeIndexUrl:w==null?void 0:w.object.value})}}async function uR(t,e={}){if(e.required)return xb(t,e);const n=U_(r=>xb(r,e));return await n(t)??await n(t.replace(/\/$/,"").concat("/profile/card#me"))??await n(ei(t).concat("/profile/card#me"))}function cR(t){return!t.path||!t.path.startsWith("/")?null:t.path.match(/^\/[^/]*$/)?"/":`/${kk(t.path.split("/")).filter().slice(0,-1).join("/")}/`.replace("//","/")}function dR(t){const e=cR(t);return t.protocol&&t.domain?`${t.protocol}://${t.domain}${e??"/"}`:e}function Rh(t){if(!(!("@type"in t)||"@value"in t)){t["@id"]=t["@id"]??Ks();for(const e of Object.values(t))Lt(e)&&Rh(e),N$(e)&&e.forEach(n=>Lt(n)&&Rh(n))}}function fR(t){return Ye(cs(t),e=>Rh(e))}function pR(t){const e=id(t);return e?$r({containerUrl:dR(e),documentName:e.path?e.path.split("/").pop():null,resourceHash:e.fragment}):{}}async function hR(t,e,n){n=n??window.fetch.bind(n);const r=t.storageUrls[0],s=`${r}settings/${e}TypeIndex`;return await tR(s,{fetch:n})?`${r}settings/${e}TypeIndex-${Ks()}`:s}async function S1(t,e,n){if(t.writableProfileUrl===null)throw new Error("Can't create type index without a writable profile document");n=n??window.fetch.bind(n);const r=await hR(t,e,n),s=e==="public"?"<> a <http://www.w3.org/ns/solid/terms#TypeIndex> .":`
            <> a
                <http://www.w3.org/ns/solid/terms#TypeIndex>,
                <http://www.w3.org/ns/solid/terms#UnlistedDocument> .
        `,i=`
        INSERT DATA {
            <${t.webId}> <http://www.w3.org/ns/solid/terms#${e}TypeIndex> <${r}> .
        }
    `;return await QI(r,s,n),await nR(t.writableProfileUrl,i,n),r}async function E1(t,e,n,r){const s=await ia(t,{fetch:r});return(Array.isArray(e)?e:[e]).map(i=>s.statements(void 0,"rdf:type","solid:TypeRegistration").filter(o=>s.contains(o.subject.value,"solid:forClass",i)).map(o=>s.statements(o.subject.value,n)).flat().map(o=>o.object.value).filter(o=>!!o)).flat()}async function mR(t,e){return S1(t,"public",e)}async function gR(t,e){return S1(t,"private",e)}async function yR(t,e,n){return E1(t,e,"solid:instanceContainer",n)}async function vR(t,e,n){return E1(t,e,"solid:instance",n)}async function A1(t,e){var n;e=e??window.fetch.bind(window);const r=((n=((await e(t,{method:"HEAD"})).headers.get("Link")??"").match(/<([^>]+)>;\s*rel="acl"/))==null?void 0:n[1])??null;if(!r)throw new Error(`Could not find ACL Resource for '${t}'`);return sa(Hr(t),r)}async function C1(t,e,n){n=n??await A1(t,e);const r=await ZI(n??"",{fetch:e});if(!r)return C1(Hr(t),e);if(r.isACPResource())throw new aR(t,"ACP");return r}async function bR(t,e){const n=await A1(t,e),r=await C1(t,e,n);return $r({url:n,effectiveUrl:r.url,document:r})}var wR=Object.defineProperty,_R=(t,e,n)=>e in t?wR(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Pe=(t,e,n)=>_R(t,typeof e!="symbol"?e+"":e,n);const kn={ChangeUrl:"change",RemoveProperty:"remove",ShieldProperty:"shield",UpdateProperty:"update"};class xR{constructor(e,n){Pe(this,"type",kn.ChangeUrl),this.resourceUrl=e,this.newResourceUrl=n}}const SR={crdt:"https://vocab.noeldemartin.com/crdt/",foaf:"http://xmlns.com/foaf/0.1/",ldp:"http://www.w3.org/ns/ldp#",pim:"http://www.w3.org/ns/pim/space#",posix:"http://www.w3.org/ns/posix/stat#",purl:"http://purl.org/dc/terms/",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",schema:"https://schema.org/",solid:"http://www.w3.org/ns/solid/terms#",xsd:"http://www.w3.org/2001/XMLSchema#"};function Ct(t,e={},n=""){if(/^https?:\/\//.test(t))return t;const r=t.indexOf(":");if(r===-1)return n+t;e={...SR,...e};const s=t.slice(0,r);return s in e?e[s]+t.slice(s.length+1):t}const ER=Ct("crdt:property"),Sb=Ct("crdt:resource"),so=Ct("ldp:Container"),ng=Ct("ldp:contains"),AR=Ct("purl:modified"),$1=Ct("rdf:type"),Eb=Ct("xsd:dateTime");function k1(t){const e=(...i)=>i.map(o=>o.toString().padStart(2,"0")),n=e(t.getUTCFullYear(),t.getUTCMonth()+1,t.getUTCDate()).join("-"),r=e(t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds()).join(":"),s=t.getUTCMilliseconds().toString().padStart(3,"0");return`${n}T${r}.${s}Z`}var mi=(t=>(t[t.Type=0]="Type",t[t.Reference=1]="Reference",t[t.Literal=2]="Literal",t))(mi||{});let I1=class{constructor(e){Pe(this,"name"),this.name=e}};const $o={dateTime:Ct("xsd:dateTime"),integer:Ct("xsd:integer"),boolean:Ct("xsd:boolean"),decimal:Ct("xsd:decimal"),float:Ct("xsd:float"),double:Ct("xsd:double")};let qn=class Yu{constructor(e,n,r){Pe(this,"resourceUrl"),Pe(this,"name"),Pe(this,"value"),this.resourceUrl=e,this.name=n,this.value=r}static fromStatement(e){const n=e.subject.termType==="NamedNode"?e.subject.value:null;if(e.predicate.value===$1)return this.type(n,e.object.value);if(e.object.termType==="NamedNode")return this.reference(n,e.predicate.value,decodeURI(e.object.value));if(e.object.termType==="BlankNode")return this.reference(n,e.predicate.value,null);if(e.object.termType==="Variable")return this.reference(n,e.predicate.value,new I1(e.object.value));const r=e.object;return this.literal(n,e.predicate.value,this.castLiteralValue(e.object.value,r.datatype.value),r.value)}static literal(e,n,r,s){return new CR(e,n,r,s)}static reference(e,n,r){return new $R(e,n,r)}static type(e,n){return new kR(e,n)}static toTurtle(e,n=null){return e.map(r=>r.toTurtle(n)+" .").join(`
`)}static castLiteralValue(e,n){switch(n){case $o.dateTime:return new Date(e);case $o.integer:case $o.decimal:return parseInt(e);case $o.boolean:return e==="true"||e==="1";case $o.float:case $o.double:return parseFloat(e)}return e}toTurtle(e=null){const n=this.getTurtleSubject(e),r=this.getTurtlePredicate(),s=this.getTurtleObject(e);return`${n} ${r} ${s}`}clone(e){switch(e=e??this.resourceUrl,this.type){case 2:{const n=this;return Yu.literal(e,n.name,n.value,n.originalValue)}case 0:return Yu.type(e,this.value);case 1:return Yu.reference(e,this.name,this.value)}}valueEquals(e){const n=this.value instanceof Date?this.value.getTime():this.value,r=e.value instanceof Date?e.value.getTime():e.value;return n===r}getTurtleReference(e,n){const r=(e==null?void 0:e.indexOf("#"))??-1;return!e||e===n?"<>":n===null||!e.startsWith(n)||r===-1?`<${encodeURI(e)}>`:`<#${e.slice(r+1)}>`}getTurtleSubject(e){return this.getTurtleReference(this.resourceUrl,e)}getTurtlePredicate(){return`<${encodeURI(this.name)}>`}};class CR extends qn{constructor(e,n,r,s){super(e,n,r),Pe(this,"type",2),this.originalValue=s}getTurtleObject(){return this.originalValue&&this.value instanceof Date?`"${this.originalValue}"^^<${Eb}>`:this.value instanceof Date?`"${k1(this.value)}"^^<${Eb}>`:JSON.stringify(this.value)}}class $R extends qn{constructor(e,n,r){super(e,n,r),Pe(this,"type",1)}getTurtleObject(e){return this.value instanceof I1?this.value.name:this.getTurtleReference(this.value,e)}}class kR extends qn{constructor(e,n){super(e,$1,n),Pe(this,"type",0)}getTurtlePredicate(){return"a"}getTurtleObject(){return`<${encodeURI(this.value)}>`}}let IR=class{constructor(e){Pe(this,"url"),Pe(this,"types"),Pe(this,"properties"),Pe(this,"propertiesIndex"),Pe(this,"statements"),this.url=e,this.statements=[],this.types=[],this.properties=[],this.propertiesIndex={}}get name(){return this.getPropertyValue(Ct("foaf:name"))}get label(){return this.getPropertyValue(Ct("rdfs:label"))}isType(e){return this.types.indexOf(Ct(e))!==-1}getPropertyValue(e,n=null){const[r]=this.propertiesIndex[Ct(e)]||[];return r?r.value:n}getPropertyValues(e){return(this.propertiesIndex[Ct(e)]||[]).map(n=>n.value)}addStatement(e){if(e.subject.value!==this.url)return;const n=qn.fromStatement(e);n.type===mi.Type&&this.types.push(n.value),this.statements.push(e),this.properties.push(n),this.propertiesIndex[n.name]=(this.propertiesIndex[n.name]||[]).concat([n])}},rg=class extends ze{constructor(e,n){super(n?`Couldn't find resource with id '${e}' in '${n}' document.`:`Couldn't find resource with id '${e}' in document.`)}};const R1=class Xu{constructor(e,n=[],r={}){Pe(this,"url"),Pe(this,"metadata"),Pe(this,"statements"),Pe(this,"resourcesIndex"),Pe(this,"properties"),Pe(this,"resources"),this.url=e,this.statements=n,this.metadata=r,this.resourcesIndex=this.statements.reduce((s,i)=>{const o=i.subject.value;return(s[o]=s[o]??new IR(o)).addStatement(i),s},{}),this.resources=Object.values(this.resourcesIndex),this.properties=this.resources.reduce((s,i)=>s.concat(i.properties),[])}static async fromTurtle(e,n={}){const r=await x1(e,{baseIRI:n.baseIRI});return new Xu(n.baseIRI||"",r.quads,{containsRelativeIRIs:r.containsRelativeIRIs,describedBy:RR(n),headers:n.headers})}static async resourceFromJsonLDGraph(e,n,r){const s=()=>r??e["@graph"].find(i=>i["@id"]===n)??Tt(rg,n);return(this.documentsCache.get(e)??await this.fromJsonLD(s())).requireResource(n)}static async fromJsonLD(e,n){return this.documentsCache.get(e)??await this.getFromJsonLD(e,n)}static reduceJsonLDGraph(e,n){return Ye({"@graph":e["@graph"].filter(r=>r["@id"]!==n)},r=>{const s=this.documentsCache.get(e);s&&this.cacheJsonLD(r,s.clone({removeResourceUrls:[n]}))})}static cacheJsonLD(e,n){this.documentsCache.set(e,n)}static async getFromJsonLD(e,n){const r=await eg(e,n);return Ye(new Xu(e["@id"]?fs(e["@id"]):null,r),s=>{this.documentsCache.set(e,s)})}isEmpty(){return this.statements.length===0}hasProperty(e,n){const r=this.resourcesIndex[e];return!!r&&n in r.propertiesIndex}async toJsonLD(){return cd(this.statements)}resource(e){return this.resourcesIndex[e]??null}requireResource(e){const n=this.resource(e);if(!n)throw new ze(`Resource '${e}' not found`);return n}clone(e={}){return Ye(new Xu(e.changeUrl??this.url,[],this.metadata),n=>{const r=e.removeResourceUrls;if(!r){n.statements=this.statements.slice(0),n.properties=this.properties.slice(0),n.resources=this.resources.slice(0),n.resourcesIndex={...this.resourcesIndex};return}n.statements=this.statements.filter(s=>!r.includes(s.subject.value)),n.properties=this.properties.filter(s=>!s.resourceUrl||!r.includes(s.resourceUrl)),n.resources=this.resources.filter(s=>!r.includes(s.url)),n.resourcesIndex=q$(n.resources,"url")})}};Pe(R1,"documentsCache",new WeakMap);let Rn=R1;function RR(t={}){var e,n;if(!((e=t.headers)!=null&&e.has("Link")))return;const r=(n=t.headers.get("Link"))==null?void 0:n.match(/<([^>]+)>;\s*rel="describedBy"/i);if(r)return sa(t.baseIRI||"",r[1])}let Wo=class{constructor(e,n,r){Pe(this,"type",kn.RemoveProperty),this.resourceUrl=e,this.property=n,this.value=r}};class OR{constructor(e,n){Pe(this,"type",kn.ShieldProperty),this.resourceUrl=e,this.property=n}}let Go=class{constructor(e){if(Pe(this,"type",kn.UpdateProperty),Pe(this,"propertyOrProperties"),this.propertyOrProperties=e,!Array.isArray(e))return;const[n,...r]=e;if(!n)throw new Error("Cannot create an UpdatePropertyOperation with an empty array");const{resourceUrl:s,name:i,type:o}=n;if(r.some(a=>a.resourceUrl!==s||a.name!==i||a.type!==o))throw new Error("All properties in an UpdatePropertyOperation must have the same resourceUrl, name and type")}get propertyResourceUrl(){return Array.isArray(this.propertyOrProperties)?this.propertyOrProperties[0].resourceUrl:this.propertyOrProperties.resourceUrl}get propertyName(){return Array.isArray(this.propertyOrProperties)?this.propertyOrProperties[0].name:this.propertyOrProperties.name}get propertyType(){return Array.isArray(this.propertyOrProperties)?this.propertyOrProperties[0].type:this.propertyOrProperties.type}};function TR(t){return t.reduce((e,n)=>(e[n.type].push(n),e),{[kn.ChangeUrl]:[],[kn.RemoveProperty]:[],[kn.ShieldProperty]:[],[kn.UpdateProperty]:[]})}function Ab(t){const e=t.filter(n=>n.type===kn.ShieldProperty).reduce((n,r)=>{var s,i;const o=r;return n[s=o.resourceUrl]??(n[s]=[]),(i=n[o.resourceUrl])==null||i.push(o.property),n},{});return t.reduce((n,r)=>{var s;switch(r.type){case kn.UpdateProperty:n[0].push(r.propertyOrProperties);break;case kn.RemoveProperty:if(!e[r.resourceUrl]){n[1].push(Tn([r.resourceUrl,r.property,r.value]));break}if(!r.property){n[1].push(Tn([r.resourceUrl,e[r.resourceUrl]]));break}if((s=e[r.resourceUrl])!=null&&s.includes(r.property))break;n[1].push(Tn([r.resourceUrl,r.property,r.value]));break}return n},[[],[]])}const DR=[ng,Ct("posix:mtime"),Ct("posix:size"),Ct("purl:modified")],PR=[so,Ct("ldp:BasicContainer")],Cb=new Map;class MR{constructor(e){Pe(this,"fetch"),Pe(this,"config");const n=e??(globalThis==null?void 0:globalThis.fetch);this.fetch=async(r,s)=>{try{return await n(r,s)}catch(i){const o=typeof r=="object"?r.url:r;throw new b1(o,{cause:i})}},this.config={concurrentFetchBatchSize:5}}getFetch(){return this.fetch}setConfig(e){Object.assign(this.config,e)}async createDocument(e,n=null,r=[],s={}){return n&&r.some(i=>i.resourceUrl===n&&i.type===mi.Type&&i.value===so)?this.createContainerDocument(e,n,r):this.createNonContainerDocument(e,n,r,s)}async getDocument(e){const n=await this.fetch(e,{headers:{Accept:"text/turtle"}});if(n.status!==200)return null;const r=await n.text();return await Rn.fromTurtle(r,{headers:n.headers,baseIRI:e})}async getDocuments(e){const n=await(await this.fetch(e,{headers:{Accept:"text/turtle"}})).text(),r=await Rn.fromTurtle(n,{baseIRI:e});return this.getDocumentsFromContainer(e,r)}async updateDocument(e,n,r={}){var s;if(n.length===0)return;e=Cb.get(e)??e;const i=await this.getDocument(e);if(i===null)throw new zr(e);return this.processChangeUrlOperations(i,n),this.processUpdatePropertyOperations(i,n),n.length===0?void 0:(s=i.resource(e))!=null&&s.isType(so)?await this.updateContainerDocument(i,n):await this.updateNonContainerDocument(i,n,r)}async overwriteDocument(e,n){const r=await this.getDocument(e);if(r===null)throw new zr(e);const s=await this.fetch(e,{method:"PATCH",headers:{"Content-Type":"application/sparql-update"},body:`
                DELETE DATA { ${qn.toTurtle(r.properties,e)} } ;
                INSERT DATA { ${qn.toTurtle(n,e)} }
            `});return this.assertSuccessfulResponse(s,`Error overwriting document at ${r.url}`),{headers:s.headers}}async deleteDocument(e,n){var r;const s=n??await this.getDocument(e);if(s===null)return;if((r=s.resource(e))!=null&&r.isType(so)){const o=await this.getDocumentsFromContainer(e,s);await Promise.all(o.map(a=>this.deleteDocument(a.url,a)))}const i=await this.fetch(e,{method:"DELETE"});return this.assertSuccessfulResponse(i,`Error deleting document at ${e}`),{headers:i.headers}}async documentExists(e){const n=await this.fetch(e,{headers:{Accept:"text/turtle"}});if(n.status===200)return(await n.text()).length>0;if(n.status===404)return!1;throw new ze(`Couldn't determine if document at ${e} exists, got ${n.status} response`)}async createContainerDocument(e,n,r){let s=await this.createContainerFolder(e,n);if(r.length!==0){const i=this.withoutReservedContainerProperties(n,r).map(o=>new Go(o));s=await this.updateDocument(n,i)??s}return{url:n,metadata:s}}async createContainerFolder(e,n){if(!n.startsWith(e))throw new ze("Explicit document url should start with the parent url");if(!n.endsWith("/"))throw new ze(`Container urls must end with a trailing slash, given ${n}`);const r=await this.fetch(n,{method:"PUT",headers:{Link:'<http://www.w3.org/ns/ldp#BasicContainer>; rel="type"',"If-None-Match":"*"}});return this.isInternalErrorResponse(r)?this.createContainerDocumentUsingPOST(n):(this.assertSuccessfulResponse(r,`Error creating container folder at ${n}`),{headers:r.headers})}async createContainerDocumentUsingPOST(e,n=!0){const r=Hr(e),s=await this.fetch(r,{method:"POST",headers:{Link:'<http://www.w3.org/ns/ldp#BasicContainer>; rel="type"',Slug:xk(e),"If-None-Match":"*"}});return s.status===404&&n?(await this.createContainerDocumentUsingPOST(r),this.createContainerDocumentUsingPOST(e,!1)):(this.assertSuccessfulResponse(s,`Error creating container at ${e}`),{headers:s.headers})}async createNonContainerDocument(e,n,r,s={}){var i;if(!n||((i=s.method)==null?void 0:i.toLowerCase())==="post"){const a=s.format??"text/turtle",l=await this.renderProperties(n,r,a),u={"Content-Type":a};n&&(u.Slug=V_(n));const c=await this.fetch(e,{method:s.method??"POST",headers:u,body:l});return this.assertSuccessfulResponse(c,`Error creating document under ${e}`),{url:sa(e,c.headers.get("Location")||""),metadata:{headers:c.headers}}}if(!n.startsWith(e))throw new ze("A minted document url should start with the parent url");const o=await this.fetch(n,{method:"PATCH",headers:{"Content-Type":"application/sparql-update","If-None-Match":"*"},body:`INSERT DATA { ${qn.toTurtle(r,n)} }`});return this.assertSuccessfulResponse(o,`Error creating document at ${n}`),{url:n,metadata:{headers:o.headers}}}async getDocumentsFromContainer(e,n){var r;const s=[],i=((r=n.resource(e))==null?void 0:r.getPropertyValues("ldp:contains"))??[];for(;i.length>0;){const o=i.splice(0,this.config.concurrentFetchBatchSize||i.length),a=await Promise.all(o.map(l=>this.getDocument(l)));s.push(...a)}return s.filter(o=>!!o)}async updateContainerDocument(e,n){const r=e.metadata.describedBy||`${e.url}.meta`;return e.url&&Cb.set(e.url,r),await this.updateNonContainerDocument(e.clone({changeUrl:r}),n)}async updateNonContainerDocument(e,n,r={}){const s=r.format??"application/sparql-update";switch(s){case"application/sparql-update":return this.updateNonContainerDocumentWithSparql(e,n);case"application/ld+json":return this.updateNonContainerDocumentWithJsonLD(e,n)}throw new Error(`Unsupported update format: '${s}'`)}async updateNonContainerDocumentWithSparql(e,n){const[r,s]=Ab(n),i=r.flat().map(l=>l.toTurtle(e.url)+" ."),o=e.properties.filter(l=>s.some(([u,c,d])=>u===l.resourceUrl&&(!c||typeof c=="string"&&c===l.name||Array.isArray(c)&&!c.includes(l.name))&&(!d||d===l.value))).map(l=>l.toTurtle(e.url)+" .");if(i.length===0&&o.length===0)return;const a=await this.fetch(e.url,{method:"PATCH",headers:{"Content-Type":"application/sparql-update"},body:Tn([o.length>0&&`DELETE DATA { ${o.join(`
`)} }`,i.length>0&&`INSERT DATA { ${i.join(`
`)} }`]).join(" ; ")});return this.assertSuccessfulResponse(a,`Error updating document at ${e.url}`),{headers:a.headers}}async updateNonContainerDocumentWithJsonLD(e,n){if(!e.url)throw new Error("Missing document url for JsonLD update");const[r,s]=Ab(n),i=e.properties.filter(a=>!s.some(([l,u,c])=>l===a.resourceUrl&&(!u||typeof u=="string"&&u===a.name||Array.isArray(u)&&!u.includes(a.name))&&(!c||c===a.value))).concat(r.flat()),o=await this.fetch(e.url,{headers:{"Content-Type":"application/ld+json"},method:"PUT",body:await this.renderProperties(e.url,i,"application/ld+json")});return this.assertSuccessfulResponse(o,`Error updating document at ${e.url}`),{headers:o.headers}}withoutReservedContainerProperties(e,n){const r=i=>DR.includes(i.name),s=i=>i.type===mi.Type&&PR.includes(i.value);return n.filter(i=>i.resourceUrl!==e||!r(i)&&!s(i))}processChangeUrlOperations(e,n){const r=TR(n);for(const s of r[kn.ChangeUrl]){const i=e.resource(s.resourceUrl);if(!i)continue;const o=r[kn.UpdateProperty].filter(l=>l.propertyResourceUrl===s.resourceUrl),a=r[kn.RemoveProperty].filter(l=>l.resourceUrl===s.resourceUrl);o.forEach(l=>{l.propertyOrProperties=Array.isArray(l.propertyOrProperties)?l.propertyOrProperties.map(u=>u.clone(s.newResourceUrl)):l.propertyOrProperties.clone(s.newResourceUrl)}),a.forEach(l=>l.resourceUrl=s.newResourceUrl),n.push(new Wo(s.resourceUrl)),n.push(...i.properties.filter(l=>!o.some(u=>u.propertyName===l.name)&&!a.some(u=>!u.property||u.property===l.name)).map(l=>new Go(l.clone(s.newResourceUrl)))),ro(n,s)}}processUpdatePropertyOperations(e,n){var r;const s=[],i=[],o=[];for(let l=0;l<n.length;l++){const u=n[l];if(u.type!==kn.UpdateProperty||u.propertyResourceUrl===null)continue;if(!Array.isArray(u.propertyOrProperties)){const g=u.propertyOrProperties,w=g.resourceUrl,[x,...A]=((r=e.resource(w??""))==null?void 0:r.propertiesIndex[g.name])??[];w&&x&&A.length===0&&g.type===x.type&&g.valueEquals(x)&&(i.push(u),n.push(new OR(w,g.name)));continue}const c=e.statements.filter(g=>g.subject.value===u.propertyResourceUrl&&g.predicate.value===u.propertyName).map(g=>g.object),d=u.propertyOrProperties[0].type===mi.Literal,f=g=>"type"in g?g.type===mi.Reference:g.termType==="NamedNode",{added:p,removed:h}=va(c,u.propertyOrProperties,(g,w)=>g.value===w.value&&f(g)===f(w));p.forEach(g=>n.push(new Go(d?qn.literal(u.propertyResourceUrl,u.propertyName,g.value):qn.reference(u.propertyResourceUrl,u.propertyName,g.value)))),h.forEach(g=>n.push(new Wo(u.propertyResourceUrl,u.propertyName,g.value))),s.push(u),o.push(`${u.propertyResourceUrl}-${u.propertyName}`)}s.forEach(l=>ro(n,l)),i.forEach(l=>ro(n,l));const a=n.filter(l=>l.type===kn.UpdateProperty&&l.propertyType!==mi.Type&&e.hasProperty(l.propertyResourceUrl,l.propertyName));for(const l of a)o.includes(`${l.propertyResourceUrl}-${l.propertyName}`)||n.push(new Wo(l.propertyResourceUrl,l.propertyName))}async renderProperties(e,n,r){switch(r){case"text/turtle":return qn.toTurtle(n,e);case"application/ld+json":{const s=await tg(qn.toTurtle(n,e)),i=await cd(s);if(i["@graph"].length!==1)throw new Error("Cannot render JSONLD with multiple or no subjects");const o=i["@graph"][0];return T_(o["@id"])&&delete o["@id"],JSON.stringify(o)}}throw new Error(`Unsupported render format: '${r}'`)}assertSuccessfulResponse(e,n){if(Math.floor(e.status/100)!==2)throw new oR(n,e)}isInternalErrorResponse(e){return Math.floor(e.status/100)===5}}const LR={activityPods:!1};function NR(t){return LR[t]}function ln(){return NR("activityPods")}function FR(t){const e=new Date(t);return isNaN(e.getTime())?null:e}let sg=class{constructor(e,n={}){Pe(this,"__isSolidEngine",!0),Pe(this,"config"),Pe(this,"helper"),Pe(this,"client"),Pe(this,"cache",new Map),Pe(this,"_listeners",new ek),this.helper=new od,this.config={concurrentFetchBatchSize:10,cachesDocuments:!1,...n},this.client=new MR(e),this.client.setConfig({concurrentFetchBatchSize:this.config.concurrentFetchBatchSize})}get listeners(){return this._listeners}setConfig(e){Object.assign(this.config,e)}getFetch(){return this.client.getFetch()}async create(e,n,r){if(this.validateJsonLDGraph(n),r&&await this.client.documentExists(r))throw new Hm(r);const s=await this.getJsonLDGraphProperties(n),{url:i,metadata:o}=await this.client.createDocument(e,r,s,ln()?{method:"post",format:"application/ld+json"}:{});return await this._listeners.emit("onDocumentCreated",i,o),i}async readOne(e,n){var r,s,i,o,a;if((r=this.config.persistentCache)!=null&&r.has(e,n)){const c=await this.config.persistentCache.get(e,n);if(c)return c;console.warn(`[Soukai] Document '${n}' not found in persistent cache, fetching from server`)}const l=await this.getDocument(n);if(l===null)throw new zr(n);const u=await this.convertToEngineDocument(l);if(await this._listeners.emit("onRDFDocumentLoaded",l.url,l.metadata),await this._listeners.emit("onDocumentRead",l.url,l.metadata),this.config.persistentCache&&(s=l.resource(n))!=null&&s.isType(so))for(const c of((i=l.resource(n))==null?void 0:i.getPropertyValues(ng))??[]){const d=String(c),f=(o=l.resource(d))==null?void 0:o.isType(so),p=FR((a=l.resource(d))==null?void 0:a.getPropertyValue(AR));f||!p||await this.config.persistentCache.activate(n,d,p.getTime())}return u}async readMany(e,n={}){const r=await this.getDocumentsForFilters(e,n),s={};return await Promise.all(Object.entries(r).map(async([i,o])=>{if(!Vo(o,Rn)){s[i]=o;return}s[i]=await this.convertToEngineDocument(o),await this._listeners.emit("onRDFDocumentLoaded",o.url,o.metadata),await this._listeners.emit("onDocumentRead",o.url,o.metadata)})),this.helper.filterDocuments(s,n)}async update(e,n,r){if("$overwrite"in r){const o=await this.getJsonLDGraphProperties(r.$overwrite),a=await this.client.overwriteDocument(n,o);await this._listeners.emit("onDocumentUpdated",n,a);return}const s=await this.extractJsonLDGraphUpdate(r),i=await this.client.updateDocument(n,s,ln()?{format:"application/ld+json"}:{});this.cache.delete(n),i&&await this._listeners.emit("onDocumentUpdated",n,i)}async delete(e,n){const r=await this.client.deleteDocument(n);this.cache.delete(n),r&&await this._listeners.emit("onDocumentDeleted",n,r)}addListener(e){return this.listeners.add(e)}removeListener(e){this.listeners.remove(e)}clearCache(){this.cache=new Map}async getDocument(e){var n;if(this.config.cachesDocuments&&this.cache.has(e))return((n=this.cache.get(e))==null?void 0:n.clone())??null;const r=await this.client.getDocument(e);return this.config.cachesDocuments&&this.cache.set(e,r),r}async getDocumentsForFilters(e,n){if(n.$in)return this.getDocumentsFromUrls(n.$in.map(ir));const r=await this.client.getDocuments(e);return Object.fromEntries(r.map(s=>[s.url,s]))}async getDocumentsFromUrls(e){const n=e.reduce((i,o)=>{const a=Ar(o)??ei(o);return{...i,[a]:(i[a]||[]).concat([o])}},{}),r=Object.entries(n).map(async([i,o])=>{const a=o.map(l=>{var u;return(u=this.config.persistentCache)!=null&&u.has(i,l)?this.config.persistentCache.get(i,l):this.getDocument(l)});return(await Promise.all(a)).map((l,u)=>[o[u],l]).filter(([l,u])=>u!==null)}),s=await Promise.all(r);return Object.fromEntries(s.flat())}async convertToEngineDocument(e){const n=await cd(e.statements);return await GI(n)}validateJsonLDGraph(e){if(!Array.isArray(e["@graph"]))throw new ze("Invalid JSON-LD graph provided for SolidEngine. Are you using a model that isn't a SolidModel?")}async extractJsonLDGraphUpdate(e){if(!this.isJsonLDGraphUpdate(e))throw new ze("Invalid JSON-LD graph updates provided for SolidEngine. Are you using a model that isn't a SolidModel?");const n=new Map,r=[],s="$apply"in e["@graph"]?e["@graph"].$apply:[e["@graph"]];for(const i of s){if(i.$updateItems){const o=[];for(const a of ur(i.$updateItems)){const l=await this.extractJsonLDGraphItemsUpdate(a,n);o.push(...l)}r.push(...o.flat())}if(i.$push){const o=await this.extractJsonLDGraphItemPush(i.$push);r.push(...o)}}return r}async extractJsonLDGraphItemsUpdate({$where:e,$update:n,$override:r,$unset:s},i){if(!e||!("@id"in e))throw new ze("Invalid JSON-LD graph updates provided for SolidEngine. Are you using a model that isn't a SolidModel?");if(s){const u=e["@id"];return(typeof u=="string"?[u]:u.$in).map(c=>new Wo(c))}if(r){const u=e["@id"],c=typeof u=="string"?[u]:u.$in;return(await Promise.all(c.map(async d=>{const f=i.get(d)??d,p=[new Wo(f)],h=await this.getJsonLDGraphProperties(r);for(const g of h)p.push(new Go(g));return p}))).flat()}if(typeof e["@id"]!="string")throw new ze("Invalid JSON-LD graph updates provided for SolidEngine. Are you using a model that isn't a SolidModel?");const o=i.get(e["@id"])??e["@id"],a=n,l=[];for(const[u,c]of Object.entries(a)){if(c===null)throw new ze("SolidEngine doesn't support setting properties to null, delete");if(typeof c=="object"&&"$unset"in c){l.push(new Wo(o,u));continue}if(u==="@id"&&o!==c){l.push(new xR(o,c)),i.set(c,o);continue}l.push(new Go(this.getUpdatePropertyOperationProperty(o,u,c)))}return l}getUpdatePropertyOperationProperty(e,n,r,s=!0){return n==="@type"?qn.type(e,r):Array.isArray(r)?s?r.map(i=>this.getUpdatePropertyOperationProperty(e,n,i,!1)):Tt("Cannot have nested array values"):Lt(r)&&"@id"in r?qn.reference(e,n,r["@id"]):Lt(r)&&"@type"in r&&r["@type"]==="http://www.w3.org/2001/XMLSchema#dateTime"?qn.literal(e,n,new Date(r["@value"])):qn.literal(e,n,r)}async extractJsonLDGraphItemPush(e){return(await this.getJsonLDGraphProperties(e)).map(n=>new Go(n))}extractJsonLDGraphTypes(e){if(!this.isJsonLDGraphTypesFilter(e))return[];const n=e["@graph"].$contains["@type"].$or.reduce((r,s)=>("$contains"in s&&r.push(...s.$contains),"$eq"in s&&r.push(s.$eq),r),[]);return Ur(n.filter(r=>r.startsWith("http")))}async getJsonLDGraphProperties(e){return(await Rn.fromJsonLD(e)).properties}isJsonLDGraphUpdate(e){const n=e["@graph"];return Lt(n)?!(n.$apply??[n]).some(r=>{const s=Object.keys(r);return s.length!==1||!["$updateItems","$push"].includes(s[0]??"")}):!1}isJsonLDGraphTypesFilter(e){const n=e["@graph"];return Lt(n)&&Lt(n.$contains)&&Lt(n.$contains["@type"])&&Array.isArray(n.$contains["@type"].$or)}},mp=class extends ze{constructor(e){super(`Some required attributes were missing from '${e}' document.`)}};const bc=new WeakMap,gp=new WeakMap;function $b(t){var e;return((e=Object.getPrototypeOf(t))==null?void 0:e.constructor)!==Object}function jR(t,e){if(bc.has(t))throw new ze(`${t.modelName} schema update already in progress!`);bc.set(t,e)}function qR(t){return bc.get(t)??null}function UR(t){bc.delete(t)}function BR(t,e,n){const r=t;if($b(r))return r.ensureBooted(),r;if(!gp.has(r)){const s=$b(t)?t:e,i=O1(r,s);i.ensureBooted(),gp.set(r,i)}return gp.get(r)??Tt("Couldn't boot schema")}function O1(t,e,n){const r=Uk(n?t:e,n??t);return r.__isSchema=!0,r}let zR=class{async deleteModels(e){const n=this.decantDocumentModelsByContainer(e);await Promise.all(Object.entries(n).map(([r,s])=>this.deleteContainerDocumentsModels(r,s)))}decantDocumentModelsByContainer(e){const n=this.decantModelsByDocument(e);return Object.entries(n).reduce((r,[s,i])=>{const o=Ar(s)??ei(s);return(r[o]=r[o]??[]).push({documentUrl:s,models:i}),r},{})}decantModelsByDocument(e){return e.reduce((n,r)=>{const s=r.requireDocumentUrl();return(n[s]=n[s]??[]).push(r),n},{})}async deleteContainerDocumentsModels(e,n){const r=await this.requireEngine().readMany(e,{$in:n.map(({documentUrl:s})=>s)});await Promise.all(n.map(({documentUrl:s,models:i})=>this.deleteDocumentModels(r,e,s,i)))}async deleteDocumentModels(e,n,r,s){const i=e[r];if(!i)return;const o=this.requireEngine(),a=s.filter(l=>l.exists()).map(l=>l.url);if(!i["@graph"].some(l=>!a.some(u=>u===l["@id"]))){const l=s.filter(u=>u.isRelationLoaded("tombstone")).map(u=>u.tombstone);l.length===0?await o.delete(n,r):await o.update(n,r,{$overwrite:{"@graph":l.map(u=>u.serializeToJsonLD({includeRelations:!1}))}}),s.forEach(u=>u.setDocumentExists(!1));return}await o.update(n,r,{"@graph":{$updateItems:{$where:{"@id":{$in:a}},$unset:!0}}})}},Qu=class extends _i{constructor(e,n){super(e,n)}setForeignAttributes(){}clearForeignAttributes(){}async load(){return this.related??(this.related=[]),this.related}create(e){return Ye(this.attach(e??{}),()=>this.parent.save())}async __loadDocumentModels(e,n){const r=await Rn.fromJsonLD(n),s=Rn.reduceJsonLDGraph(n,this.parent.url);this.related=Tn(await Promise.all(this.relatedClass.findMatchingResourceIds(r.statements).map(i=>{const o=s["@graph"].find(a=>a["@id"]===i);return o&&this.relatedClass.createFromEngineDocument(e,s,o["@id"])})))}};class VR{get isPublic(){var e;return((e=this._publicPermissions)==null?void 0:e.includes(vi.Read))??null}get isPrivate(){return this._publicPermissions?!this._publicPermissions.includes(vi.Read):null}async fetchPublicPermissionsIfMissing(){this._publicPermissions||await this.fetchPublicPermissions()}async fetchPublicPermissions(){const e=en("SolidACLAuthorization"),n=this.requireDocumentUrl(),r=await e.requireFetch()(n,{method:"HEAD"}),s=new yc(n,[],r.headers);this._publicPermissions=s.getPublicPermissions()}async updatePublicPermissions(e){const n=en("SolidACLAuthorization");await this.withEngine(n.requireEngine(),()=>this.updateAuthorizations(e)),this._publicPermissions=e}trackPublicPermissions(){if(!this.static().usingSolidEngine())return{documentPermissions:{},stopTracking(){}};const e={},n=this.static().requireFinalEngine().listeners.add({onDocumentRead(r,s){if(!s.headers)return;const i=new yc(r,[],s.headers);e[r]=i.getPublicPermissions()}});return{documentPermissions:e,stopTracking:n}}async updateAuthorizations(e){this.relatedAuthorizations.enable();const n=await this.loadRelationIfUnloaded("authorizations"),r=en("SolidACLAuthorization"),s=e.map(a=>r.modeFromSolidDocumentPermission(a)),i=n.filter(a=>a.agentClasses.includes(xi("foaf:Agent"))),o=i.map(a=>a.modes).flat();if(!(s.length===o.length&&!s.some(a=>o.includes(a)))){if(!this.relatedAuthorizations.isDocumentACL()){await this.createDocumentACLResource(s);return}if(s.length===0){for(const a of i)await a.delete();this.relatedAuthorizations.related=Gr(n,i);return}if(i.length===0){await this.createPublicAuthorization(s);return}for(const a of i)await a.update({modes:s})}}async createDocumentACLResource(e){this.relatedAuthorizations.enable();const n=en("SolidACLAuthorization"),r=this.authorizations.filter(s=>s.modes.includes(n.rdfTerm("acl:Control"))).map(s=>Ye(new n(s.getAttributes()),i=>{var o;i.accessTo=[this.requireDocumentUrl()],i.accessToClasses=[],i.default=[],i.mintUrl(this.relatedAuthorizations.requireACLUrl(),!1,((o=id(s.url))==null?void 0:o.fragment)??Ks())}));for(const s of r)await s.save();this.relatedAuthorizations.related=r,this.relatedAuthorizations.effectiveACLUrl=this.relatedAuthorizations.aclUrl,await this.createPublicAuthorization(e)}async createPublicAuthorization(e){var n;this.relatedAuthorizations.enable();const r=en("SolidACLAuthorization"),s=await r.createInDocument({agentClasses:[r.rdfTerm("foaf:Agent")],accessTo:[this.requireDocumentUrl()],modes:e},this.relatedAuthorizations.requireACLUrl(),"public");(n=this.relatedAuthorizations.related)==null||n.push(s)}}let kb;function Si(t){return ig()[t]}function ig(){return kb??(kb={Operation:en("Operation"),PropertyOperation:en("PropertyOperation"),AddPropertyOperation:en("AddPropertyOperation"),RemovePropertyOperation:en("RemovePropertyOperation"),SetPropertyOperation:en("SetPropertyOperation"),UnsetPropertyOperation:en("UnsetPropertyOperation"),DeleteOperation:en("DeleteOperation")})}class HR{async migrateSchema(e,n={}){if(this.isDirty())throw new ze("Can't migrate dirty model, call save() before proceeding.");const r=BR(e,this.static()),{model:s,updates:i}=await this.getSchemaUpdates(r,n);return await this.updateEngineDocumentSchema(i),s}async getSchemaUpdates(e,n){const{removed:r,added:s}=va(Object.keys(this.static().fields),Object.keys(e.fields)),i=await this.newInstanceForSchema(e,s,r),o=i.url!==this.url?i.url:null,a=(await this.getOperationSchemaUpdates(i,r,o,n)).concat(this.getMetadataSchemaUpdates(o)).concat(this.getUrlSchemaUpdates(o)).concat([this.getResourceSchemaUpdate(i,o)]);return{model:i,updates:a}}async newInstanceForSchema(e,n,r){var s,i;const o=Si("PropertyOperation"),a=e.newInstance(Ye(this.getAttributes(),l=>{l.url=`${this.requireDocumentUrl()}#${e.defaultResourceHash}`;for(const u of r)delete l[u]}),!0);return a.setRelationModels("operations",this.operations.filter(l=>{if(!Vo(l,o))return!0;const u=this.static().getRdfPropertyField(l.property);return!u||!r.includes(u)})),n.forEach(l=>{a.hasAttribute(l)&&(a._dirtyAttributes[l]=a.getAttributeValue(l))}),await((i=(s=a.static().hooks)==null?void 0:s.beforeSave)==null?void 0:i.call(a)),a.operations.length>0&&await a.addDirtyHistoryOperations(),a}async getOperationSchemaUpdates(e,n,r,s){var i;const o=[],a=[],l=Si("PropertyOperation"),u=this.usingSolidEngine()?Sb:"resource",c=this.usingSolidEngine()?ER:"property";await e.loadRelationIfUnloaded("operations");for(const d of e.operations){if(o.push(d.url),!d.exists()){d.date=this.getUpdatedAtAttribute(),d.resourceUrl=e.url;const g=(i=s.mintOperationUrl)==null?void 0:i.call(s,d);g?d.url=g:d.mintUrl(),a.push({$push:d.serializeToJsonLD({includeRelations:!1,includeAnonymousHashes:!0})});continue}if(!Vo(d,l)){r&&a.push({$updateItems:{$where:{"@id":d.url},$update:{[u]:{"@id":r}}}});continue}const f=this.static().getRdfPropertyField(d.property),p=f&&e.static().getFieldRdfProperty(f),h=$r({[u]:r?{"@id":r}:null,[c]:p&&p!==d.property?{"@id":p}:null});Object.keys(h).length!==0&&a.push({$updateItems:{$where:{"@id":d.url},$update:h}})}for(const d of this.operations)o.includes(d.url)||a.push({$updateItems:{$where:{"@id":d.url},$unset:!0}});return a}getMetadataSchemaUpdates(e){if(!e||!this.metadata)return[];const n=this.usingSolidEngine()?Sb:"resource";return[{$updateItems:{$where:{"@id":this.metadata.url},$update:{[n]:{"@id":e}}}}]}getUrlSchemaUpdates(e){return e?[{$updateItems:{$where:{"@id":this.url},$update:{"@id":e}}}]:[]}getResourceSchemaUpdate(e,n){return{$updateItems:{$where:{"@id":n??this.url},$override:e.serializeToJsonLD({includeRelations:!1,includeAnonymousHashes:!0})}}}async updateEngineDocumentSchema(e){const n=this.requireDocumentUrl();await this.requireEngine().update(Hr(n),n,e.length===1?{"@graph":e[0]}:{"@graph":{$apply:e}})}}function wc(t,e,n,r){const s=i=>$r({type:i,rdfProperty:e,rdfPropertyAliases:n,required:r});switch(typeof t){case"string":return s($e.String);case"number":case"bigint":return s($e.Number);case"boolean":return s($e.Boolean);case"object":return t===null?s($e.Any):t instanceof lr?s($e.Key):t instanceof Date?s($e.Date):Array.isArray(t)?$r({required:r,rdfProperty:e,type:$e.Array,items:t.length>0?wc(t[0]):s($e.Any)}):$r({required:r,rdfProperty:e,type:$e.Object,fields:Object.entries(t).reduce((i,[o,a])=>(i[o]=wc(a),i),{})});default:return s($e.Any)}}function KR(t){return Q_(t)}class og{get protectedSolidBelongsTo(){return this}async __loadDocumentModels(e,n){const r=new od,s=this.parent.getAttribute(this.foreignKeyName),i=Array.isArray(s)?s:s?[s]:[],o=this.relatedClass.prepareEngineFilters(),a=Rn.reduceJsonLDGraph(n,this.parent.url),l=n["@graph"].filter(d=>i.indexOf(d["@id"])!==-1).reduce((d,f)=>(d[f["@id"]]={"@graph":[f]},d),{}),u=await Promise.all(Object.keys(r.filterDocuments(l,o)).map(d=>this.relatedClass.createFromEngineDocument(e,a,d))),c=i.filter(d=>!u.some(f=>f.url===d)&&fs(d)!==e);this.protectedSolidBelongsTo.loadDocumentModels(u,c)}}class WR{getJsonLDProperty(e,n){if(n=Ct(n),n in e)return this.getJsonLDPropertyValue(e[n]);if(!("@context"in e))return null;const r=e["@context"],s=Object.entries(r).find(([a,l])=>n.startsWith(l));if(!s)return null;const i=s[0]==="@vocab"?"":`${s[0]}:`,o=e[i+n.slice(s[1].length)];return this.getJsonLDPropertyValue(o)}getJsonLDPropertyValue(e){return e===void 0?null:Array.isArray(e)&&e.length===1?e[0]:e}}const T1=new WR;class ag{get protectedSolidHas(){return this}async __loadDocumentModels(e,n){var r;const s=new od,i=((r=this.relatedClass.fields[this.foreignKeyName])==null?void 0:r.rdfProperty)??Tt(ze,`Field '${this.foreignKeyName}' does not exist in ${this.relatedClass.modelName} model.`),o=this.relatedClass.prepareEngineFilters(),a=Rn.reduceJsonLDGraph(n,this.parent.url),l=n["@graph"].filter(d=>{const f=T1.getJsonLDProperty(d,i);return typeof f=="object"&&f!==null&&"@id"in f&&f["@id"]===this.parent.url}).reduce((d,f)=>(d[f["@id"]]={"@graph":[f]},d),{}),u=await Promise.all(Object.keys(s.filterDocuments(l,o)).map(d=>this.relatedClass.createFromEngineDocument(e,a,d))),c=Object.keys(l).filter(d=>!u.some(f=>f.url===d)&&fs(d)!==e);this.protectedSolidHas.loadDocumentModels(u,c)}}function GR(t){return"__beforeParentCreate"in t}function JR(t){return"__afterParentSave"in t}function Mo(t){return"useSameDocument"in t}function YR(t){return sd(t,og)}function lg(t){return sd(t,ag)}function Ib(t){return"__synchronizeRelated"in t}let yp=class{},XR=class D1{constructor(e){Pe(this,"terms"),Pe(this,"reverseProperties"),this.terms=e,this.reverseProperties=new Map}static fromRdfClasses(e,n){const[r,...s]=Object.entries(e),i={name:"@vocab",compactingPrefix:"",value:r==null?void 0:r[1],used:!0},o=s.reduce((a,[l,u])=>(u!==i.value&&a.push({name:l,value:u,compactingPrefix:`${l}:`,used:n.some(c=>c.startsWith(u))}),a),[i]);return new D1(o)}addReverseProperty(e,n){this.reverseProperties.set(e,n)}addTerms(e,n){for(const[r,s]of Object.entries(e)){const i=this.terms.find(l=>l.value===s);if(i){i.used||(i.used=n.some(l=>l.startsWith(s)));continue}let o=r,a=1;for(;this.terms.some(l=>l.name===o);)o=`${r}${++a}`;this.terms.push({name:r,value:s,compactingPrefix:`${r}`,used:n.some(l=>l.startsWith(s))})}}getTermForExpandedIRI(e){return this.terms.find(n=>e.startsWith(n.value))??null}render(){const e=this.terms.reduce((n,r)=>(r.used&&(n[r.name]=r.value),n),{});return this.reverseProperties.forEach((n,r)=>{e[r]={"@reverse":n}}),e}},Zu=class P1{constructor(e,n){Pe(this,"context"),Pe(this,"iriFormat"),this.context=e,this.iriFormat=n}static forModel(e,n=!0){const r=e.fields,s=Tn(Object.values(r).map(o=>o.rdfProperty)),i=XR.fromRdfClasses(e.rdfContexts,s);return new P1(i,n?"compacted":"expanded")}serialize(e,n={}){const r=n.attributes??e.getAttributes(),s=new Set(n.ignoreModels??[]),i={"@context":{},"@type":null};s.add(e);for(const[o,a]of Object.entries(r))this.setJsonLDField(i,e,o,a,n);if(!(e.static("primaryKey")in r)&&n.includeAnonymousHashes){const o=e.static("defaultResourceHash");o&&!ln()&&(i["@id"]=`#${o}`)}return(n.includeRelations??!0)&&this.setJsonLDRelations(i,e,s),n.includeTypes??!0?this.setJsonLDTypes(i,e):delete i["@type"],n.includeContext??!0?this.setJsonLDContext(i):delete i["@context"],i}processExpandedIRI(e){return this.iriFormat==="expanded"?e:this.compactExpandedIRI(e)}compactExpandedIRI(e){const n=this.context.getTermForExpandedIRI(e);return n?Ye(n.compactingPrefix+e.slice(n.value.length),()=>n.used=!0):e}setJsonLDField(e,n,r,s,i){if(r===n.static("primaryKey")){e["@id"]=ir(s);return}const o=n.static().getFieldRdfProperty(r);o&&this.setJsonLDProperty(e,n,this.processExpandedIRI(o),r,s,i)}setJsonLDRelations(e,n,r){for(const s of n.static("relations")){const i=n.requireRelation(s),o=i.getLoadedModels()[0];if(!i.enabled||!i.loaded||!Mo(i)||i.isEmpty()||o&&r.has(o))continue;const a=i.relatedClass.fields,l=Tn(Object.values(a).map(u=>u.rdfProperty));this.context.addTerms(i.relatedClass.rdfContexts,l),this.setJsonLDRelation(e,i,r)}}setJsonLDRelation(e,n,r){const s=n.relatedClass.instance(),i=n.related,o=lg(n),a=o?s.static().getFieldRdfProperty(n.foreignKeyName):n.parent.static().getFieldRdfProperty(n.foreignKeyName),l=this.processExpandedIRI(a),u={ignoreModels:r,includeRelations:!0,includeContext:!1},c=o?d=>Ye(this.serialize(d,u),f=>{delete f[l]}):d=>this.serialize(d,u);i&&(o&&this.context.addReverseProperty(n.name,l),e[o?n.name:l]=Array.isArray(i)?i.map(d=>c(d)):c(i))}setJsonLDTypes(e,n){const r=n.static("rdfsClasses").map(s=>this.processExpandedIRI(s));e["@type"]=r.length===1?r[0]:r}setJsonLDContext(e){e["@context"]=this.context.render()}setJsonLDProperty(e,n,r,s,i,o){const a=n.static().getFieldDefinition(s,i);if(i=this.castJsonLDValue(i,a),a.serialize&&(i=a.serialize(i)),i instanceof yp){o.keepEmptyValues&&(e[r]=null);return}e[r]=i}castJsonLDValue(e,n){switch(n.type){case $e.Any:{if(e==null)return new yp;const r=wc(e,n.rdfProperty,n.rdfPropertyAliases,n.required);if(r.type===$e.Any)throw new ze("Couldn't infer field definition for a field declared as any");return this.castJsonLDValue(e,r)}case $e.Key:return{"@id":ir(e)};case $e.Date:return typeof e=="object"&&e!==null&&"$unset"in e?e:{"@type":"http://www.w3.org/2001/XMLSchema#dateTime","@value":new Date(e).toISOString()};case $e.Array:{const r=e,s=n.items;switch(r.length){case 0:return new yp;case 1:return this.castJsonLDValue(r[0],s);default:return r.map(i=>this.castJsonLDValue(i,s))}}default:return JSON.parse(JSON.stringify(e))}}};function un(t){const e=t&&Vu("related-models",t),n=t&&Vu("document-models",t),r=t&&Vu("cascade-models",t);e==null||e.forEach(s=>wf("related-models",s)),n==null||n.forEach(s=>wf("document-models",s)),r==null||r.forEach(s=>wf("cascade-models",s))}let M1=class{constructor(){Pe(this,"useSameDocument",!1),Pe(this,"documentModelsLoaded",!1)}usingSameDocument(e=!0){return this.useSameDocument=e,this}},dd=class extends M1{constructor(){super(...arguments),Pe(this,"__removedDocumentModels",[])}get protectedSolidMulti(){return this}get super(){return new Proxy(this,{get:(e,n)=>(...r)=>_i.prototype[n].call(this,...r)})}get __newModels(){return this.__newModelsValue??(this.__newModelsValue=[])}set __newModels(e){var n;un(this.parent),(n=this.__newModelsValue)==null||n.forEach(r=>un(r)),e==null||e.forEach(r=>un(r)),this.__newModelsValue=e}isEmpty(){var e,n,r;return!this.documentModelsLoaded&&this.parent.exists()?null:(((e=this.__modelsInSameDocument)==null?void 0:e.length)||0)+(((n=this.__modelsInOtherDocumentIds)==null?void 0:n.length)||0)+this.__newModels.length+(((r=this.related)==null?void 0:r.length)||0)===0}async create(e={}){this.protectedSolidMulti.assertLoaded("create");const n=this.relatedClass.newInstance(e);return await this.save(n),n}async save(e){return this.protectedSolidMulti.assertLoaded("save"),this.attach(e),!this.useSameDocument||ln()?(await e.save(),this.setForeignAttributes(e)):this.parent.exists()&&await this.parent.save(),e}async remove(e){this.detach(e),await this.parent.save()}detach(e){var n,r,s,i;const o=typeof e=="string"?e:e.getAttribute(this.localKeyName),a=(n=this.related)==null?void 0:n.find(l=>l.getAttribute(this.localKeyName)===o);a&&(this.related=(r=this.related)==null?void 0:r.filter(l=>l.getAttribute(this.localKeyName)!==o),this.__newModels=this.__newModels.filter(l=>l.getAttribute(this.localKeyName)!==o),this.__modelsInSameDocument=(s=this.__modelsInSameDocument)==null?void 0:s.filter(l=>l.getAttribute(this.localKeyName)!==o),this.__modelsInOtherDocumentIds=(i=this.__modelsInOtherDocumentIds)==null?void 0:i.filter(l=>l!==o),a.getDocumentUrl()===this.parent.getDocumentUrl()&&!this.parent.tracksHistory()&&this.__removedDocumentModels.push(a),lg(this)&&a.setAttribute(this.foreignKeyName,null),YR(this)&&this.parent.setAttribute(this.foreignKeyName,this.parent.getAttribute(this.foreignKeyName).filter(l=>l!==o)))}addRelated(e){var n;(n=this.related)!=null&&n.includes(e)||(this.super.addRelated(e),e.exists()||(this.__newModels=this.__newModels.concat([e])))}isRelated(e){return this.super.isRelated(e)||this.__newModels.includes(e)}__afterParentSave(){this.__removedDocumentModels=[]}cloneSolidData(e){const n=e.related??[];e.useSameDocument=this.useSameDocument,e.documentModelsLoaded=this.documentModelsLoaded,e.__newModels=[],e.__removedDocumentModels=[];for(const r of this.__newModels)e.__newModels.push(n.find(s=>s.is(r))??Ye(r.clone(),s=>n.push(s)));for(const r of this.__removedDocumentModels)e.__removedDocumentModels.push(n.find(s=>s.is(r))??Ye(r.clone(),s=>n.push(s)));this.__modelsInSameDocument&&(e.__modelsInSameDocument=this.__modelsInSameDocument.map(r=>n.find(s=>s.is(r))??r.clone())),this.__modelsInOtherDocumentIds&&(e.__modelsInOtherDocumentIds=this.__modelsInOtherDocumentIds)}loadDocumentModels(e,n){this.__modelsInSameDocument=e,this.__modelsInOtherDocumentIds=n,this.__modelsInOtherDocumentIds.length===0&&(this.related=Ur(this.related??[]).concat(this.__modelsInSameDocument)),this.documentModelsLoaded=!0}};D_(dd,"onRelatedUpdated",function(t,e){if(this!==this.parent.requireRelation(this.name))return;const{added:n,removed:r}=va(t??[],e??[]);un(this.parent),t==null||t.forEach(s=>un(s)),e==null||e.forEach(s=>un(s)),r.forEach(s=>this.clearInverseRelations(s)),n.forEach(s=>this.initializeInverseRelations(s))});const QR=rd(Ko,[dd,ag]);let L1=class extends QR{async load(){if(this.isEmpty())return this.related=[];if(!this.__modelsInSameDocument||!this.__modelsInOtherDocumentIds)return this.related=[];const e=await this.loadRelatedModels(this.__modelsInOtherDocumentIds);return this.related=this.__modelsInSameDocument.concat(e)}reset(e=[]){this.related=[],this.__newModels=[],this.__modelsInSameDocument=[],e.forEach(n=>{var r;n.unsetAttribute(this.foreignKeyName),(r=this.related)==null||r.push(n),this.__newModels.push(n)})}clone(e={}){return Ye(super.clone(e),n=>{this.cloneSolidData(n)})}__beforeParentCreate(){this.documentModelsLoaded||this.loadDocumentModels([],[])}async __synchronizeRelated(e,n){const{models:r,...s}=n,i=Al(this.related??[],"url"),o=Al(e.related??[],"url"),a=o.getItems().filter(u=>!i.hasKey(u.url)),l=[];for(const u of i.items()){const c=o.get(u.url);if(!c){l.push(u);continue}await u.static().synchronize(u,c,{__models:r,...s})}this.related=Array.from(i.items()).concat(a.map(u=>u.clone({clones:Ye(new WeakMap,c=>c.set(e.parent,this.parent)),...s}))),e.related=Array.from(o.items()).concat(l.map(u=>u.clone({clones:Ye(new WeakMap,c=>c.set(e.parent,this.parent)),...s})))}loadRelatedModels(e){return this.relatedClass.all({$in:e})}};const N1=class Oh extends L1{constructor(e){super(e,Si("Operation"),"resourceUrl")}attach(e={},n){const r=Si("Operation"),s=e instanceof r?e:Si(n??"SetPropertyOperation").newInstance(e);if(s.constructor===r)throw new Error("Creating base operations is meaningless, you should create a specific operation instead (add property, remove property, etc.)");return super.attach(s)}attachAddOperation(e){return this.attach(e,"AddPropertyOperation")}attachRemoveOperation(e){return this.attach(e,"RemovePropertyOperation")}attachSetOperation(e){return this.attach(e,"SetPropertyOperation")}attachUnsetOperation(e){return this.attach(e,"UnsetPropertyOperation")}attachDeleteOperation(e){return this.attach(e,"DeleteOperation")}async __loadDocumentModels(e,n){var r;const s=((r=this.relatedClass.fields[this.foreignKeyName])==null?void 0:r.rdfProperty)??Tt(ze,`Field '${this.foreignKeyName}' does not exist in ${this.relatedClass.modelName} model.`),i=Rn.reduceJsonLDGraph(n,this.parent.url),o=n["@graph"].filter(u=>{const c=T1.getJsonLDProperty(u,s);return typeof c=="object"&&c!==null&&"@id"in c&&c["@id"]===this.parent.url}),a=Tn(await Promise.all(o.map(async u=>{var c;return(c=this.getOperationClass(u))==null?void 0:c.createFromEngineDocument(e,i,u["@id"])}))),l=o.map(u=>u["@id"]).filter(u=>!a.some(c=>c.url===u)&&fs(u)!==e);this.protectedSolidHas.loadDocumentModels(a,l)}async loadRelatedModels(){throw new Error("loading operations from different documents has not been implemented yet")}getOperationClass(e){const n=this.getOperationMatchers(),r=ur(e["@type"]??[]),s=n.find(i=>i.match(r));return s==null?void 0:s.operation}getOperationMatchers(){return Oh.operationMatchers??(Oh.operationMatchers=Object.values(ig()).map(e=>{const n=Zu.forModel(e),r=e.rdfsClasses,s=r.map(o=>n.processExpandedIRI(o)),i=r.concat(s);return{operation:e,match:o=>i.some(a=>o.includes(a))}}))}};Pe(N1,"operationMatchers");let ZR=N1;class eO{serializeToJsonLD(e={}){return e.includeRelations??(e.includeRelations=!0),Zu.forModel(this.static()).serialize(this,e)}async parseEngineDocumentAttributesFromJsonLD(e,n){const r=e,s=r["@graph"].find(l=>l["@id"]===n)??Tt(rg,n,e.url),i=await Rn.resourceFromJsonLDGraph(r,n,s),o=this.static("fields"),a={};a[this.static("primaryKey")]=n;for(const[l,u]of Object.entries(o)){if(!u.rdfProperty)continue;const c=(i.propertiesIndex[u.rdfProperty]??u.rdfPropertyAliases.reduce((p,h)=>p.concat(i.propertiesIndex[h]??[]),[])).map(p=>p.type===mi.Reference?new lr(p.value):p.value),[d,...f]=c;typeof d>"u"||(a[l]=f.length>0?[d].concat(f):d)}return a}convertEngineFiltersToJsonLD(e,n){const r={},s=Zu.forModel(this.static()),i=this.static("rdfsClasses"),o=i.map(u=>s.processExpandedIRI(u)),a=[];i.length>0&&(a.push({$contains:o}),a.push({$contains:i})),i.length===1&&(a.push({$eq:o[0]}),a.push({$eq:i[0]})),this.static("rdfsClassesAliases").forEach(u=>{u.length>0&&a.push({$contains:u}),u.length===1&&a.push({$eq:u[0]})}),e.$in&&(r.$in=e.$in,delete e.$in);const l=this.convertAttributeValuesToJsonLD(e,{compactIRIs:n,keepEmptyValues:!1});return a.length>0&&(l["@type"]={$or:a}),Object.keys(l).length>0&&(r["@graph"]={$contains:l}),r}convertEngineUpdatesToJsonLD(e,n){const r=this.convertAttributeValuesToJsonLD(e,{compactIRIs:n,keepEmptyValues:!0});for(const[s,i]of Object.entries(r))i===null&&(r[s]={$unset:!0});return r}convertAttributeValuesToJsonLD(e,n){return Zu.forModel(this.static(),n.compactIRIs).serialize(this,{includeContext:!1,includeTypes:!1,includeRelations:!1,keepEmptyValues:n.keepEmptyValues,attributes:e})}}class tO extends _i{constructor(e){const n=en("SolidACLAuthorization");super(e,n)}requireACLUrl(){return this.aclUrl??Tt("Could not get ACL Url")}isDocumentACL(){return!this.aclUrl||!this.effectiveACLUrl?null:this.aclUrl===this.effectiveACLUrl}setForeignAttributes(){}clearForeignAttributes(){}async load(){const e=en("SolidACLAuthorization"),n=await bR(this.parent.requireDocumentUrl(),e.requireFetch()),r=await cd(n.document.statements()),s=await Promise.all(n.document.statements(void 0,"rdf:type","acl:Authorization").map(({subject:i})=>e.createFromEngineDocument(n.effectiveUrl,r,i.value)));return this.aclUrl=n.url,this.effectiveACLUrl=n.effectiveUrl,this.related=s,s}}const nO=rd(Ho,[dd,og]);let ug=class extends nO{async load(){var e;if((!this.__modelsInSameDocument||!this.__modelsInOtherDocumentIds)&&(this.__modelsInSameDocument=[],this.__modelsInOtherDocumentIds=this.parent.getAttribute(this.foreignKeyName)),this.isEmpty())return this.related=[];const n={};for(const s of this.__modelsInOtherDocumentIds??[]){const i=Ar(s)??ei(s);i in n||(n[i]=new Set),(e=n[i])==null||e.add(fs(s))}const r=(await Promise.all(Object.entries(n).map(([s,i])=>this.relatedClass.from(s).all({$in:Array.from(i)})))).reduce((s,i)=>(s.push(...i),s),[]);return this.related=this.__modelsInSameDocument.concat(this.__newModels).concat(r)}associate(e){const n=this.parent.getAttribute(this.foreignKeyName),r=lr.from(e);this.parent.setAttribute(this.foreignKeyName,n.concat(r))}disassociate(e){const n=this.parent.getAttribute(this.foreignKeyName),r=lr.from(e);this.parent.setAttribute(this.foreignKeyName,n.filter(s=>!r.equals(lr.from(s))))}reset(e=[]){this.related=[],this.__newModels=[],this.__modelsInSameDocument=[];const n=this.parent.getAttribute(this.foreignKeyName);e.forEach(r=>{var s;ro(n,r.getAttribute(this.localKeyName)),(s=this.related)==null||s.push(r),this.__newModels.push(r)}),this.parent.setAttribute(this.foreignKeyName,n)}clone(e={}){return Ye(super.clone(e),n=>{this.cloneSolidData(n)})}__beforeParentCreate(){if(this.documentModelsLoaded)return;const e=this.parent.getAttribute(this.foreignKeyName);if(!Array.isArray(e))throw new Error(`Foreign key (${this.foreignKeyName}) for '${this.name}' relation in '${this.parent.static("modelName")}' model is missing.`);this.loadDocumentModels([],e)}async __synchronizeRelated(e,n){const{models:r,...s}=n,{SetPropertyOperation:i,AddPropertyOperation:o,RemovePropertyOperation:a}=ig(),l=this.parent.static().getFieldRdfProperty(this.foreignKeyName),u=this.localKeyName,c=Al(this.related??[],u),d=Al(e.related??[],u),f=Ye(new WeakMap,h=>h.set(e.parent,this.parent));this.parent.operations.filter(h=>!h.exists()&&(h instanceof i||h instanceof o||h instanceof a)&&h.property===l).map(h=>ur(h.value)).flat().map(h=>d.get(h instanceof lr?h.toString():h)).filter(h=>!!h).forEach(h=>{var g;if(c.hasKey(h.getAttribute(u)))return;const w=h.clone({clones:f,...s});(g=this.related)==null||g.push(w),c.add(w)});const p=await Promise.all(this.parent.getAttribute(this.foreignKeyName).map(async h=>{const g=c.get(h),w=d.get(h);return!g||!w||await g.static().synchronize(g,w,{__models:r,...s}),g}));this.related=Tn(p).concat(this.__newModels)}},fd=class extends M1{get super(){return new Proxy(this,{get:(e,n)=>(...r)=>ba.prototype[n].call(this,...r)})}get __newModel(){return this.__newModelValue}set __newModel(e){un(this.parent),un(this.__newModelValue),un(e),this.__newModelValue=e}isEmpty(){return!this.documentModelsLoaded&&this.parent.exists()?null:!(this.__modelInSameDocument||this.__modelInOtherDocumentId||this.__newModel||this.related)}async create(e={}){this.assertNotLoadedOrEmpty("create");const n=this.relatedClass.newInstance(e);return await this.save(n),n}async save(e){return this.assertNotLoadedOrEmpty("save"),this.attach(e),!this.useSameDocument||ln()?await e.save():this.parent.exists()&&await this.parent.save(),e}addRelated(e){this.related!==e&&(this.super.addRelated(e),e.exists()||(this.__newModel=e))}isRelated(e){return this.super.isRelated(e)||this.__newModel===e}cloneSolidData(e){let n=e.related??null;e.useSameDocument=this.useSameDocument,e.documentModelsLoaded=this.documentModelsLoaded,this.__newModel&&(this.__newModel=n??Ye(this.__newModel.clone(),r=>n=r)),this.__modelInSameDocument&&(e.__modelInSameDocument=n??this.__modelInSameDocument.clone()),this.__modelInOtherDocumentId&&(e.__modelInOtherDocumentId=this.__modelInOtherDocumentId)}loadDocumentModels(e,n){var r;if(e.length+n.length>1&&console.warn(`The ${this.name} relationship in ${this.parent.static("modelName")} has been declared as hasOne, but more than one related model were found.`),e.length>0){if(this.__modelInSameDocument=e[0],this.documentModelsLoaded=!0,this.related=this.__modelInSameDocument,!((r=this.__modelInSameDocument)!=null&&r.exists())){this.__newModel=this.__modelInSameDocument;return}this.__newModel=void 0;return}if(n.length>0){this.__modelInOtherDocumentId=n[0],this.documentModelsLoaded=!0;return}this.documentModelsLoaded=!0}async __synchronizeRelated(e,n){const{models:r,...s}=n;if(!this.related&&e.related){this.related=e.related.clone({clones:Ye(new WeakMap,o=>o.set(e.parent,this.parent)),...s});return}if(!e.related||!this.related)return;const i=this.parent.getAttribute(this.foreignKeyName);if(await this.related.static().synchronize(this.related,e.related,{__models:r,...s}),this.__newModel||this.related.url===i){this.related=this.__newModel??this.related;return}e.related.url===i&&(this.related=e.related.clone({clones:Ye(new WeakMap,o=>o.set(e.parent,this.parent)),...s}))}assertNotLoadedOrEmpty(e){if(!(!this.loaded||!this.related))throw new ze(`The "${e}" method can't be called because a related model already exists, use a hasMany relationship if you want to support multiple related models.`)}};D_(fd,"onRelatedUpdated",function(t,e){this===this.parent.requireRelation(this.name)&&(un(this.parent),un(t),un(e),t&&this.clearInverseRelations(t),e&&this.initializeInverseRelations(e))});const rO=rd(ol,[fd,og]);class sO extends rO{async load(){if(this.__modelInSameDocument)return this.related=this.__modelInSameDocument;const e=this.__modelInOtherDocumentId??this.parent.getAttribute(this.foreignKeyName);if(!e)return this.related=null;const n=await this.relatedClass.find(e);return this.related=n}reset(e=[]){const n=e[0];delete this.related,delete this.__modelInSameDocument,delete this.__modelInSameDocument,n&&(this.parent.unsetAttribute(this.foreignKeyName),this.related=n,this.__newModel=n)}clone(e={}){return Ye(super.clone(e),n=>{this.cloneSolidData(n)})}__beforeParentCreate(){if(this.documentModelsLoaded)return;const e=this.parent.getAttribute(this.foreignKeyName);this.loadDocumentModels([],e?[e]:[])}async __synchronizeRelated(e,n){if(!e.related||this.related&&this.related.url!==e.related.url)return;const{models:r,...s}=n,i=this.parent.getAttribute(this.foreignKeyName);if(!this.related){this.related=e.related.clone({clones:Ye(new WeakMap,o=>o.set(e.parent,this.parent)),...s});return}if(await this.related.static().synchronize(this.related,e.related,{__models:r,...s}),this.__newModel||this.related.url===i){this.related=this.__newModel??this.related;return}e.related.url===i&&(this.related=e.related.clone({clones:Ye(new WeakMap,o=>o.set(e.parent,this.parent)),...s}))}}const iO=rd(eo,[fd,ag]);class oO extends iO{async load(){if(this.isEmpty())return this.related=null;if(!(this.__modelInSameDocument||this.__modelInOtherDocumentId))return this.related=null;const e=await(async()=>this.__modelInSameDocument?this.__modelInSameDocument:this.__modelInOtherDocumentId?this.relatedClass.find(this.__modelInOtherDocumentId):null)();return this.related=e}async remove(){if(!this.related)return;const e=this.related;this.related=null,await e.delete()}reset(e=[]){const n=e[0];this.related=void 0,this.__newModel=void 0,delete this.__modelInSameDocument,n&&(n.unsetAttribute(this.foreignKeyName),this.related=n,this.__newModel=n)}clone(e={}){return Ye(super.clone(e),n=>{this.cloneSolidData(n)})}__beforeParentCreate(){this.documentModelsLoaded||this.loadDocumentModels([],[])}async __synchronizeRelated(e,n){const{models:r,...s}=n;if(this.related&&e.related&&this.related.url===e.related.url){await this.related.static().synchronize(this.related,e.related,{__models:r,...s});return}if(!(!e.related||this.related&&this.related.url!==e.related.url)&&!this.related){this.related=e.related.clone({clones:Ye(new WeakMap,i=>i.set(e.parent,this.parent)),...s});return}}}class F1 extends ba{constructor(e,n){super(e,n,"resourceUrls","url")}isEmpty(){return!1}setForeignAttributes(e){const n=this.parent.getDocumentUrl();if(!n||!this.parent.url||e.resourceUrls.includes(n))return;const r=e.resourceUrls.concat([n]);this.parent.usingSolidEngine()?e.setOriginalAttribute("resourceUrls",r):e.setAttribute("resourceUrls",r)}clearForeignAttributes(e){const n=this.parent.getDocumentUrl();if(!n||!this.parent.url||!e.resourceUrls.includes(n))return;const r=Gr(e.resourceUrls,n);this.parent.usingSolidEngine()?e.setOriginalAttribute("resourceUrls",r):e.setAttribute("resourceUrls",r)}async load(){const e=this.relatedClass.collection,n=Hr(this.parent.url);return this.related=await this.relatedClass.from(Ar(n)??ei(n)).find(n),this.relatedClass.collection=e,this.related}onRelatedUpdated(e,n){this===this.parent.requireRelation(this.name)&&(un(this.parent),un(e),un(n),e&&this.clearInverseRelations(e),n&&this.initializeInverseRelations(n))}}class aO extends ba{constructor(e){super(e,en("Tombstone"))}create(){const e=en("Tombstone");this.related=new e({url:this.parent.metadata.url,resourceUrl:this.parent.url,deletedAt:new Date})}async load(){return null}setForeignAttributes(){}clearForeignAttributes(){}}const vp=new WeakMap;function vr(t,e){return t[e]}async function lO(t,e,n){if(t.getPrimaryKey()!==e.getPrimaryKey())throw new ze("Can't synchronize different models");if(!(n.models.has(t)||n.models.has(e))){n.models.add(t),n.models.add(e),await t.loadRelationIfUnloaded("operations"),await e.loadRelationIfUnloaded("operations"),(t.operations.length>0||e.operations.length>0)&&(t.addHistoryOperations(e.operations),e.addHistoryOperations(t.operations));for(const r of Gr(t.static().relations,t.static().reservedRelations)){const s=t.requireRelation(r),i=e.requireRelation(r);!s.enabled||!i.enabled||(await xh(s,Ib).__synchronizeRelated(i,n),await xh(i,Ib).__synchronizeRelated(s,n))}}}class uO{tracksHistory(){return vp.has(this)?!1:this._history??this.static("history")}withoutTrackingHistory(e){if(!this.tracksHistory())return e();const n=()=>(vp.delete(this),!0);vp.set(this);const r=e();return yk(r)?r.then(s=>n()&&s):n()&&r}enableHistory(){this._history=!0}disableHistory(){this._history=!1}disableTombstone(){this._tombstone=!1}enableTombstone(){this._tombstone=!0}leavesTombstone(){return this._tombstone??this.static("tombstone")}getHistoryHash(){const e=this.getRelatedModels().map(n=>n.operations??[]).flat();return e.length===0?null:ok(Bu(e,"url").reduce((n,r)=>n+r.url,""))}rebuildAttributesFromHistory(){var e,n;if(!this.hasRelation("operations")||!this.isRelationLoaded("operations"))throw new ze("Can't rebuild attributes from history if 'operations'  relation isn't loaded");if(this.operations.length===0)return;const r=Si("PropertyOperation"),s=Bu(this.operations,"date"),i=new Set(Object.keys(vr(this,"_attributes"))),o=Object.entries(this.static("fields")).filter(([a,l])=>l.type===$e.Array);i.delete(this.static("primaryKey")),i.delete(Rt.CreatedAt),i.delete(Rt.UpdatedAt),o.forEach(([a,l])=>{this.ignoreRdfPropertyHistory(l.rdfProperty)||this.setAttribute(a,[])}),s.forEach(a=>{if(a instanceof r){const l=this.static().getRdfPropertyField(a.property);l&&i.delete(l)}a.apply(this)}),i.forEach(a=>{const l=this.static().getFieldRdfProperty(a);l&&this.ignoreRdfPropertyHistory(l)||this.unsetAttribute(a)}),this.setAttribute("createdAt",(e=s[0])==null?void 0:e.date),this.setAttribute("updatedAt",(n=s[s.length-1])==null?void 0:n.date)}addHistoryOperations(e){const n=Si("PropertyOperation"),r=new Set(this.operations.map(a=>a.url)),s=[],i=new Set,o=Object.keys(this.static("fields")).reduce((a,l)=>{const u=this.static().getFieldRdfProperty(l);return u&&(a[u]=l),a},{});for(const a of e){if(r.has(a.url)||a instanceof n&&this.ignoreRdfPropertyHistory(a.property))continue;const l=a.clone();l.reset(),l.url=a.url,s.push(l),a instanceof n&&a.property in o&&i.add(a.property)}if(s.some(a=>!a.isInception(this))){this.setRelationModels("operations",Bu(this.operations.concat(s),["date","url"])),this.removeDuplicatedHistoryOperations(),this.rebuildAttributesFromHistory();for(const a of i){const l=o[a];vr(this,"_trackedDirtyAttributes")[l]=vr(this,"_dirtyAttributes")[l]}}}async addDirtyHistoryOperations(){const e=vr(this,"_trackedDirtyAttributes");if(await this.loadRelationIfUnloaded("operations"),"url"in vr(this,"_dirtyAttributes"))throw new ze(`It wasn't possible to generate the changes history for a model because its primary key was modified from '${this.url}' to '${vr(this,"_originalAttributes").url}'.`);if(this.operations.length===0){const n=$r(jm(vr(this,"_originalAttributes"),[this.static("primaryKey")]));for(const[r,s]of Object.entries(n)){if(s===null||Array.isArray(s)&&s.length===0||r in e&&e[r]===s)continue;const i=this.static().getFieldRdfProperty(r);i&&this.ignoreRdfPropertyHistory(i)||this.relatedOperations.attachSetOperation({property:this.static().requireFieldRdfProperty(r),date:this.metadata.createdAt,value:this.getOperationValue(r,s)})}}for(const[n,r]of Object.entries(vr(this,"_dirtyAttributes"))){if(n in e&&e[n]===r)continue;const s=this.static().getFieldRdfProperty(n);if(!(s&&this.ignoreRdfPropertyHistory(s))){if(Array.isArray(r)){this.addArrayHistoryOperations(n,r,vr(this,"_originalAttributes")[n]);continue}if(r==null){this.relatedOperations.attachUnsetOperation({property:this.static().requireFieldRdfProperty(n),date:this.metadata.updatedAt});continue}this.relatedOperations.attachSetOperation({property:this.static().requireFieldRdfProperty(n),date:this.metadata.updatedAt,value:this.getOperationValue(n,r)})}}this.metadata.isDirty("deletedAt")&&this.metadata.deletedAt&&this.relatedOperations.attachDeleteOperation({date:this.metadata.deletedAt})}removeDuplicatedHistoryOperations(){const e=Si("PropertyOperation"),n=[],r=[],s=this.operations.filter(o=>o.isInception(this)),i=o=>!r.includes(o.url);for(const o of s)if(o instanceof e){if(!n.includes(o.property)){n.push(o.property);continue}r.push(o.url),o.exists()&&vr(this,"_removedResourceUrls").push(o.url)}this.setRelationModels("operations",this.operations.filter(i))}getOperationValue(e,n){const r=this.static().getFieldDefinition(e,n);return Q_(r)?Tn(ur(n,!0).map(s=>this.getOperationValue(`${e}.*`,s))):(n&&r.type===$e.Key&&(n=new lr(n)),r.serialize&&(n=r.serialize(n)),n)}addArrayHistoryOperations(e,n,r){const s=ur(this.getOperationValue(e,r),!0),i=ur(this.getOperationValue(e,n),!0),{added:o,removed:a}=va(s,i,(l,u)=>l instanceof lr&&u instanceof lr?l.equals(u):l===u);o.length>0&&this.relatedOperations.attachAddOperation({property:this.static().getFieldRdfProperty(e),date:this.metadata.updatedAt,value:Tn(o)}),a.length>0&&this.relatedOperations.attachRemoveOperation({property:this.static().getFieldRdfProperty(e),date:this.metadata.updatedAt,value:Tn(a)})}reconcileModelTimestamps(e){var n;const[r,...s]=this.operations??[];if(r){this.setAttribute(Rt.UpdatedAt,s.reduce((a,l)=>a>l.date?a:l.date,r.date));return}if(e)return;const i=vr(this,"_originalAttributes")[Rt.UpdatedAt]??((n=this.metadata)==null?void 0:n.getOriginalAttribute(Rt.UpdatedAt));if(!i)return;const o=Object.keys(vr(this,"_dirtyAttributes"));o[1]||o[0]&&o[0]!==Rt.UpdatedAt||this.setAttribute(Rt.UpdatedAt,i)}}function mu(t){return sd(t,dd)}function bp(t){return sd(t,fd)}const cO=q_(to,[zR,VR,HR,eO,uO]);let jt=class extends cO{constructor(){super(...arguments),Pe(this,"_sourceSubject",{}),Pe(this,"_lock",new Um)}static getFieldDefinition(e,n){if(e.endsWith(".*")){const r=this.getFieldDefinition(e.slice(0,-2),Array.isArray(n)&&n.length>0?n[0]:void 0);if(!KR(r))throw new ze("Can't get item field definition for non-array field");return{type:r.items.type,rdfProperty:r.rdfProperty,rdfPropertyAliases:r.rdfPropertyAliases,required:!1}}return this.fields[e]??wc(n,this.getDefaultRdfContext()+e,[],!1)}static getFieldRdfProperty(e){const n=this.fields[e];return n&&!n.rdfProperty?null:(n==null?void 0:n.rdfProperty)??this.getDefaultRdfContext()+e}static getRdfPropertyField(e){return(this.rdfPropertyFields??(this.rdfPropertyFields=L$(Al(Object.keys(this.fields),n=>this.getFieldRdfProperty(n)))))[e]??null}static async updateSchema(e){await super.updateSchema(e),delete this.rdfPropertyFields}static requireFetch(){if(!this.usingSolidEngine())throw new ze(`Could not get fetch from ${this.modelName} model`);return this.requireFinalEngine().getFetch()}static requireFieldRdfProperty(e){return this.getFieldRdfProperty(e)??Tt(`Couldn't get required property for rdf field '${e}'`)}static usingSolidEngine(){return!!this.requireFinalEngine().__isSolidEngine}static useSoftDeletes(e){this.softDeletesEnabled=e}static from(e){return this.collection=e,this}static at(e){return this.from(e)}static boot(e){var n,r,s,i;this.modelName=this.bootModelName(e),this.rdfContexts=this.bootRdfContexts(((n=Object.getOwnPropertyDescriptor(this,"rdfContext"))==null?void 0:n.value)??null,((r=Object.getOwnPropertyDescriptor(this,"rdfContexts"))==null?void 0:r.value)??{},this.rdfsClass),this.rdfsClasses=this.bootRdfsClasses(((s=Object.getOwnPropertyDescriptor(this,"rdfsClass"))==null?void 0:s.value)??null,((i=Object.getOwnPropertyDescriptor(this,"rdfsClasses"))==null?void 0:i.value)??null,this.rdfContexts),this.rdfsClassesAliases=this.bootRdfsClassesAliases(this.rdfsClassesAliases,this.rdfContexts),super.boot(e)}static aliasRdfPrefixes(e){var n;this.ensureBooted();for(const[r,s]of Object.entries(e)){const i=this.rdfsClasses.reduce((o,a)=>(a.startsWith(r)&&o.push(a.replace(r,s)),o),[]);i.length>0&&this.rdfsClassesAliases.push(i);for(const o of Object.values(this.fields))(n=o.rdfProperty)!=null&&n.startsWith(r)&&o.rdfPropertyAliases.push(o.rdfProperty.replace(r,s))}}static resetRdfAliases(){this.rdfsClassesAliases=[];for(const e of Object.values(this.fields))e.rdfPropertyAliases&&(e.rdfPropertyAliases=[])}static replaceRdfPrefixes(e){var n;this.ensureBooted();for(const[r,s]of Object.entries(e)){this.rdfsClasses=this.rdfsClasses.map(i=>i.replace(r,s));for(const i of Object.values(this.fields))(n=i.rdfProperty)!=null&&n.startsWith(r)&&(i.rdfProperty=i.rdfProperty.replace(r,s))}}static createFromEngineDocument(e,n,r){return this.instance().createFromEngineDocument(e,n,r)}static async find(e){const n=Ur([this.rdfsClasses,...this.rdfsClassesAliases].flat()),r=this.instance().serializeKey(e),s=fs(r),i=Ar(s)??ei(s);this.ensureBooted();try{const{documentPermissions:o,stopTracking:a}=this.instance().trackPublicPermissions(),l=await this.requireEngine().readOne(i,s),u=await Rn.resourceFromJsonLDGraph(l,r);if(!n.some(d=>u.isType(d)))return null;const c=await this.instance().createFromEngineDocument(s,l,r);return a(),c._publicPermissions=o[s],c}catch(o){if(ik()&&!Vo(o,zr)&&!Vo(o,rg)&&!Vo(o,mp))throw o;return null}}static async all(e={}){e=this.prepareEngineFilters(e);const{documentPermissions:n,stopTracking:r}=this.instance().trackPublicPermissions(),s=await super.all(e);return r(),s.forEach(i=>i._publicPermissions=n[i.requireDocumentUrl()]),s}static prepareEngineFilters(e={}){const n=!this.usingSolidEngine();return this.instance().convertEngineFiltersToJsonLD(e,n)}static rdfTerm(e,n){return n??(n=this.rdfContexts),xi(e,$r({extraContext:n,defaultPrefix:Object.values(n).shift()}))}static async newFromJsonLD(e,n,r){const s=fR(e),i=await Rn.fromJsonLD(s,n??this.collection),o=await i.toJsonLD(),a=r??this.findMatchingResourceIds(i.statements,n)[0]??Tt(ze,"Couldn't find matching resource in JSON-LD"),l=i.resource(a),u=n||fs(a),c=await this.instance().parseEngineDocumentAttributes(u,o,a);return this.hasAutomaticTimestamp(Rt.CreatedAt)&&(c.createdAt=l==null?void 0:l.getPropertyValue(Ct("purl:created"))),this.hasAutomaticTimestamp(Rt.UpdatedAt)&&(c.updatedAt=l==null?void 0:l.getPropertyValue(Ct("purl:modified"))),Ye(this.newInstance($r(c)),async d=>{await d.loadDocumentModels(u,o),d.reset(),d._sourceSubject=e["@id"]?pR(e["@id"]):{};for(const f of this.relations){const p=d.requireRelation(f),h=p.getLoadedModels();p.enabled&&(xh(p,Mo).reset(h),h.forEach(g=>g.reset()))}})}static async createFromJsonLD(e,n,r){return Ye(await this.newFromJsonLD(e,n,r),s=>s.save(n))}static async createInDocument(e,n,r){return Ye(new this(e),s=>s.saveInDocument(n,r))}static async synchronize(e,n,r={}){if(this!==e.static())return e.static().synchronize(e,n,{...r,__models:r.__models??new WeakSet});await lO(e,n,{...r,models:r.__models??new WeakSet})}static findMatchingResourceIds(e,n){const r=e.reduce((s,i)=>{var o;return i.predicate.value==="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"&&(s[i.subject.value]=s[i.subject.value]??[],(o=s[i.subject.value])==null||o.push(i.object.value)),s},{});return Object.entries(r).filter(([s,i])=>i.some(o=>this.rdfsClasses.includes(o))).map(([s])=>n?sa(n,s):s)}static bootRdfContexts(e,n,r,s={}){var i,o;const a=s.modelClass??this,l={crdt:"https://vocab.noeldemartin.com/crdt/",foaf:"http://xmlns.com/foaf/0.1/",ldp:"http://www.w3.org/ns/ldp#",pim:"http://www.w3.org/ns/pim/space#",posix:"http://www.w3.org/ns/posix/stat#",purl:"http://purl.org/dc/terms/",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",schema:"https://schema.org/",solid:"http://www.w3.org/ns/solid/terms#",xsd:"http://www.w3.org/2001/XMLSchema#"},u=()=>{var d;return(d=Object.entries({...n,...l}).find(([f,p])=>(r==null?void 0:r.startsWith(`${f}:`))||(r==null?void 0:r.startsWith(ir(p)))))==null?void 0:d[1]};n.default??(n.default=e??u()??Object.values(n).find(d=>!!d));let c=Object.getPrototypeOf(a);return s.skipParentSchema&&c.__isSchema&&(c=Object.getPrototypeOf(c)),c?this.bootRdfContexts(((i=Object.getOwnPropertyDescriptor(c,"rdfContext"))==null?void 0:i.value)??null,{...n,...((o=Object.getOwnPropertyDescriptor(c,"rdfContexts"))==null?void 0:o.value)??{}},c.rdfsClass,{modelClass:c}):{...n,...l,default:n.default??"http://www.w3.org/ns/solid/terms#"}}static bootRdfsClasses(e,n,r,s){var i,o,a;const l=s??this;if(n&&n.length>0)return Ur((n==null?void 0:n.map(c=>this.rdfTerm(c,r)))??[]);if(e)return[this.rdfTerm(e,r)];const u=Object.getPrototypeOf(l);return u?this.bootRdfsClasses(((i=Object.getOwnPropertyDescriptor(u,"rdfsClass"))==null?void 0:i.value)??null,((o=Object.getOwnPropertyDescriptor(u,"rdfsClasses"))==null?void 0:o.value)??null,{...r,...((a=Object.getOwnPropertyDescriptor(u,"rdfContexts"))==null?void 0:a.value)??{}},u):[this.rdfTerm(this.getDefaultRdfContext(r)+this.modelName,r)]}static bootRdfsClassesAliases(e,n){return e.map(r=>Ur(r.map(s=>Ct(s,this.rdfContexts,this.getDefaultRdfContext(n)))??[]))}static bootCollection(){const e=super.bootCollection();if(!e.match(/^\w+:\/\/.*\/$/))throw new yi(this.modelName,`SolidModel collections must be valid container urls (ending with a trailing slash), '${e}' isn't.`);return e}static bootFields(e,n,r,s){var i,o,a;const l=qR(this)??this.rdfContexts,u=this.getDefaultRdfContext(l),{fieldAliases:c}=super.bootFields(e,n,r,s);r.includes(Rt.CreatedAt)&&delete s[Rt.CreatedAt],r.includes(Rt.UpdatedAt)&&delete s[Rt.UpdatedAt];for(const[d,f]of Object.entries(s))f.rdfProperty=Ct(f.rdfProperty??`${u}${d}`,l,u),f.rdfPropertyAliases=((i=f.rdfPropertyAliases)==null?void 0:i.map(p=>Ct(p,l,u)))??[];return(o=s[n])==null||delete o.rdfProperty,(a=s[n])==null||delete a.rdfPropertyAliases,{fields:s,fieldAliases:c}}static getDefaultRdfContext(e){return e??(e=this.rdfContexts),e.default??""}static async performSchemaUpdate(e){try{e.primaryKey??(e.primaryKey="url");const n=this.bootRdfContexts(e.rdfContext??null,{...e.rdfContexts},e.rdfsClass,{skipParentSchema:!0}),r=this.bootRdfsClasses(e.rdfsClass??null,e.rdfsClasses??null,n),s=this.bootRdfsClassesAliases(e.rdfsClassesAliases??[],n);jR(this,n),await super.performSchemaUpdate(e),this.rdfContexts=n,this.rdfsClasses=r,this.rdfsClassesAliases=s,this.rdfsClass=e.rdfsClass,this.rdfContext=e.rdfContext,this.defaultResourceHash=e.defaultResourceHash??"it",this.slugField=e.slugField,this.history=e.history??!1,this.tombstone=e.tombstone??!0}finally{UR(this)}}initialize(e,n){this._documentExists=n,this._sourceDocumentUrl=this._sourceDocumentUrl??null,this._trackedDirtyAttributes={},this._removedResourceUrls=[],this._usesRdfAliases=!1,super.initialize(e,n)}initializeRelations(){super.initializeRelations(),this.initializeRelationsEnabling(),this.initializeMetadataRelation()}initializeRelationsEnabling(){this.static().hasAutomaticTimestamps()||this._proxy.relatedMetadata.disable(),this._proxy.tracksHistory()||(this._proxy.relatedOperations.disable(),this._proxy.relatedTombstone.disable()),this._proxy.relatedAuthorizations.disable()}initializeMetadataRelation(){if(!this._proxy.relatedMetadata.enabled)return;const e=this._proxy.relatedMetadata.relatedClass.newInstance($r({resourceUrl:this._attributes[this.static("primaryKey")],createdAt:this._attributes.createdAt,updatedAt:this._attributes.updatedAt}),!1);e.resourceUrl&&e.mintUrl(this.getDocumentUrl()||void 0,this._documentExists),this._proxy.relatedMetadata.attach(e),delete this._attributes.createdAt,delete this._attributes.updatedAt,delete this._originalAttributes.createdAt,delete this._originalAttributes.updatedAt}static(e){return super.static(e)}update(e){return this._lock.run(()=>super.update(e))}save(e){return this.static().withCollection(e||this.guessCollection(),()=>super.save())}async saveInDocument(e,n){return this.exists()?O$(this.getDocumentUrl()===e,ze,"Model already exists and is not stored in the given document"):this.mintUrl(e,!0,n),await this.save(),this}delete(){return this.static().softDeletesEnabled?this.softDelete():this.forceDelete()}forceDelete(){return this.static().withCollection(this.guessCollection(),()=>super.delete())}async softDelete(){if(!this.static().hasAutomaticTimestamps())throw new ze("Cannot soft delete a model without automatic timestamps");if(this.isSoftDeleted())return this;const e=new Date;return this.metadata.setAttribute(Rt.UpdatedAt,e),this.metadata.setAttribute("deletedAt",e),await this.save(),this}async registerInTypeIndex(e){const n=en("SolidDocument");await new n({url:this.getDocumentUrl()}).register(e,this.static())}mintUrl(e,n,r){this.setAttribute(this.static("primaryKey"),this.newUrl(e,r)),e&&(this._documentExists=n??!0)}toJsonLD(e={}){e={ids:!0,timestamps:!0,history:!0,...e};const n=this.clone();return e.ids||n.getRelatedModels().forEach(r=>r.setAttribute("url",null)),e.timestamps||n.getRelatedModels().forEach(r=>{r.relatedMetadata.related=null,delete r.relatedMetadata.__modelInSameDocument,delete r.relatedMetadata.__modelInOtherDocumentId,delete r.relatedMetadata.__newModel}),e.history||n.getRelatedModels().forEach(r=>{r.relatedOperations.related=[],r.relatedOperations.__newModels=[],delete r.relatedOperations.__modelsInSameDocument,delete r.relatedOperations.__modelsInOtherDocumentIds}),n.serializeToJsonLD()}async toTurtle(e={}){const n=await eg(this.toJsonLD(e));return eR(n)}getIdAttribute(){return this.getAttribute("url")}setExists(e){this._documentExists=e&&this._documentExists,super.setExists(e)}documentExists(){return this._documentExists}setDocumentExists(e){this.getDocumentModels().forEach(n=>n._documentExists=e)}isDirty(e,n){var r,s;if(e)return this.static("timestamps").includes(e)?((r=this.metadata)==null?void 0:r.isDirty(e))||super.isDirty(e):super.isDirty(e);if(super.isDirty())return!0;if(n)return!!((s=this.metadata)!=null&&s.isDirty("deletedAt"));const i=this.getDocumentModels().filter(a=>a.isDirty(void 0,!0)),o=this.getRemovedDocumentModels();return i.length+o.length>0}isSoftDeleted(){var e;return!!((e=this.metadata)!=null&&e.deletedAt)}cleanDirty(e){super.cleanDirty(),this._documentExists=!0,this._trackedDirtyAttributes={},this._removedResourceUrls=[],Object.values(this._relations).filter(mu).filter(n=>n.enabled&&!ln()).forEach(n=>{if(n.useSameDocument){n.__modelsInSameDocument=n.__modelsInSameDocument||[],n.__modelsInSameDocument.push(...n.__newModels),n.__newModels=[];return}n.__newModels=n.__newModels.filter(r=>!r.exists())}),Object.values(this._relations).filter(bp).filter(n=>n.enabled&&!!n.__newModel&&!ln()).forEach(n=>{var r;if(n.useSameDocument){n.__modelInSameDocument=n.__newModel,n.__newModel=void 0;return}n.__newModel=(r=n.__newModel)!=null&&r.exists()?void 0:n.__newModel}),e||this.getDocumentModels().forEach(n=>n.cleanDirty(!0))}fixMalformedAttributes(){super.fixMalformedAttributes(),this.relatedMetadata.enabled&&(this.static().hasAutomaticTimestamp(Rt.CreatedAt)&&(this.metadata.createdAt=this.getAttribute("createdAt")??new Date),this.static().hasAutomaticTimestamp(Rt.UpdatedAt)&&(this.metadata.updatedAt=this.getAttribute("updatedAt")??this.getAttribute("createdAt")??new Date))}ignoreRdfPropertyHistory(e,n){return!1}getDocumentUrl(){return this.url?fs(this.url):null}requireDocumentUrl(){return this.getDocumentUrl()??Tt(ze,"Failed getting required document url")}usesRdfAliases(){return this._usesRdfAliases}getSourceDocumentUrl(){return this._sourceDocumentUrl}setSourceDocumentUrl(e){this._sourceDocumentUrl=e}requireContainerUrl(){return this.getContainerUrl()??Tt(ze,"Failed getting required container url")}getContainerUrl(){const e=this.getDocumentUrl();return e?Ar(e):null}getSourceContainerUrl(){const e=this.getSourceDocumentUrl();return e?Ar(e):null}setAttribute(e,n){const r=this.getPrimaryKey();super.setAttribute(e,n);const s=this.getPrimaryKey();r!==s&&this.onPrimaryKeyUpdated(s,r)}unsetAttribute(e){var n,r;return((r=(n=this.static("fields"))==null?void 0:n[e])==null?void 0:r.type)===$e.Array?this.setAttributeValue(e,[]):super.unsetAttribute(e)}setCreatedAtAttribute(e){(this.metadata??this).setAttributeValue("createdAt",e)}setUpdatedAtAttribute(e){(this.metadata??this).setAttributeValue("updatedAt",e)}getCreatedAtAttribute(){var e;return((e=this.metadata)==null?void 0:e.getAttributeValue("createdAt"))??super.getAttributeValue("createdAt")}getUpdatedAtAttribute(){var e;return((e=this.metadata)==null?void 0:e.getAttributeValue("updatedAt"))??super.getAttributeValue("updatedAt")}getDeletedAtAttribute(){var e;return((e=this.metadata)==null?void 0:e.getAttributeValue("deletedAt"))??super.getAttributeValue("deletedAt")}getDocumentModels(){return ln()?[]:fv("document-models",this,()=>{const e=new Set;return this.populateDocumentModels(e),Ye(Array.from(e),n=>{n.forEach(r=>Bm("document-models",r,n))})})}getRemovedDocumentModels(){const e=new Set;for(const n of Object.values(this._relations))!n.enabled||!n.loaded||!Mo(n)||!mu(n)||n.__removedDocumentModels.forEach(r=>e.add(r));return Array.from(e)}getDirtyDocumentModels(){return this.getDocumentModels().filter(e=>e.isDirty(void 0,!0))}requireRelation(e){return super.requireRelation(e)}getRelationModel(e){return super.getRelationModel(e)}getRelationModels(e){return super.getRelationModels(e)}setRelationModel(e,n){return super.setRelationModel(e,n)}setRelationModels(e,n){return super.setRelationModels(e,n)}getRelatedModels(){return fv("related-models",this,()=>{const e=new Set;return this.populateRelatedModels(e),Array.from(e)})}getDefaultCollection(){return`solid://${super.getDefaultCollection()}/`}usingSolidEngine(){return!!this.requireFinalEngine().__isSolidEngine}metadataRelationship(){const e=en("Metadata");return this.hasOne(e,"resourceUrl").usingSameDocument(!ln()).onDelete("cascade")}operationsRelationship(){return new ZR(this).usingSameDocument(!ln()).onDelete("cascade")}tombstoneRelationship(){return new aO(this)}authorizationsRelationship(){return new tO(this)}onMoved(e,n){n&&this.setSourceDocumentUrl(n)}async createFromEngineDocument(e,n,r){const s=async()=>{const l=await this.parseEngineDocumentAttributes(e,n,r);l[this.static("primaryKey")]=new lr(r||e);for(const[u,c]of Object.entries(this.static("fields")))c.deserialize&&(l[u]=c.deserialize(l[u]));return this.newInstance(l,!0)},i=ir(e),o=await Rn.resourceFromJsonLDGraph(n,r||i),a=await s();if(await a.loadDocumentModels(i,n),a.hasIncompleteAttributes())throw new mp(i);return Ye(a,l=>{l._sourceDocumentUrl=H_(i,{fragment:!1}),l._usesRdfAliases=this.static("rdfsClassesAliases").some(u=>!u.some(c=>!o.isType(c)))})}async createManyFromEngineDocuments(e){const n=Ur([this.static("rdfsClasses"),...this.static("rdfsClassesAliases")].flat()),r=await Promise.all(Object.entries(e).map(async([s,i])=>{const o=await Rn.fromJsonLD(i);return Promise.all(o.resources.filter(a=>!!a.url&&n.some(l=>a.isType(l))).map(async a=>{try{return await this.createFromEngineDocument(s,i,a.url)}catch(l){if(l instanceof mp)return null;throw l}}))}));return Tn(r.flat())}async loadDocumentModels(e,n){const r=this.requireEngine();await Promise.all(Object.values(this._relations).filter(s=>s.enabled&&(Mo(s)||s instanceof Qu)).map(async s=>s.relatedClass.withEngine(r,()=>s.__loadDocumentModels(e,n))))}async beforeSave(e){var n;const r=this.isDirty(Rt.UpdatedAt)||!!((n=this.metadata)!=null&&n.isDirty(Rt.UpdatedAt));await super.beforeSave(),!this.url&&this.static("mintsUrls")&&!ln()&&this.mintUrl(),!e&&(await Promise.all(this.getDirtyDocumentModels().map(async s=>s.exists()||s.beforeCreate())),await this.beforeDocumentSave(),await Promise.all(this.getDirtyDocumentModels().map(async s=>s.exists()&&s.beforeUpdate())),this.reconcileModelTimestamps(r))}async beforeDocumentSave(){let e=[];const n=new Set,r=()=>(e=this.getDocumentModels().filter(s=>!n.has(s)),e.length>0);for(;r();)this.static("mintsUrls")&&!ln()&&this.mintDocumentModelsKeys(e),await Promise.all(e.map(async s=>{s!==this&&s.isDirty(void 0,!0)&&await s.beforeSave(!0),n.add(s)}))}async beforeCreate(){for(const e of Object.values(this._relations))!e.enabled||!GR(e)||e.__beforeParentCreate();this.metadata&&!this.metadata.resourceUrl&&this.static("defaultResourceHash")&&!ln()&&(this.metadata.resourceUrl=this.url??`#${this.static("defaultResourceHash")}`,this.metadata.mintUrl(this.getDocumentUrl()||void 0,this._documentExists))}async beforeUpdate(){this.tracksHistory()&&this.isDirty(void 0,!0)&&(await this.addDirtyHistoryOperations(),await Promise.all(this.operations.map(async e=>{e.exists()||(await e.beforeCreate(),await e.beforeSave(!0),this.mintDocumentModelsKeys([e]))})))}async performSave(){const e=this.getDirtyDocumentModels().map(n=>[n,n.exists()]);try{await super.performSave()}catch(n){if(!(n instanceof Hm))throw n;this.url=this.newUniqueUrl(this.url),await super.performSave()}e.forEach(([n,r])=>{n._wasRecentlyCreated=n._wasRecentlyCreated||!r})}async performDelete(){this.tracksHistory()&&this.leavesTombstone()&&this.relatedTombstone.create(),await super.performDelete()}async afterSave(e){if(await super.afterSave(),!e){this.metadata&&this.metadata.resourceUrl!==this.url&&(this.metadata.resourceUrl=this.url,ln()||this.metadata.mintUrl(this.getDocumentUrl()||void 0,this._documentExists)),await Promise.all(this.getDirtyDocumentModels().map(n=>n.afterSave(!0)));for(const n of Object.values(this._relations))!n.enabled||!JR(n)||n.__afterParentSave()}}onPrimaryKeyUpdated(e,n){var r,s;const i=this.getDocumentUrl()||void 0,o=this.documentExists(),a=Object.values(this._relations).filter(l=>l.enabled&&lg(l));for(const l of a)l.getLoadedModels().forEach(u=>{const c=u.getAttribute(l.foreignKeyName);u.setAttribute(l.foreignKeyName,Array.isArray(c)?Ye(c.slice(0),d=>P_(d,n,e)):e)});ln()||((r=this.metadata)==null||r.mintUrl(i,o),(s=this.operations)==null||s.map(l=>l.mintUrl(i,o)))}async syncDirty(){const e=this.getDocumentUrl(),n=()=>this.requireEngine().create(e?Hr(e):this.static("collection"),this.toEngineDocument(),e||void 0),r=()=>this.requireEngine().update(Hr(e),e,{"@graph":{$push:this.serializeToJsonLD()}}),s=()=>this.requireEngine().update(Hr(e),e,this.getDirtyEngineDocumentUpdates());return await(async()=>{if(!this._documentExists){const i=this.static("defaultResourceHash"),o=await n();return this.getSerializedPrimaryKey()??(i&&!ln()?`${o}#${i}`:o)}return this._exists?(await s(),this.getSerializedPrimaryKey()):(await r(),this.getSerializedPrimaryKey())})()??Tt(ze,"Missing primary key")}async deleteModelsFromEngine(e){await this.deleteModels(e)}hasOne(e,n,r){return new oO(this,e,n,r)}hasMany(e,n,r){return new L1(this,e,n,r)}belongsToOne(e,n,r){return new sO(this,e,n,r)}belongsToMany(e,n,r){return new ug(this,e,n,r)}isContainedBy(e){return new F1(this,e)}documentContainsMany(e){return new Qu(this,e)}toEngineDocument(){return{"@graph":this.getDirtyDocumentModels().map(e=>e.serializeToJsonLD({includeRelations:!1,includeAnonymousHashes:!0}))}}getDirtyEngineDocumentUpdates(e){const n=[],r=this.requireEngine(),s=this.getDirtyDocumentModels(),i=this.getRemovedDocumentModels();if(!e){for(const o of s){if(o===this)continue;if(!o.exists()){n.push({$push:o.serializeToJsonLD({includeRelations:!1})});continue}const a=o.withEngine(r,l=>l.getDirtyEngineDocumentUpdates(!0))["@graph"];"$apply"in a?n.push(...a.$apply):n.push(a)}for(const o of i)o.getDocumentModels().forEach(a=>n.push({$updateItems:{$where:{"@id":a.url},$unset:!0}}))}if(super.isDirty()&&this.url){const o=super.getDirtyEngineDocumentUpdates(),a=!this.usingSolidEngine();n.push({$updateItems:{$where:{"@id":this.url},$update:this.convertEngineUpdatesToJsonLD(o,a)}})}return this._removedResourceUrls.forEach(o=>n.push({$updateItems:{$where:{"@id":o},$unset:!0}})),n.length===1?{"@graph":n[0]}:{"@graph":{$apply:n}}}async parseEngineDocumentAttributes(e,n,r){return this.parseEngineDocumentAttributesFromJsonLD(n,r||e)}castAttribute(e,n={}){const r=()=>{var s;const i=typeof e>"u"||e===null;switch((s=n.definition)==null?void 0:s.type){case $e.Array:{const o=i?[]:ur(e),a=Ur(o);return o.length!==a.length&&console.warn("An array field had duplicate values, this is not supported in Solid models."),a}case $e.Any:if(!Array.isArray(e))return e;if(e.length===0)return;if(e.length===1)return e[0];break}return i?void 0:e};return super.castAttribute(r(),n)}newUrl(e,n){return e=e??this.newUrlDocumentUrl(),n=n??this.newUrlResourceHash(),n?`${e}#${n}`:e}newUrlDocumentUrl(){var e;const n=((e=this._sourceSubject)==null?void 0:e.documentName)??this.newUrlDocumentUrlSlug()??Ks();return sa(this.static("collection"),n)}newUrlDocumentUrlSlug(){const e=this.static("slugField"),n=e&&this.getAttribute(e);return(n&&B_(n))??null}newUrlResourceHash(){var e;return((e=this._sourceSubject)==null?void 0:e.resourceHash)??this.static("defaultResourceHash")}newUniqueUrl(e){var n;e=e??this.newUrl();const r=(n=id(e))==null?void 0:n.fragment;return`${fs(e)}-${j_()}${r?`#${r}`:""}`}guessCollection(){if(this.url)return Ar(this.url)??void 0}mintDocumentModelsKeys(e){const n=this.requireDocumentUrl(),r=this._documentExists;for(const s of e)s.url||s.mintUrl(n,r,Ks());for(const s of e)for(const i of Object.values(s._relations))i.enabled&&i.getLoadedModels().forEach(o=>i.setForeignAttributes(o))}populateRelatedModels(e){if(!e.has(this)){e.add(this);for(const n of Object.values(this._relations))n.enabled&&(bp(n)&&n.__newModel&&n.__newModel.populateRelatedModels(e),mu(n)&&n.__newModels.map(r=>r.populateRelatedModels(e)),n.getLoadedModels().forEach(r=>r.populateRelatedModels(e)))}}populateDocumentModels(e){if(e.has(this))return;const n=this.getDocumentUrl(),r=(s,i)=>n&&i.getDocumentUrl()===n||Mo(s)&&s.useSameDocument;e.add(this);for(const s of Object.values(this._relations)){const i=s instanceof Qu;if(!(!s.enabled||!s.loaded||!i&&!Mo(s))){if(bp(s)&&s.__newModel&&r(s,s.__newModel)&&s.__newModel.populateDocumentModels(e),mu(s))for(const o of s.__newModels)r(s,o)&&o.populateDocumentModels(e);s.getLoadedModels().filter(o=>i||r(s,o)).forEach(o=>o.populateDocumentModels(e))}}}};Pe(jt,"primaryKey","url"),Pe(jt,"fields"),Pe(jt,"classFields",["_history","_publicPermissions","_tombstone"]),Pe(jt,"rdfContext"),Pe(jt,"rdfContexts",{}),Pe(jt,"rdfsClass"),Pe(jt,"rdfsClasses",[]),Pe(jt,"rdfsClassesAliases",[]),Pe(jt,"reservedRelations",["metadata","operations","tombstone","authorizations"]),Pe(jt,"defaultResourceHash","it"),Pe(jt,"slugField"),Pe(jt,"mintsUrls",!0),Pe(jt,"history",!1),Pe(jt,"tombstone",!0),Pe(jt,"rdfPropertyFields"),Pe(jt,"historyDisabled",new WeakMap),Pe(jt,"softDeletesEnabled",!1);function fn(t,e){return O1(t,jt,e)}const j1={resourceUrl:{type:$e.Key,required:!0,rdfProperty:"resource"},date:{type:$e.Date,required:!0}},dO=fn({rdfContexts:{crdt:"https://vocab.noeldemartin.com/crdt/"},rdfsClass:"Operation",timestamps:!1,fields:j1});let pd=class extends dO{apply(e){}isInception(e){var n,r;return((r=(n=e.metadata)==null?void 0:n.createdAt)==null?void 0:r.getTime())===this.date.getTime()}newUrl(e,n){if(!this.resourceUrl)return super.newUrl(e,n);const r=n??Ks();return this.resourceUrl.includes("#")?`${this.resourceUrl}-operation-${r}`:`${this.resourceUrl}#operation-${r}`}};const hd={...j1,property:{type:$e.Key,required:!0}},fO=fn(pd,{rdfsClass:"PropertyOperation",fields:hd});let Ws=class extends fO{apply(e){const n=e.static().getRdfPropertyField(this.property);n&&this.applyPropertyUpdate(e,n)}applyPropertyUpdate(e,n){}};const pO=fn(Ws,{rdfsClass:"AddPropertyOperation",fields:{...hd,value:{type:$e.Any,required:!0}}});class hO extends pO{applyPropertyUpdate(e,n){const r=e.getAttributeValue(n);if(!Array.isArray(r))throw new ze("Can't apply Add operation to non-array field (should be Set instead)");e.setAttributeValue(n,r.concat(ur(this.value)))}}const mO=fn(pd,{rdfsClass:"DeleteOperation"});class gO extends mO{apply(e){e.metadata.setAttribute("deletedAt",this.date)}}const yO=fn({rdfContexts:{crdt:"https://vocab.noeldemartin.com/crdt/"},rdfsClass:"Metadata",timestamps:!1,fields:{resourceUrl:{type:$e.Key,required:!0,rdfProperty:"resource"},createdAt:$e.Date,updatedAt:$e.Date,deletedAt:$e.Date}});let cg=class extends yO{getCreatedAtAttribute(){return this.getAttributeValue("createdAt")}getUpdatedAtAttribute(){return this.getAttributeValue("updatedAt")}newUrl(e,n){return this.resourceUrl?this.resourceUrl.includes("#")?`${this.resourceUrl}-metadata`:`${this.resourceUrl}#metadata`:super.newUrl(e,n)}};const vO=fn(Ws,{rdfsClass:"RemovePropertyOperation",fields:{...hd,value:{type:$e.Any,required:!0}}}),q1=class Th extends vO{applyPropertyUpdate(e,n){const r=e.static().getFieldDefinition(n),s=e.getAttributeValue(n),i=r.deserialize?r.deserialize(s):s;if(!Array.isArray(i))throw new ze("Can't apply Remove operation to non-array field (use Unset instead)");e.setAttributeValue(n,Gr(i,this.castModelAttribute(e,n,ur(this.value))))}castModelAttribute(e,n,r){const s=e.constructor;return(Th.attributeCasters.get(s)??this.createAttributeCaster(s))(n,r)}createAttributeCaster(e){const n=(class extends e{castAttribute(r,s={}){return super.castAttribute(r,s)}}).pureInstance();return Ye((r,s)=>n.castAttribute(s,{definition:n.static().getFieldDefinition(r)}),r=>Th.attributeCasters.set(e,r))}};Pe(q1,"attributeCasters",new WeakMap);let bO=q1;const wO=fn(Ws,{rdfsClass:"SetPropertyOperation",fields:{...hd,value:{type:$e.Any,required:!0}}});let _O=class extends wO{applyPropertyUpdate(e,n){const r=e.static().getFieldDefinition(n),s=r.deserialize?r.deserialize(this.value):this.value;e.setAttributeValue(n,s)}},Fs=class extends cg{};Pe(Fs,"rdfsClass","Tombstone");const xO=fn(Ws,{rdfsClass:"UnsetPropertyOperation"});let SO=class extends xO{applyPropertyUpdate(e,n){e.unsetAttribute(n)}};const EO={AddPropertyOperation:hO,DeleteOperation:gO,Metadata:cg,Operation:pd,PropertyOperation:Ws,RemovePropertyOperation:bO,SetPropertyOperation:_O,Tombstone:Fs,UnsetPropertyOperation:SO},AO=fn({rdfContexts:{acl:"http://www.w3.org/ns/auth/acl#"},rdfsClass:"Authorization",timestamps:!1,fields:{agents:{rdfProperty:"agent",type:$e.Array,items:$e.Key},agentClasses:{rdfProperty:"agentClass",type:$e.Array,items:$e.Key},agentGroups:{rdfProperty:"agentGroup",type:$e.Array,items:$e.Key},accessTo:{type:$e.Array,items:$e.Key},accessToClasses:{rdfProperty:"accessToClass",type:$e.Array,items:$e.Key},default:{type:$e.Array,items:$e.Key},modes:{rdfProperty:"mode",type:$e.Array,items:$e.Key}}}),CO={[vi.Read]:"http://www.w3.org/ns/auth/acl#Read",[vi.Write]:"http://www.w3.org/ns/auth/acl#Write",[vi.Append]:"http://www.w3.org/ns/auth/acl#Append",[vi.Control]:"http://www.w3.org/ns/auth/acl#Control"};let U1=class extends AO{static get fetch(){return this.requireFetch()}static modeFromSolidDocumentPermission(e){return CO[e]}};const $O=fn({rdfsClass:"ldp:Resource",timestamps:!1,fields:{updatedAt:{type:$e.Date,rdfProperty:"purl:modified"}}}),kO=fn({rdfContexts:{solid:"http://www.w3.org/ns/solid/terms#"},rdfsClass:"TypeRegistration",timestamps:!1,fields:{forClass:{type:$e.Array,items:$e.Key},instance:$e.Key,instanceContainer:$e.Key}});let Cl=class extends kO{};class Uo extends $O{static async fromTypeIndex(e,n){const r=this.requireFinalEngine(),s=r instanceof sg?r.getFetch():void 0;return(await vR(e,n.rdfsClasses,s)).map(i=>this.newInstance({url:i},!0))}async register(e,n){const r=new Cl({forClass:n.rdfsClasses[0],instance:this.url});if(typeof e=="string"){r.mintUrl(e,!0,Ks()),await r.withEngine(this.requireEngine(),()=>r.save(Hr(e)));return}await e.withEngine(this.requireEngine(),async()=>{await e.loadRelationIfUnloaded("registrations"),await e.relatedRegistrations.create(r)})}}const IO=["http://www.w3.org/ns/iana/media-types/text/turtle#Resource","http://www.w3.org/ns/iana/media-types/application/rdf+xml#Resource","http://www.w3.org/ns/iana/media-types/application/ld+json#Resource","http://www.w3.org/ns/ldp#Container","http://www.w3.org/ns/ldp#BasicContainer"];let RO=class extends ug{constructor(e){super(e,Uo,"resourceUrls")}get container(){return this.parent}async load(){if(this.isEmpty())return this.related=[];if(this.parent.usingSolidEngine())return super.load();const e=await this.parent.requireEngine().readMany(this.container.requireDocumentUrl());return this.related=Object.entries(e).map(([n,r])=>new Uo({url:n,updatedAt:this.getLatestUpdateDate(r["@graph"])})),this.related}async __loadDocumentModels(e,n){if(!Uo.usingSolidEngine())return super.__loadDocumentModels(e,n);const r=this.parent.resourceUrls,s=Rn.reduceJsonLDGraph(n,this.parent.url),i=n["@graph"].filter(a=>{if(r.indexOf(a["@id"])===-1)return!1;const l=ur(a["@type"]??[]);return IO.some(u=>l.includes(u))}).map(a=>a["@id"]),o=await Promise.all(i.map(a=>Uo.createFromEngineDocument(e,s,a)));this.protectedSolidBelongsTo.loadDocumentModels(o,[])}getLatestUpdateDate(e){const n=e.reduce((r,s)=>{const{"@value":i}=s["purl:modified"]??s["http://purl.org/dc/terms/modified"]??s["purl:created"]??s["http://purl.org/dc/terms/created"]??{"@value":0},o=new Date(i).getTime();return Math.max(r,o)},0);return new Date(n)}};const OO=fn({rdfsClass:"ldp:Resource",timestamps:!1,fields:{types:{type:$e.Array,rdfProperty:"rdf:type",items:$e.Key},updatedAt:{type:$e.Date,rdfProperty:"purl:modified"}}});let Bo=class extends OO{},TO=class extends ug{constructor(e){super(e,Bo,"resourceUrls")}get container(){return this.parent}async load(){if(this.isEmpty())return this.related=[];if(this.parent.usingSolidEngine())return super.load();const e=await this.parent.requireEngine().readMany(this.container.requireDocumentUrl());return this.related=Object.entries(e).map(([n,r])=>new Bo({url:n,updatedAt:this.getLatestUpdateDate(r["@graph"])})),this.related}async __loadDocumentModels(e,n){if(!Bo.usingSolidEngine())return super.__loadDocumentModels(e,n);const r=this.parent.resourceUrls,s=Rn.reduceJsonLDGraph(n,this.parent.url),i=n["@graph"].filter(a=>r.indexOf(a["@id"])!==-1).map(a=>a["@id"]),o=await Promise.all(i.map(a=>Bo.createFromEngineDocument(e,s,a)));this.protectedSolidBelongsTo.loadDocumentModels(o,[])}getLatestUpdateDate(e){const n=e.reduce((r,s)=>{const{"@value":i}=s["purl:modified"]??s["http://purl.org/dc/terms/modified"]??s["purl:created"]??s["http://purl.org/dc/terms/created"]??{"@value":0},o=new Date(i).getTime();return Math.max(r,o)},0);return new Date(n)}},B1=class extends Ho{constructor(e,n){super(e,n,"resourceUrls","url")}setForeignAttributes(e){const n=e.getDocumentUrl();if(!n||!e.url||this.parent.resourceUrls.includes(n))return;const r=this.parent.resourceUrls.concat([n]);this.parent.usingSolidEngine()?this.parent.setOriginalAttribute("resourceUrls",r):this.parent.setAttribute("resourceUrls",r)}clearForeignAttributes(e){const n=e.getDocumentUrl();if(!n||!e.url||!this.parent.resourceUrls.includes(n))return;const r=Gr(this.parent.resourceUrls,n);this.parent.usingSolidEngine()?this.parent.setOriginalAttribute("resourceUrls",r):this.parent.setAttribute("resourceUrls",r)}async load(){return this.related=this.isEmpty()?[]:await this.relatedClass.from(this.parent.url).all({$in:this.parent.resourceUrls}),this.related}async create(e={}){this.assertParentExists();const n=this.relatedClass.newInstance(e);return!n.url&&n.static("mintsUrls")&&!ln()&&await this.relatedClass.withCollection(this.parent.url,()=>n.mintUrl()),Ye(this.attach(n),r=>this.save(r))}async save(e){return this.assertParentExists(),Ye(e,async()=>{await e.save(this.parent.url),this.setForeignAttributes(e),await this.parent.save()})}async delete(e){var n;const r=e instanceof this.relatedClass?e:(n=this.related)==null?void 0:n.find(s=>s.url===e);r&&(await r.delete(),this.related&&(this.related=Gr(this.related,r)))}assertParentExists(){if(!this.parent.exists())throw new ze("Cannot save a model because the container doesn't exist")}onRelatedUpdated(e,n){if(this!==this.parent.requireRelation(this.name))return;const{added:r,removed:s}=va(e??[],n??[]);un(this.parent),e==null||e.forEach(i=>un(i)),n==null||n.forEach(i=>un(i)),s.forEach(i=>this.clearInverseRelations(i)),r.forEach(i=>this.initializeInverseRelations(i))}};const DO={name:{type:$e.String,rdfProperty:"rdfs:label"},description:{type:$e.String,rdfProperty:"rdfs:comment"},resourceUrls:{type:$e.Array,rdfProperty:"ldp:contains",items:$e.Key},createdAt:{type:$e.Date,rdfProperty:"purl:created"},updatedAt:{type:$e.Date,rdfProperty:"purl:modified"}},PO=fn({rdfsClass:"ldp:Container",timestamps:!1,fields:DO});let Ir=class extends PO{static boot(e){super.boot(e),this.slugField=this.slugField??"name"}static async fromTypeIndex(e,n){const r=this.requireFinalEngine(),s=r instanceof sg?r.getFetch():void 0;return(await yR(e,n.rdfsClasses,s)).map(i=>this.newInstance({url:i},!0))}documentsRelationship(){return new RO(this)}resourcesRelationship(){return new TO(this)}markAttributeDirty(e,n,r){return e==="resourceUrls"&&this.usingSolidEngine()?!1:super.markAttributeDirty(e,n,r)}async register(e,n){const r=new Cl({forClass:ur(n).map(s=>s.rdfsClasses).flat(),instanceContainer:this.url});if(typeof e=="string"){r.mintUrl(e,!0,Ks()),await r.withEngine(this.requireEngine(),()=>r.save(Hr(e)));return}await e.withEngine(this.requireEngine(),async()=>{await e.loadRelationIfUnloaded("registrations"),!e.registrations.some(s=>r.instanceContainer===s.instanceContainer&&!r.forClass.some(i=>!s.forClass.includes(i)))&&await e.relatedRegistrations.create(r)})}static(e){return super.static(e)}ignoreRdfPropertyHistory(e,n){return n??(n=this.usingSolidEngine()),n&&e===ng}contains(e){return new B1(this,e)}newUrl(){return hv(this.newUrlDocumentUrl())}newUniqueUrl(e){e=e??this.newUrl();const n=z_(e);return hv(Hr(e),`${n}-${j_()}`)}};Pe(Ir,"defaultResourceHash",null);const MO=fn({rdfContext:"http://www.w3.org/ns/solid/terms#",rdfsClass:"TypeIndex",timestamps:!1,fields:{registrationUrls:{type:$e.Array,items:$e.Key,rdfProperty:"hasTypeRegistration"}}});let rl=class Dh extends MO{static async createPublic(e){const n=await mR(e,Dh.requireFetch()),r=await this.findOrFail(n);return await r.updatePublicPermissions([vi.Read]),r}static async createPrivate(e){const n=await gR(e,Dh.requireFetch());return await this.findOrFail(n)}registrationsRelationship(){return ln()?this.belongsToMany(Cl,"registrationUrls"):new Qu(this,Cl)}async findContainer(e,n){await this.loadRelationIfUnloaded("registrations");const r=this.registrations.filter(s=>s.instanceContainer&&z$(s.forClass,e.rdfsClasses));return gk(r,async s=>s!=null&&s.instanceContainer?(n??Ir).find(s.instanceContainer):null)}};function z1(t){return"rdfContexts"in t}function Ms(t){return t instanceof Ir}function oa(t){return t.rdfsClasses.includes(so)}const V1={...EO,SolidACLAuthorization:U1,SolidContainer:Ir,SolidDocument:Uo,SolidResource:Bo,SolidTypeIndex:rl,SolidTypeRegistration:Cl},LO=new Set(Object.values(V1));function NO(){Wm(V1)}let FO=class{constructor(e,n){Pe(this,"engine"),Pe(this,"metadata"),Pe(this,"active",{}),this.engine=n,this.metadata=new T$(`${e}-documents-cache`)}has(e,n){return!!this.active[this.getDocumentKey(e,n)]}async get(e,n){const r=await this.metadata.get(this.getDocumentKey(e,n));if(r!=null&&r.tombstone){const s=new Date(r.modifiedAt);return{"@graph":[{"@id":r.tombstone.url,"@type":"https://vocab.noeldemartin.com/crdt/Tombstone","https://vocab.noeldemartin.com/crdt/deletedAt":{"@type":"http://www.w3.org/2001/XMLSchema#dateTime","@value":k1(s)},"https://vocab.noeldemartin.com/crdt/resource":{"@id":r.tombstone.resourceUrl}}]}}try{return await this.engine.readOne(e,n)}catch(s){if(s instanceof zr)return null;throw s}}async remember(e,n,r,s={}){const i={modifiedAt:typeof r=="number"?r:r.getTime()};s.tombstone&&(i.tombstone=s.tombstone),await this.metadata.set(this.getDocumentKey(e,n),i)}async forget(e,n){await this.metadata.delete(this.getDocumentKey(e,n))}async activate(e,n,r){const s=await this.metadata.get(this.getDocumentKey(e,n));this.active[this.getDocumentKey(e,n)]=!!(s!=null&&s.modifiedAt)&&s.modifiedAt>=r}async clear(){await this.metadata.clear(),this.metadata.close()}getDocumentKey(e,n){return`${e}-${n}`}};const H1=fn({history:!0,tombstone:!1,rdfContext:"https://schema.org/",rdfsClasses:["Substance","MenuItem"],fields:{name:{type:$e.String,required:!0},description:$e.String,imageUrl:{type:$e.Key,rdfProperty:"image"},aliases:{type:$e.Array,items:$e.String,rdfProperty:"alternateName"},nutritionUrl:{type:$e.Key,rdfProperty:"nutrition"},externalUrls:{type:$e.Array,items:$e.Key,rdfProperty:"sameAs"}}}),jO=Object.freeze(Object.defineProperty({__proto__:null,default:H1},Symbol.toStringTag,{value:"Module"}));var qO=Object.defineProperty,UO=(t,e,n)=>e in t?qO(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Vs=(t,e,n)=>UO(t,typeof e!="symbol"?e+"":e,n);function Jo(t="Something went wrong",...e){const n=typeof t=="string"?Error:t;throw new n(...typeof t=="string"?[t]:e)}function BO(t,e){return t==null&&e==null?[t===null?1:0,e===null?1:0]:[t??null,e??null]}function ec(t,e){const[n,r]=BO(t,e);return n>r?1:r>n?-1:0}Array.isArray.bind(Array);function gu(t,e){return t instanceof e}function md(t){return typeof t=="object"&&t!==null}function zO(t){return md(t)&&Object.getPrototypeOf(t)===Object.prototype}function yu(t,e){let n=t;const r=e.split(".");for(const s of r){if(!md(n))return;n=n[s]}return n}Object.entries.bind(Object);function VO(t,e){if(typeof e=="function"){const s=e,i={};for(const[o,a]of Object.entries(t))s(a)||(i[o]=a);return i}const n={...t},r=Array.isArray(e)?e:[e];for(const s of r)delete n[s];return n}function HO(t){return VO(t,e=>e==null)}function _c(t){return String(t)}function KO(t){t.splice(0,t.length)}function WO(t,e,n){const r=t.slice(0),s=[],i=n?(o,a)=>a.findIndex(l=>n(o,l)):(o,a)=>a.indexOf(o);for(const o of e){const a=i(o,r);a!==-1?r.splice(a,1):s.push(o)}return{added:s,removed:r}}function aa(t,e){return e?t.filter(e):t.filter(n=>!!n)}function GO(t,e){for(const n of t)if(e(n))return n;return null}function JO(t,e){return[...t.entries()].flatMap(([n,r])=>e(r,n))}function YO(t,e){const n=typeof e=="string"?r=>_c(r[e]):e;return t.reduce((r,s)=>{var i;return(r[i=n(s)]??(r[i]=[])).push(s),r},{})}function XO(t){return t.length===0}function QO(t,e){return t.map(n=>n[e])}function ZO(t){return t.length===0?null:t[Math.floor(Math.random()*t.length)]}function eT(t,e){const n=t.slice(0),r=[];for(;n.length>0&&r.length<e;){const s=Math.floor(Math.random()*n.length);r.push(n[s]),n.splice(s,1)}return r}function ll(t,e){const n=t.indexOf(e);return n===-1?!1:(t.splice(n,1),!0)}function tT(t,e){return t.splice(Number(e),1).length>0}function nT(t,e,n){const r=t.indexOf(e);return r===-1?!1:(t[r]=n,!0)}function ki(t,e,n){n=e==="asc"||e==="desc"?e:n;const r={},s=a=>{switch(typeof a){case"string":return"";case"number":return Number.MIN_SAFE_INTEGER;case"boolean":return!1;default:return null}},i=(a,l)=>{if(!(l in r)){const u=yu(t.find(c=>yu(c,l)!==void 0&&yu(c,l)!==null),l);r[l]=s(u)}return yu(a,l)??r[l]},o=()=>{const a=n==="desc"?l=>(u,c)=>ec(i(c,l),i(u,l)):l=>(u,c)=>ec(i(u,l),i(c,l));switch(typeof e){case"function":return e;case"string":return e==="asc"?void 0:e==="desc"?(l,u)=>ec(u,l):a(e);case"object":{const l=e.map(u=>a(u));return(u,c)=>{for(const d of l){const f=d(u,c);if(f!==0)return f}return 0}}}};return t.slice(0).sort(o())}function K1(t,e){return e?Object.values(t.reduce((n,r)=>{const s=e(r);return n[s]=n[s]??r,n},{})):[...new Set(t)]}function rT(t,e,n){return t.filter(r=>{const s=r[e],i=typeof s=="function"?s.call(r):s;return n?i===n:!!i})}function sT(t,e){return Array.isArray(e)?aa(t,n=>e.indexOf(n)===-1):iT(t,t.indexOf(e))}function iT(t,e){return W1(t,[e])}function W1(t,e){return t.map((n,r)=>[n,r]).filter(([n,r])=>!e.includes(r)).map(([n])=>n)}function js(t){return Array.from({length:t},(e,n)=>n)}let Rb=class{static isConjuring(){return this.__conjuring}static isMagicReady(){return this.__reservedProperties.has(this)}static prepareMagic(){this.__conjuring=!0,this.__reservedProperties.set(this,new Set(Object.getOwnPropertyNames(new this))),this.__conjuring=!1}static isReservedProperty(e){var n;return!!((n=this.__reservedProperties.get(this))!=null&&n.has(e))}constructor(...e){if(!this.static().isConjuring())return this.static().isMagicReady()||this.static().prepareMagic(),this._proxy=this.createProxy(),this.initialize(...e),this._proxy.instance}static(e){const n=this.constructor;return e?n[e]:n}reserveProperty(e){Object.assign(this,{[e]:null})}initialize(...e){}__get(e){return Reflect.get(this._proxy.target,e)}__set(e,n){Reflect.set(this._proxy.target,e,n)}__delete(e){Reflect.deleteProperty(this._proxy.target,e)}createProxy(){const e=this.static();return{target:this,instance:new Proxy(this,{get(n,r,s){return typeof r!="string"||r in n||e.isReservedProperty(r)?Reflect.get(n,r,s):n.__get(r)},set(n,r,s,i){return typeof r!="string"||r in n||e.isReservedProperty(r)?Reflect.set(n,r,s,i):(n.__set(r,s),!0)},deleteProperty(n,r){return typeof r!="string"||r in n||e.isReservedProperty(r)?Reflect.deleteProperty(n,r):(n.__delete(r),!0)}})}}};Vs(Rb,"__conjuring"),Vs(Rb,"__reservedProperties",new WeakMap);let oT=class G1{constructor(e){Vs(this,"keysToItems"),Vs(this,"itemsToKeys"),Vs(this,"getKey"),this.keysToItems=new Map,this.itemsToKeys=new WeakMap,this.getKey=e??(n=>_c(n))}static createFromArray(e,n){const r=typeof n=="string"?i=>i[n]:n,s=new G1(r);for(const i of e)s.add(i);return s}*[Symbol.iterator](){yield*this.keysToItems}get size(){return this.keysToItems.size}items(){return this.keysToItems.values()}keys(){return this.keysToItems.keys()}entries(){return this.keysToItems.entries()}add(e){const n=this.getKey(e);this.keysToItems.set(n,e),this.itemsToKeys.set(e,n)}require(e){return this.keysToItems.get(e)??Jo(`Couldn't find item with '${e}' key`)}get(e){return this.keysToItems.get(e)}getKeys(){return[...this.keysToItems.keys()]}getItems(){return[...this.keysToItems.values()]}hasKey(e){return this.keysToItems.has(e)}hasItem(e){return this.itemsToKeys.has(e)}delete(e){const n=this.itemsToKeys.get(e);n&&(this.itemsToKeys.delete(e),this.keysToItems.delete(n))}filter(e){const n=this.constructor.createFromArray([],this.getKey);for(const[r,s]of this.entries())e(s,r)&&n.add(s);return n}clear(){this.itemsToKeys=new WeakMap,this.keysToItems.clear()}clone(){const e=this.constructor,n=new e(this.getKey);n.keysToItems=new Map(this.keysToItems),n.itemsToKeys=new WeakMap;for(const[r,s]of n.keysToItems.entries())n.itemsToKeys.set(s,r);return n}},aT=class J1{constructor(){Vs(this,"resolveListeners",[]),Vs(this,"rejectListeners",[]),Vs(this,"resetListeners",[]),this.setPromiseValues()}static from(e){const n=new J1;return e.then(n.resolve.bind(n)).catch(n.reject.bind(n)),n}get value(){return this._value||null}isResolved(){return"_value"in this}then(e,n){return this.promise.then(e,n)}catch(e){return this.promise.catch(e)}finally(e){return this.promise.finally(e)}resolve(e){this.isResolved()&&this.reset(),this._value=e,this._resolve(e),this.resolveListeners.forEach(n=>n(e))}reject(e){this.isResolved()&&this.reset(),delete this._value,this._reject(e),this.rejectListeners.forEach(n=>n(e))}onResolve(e){return this.resolveListeners.push(e),()=>ll(this.resolveListeners,e)}onReject(e){return this.rejectListeners.push(e),()=>ll(this.rejectListeners,e)}onReset(e){return this.resetListeners.push(e),()=>ll(this.resetListeners,e)}reset(){this.setPromiseValues(),this.rejectListeners.forEach(e=>e())}setPromiseValues(){this.promise=new Promise((e,n)=>{this._resolve=e,this._reject=n})}};const Ob={},Y1=class X1{static get instance(){return this._instance=this._instance??new X1}constructor(){}set(e,n){typeof n>"u"&&(n="__undefined__"),localStorage.setItem(e,JSON.stringify(n))}get(e,n=null){const r=localStorage.getItem(e);if(r===null)return n;if(r!=="__undefined__")return JSON.parse(r)}require(e){const n=this.get(e,Ob);if(n===Ob)throw new Error(`Failed getting required key from local storage: '${e}'`);return n}has(e){return localStorage.getItem(e)!==null}remove(e){localStorage.removeItem(e)}pull(e,n=null){if(!this.has(e))return n;const r=this.get(e);return this.remove(e),r}};Vs(Y1,"_instance");let lT=Y1;lT.instance;function uT(t){const e=t;return(e^Math.random()*16>>e/4).toString(16)}function cT(){return("10000000-1000-4000-8000"+-1e11).replace(/[018]/g,uT)}function dT(t={}){const e=typeof t=="number"?t:(t.milliseconds||t.ms||0)+(t.seconds||0)*1e3;return new Promise(n=>setTimeout(n,e))}function ft(t,e=0){const n=10**e;return Math.round(t*n)/n}function fT(t){return t.split("").reverse().join("")}function dg(t){return t.split(/_|-|\s|(?=[A-Z])/)}function pT(t){const[e,...n]=dg(t);return(e??"").toLowerCase()+n.map(r=>r.slice(0,1).toUpperCase()+r.slice(1).toLowerCase()).join("")}function la(t,e="-"){return t=t.normalize("NFD").replace(/[֊־᐀‐‑‒–—―⸗⸚⸺⸻~〜〰゠︱︲﹘﹣－(){}><[\]]/g," ").replace(/[\u0300-\u036f]/g,"").replace(/[\u3000-\u303f]/g,"").replace(/['".,#!$%/\\^&*;:=`@+?]/g,"").toLowerCase().trim().replace(/\s+/g,e),e.length>0&&(t=t.replace(new RegExp(`${e}+`,"g"),e)),t}function hT(t){return dg(t).map(e=>e.slice(0,1).toUpperCase()+e.slice(1).toLowerCase()).join("")}function mT(t){return dg(t).map(e=>e.slice(0,1).toUpperCase()+e.slice(1).toLowerCase()).join(" ")}function gT(t){try{return new URL(t.trim()).toString()}catch{return null}}function Q1(t,e){const n=t.prototype;for(const[r,s]of Object.entries(e))n[r]=function(...i){var o;const a=s(this.value,...i);return(o=this.chain)==null?void 0:o.call(this,a)}}function Z1(t,e){const n=t.prototype,r=Object.getOwnPropertyDescriptors(e.prototype);for(const[s,i]of Object.entries(r))if(!(s in n)){if(typeof i.value!="function"){Object.defineProperty(n,s,{get(){return this.chain(this.value[s])}});continue}n[s]=function(...o){var a;const l=i.value.call(this.value,...o);return(a=this.chain)==null?void 0:a.call(this,l)}}}let ex=class{constructor(e){this.value=e}static isPrimitive(e){return this.prototype.isPrimitive(e)}create(e){const n=this.constructor;return new n(e)}chain(e){return this.isPrimitive(e)?this.create(e):e}};const yT={clear:KO,diff:WO,filter:aa,first:GO,flatMap:JO,groupBy:YO,isEmpty:XO,project:QO,randomItem:ZO,randomItems:eT,remove:ll,removeIndex:tT,replace:nT,sorted:ki,unique:K1,where:rT,without:sT,withoutIndexes:W1};let tx=class extends ex{static create(e=[]){const{prototype:n}=this;return n.create(e)}*[Symbol.iterator](){yield*this.value}get(e){return this.value[e]}toArray(){return this.value.slice(0)}isPrimitive(e){return Array.isArray(e)}};Q1(tx,yT);Z1(tx,Array);const vT={reverse:fT,toCamelCase:pT,toSlug:la,toStudlyCase:hT,toTitleCase:mT};let nx=class extends ex{static create(e=""){const{prototype:n}=this;return n.create(e)}toString(){return this.value}isPrimitive(e){return typeof e=="string"}};Q1(nx,vT);Z1(nx,String);const bT=[];function gd(t){let e=null;function n(){try{return t()}catch{return new t}}function r(i){return e=i,i}const s={setInstance:r,newInstance:n,requireInstance:()=>e??r(n()),reset:()=>r(n())};return bT.forEach(i=>i(s)),new Proxy(s,{get:(i,o,a)=>{const l=o!=="constructor"&&o in s?s:s.requireInstance();return Reflect.get(l,o,a)},set:(i,o,a)=>Reflect.set(s.requireInstance(),o,a)})}function wT(t){const e=new Proxy(t,{get(n,r,s){const i=Reflect.get(n,r,s);return typeof i!="function"?i:(...o)=>(i.call(n,...o),e)}});return e}function _T(t,e){if(!e)return wT(t);const n=e(t);return n instanceof Promise?n.then(()=>t):t}let xT=class{constructor(e,n){this.errorMessage=e,this.getValue=n}get(e,n,r){const s=this.getValue()??Jo(this.errorMessage),i=Reflect.get(s,n,r);return typeof i=="function"?i.bind(s):i}set(e,n,r,s){const i=this.getValue()??Jo(this.errorMessage);return Reflect.set(i,n,r,s)}getPrototypeOf(){const e=this.getValue()??Jo(this.errorMessage);return Object.getPrototypeOf(e)}};function rx(t,e){return e??(e="Required value is missing"),typeof t=="function"?new Proxy({},new xT(e,t)):t??Jo(e)}function ST(t=[],e){if(!Array.isArray(t)||typeof t[0]!="string")return oT.createFromArray(t,e);const n=e;return t.reduce((r,s)=>(r[s]=n(s),r),{})}/**
* @vue/shared v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function fg(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const pt={},Yo=[],hs=()=>{},sx=()=>!1,yd=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),pg=t=>t.startsWith("onUpdate:"),Dn=Object.assign,hg=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},ET=Object.prototype.hasOwnProperty,bt=(t,e)=>ET.call(t,e),Ve=Array.isArray,Xo=t=>Vl(t)==="[object Map]",vd=t=>Vl(t)==="[object Set]",Tb=t=>Vl(t)==="[object Date]",Ge=t=>typeof t=="function",Vt=t=>typeof t=="string",Jr=t=>typeof t=="symbol",It=t=>t!==null&&typeof t=="object",ix=t=>(It(t)||Ge(t))&&Ge(t.then)&&Ge(t.catch),ox=Object.prototype.toString,Vl=t=>ox.call(t),AT=t=>Vl(t).slice(8,-1),ax=t=>Vl(t)==="[object Object]",mg=t=>Vt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,ul=fg(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),bd=t=>{const e=Object.create(null);return(n=>e[n]||(e[n]=t(n)))},CT=/-\w/g,Kn=bd(t=>t.replace(CT,e=>e.slice(1).toUpperCase())),$T=/\B([A-Z])/g,ni=bd(t=>t.replace($T,"-$1").toLowerCase()),wd=bd(t=>t.charAt(0).toUpperCase()+t.slice(1)),tc=bd(t=>t?`on${wd(t)}`:""),Un=(t,e)=>!Object.is(t,e),nc=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},lx=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},Ph=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Db;const _d=()=>Db||(Db=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Xt(t){if(Ve(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],s=Vt(r)?OT(r):Xt(r);if(s)for(const i in s)e[i]=s[i]}return e}else if(Vt(t)||It(t))return t}const kT=/;(?![^(]*\))/g,IT=/:([^]+)/,RT=/\/\*[^]*?\*\//g;function OT(t){const e={};return t.replace(RT,"").split(kT).forEach(n=>{if(n){const r=n.split(IT);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function De(t){let e="";if(Vt(t))e=t;else if(Ve(t))for(let n=0;n<t.length;n++){const r=De(t[n]);r&&(e+=r+" ")}else if(It(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function Pn(t){if(!t)return null;let{class:e,style:n}=t;return e&&!Vt(e)&&(t.class=De(e)),n&&(t.style=Xt(n)),t}const TT="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",DT=fg(TT);function ux(t){return!!t||t===""}function PT(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=xd(t[r],e[r]);return n}function xd(t,e){if(t===e)return!0;let n=Tb(t),r=Tb(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=Jr(t),r=Jr(e),n||r)return t===e;if(n=Ve(t),r=Ve(e),n||r)return n&&r?PT(t,e):!1;if(n=It(t),r=It(e),n||r){if(!n||!r)return!1;const s=Object.keys(t).length,i=Object.keys(e).length;if(s!==i)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!xd(t[o],e[o]))return!1}}return String(t)===String(e)}function cx(t,e){return t.findIndex(n=>xd(n,e))}const dx=t=>!!(t&&t.__v_isRef===!0),fe=t=>Vt(t)?t:t==null?"":Ve(t)||It(t)&&(t.toString===ox||!Ge(t.toString))?dx(t)?fe(t.value):JSON.stringify(t,fx,2):String(t),fx=(t,e)=>dx(e)?fx(t,e.value):Xo(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,s],i)=>(n[wp(r,i)+" =>"]=s,n),{})}:vd(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>wp(n))}:Jr(e)?wp(e):It(e)&&!Ve(e)&&!ax(e)?String(e):e,wp=(t,e="")=>{var n;return Jr(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Cn;class px{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Cn,!e&&Cn&&(this.index=(Cn.scopes||(Cn.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=Cn;try{return Cn=this,e()}finally{Cn=n}}}on(){++this._on===1&&(this.prevScope=Cn,Cn=this)}off(){this._on>0&&--this._on===0&&(Cn=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function Hl(t){return new px(t)}function wa(){return Cn}function Kl(t,e=!1){Cn&&Cn.cleanups.push(t)}let Pt;const _p=new WeakSet;class hx{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Cn&&Cn.active&&Cn.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,_p.has(this)&&(_p.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||gx(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Pb(this),yx(this);const e=Pt,n=Kr;Pt=this,Kr=!0;try{return this.fn()}finally{vx(this),Pt=e,Kr=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)vg(e);this.deps=this.depsTail=void 0,Pb(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?_p.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Mh(this)&&this.run()}get dirty(){return Mh(this)}}let mx=0,cl,dl;function gx(t,e=!1){if(t.flags|=8,e){t.next=dl,dl=t;return}t.next=cl,cl=t}function gg(){mx++}function yg(){if(--mx>0)return;if(dl){let e=dl;for(dl=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;cl;){let e=cl;for(cl=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function yx(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function vx(t){let e,n=t.depsTail,r=n;for(;r;){const s=r.prevDep;r.version===-1?(r===n&&(n=s),vg(r),MT(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}t.deps=e,t.depsTail=n}function Mh(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(bx(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function bx(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===$l)||(t.globalVersion=$l,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Mh(t))))return;t.flags|=2;const e=t.dep,n=Pt,r=Kr;Pt=t,Kr=!0;try{yx(t);const s=t.fn(t._value);(e.version===0||Un(s,t._value))&&(t.flags|=128,t._value=s,e.version++)}catch(s){throw e.version++,s}finally{Pt=n,Kr=r,vx(t),t.flags&=-3}}function vg(t,e=!1){const{dep:n,prevSub:r,nextSub:s}=t;if(r&&(r.nextSub=s,t.prevSub=void 0),s&&(s.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)vg(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function MT(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let Kr=!0;const wx=[];function Gs(){wx.push(Kr),Kr=!1}function Js(){const t=wx.pop();Kr=t===void 0?!0:t}function Pb(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=Pt;Pt=void 0;try{e()}finally{Pt=n}}}let $l=0;class LT{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Sd{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!Pt||!Kr||Pt===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Pt)n=this.activeLink=new LT(Pt,this),Pt.deps?(n.prevDep=Pt.depsTail,Pt.depsTail.nextDep=n,Pt.depsTail=n):Pt.deps=Pt.depsTail=n,_x(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=Pt.depsTail,n.nextDep=void 0,Pt.depsTail.nextDep=n,Pt.depsTail=n,Pt.deps===n&&(Pt.deps=r)}return n}trigger(e){this.version++,$l++,this.notify(e)}notify(e){gg();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{yg()}}}function _x(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)_x(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const xc=new WeakMap,io=Symbol(""),Lh=Symbol(""),kl=Symbol("");function $n(t,e,n){if(Kr&&Pt){let r=xc.get(t);r||xc.set(t,r=new Map);let s=r.get(n);s||(r.set(n,s=new Sd),s.map=r,s.key=n),s.track()}}function Ls(t,e,n,r,s,i){const o=xc.get(t);if(!o){$l++;return}const a=l=>{l&&l.trigger()};if(gg(),e==="clear")o.forEach(a);else{const l=Ve(t),u=l&&mg(n);if(l&&n==="length"){const c=Number(r);o.forEach((d,f)=>{(f==="length"||f===kl||!Jr(f)&&f>=c)&&a(d)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),u&&a(o.get(kl)),e){case"add":l?u&&a(o.get("length")):(a(o.get(io)),Xo(t)&&a(o.get(Lh)));break;case"delete":l||(a(o.get(io)),Xo(t)&&a(o.get(Lh)));break;case"set":Xo(t)&&a(o.get(io));break}}yg()}function NT(t,e){const n=xc.get(t);return n&&n.get(e)}function ko(t){const e=it(t);return e===t?e:($n(e,"iterate",kl),Rr(t)?e:e.map(mn))}function Ed(t){return $n(t=it(t),"iterate",kl),t}const FT={__proto__:null,[Symbol.iterator](){return xp(this,Symbol.iterator,mn)},concat(...t){return ko(this).concat(...t.map(e=>Ve(e)?ko(e):e))},entries(){return xp(this,"entries",t=>(t[1]=mn(t[1]),t))},every(t,e){return ks(this,"every",t,e,void 0,arguments)},filter(t,e){return ks(this,"filter",t,e,n=>n.map(mn),arguments)},find(t,e){return ks(this,"find",t,e,mn,arguments)},findIndex(t,e){return ks(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return ks(this,"findLast",t,e,mn,arguments)},findLastIndex(t,e){return ks(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return ks(this,"forEach",t,e,void 0,arguments)},includes(...t){return Sp(this,"includes",t)},indexOf(...t){return Sp(this,"indexOf",t)},join(t){return ko(this).join(t)},lastIndexOf(...t){return Sp(this,"lastIndexOf",t)},map(t,e){return ks(this,"map",t,e,void 0,arguments)},pop(){return Ba(this,"pop")},push(...t){return Ba(this,"push",t)},reduce(t,...e){return Mb(this,"reduce",t,e)},reduceRight(t,...e){return Mb(this,"reduceRight",t,e)},shift(){return Ba(this,"shift")},some(t,e){return ks(this,"some",t,e,void 0,arguments)},splice(...t){return Ba(this,"splice",t)},toReversed(){return ko(this).toReversed()},toSorted(t){return ko(this).toSorted(t)},toSpliced(...t){return ko(this).toSpliced(...t)},unshift(...t){return Ba(this,"unshift",t)},values(){return xp(this,"values",mn)}};function xp(t,e,n){const r=Ed(t),s=r[e]();return r!==t&&!Rr(t)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.done||(i.value=n(i.value)),i}),s}const jT=Array.prototype;function ks(t,e,n,r,s,i){const o=Ed(t),a=o!==t&&!Rr(t),l=o[e];if(l!==jT[e]){const d=l.apply(t,i);return a?mn(d):d}let u=n;o!==t&&(a?u=function(d,f){return n.call(this,mn(d),f,t)}:n.length>2&&(u=function(d,f){return n.call(this,d,f,t)}));const c=l.call(o,u,r);return a&&s?s(c):c}function Mb(t,e,n,r){const s=Ed(t);let i=n;return s!==t&&(Rr(t)?n.length>3&&(i=function(o,a,l){return n.call(this,o,a,l,t)}):i=function(o,a,l){return n.call(this,o,mn(a),l,t)}),s[e](i,...r)}function Sp(t,e,n){const r=it(t);$n(r,"iterate",kl);const s=r[e](...n);return(s===-1||s===!1)&&bg(n[0])?(n[0]=it(n[0]),r[e](...n)):s}function Ba(t,e,n=[]){Gs(),gg();const r=it(t)[e].apply(t,n);return yg(),Js(),r}const qT=fg("__proto__,__v_isRef,__isVue"),xx=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Jr));function UT(t){Jr(t)||(t=String(t));const e=it(this);return $n(e,"has",t),e.hasOwnProperty(t)}class Sx{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?Ix:kx:i?$x:Cx).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=Ve(e);if(!s){let l;if(o&&(l=FT[n]))return l;if(n==="hasOwnProperty")return UT}const a=Reflect.get(e,n,Mt(e)?e:r);if((Jr(n)?xx.has(n):qT(n))||(s||$n(e,"get",n),i))return a;if(Mt(a)){const l=o&&mg(n)?a:a.value;return s&&It(l)?vs(l):l}return It(a)?s?vs(a):tr(a):a}}class Ex extends Sx{constructor(e=!1){super(!1,e)}set(e,n,r,s){let i=e[n];if(!this._isShallow){const l=Ii(i);if(!Rr(r)&&!Ii(r)&&(i=it(i),r=it(r)),!Ve(e)&&Mt(i)&&!Mt(r))return l||(i.value=r),!0}const o=Ve(e)&&mg(n)?Number(n)<e.length:bt(e,n),a=Reflect.set(e,n,r,Mt(e)?e:s);return e===it(s)&&(o?Un(r,i)&&Ls(e,"set",n,r):Ls(e,"add",n,r)),a}deleteProperty(e,n){const r=bt(e,n);e[n];const s=Reflect.deleteProperty(e,n);return s&&r&&Ls(e,"delete",n,void 0),s}has(e,n){const r=Reflect.has(e,n);return(!Jr(n)||!xx.has(n))&&$n(e,"has",n),r}ownKeys(e){return $n(e,"iterate",Ve(e)?"length":io),Reflect.ownKeys(e)}}class Ax extends Sx{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const BT=new Ex,zT=new Ax,VT=new Ex(!0),HT=new Ax(!0),Nh=t=>t,vu=t=>Reflect.getPrototypeOf(t);function KT(t,e,n){return function(...r){const s=this.__v_raw,i=it(s),o=Xo(i),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,u=s[t](...r),c=n?Nh:e?Sc:mn;return!e&&$n(i,"iterate",l?Lh:io),{next(){const{value:d,done:f}=u.next();return f?{value:d,done:f}:{value:a?[c(d[0]),c(d[1])]:c(d),done:f}},[Symbol.iterator](){return this}}}}function bu(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function WT(t,e){const n={get(s){const i=this.__v_raw,o=it(i),a=it(s);t||(Un(s,a)&&$n(o,"get",s),$n(o,"get",a));const{has:l}=vu(o),u=e?Nh:t?Sc:mn;if(l.call(o,s))return u(i.get(s));if(l.call(o,a))return u(i.get(a));i!==o&&i.get(s)},get size(){const s=this.__v_raw;return!t&&$n(it(s),"iterate",io),s.size},has(s){const i=this.__v_raw,o=it(i),a=it(s);return t||(Un(s,a)&&$n(o,"has",s),$n(o,"has",a)),s===a?i.has(s):i.has(s)||i.has(a)},forEach(s,i){const o=this,a=o.__v_raw,l=it(a),u=e?Nh:t?Sc:mn;return!t&&$n(l,"iterate",io),a.forEach((c,d)=>s.call(i,u(c),u(d),o))}};return Dn(n,t?{add:bu("add"),set:bu("set"),delete:bu("delete"),clear:bu("clear")}:{add(s){!e&&!Rr(s)&&!Ii(s)&&(s=it(s));const i=it(this);return vu(i).has.call(i,s)||(i.add(s),Ls(i,"add",s,s)),this},set(s,i){!e&&!Rr(i)&&!Ii(i)&&(i=it(i));const o=it(this),{has:a,get:l}=vu(o);let u=a.call(o,s);u||(s=it(s),u=a.call(o,s));const c=l.call(o,s);return o.set(s,i),u?Un(i,c)&&Ls(o,"set",s,i):Ls(o,"add",s,i),this},delete(s){const i=it(this),{has:o,get:a}=vu(i);let l=o.call(i,s);l||(s=it(s),l=o.call(i,s)),a&&a.call(i,s);const u=i.delete(s);return l&&Ls(i,"delete",s,void 0),u},clear(){const s=it(this),i=s.size!==0,o=s.clear();return i&&Ls(s,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=KT(s,t,e)}),n}function Ad(t,e){const n=WT(t,e);return(r,s,i)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?r:Reflect.get(bt(n,s)&&s in r?n:r,s,i)}const GT={get:Ad(!1,!1)},JT={get:Ad(!1,!0)},YT={get:Ad(!0,!1)},XT={get:Ad(!0,!0)},Cx=new WeakMap,$x=new WeakMap,kx=new WeakMap,Ix=new WeakMap;function QT(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function ZT(t){return t.__v_skip||!Object.isExtensible(t)?0:QT(AT(t))}function tr(t){return Ii(t)?t:$d(t,!1,BT,GT,Cx)}function Cd(t){return $d(t,!1,VT,JT,$x)}function vs(t){return $d(t,!0,zT,YT,kx)}function Io(t){return $d(t,!0,HT,XT,Ix)}function $d(t,e,n,r,s){if(!It(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=ZT(t);if(i===0)return t;const o=s.get(t);if(o)return o;const a=new Proxy(t,i===2?r:n);return s.set(t,a),a}function Ei(t){return Ii(t)?Ei(t.__v_raw):!!(t&&t.__v_isReactive)}function Ii(t){return!!(t&&t.__v_isReadonly)}function Rr(t){return!!(t&&t.__v_isShallow)}function bg(t){return t?!!t.__v_raw:!1}function it(t){const e=t&&t.__v_raw;return e?it(e):t}function Qe(t){return!bt(t,"__v_skip")&&Object.isExtensible(t)&&lx(t,"__v_skip",!0),t}const mn=t=>It(t)?tr(t):t,Sc=t=>It(t)?vs(t):t;function Mt(t){return t?t.__v_isRef===!0:!1}function we(t){return Rx(t,!1)}function Mn(t){return Rx(t,!0)}function Rx(t,e){return Mt(t)?t:new eD(t,e)}class eD{constructor(e,n){this.dep=new Sd,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:it(e),this._value=n?e:mn(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||Rr(e)||Ii(e);e=r?e:it(e),Un(e,n)&&(this._rawValue=e,this._value=r?e:mn(e),this.dep.trigger())}}function y(t){return Mt(t)?t.value:t}function vn(t){return Ge(t)?t():y(t)}const tD={get:(t,e,n)=>e==="__v_raw"?t:y(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const s=t[e];return Mt(s)&&!Mt(n)?(s.value=n,!0):Reflect.set(t,e,n,r)}};function Ox(t){return Ei(t)?t:new Proxy(t,tD)}class nD{constructor(e){this.__v_isRef=!0,this._value=void 0;const n=this.dep=new Sd,{get:r,set:s}=e(n.track.bind(n),n.trigger.bind(n));this._get=r,this._set=s}get value(){return this._value=this._get()}set value(e){this._set(e)}}function _a(t){return new nD(t)}function bn(t){const e=Ve(t)?new Array(t.length):{};for(const n in t)e[n]=Tx(t,n);return e}class rD{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return NT(it(this._object),this._key)}}class sD{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function iD(t,e,n){return Mt(t)?t:Ge(t)?new sD(t):It(t)&&arguments.length>1?Tx(t,e,n):we(t)}function Tx(t,e,n){const r=t[e];return Mt(r)?r:new rD(t,e,n)}class oD{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new Sd(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=$l-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&Pt!==this)return gx(this,!0),!0}get value(){const e=this.dep.track();return bx(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function aD(t,e,n=!1){let r,s;return Ge(t)?r=t:(r=t.get,s=t.set),new oD(r,s,n)}const wu={},Ec=new WeakMap;let Xi;function lD(t,e=!1,n=Xi){if(n){let r=Ec.get(n);r||Ec.set(n,r=[]),r.push(t)}}function uD(t,e,n=pt){const{immediate:r,deep:s,once:i,scheduler:o,augmentJob:a,call:l}=n,u=m=>s?m:Rr(m)||s===!1||s===0?Ns(m,1):Ns(m);let c,d,f,p,h=!1,g=!1;if(Mt(t)?(d=()=>t.value,h=Rr(t)):Ei(t)?(d=()=>u(t),h=!0):Ve(t)?(g=!0,h=t.some(m=>Ei(m)||Rr(m)),d=()=>t.map(m=>{if(Mt(m))return m.value;if(Ei(m))return u(m);if(Ge(m))return l?l(m,2):m()})):Ge(t)?e?d=l?()=>l(t,2):t:d=()=>{if(f){Gs();try{f()}finally{Js()}}const m=Xi;Xi=c;try{return l?l(t,3,[p]):t(p)}finally{Xi=m}}:d=hs,e&&s){const m=d,v=s===!0?1/0:s;d=()=>Ns(m(),v)}const w=wa(),x=()=>{c.stop(),w&&w.active&&hg(w.effects,c)};if(i&&e){const m=e;e=(...v)=>{m(...v),x()}}let A=g?new Array(t.length).fill(wu):wu;const E=m=>{if(!(!(c.flags&1)||!c.dirty&&!m))if(e){const v=c.run();if(s||h||(g?v.some((_,C)=>Un(_,A[C])):Un(v,A))){f&&f();const _=Xi;Xi=c;try{const C=[v,A===wu?void 0:g&&A[0]===wu?[]:A,p];A=v,l?l(e,3,C):e(...C)}finally{Xi=_}}}else c.run()};return a&&a(E),c=new hx(d),c.scheduler=o?()=>o(E,!1):E,p=m=>lD(m,!1,c),f=c.onStop=()=>{const m=Ec.get(c);if(m){if(l)l(m,4);else for(const v of m)v();Ec.delete(c)}},e?r?E(!0):A=c.run():o?o(E.bind(null,!0),!0):c.run(),x.pause=c.pause.bind(c),x.resume=c.resume.bind(c),x.stop=x,x}function Ns(t,e=1/0,n){if(e<=0||!It(t)||t.__v_skip||(n=n||new Map,(n.get(t)||0)>=e))return t;if(n.set(t,e),e--,Mt(t))Ns(t.value,e,n);else if(Ve(t))for(let r=0;r<t.length;r++)Ns(t[r],e,n);else if(vd(t)||Xo(t))t.forEach(r=>{Ns(r,e,n)});else if(ax(t)){for(const r in t)Ns(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&Ns(t[r],e,n)}return t}/**
* @vue/runtime-core v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Wl(t,e,n,r){try{return r?t(...r):t()}catch(s){kd(s,e,n)}}function bs(t,e,n,r){if(Ge(t)){const s=Wl(t,e,n,r);return s&&ix(s)&&s.catch(i=>{kd(i,e,n)}),s}if(Ve(t)){const s=[];for(let i=0;i<t.length;i++)s.push(bs(t[i],e,n,r));return s}}function kd(t,e,n,r=!0){const s=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||pt;if(e){let a=e.parent;const l=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const c=a.ec;if(c){for(let d=0;d<c.length;d++)if(c[d](t,l,u)===!1)return}a=a.parent}if(i){Gs(),Wl(i,null,10,[t,l,u]),Js();return}}cD(t,n,s,r,o)}function cD(t,e,n,r=!0,s=!1){if(s)throw t;console.error(t)}const Bn=[];let us=-1;const Qo=[];let fi=null,Lo=0;const Dx=Promise.resolve();let Ac=null;function _t(t){const e=Ac||Dx;return t?e.then(this?t.bind(this):t):e}function dD(t){let e=us+1,n=Bn.length;for(;e<n;){const r=e+n>>>1,s=Bn[r],i=Il(s);i<t||i===t&&s.flags&2?e=r+1:n=r}return e}function wg(t){if(!(t.flags&1)){const e=Il(t),n=Bn[Bn.length-1];!n||!(t.flags&2)&&e>=Il(n)?Bn.push(t):Bn.splice(dD(e),0,t),t.flags|=1,Px()}}function Px(){Ac||(Ac=Dx.then(Lx))}function fD(t){Ve(t)?Qo.push(...t):fi&&t.id===-1?fi.splice(Lo+1,0,t):t.flags&1||(Qo.push(t),t.flags|=1),Px()}function Lb(t,e,n=us+1){for(;n<Bn.length;n++){const r=Bn[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;Bn.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function Mx(t){if(Qo.length){const e=[...new Set(Qo)].sort((n,r)=>Il(n)-Il(r));if(Qo.length=0,fi){fi.push(...e);return}for(fi=e,Lo=0;Lo<fi.length;Lo++){const n=fi[Lo];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}fi=null,Lo=0}}const Il=t=>t.id==null?t.flags&2?-1:1/0:t.id;function Lx(t){try{for(us=0;us<Bn.length;us++){const e=Bn[us];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Wl(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;us<Bn.length;us++){const e=Bn[us];e&&(e.flags&=-2)}us=-1,Bn.length=0,Mx(),Ac=null,(Bn.length||Qo.length)&&Lx()}}let yn=null,Nx=null;function Cc(t){const e=yn;return yn=t,Nx=t&&t.type.__scopeId||null,e}function K(t,e=yn,n){if(!e||t._n)return t;const r=(...s)=>{r._d&&Ic(-1);const i=Cc(e);let o;try{o=t(...s)}finally{Cc(i),r._d&&Ic(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function _g(t,e){if(yn===null)return t;const n=Dd(yn),r=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[i,o,a,l=pt]=e[s];i&&(Ge(i)&&(i={mounted:i,updated:i}),i.deep&&Ns(o),r.push({dir:i,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function Gi(t,e,n,r){const s=t.dirs,i=e&&e.dirs;for(let o=0;o<s.length;o++){const a=s[o];i&&(a.oldValue=i[o].value);let l=a.dir[r];l&&(Gs(),bs(l,n,8,[t.el,a,t,e]),Js())}}const Fx=Symbol("_vte"),pD=t=>t.__isTeleport,fl=t=>t&&(t.disabled||t.disabled===""),Nb=t=>t&&(t.defer||t.defer===""),Fb=t=>typeof SVGElement<"u"&&t instanceof SVGElement,jb=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,Fh=(t,e)=>{const n=t&&t.to;return Vt(n)?e?e(n):null:n},jx={name:"Teleport",__isTeleport:!0,process(t,e,n,r,s,i,o,a,l,u){const{mc:c,pc:d,pbc:f,o:{insert:p,querySelector:h,createText:g,createComment:w}}=u,x=fl(e.props);let{shapeFlag:A,children:E,dynamicChildren:m}=e;if(t==null){const v=e.el=g(""),_=e.anchor=g("");p(v,n,r),p(_,n,r);const C=(k,D)=>{A&16&&c(E,k,D,s,i,o,a,l)},$=()=>{const k=e.target=Fh(e.props,h),D=qx(k,e,g,p);k&&(o!=="svg"&&Fb(k)?o="svg":o!=="mathml"&&jb(k)&&(o="mathml"),s&&s.isCE&&(s.ce._teleportTargets||(s.ce._teleportTargets=new Set)).add(k),x||(C(k,D),rc(e,!1)))};x&&(C(n,_),rc(e,!0)),Nb(e.props)?(e.el.__isMounted=!1,jn(()=>{$(),delete e.el.__isMounted},i)):$()}else{if(Nb(e.props)&&t.el.__isMounted===!1){jn(()=>{jx.process(t,e,n,r,s,i,o,a,l,u)},i);return}e.el=t.el,e.targetStart=t.targetStart;const v=e.anchor=t.anchor,_=e.target=t.target,C=e.targetAnchor=t.targetAnchor,$=fl(t.props),k=$?n:_,D=$?v:C;if(o==="svg"||Fb(_)?o="svg":(o==="mathml"||jb(_))&&(o="mathml"),m?(f(t.dynamicChildren,m,k,s,i,o,a),kg(t,e,!0)):l||d(t,e,k,D,s,i,o,a,!1),x)$?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):_u(e,n,v,u,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const G=e.target=Fh(e.props,h);G&&_u(e,G,null,u,0)}else $&&_u(e,_,C,u,1);rc(e,x)}},remove(t,e,n,{um:r,o:{remove:s}},i){const{shapeFlag:o,children:a,anchor:l,targetStart:u,targetAnchor:c,target:d,props:f}=t;if(d&&(s(u),s(c)),i&&s(l),o&16){const p=i||!fl(f);for(let h=0;h<a.length;h++){const g=a[h];r(g,e,n,p,!!g.dynamicChildren)}}},move:_u,hydrate:hD};function _u(t,e,n,{o:{insert:r},m:s},i=2){i===0&&r(t.targetAnchor,e,n);const{el:o,anchor:a,shapeFlag:l,children:u,props:c}=t,d=i===2;if(d&&r(o,e,n),(!d||fl(c))&&l&16)for(let f=0;f<u.length;f++)s(u[f],e,n,2);d&&r(a,e,n)}function hD(t,e,n,r,s,i,{o:{nextSibling:o,parentNode:a,querySelector:l,insert:u,createText:c}},d){function f(g,w,x,A){w.anchor=d(o(g),w,a(g),n,r,s,i),w.targetStart=x,w.targetAnchor=A}const p=e.target=Fh(e.props,l),h=fl(e.props);if(p){const g=p._lpa||p.firstChild;if(e.shapeFlag&16)if(h)f(t,e,g,g&&o(g));else{e.anchor=o(t);let w=g;for(;w;){if(w&&w.nodeType===8){if(w.data==="teleport start anchor")e.targetStart=w;else if(w.data==="teleport anchor"){e.targetAnchor=w,p._lpa=e.targetAnchor&&o(e.targetAnchor);break}}w=o(w)}e.targetAnchor||qx(p,e,c,u),d(g&&o(g),e,p,n,r,s,i)}rc(e,h)}else h&&e.shapeFlag&16&&f(t,e,t,o(t));return e.anchor&&o(e.anchor)}const Id=jx;function rc(t,e){const n=t.ctx;if(n&&n.ut){let r,s;for(e?(r=t.el,s=t.anchor):(r=t.targetStart,s=t.targetAnchor);r&&r!==s;)r.nodeType===1&&r.setAttribute("data-v-owner",n.uid),r=r.nextSibling;n.ut()}}function qx(t,e,n,r){const s=e.targetStart=n(""),i=e.targetAnchor=n("");return s[Fx]=i,t&&(r(s,t),r(i,t)),i}const mD=Symbol("_leaveCb");function xg(t,e){t.shapeFlag&6&&t.component?(t.transition=e,xg(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function ue(t,e){return Ge(t)?Dn({name:t.name},e,{setup:t}):t}function Ep(){const t=wn();return t?(t.appContext.config.idPrefix||"v")+"-"+t.ids[0]+t.ids[1]++:""}function Ux(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function ri(t){const e=wn(),n=Mn(null);if(e){const s=e.refs===pt?e.refs={}:e.refs;Object.defineProperty(s,t,{enumerable:!0,get:()=>n.value,set:i=>n.value=i})}return n}const $c=new WeakMap;function pl(t,e,n,r,s=!1){if(Ve(t)){t.forEach((h,g)=>pl(h,e&&(Ve(e)?e[g]:e),n,r,s));return}if(Zo(r)&&!s){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&pl(t,e,n,r.component.subTree);return}const i=r.shapeFlag&4?Dd(r.component):r.el,o=s?null:i,{i:a,r:l}=t,u=e&&e.r,c=a.refs===pt?a.refs={}:a.refs,d=a.setupState,f=it(d),p=d===pt?sx:h=>bt(f,h);if(u!=null&&u!==l){if(qb(e),Vt(u))c[u]=null,p(u)&&(d[u]=null);else if(Mt(u)){u.value=null;const h=e;h.k&&(c[h.k]=null)}}if(Ge(l))Wl(l,a,12,[o,c]);else{const h=Vt(l),g=Mt(l);if(h||g){const w=()=>{if(t.f){const x=h?p(l)?d[l]:c[l]:l.value;if(s)Ve(x)&&hg(x,i);else if(Ve(x))x.includes(i)||x.push(i);else if(h)c[l]=[i],p(l)&&(d[l]=c[l]);else{const A=[i];l.value=A,t.k&&(c[t.k]=A)}}else h?(c[l]=o,p(l)&&(d[l]=o)):g&&(l.value=o,t.k&&(c[t.k]=o))};if(o){const x=()=>{w(),$c.delete(t)};x.id=-1,$c.set(t,x),jn(x,n)}else qb(t),w()}}}function qb(t){const e=$c.get(t);e&&(e.flags|=8,$c.delete(t))}_d().requestIdleCallback;_d().cancelIdleCallback;const Zo=t=>!!t.type.__asyncLoader,Bx=t=>t.type.__isKeepAlive;function gD(t,e){zx(t,"a",e)}function yD(t,e){zx(t,"da",e)}function zx(t,e,n=In){const r=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(Rd(e,r,n),n){let s=n.parent;for(;s&&s.parent;)Bx(s.parent.vnode)&&vD(r,e,n,s),s=s.parent}}function vD(t,e,n,r){const s=Rd(e,t,r,!0);on(()=>{hg(r[e],s)},n)}function Rd(t,e,n=In,r=!1){if(n){const s=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{Gs();const a=Jl(n),l=bs(e,n,t,o);return a(),Js(),l});return r?s.unshift(i):s.push(i),i}}const si=t=>(e,n=In)=>{(!Ol||t==="sp")&&Rd(t,(...r)=>e(...r),n)},bD=si("bm"),Dt=si("m"),wD=si("bu"),_D=si("u"),Vx=si("bum"),on=si("um"),xD=si("sp"),SD=si("rtg"),ED=si("rtc");function AD(t,e=In){Rd("ec",t,e)}const Sg="components",CD="directives";function Eg(t,e){return Ag(Sg,t,!0,e)||t}const Hx=Symbol.for("v-ndc");function ns(t){return Vt(t)?Ag(Sg,t,!1)||t:t||Hx}function $D(t){return Ag(CD,t)}function Ag(t,e,n=!0,r=!1){const s=yn||In;if(s){const i=s.type;if(t===Sg){const a=fP(i,!1);if(a&&(a===e||a===Kn(e)||a===wd(Kn(e))))return i}const o=Ub(s[t]||i[t],e)||Ub(s.appContext[t],e);return!o&&r?i:o}}function Ub(t,e){return t&&(t[e]||t[Kn(e)]||t[wd(Kn(e))])}function at(t,e,n,r){let s;const i=n,o=Ve(t);if(o||Vt(t)){const a=o&&Ei(t);let l=!1,u=!1;a&&(l=!Rr(t),u=Ii(t),t=Ed(t)),s=new Array(t.length);for(let c=0,d=t.length;c<d;c++)s[c]=e(l?u?Sc(mn(t[c])):mn(t[c]):t[c],c,void 0,i)}else if(typeof t=="number"){s=new Array(t);for(let a=0;a<t;a++)s[a]=e(a+1,a,void 0,i)}else if(It(t))if(t[Symbol.iterator])s=Array.from(t,(a,l)=>e(a,l,void 0,i));else{const a=Object.keys(t);s=new Array(a.length);for(let l=0,u=a.length;l<u;l++){const c=a[l];s[l]=e(t[c],c,l,i)}}else s=[];return s}function Ee(t,e,n={},r,s){if(yn.ce||yn.parent&&Zo(yn.parent)&&yn.parent.ce){const u=Object.keys(n).length>0;return e!=="default"&&(n.name=e),I(),Z(je,null,[N("slot",n,r&&r())],u?-2:64)}let i=t[e];i&&i._c&&(i._d=!1),I();const o=i&&Kx(i(n)),a=n.key||o&&o.key,l=Z(je,{key:(a&&!Jr(a)?a:`_${e}`)+(!o&&r?"_fb":"")},o||(r?r():[]),o&&t._===1?64:-2);return l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),i&&i._c&&(i._d=!0),l}function Kx(t){return t.some(e=>Rl(e)?!(e.type===Yr||e.type===je&&!Kx(e.children)):!0)?t:null}const jh=t=>t?yS(t)?Dd(t):jh(t.parent):null,hl=Dn(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>jh(t.parent),$root:t=>jh(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>Xx(t),$forceUpdate:t=>t.f||(t.f=()=>{wg(t.update)}),$nextTick:t=>t.n||(t.n=_t.bind(t.proxy)),$watch:t=>JD.bind(t)}),Ap=(t,e)=>t!==pt&&!t.__isScriptSetup&&bt(t,e),kD={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:i,accessCache:o,type:a,appContext:l}=t;let u;if(e[0]!=="$"){const p=o[e];if(p!==void 0)switch(p){case 1:return r[e];case 2:return s[e];case 4:return n[e];case 3:return i[e]}else{if(Ap(r,e))return o[e]=1,r[e];if(s!==pt&&bt(s,e))return o[e]=2,s[e];if((u=t.propsOptions[0])&&bt(u,e))return o[e]=3,i[e];if(n!==pt&&bt(n,e))return o[e]=4,n[e];Uh&&(o[e]=0)}}const c=hl[e];let d,f;if(c)return e==="$attrs"&&$n(t.attrs,"get",""),c(t);if((d=a.__cssModules)&&(d=d[e]))return d;if(n!==pt&&bt(n,e))return o[e]=4,n[e];if(f=l.config.globalProperties,bt(f,e))return f[e]},set({_:t},e,n){const{data:r,setupState:s,ctx:i}=t;return Ap(s,e)?(s[e]=n,!0):r!==pt&&bt(r,e)?(r[e]=n,!0):bt(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:s,propsOptions:i,type:o}},a){let l,u;return!!(n[a]||t!==pt&&a[0]!=="$"&&bt(t,a)||Ap(e,a)||(l=i[0])&&bt(l,a)||bt(r,a)||bt(hl,a)||bt(s.config.globalProperties,a)||(u=o.__cssModules)&&u[a])},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:bt(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Od(){return Gx().slots}function Wx(){return Gx().attrs}function Gx(t){const e=wn();return e.setupContext||(e.setupContext=bS(e))}function qh(t){return Ve(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}function Jx(t,e){const n=qh(t);for(const r in e){if(r.startsWith("__skip"))continue;let s=n[r];s?Ve(s)||Ge(s)?s=n[r]={type:s,default:e[r]}:s.default=e[r]:s===null&&(s=n[r]={default:e[r]}),s&&e[`__skip_${r}`]&&(s.skipFactory=!0)}return n}function xs(t,e){const n={};for(const r in t)e.includes(r)||Object.defineProperty(n,r,{enumerable:!0,get:()=>t[r]});return n}let Uh=!0;function ID(t){const e=Xx(t),n=t.proxy,r=t.ctx;Uh=!1,e.beforeCreate&&Bb(e.beforeCreate,t,"bc");const{data:s,computed:i,methods:o,watch:a,provide:l,inject:u,created:c,beforeMount:d,mounted:f,beforeUpdate:p,updated:h,activated:g,deactivated:w,beforeDestroy:x,beforeUnmount:A,destroyed:E,unmounted:m,render:v,renderTracked:_,renderTriggered:C,errorCaptured:$,serverPrefetch:k,expose:D,inheritAttrs:G,components:J,directives:W,filters:j}=e;if(u&&RD(u,r,null),o)for(const V in o){const F=o[V];Ge(F)&&(r[V]=F.bind(n))}if(s){const V=s.call(n,n);It(V)&&(t.data=tr(V))}if(Uh=!0,i)for(const V in i){const F=i[V],ee=Ge(F)?F.bind(n,n):Ge(F.get)?F.get.bind(n,n):hs,z=!Ge(F)&&Ge(F.set)?F.set.bind(n):hs,ie=H({get:ee,set:z});Object.defineProperty(r,V,{enumerable:!0,configurable:!0,get:()=>ie.value,set:pe=>ie.value=pe})}if(a)for(const V in a)Yx(a[V],r,n,V);if(l){const V=Ge(l)?l.call(n):l;Reflect.ownKeys(V).forEach(F=>{cr(F,V[F])})}c&&Bb(c,t,"c");function R(V,F){Ve(F)?F.forEach(ee=>V(ee.bind(n))):F&&V(F.bind(n))}if(R(bD,d),R(Dt,f),R(wD,p),R(_D,h),R(gD,g),R(yD,w),R(AD,$),R(ED,_),R(SD,C),R(Vx,A),R(on,m),R(xD,k),Ve(D))if(D.length){const V=t.exposed||(t.exposed={});D.forEach(F=>{Object.defineProperty(V,F,{get:()=>n[F],set:ee=>n[F]=ee,enumerable:!0})})}else t.exposed||(t.exposed={});v&&t.render===hs&&(t.render=v),G!=null&&(t.inheritAttrs=G),J&&(t.components=J),W&&(t.directives=W),k&&Ux(t)}function RD(t,e,n=hs){Ve(t)&&(t=Bh(t));for(const r in t){const s=t[r];let i;It(s)?"default"in s?i=Kt(s.from||r,s.default,!0):i=Kt(s.from||r):i=Kt(s),Mt(i)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[r]=i}}function Bb(t,e,n){bs(Ve(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function Yx(t,e,n,r){let s=r.includes(".")?cS(n,r):()=>n[r];if(Vt(t)){const i=e[t];Ge(i)&&Ke(s,i)}else if(Ge(t))Ke(s,t.bind(n));else if(It(t))if(Ve(t))t.forEach(i=>Yx(i,e,n,r));else{const i=Ge(t.handler)?t.handler.bind(n):e[t.handler];Ge(i)&&Ke(s,i,t)}}function Xx(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let l;return a?l=a:!s.length&&!n&&!r?l=e:(l={},s.length&&s.forEach(u=>kc(l,u,o,!0)),kc(l,e,o)),It(e)&&i.set(e,l),l}function kc(t,e,n,r=!1){const{mixins:s,extends:i}=e;i&&kc(t,i,n,!0),s&&s.forEach(o=>kc(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=OD[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const OD={data:zb,props:Vb,emits:Vb,methods:sl,computed:sl,beforeCreate:Nn,created:Nn,beforeMount:Nn,mounted:Nn,beforeUpdate:Nn,updated:Nn,beforeDestroy:Nn,beforeUnmount:Nn,destroyed:Nn,unmounted:Nn,activated:Nn,deactivated:Nn,errorCaptured:Nn,serverPrefetch:Nn,components:sl,directives:sl,watch:DD,provide:zb,inject:TD};function zb(t,e){return e?t?function(){return Dn(Ge(t)?t.call(this,this):t,Ge(e)?e.call(this,this):e)}:e:t}function TD(t,e){return sl(Bh(t),Bh(e))}function Bh(t){if(Ve(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Nn(t,e){return t?[...new Set([].concat(t,e))]:e}function sl(t,e){return t?Dn(Object.create(null),t,e):e}function Vb(t,e){return t?Ve(t)&&Ve(e)?[...new Set([...t,...e])]:Dn(Object.create(null),qh(t),qh(e??{})):e}function DD(t,e){if(!t)return e;if(!e)return t;const n=Dn(Object.create(null),t);for(const r in e)n[r]=Nn(t[r],e[r]);return n}function Qx(){return{app:null,config:{isNativeTag:sx,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let PD=0;function MD(t,e){return function(r,s=null){Ge(r)||(r=Dn({},r)),s!=null&&!It(s)&&(s=null);const i=Qx(),o=new WeakSet,a=[];let l=!1;const u=i.app={_uid:PD++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:gP,get config(){return i.config},set config(c){},use(c,...d){return o.has(c)||(c&&Ge(c.install)?(o.add(c),c.install(u,...d)):Ge(c)&&(o.add(c),c(u,...d))),u},mixin(c){return i.mixins.includes(c)||i.mixins.push(c),u},component(c,d){return d?(i.components[c]=d,u):i.components[c]},directive(c,d){return d?(i.directives[c]=d,u):i.directives[c]},mount(c,d,f){if(!l){const p=u._ceVNode||N(r,s);return p.appContext=i,f===!0?f="svg":f===!1&&(f=void 0),t(p,c,f),l=!0,u._container=c,c.__vue_app__=u,Dd(p.component)}},onUnmount(c){a.push(c)},unmount(){l&&(bs(a,u._instance,16),t(null,u._container),delete u._container.__vue_app__)},provide(c,d){return i.provides[c]=d,u},runWithContext(c){const d=oo;oo=u;try{return c()}finally{oo=d}}};return u}}let oo=null;function cr(t,e){if(In){let n=In.provides;const r=In.parent&&In.parent.provides;r===n&&(n=In.provides=Object.create(r)),n[t]=e}}function Kt(t,e,n=!1){const r=wn();if(r||oo){let s=oo?oo._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&t in s)return s[t];if(arguments.length>1)return n&&Ge(e)?e.call(r&&r.proxy):e}}function LD(){return!!(wn()||oo)}const Zx={},eS=()=>Object.create(Zx),tS=t=>Object.getPrototypeOf(t)===Zx;function ND(t,e,n,r=!1){const s={},i=eS();t.propsDefaults=Object.create(null),nS(t,e,s,i);for(const o in t.propsOptions[0])o in s||(s[o]=void 0);n?t.props=r?s:Cd(s):t.type.props?t.props=s:t.props=i,t.attrs=i}function FD(t,e,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=t,a=it(s),[l]=t.propsOptions;let u=!1;if((r||o>0)&&!(o&16)){if(o&8){const c=t.vnode.dynamicProps;for(let d=0;d<c.length;d++){let f=c[d];if(Td(t.emitsOptions,f))continue;const p=e[f];if(l)if(bt(i,f))p!==i[f]&&(i[f]=p,u=!0);else{const h=Kn(f);s[h]=zh(l,a,h,p,t,!1)}else p!==i[f]&&(i[f]=p,u=!0)}}}else{nS(t,e,s,i)&&(u=!0);let c;for(const d in a)(!e||!bt(e,d)&&((c=ni(d))===d||!bt(e,c)))&&(l?n&&(n[d]!==void 0||n[c]!==void 0)&&(s[d]=zh(l,a,d,void 0,t,!0)):delete s[d]);if(i!==a)for(const d in i)(!e||!bt(e,d))&&(delete i[d],u=!0)}u&&Ls(t.attrs,"set","")}function nS(t,e,n,r){const[s,i]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(ul(l))continue;const u=e[l];let c;s&&bt(s,c=Kn(l))?!i||!i.includes(c)?n[c]=u:(a||(a={}))[c]=u:Td(t.emitsOptions,l)||(!(l in r)||u!==r[l])&&(r[l]=u,o=!0)}if(i){const l=it(n),u=a||pt;for(let c=0;c<i.length;c++){const d=i[c];n[d]=zh(s,l,d,u[d],t,!bt(u,d))}}return o}function zh(t,e,n,r,s,i){const o=t[n];if(o!=null){const a=bt(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&Ge(l)){const{propsDefaults:u}=s;if(n in u)r=u[n];else{const c=Jl(s);r=u[n]=l.call(null,e),c()}}else r=l;s.ce&&s.ce._setProp(n,r)}o[0]&&(i&&!a?r=!1:o[1]&&(r===""||r===ni(n))&&(r=!0))}return r}const jD=new WeakMap;function rS(t,e,n=!1){const r=n?jD:e.propsCache,s=r.get(t);if(s)return s;const i=t.props,o={},a=[];let l=!1;if(!Ge(t)){const c=d=>{l=!0;const[f,p]=rS(d,e,!0);Dn(o,f),p&&a.push(...p)};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}if(!i&&!l)return It(t)&&r.set(t,Yo),Yo;if(Ve(i))for(let c=0;c<i.length;c++){const d=Kn(i[c]);Hb(d)&&(o[d]=pt)}else if(i)for(const c in i){const d=Kn(c);if(Hb(d)){const f=i[c],p=o[d]=Ve(f)||Ge(f)?{type:f}:Dn({},f),h=p.type;let g=!1,w=!0;if(Ve(h))for(let x=0;x<h.length;++x){const A=h[x],E=Ge(A)&&A.name;if(E==="Boolean"){g=!0;break}else E==="String"&&(w=!1)}else g=Ge(h)&&h.name==="Boolean";p[0]=g,p[1]=w,(g||bt(p,"default"))&&a.push(d)}}const u=[o,a];return It(t)&&r.set(t,u),u}function Hb(t){return t[0]!=="$"&&!ul(t)}const Cg=t=>t==="_"||t==="_ctx"||t==="$stable",$g=t=>Ve(t)?t.map(ds):[ds(t)],qD=(t,e,n)=>{if(e._n)return e;const r=K((...s)=>$g(e(...s)),n);return r._c=!1,r},sS=(t,e,n)=>{const r=t._ctx;for(const s in t){if(Cg(s))continue;const i=t[s];if(Ge(i))e[s]=qD(s,i,r);else if(i!=null){const o=$g(i);e[s]=()=>o}}},iS=(t,e)=>{const n=$g(e);t.slots.default=()=>n},oS=(t,e,n)=>{for(const r in e)(n||!Cg(r))&&(t[r]=e[r])},UD=(t,e,n)=>{const r=t.slots=eS();if(t.vnode.shapeFlag&32){const s=e._;s?(oS(r,e,n),n&&lx(r,"_",s,!0)):sS(e,r)}else e&&iS(t,e)},BD=(t,e,n)=>{const{vnode:r,slots:s}=t;let i=!0,o=pt;if(r.shapeFlag&32){const a=e._;a?n&&a===1?i=!1:oS(s,e,n):(i=!e.$stable,sS(e,s)),o=e}else e&&(iS(t,e),o={default:1});if(i)for(const a in s)!Cg(a)&&o[a]==null&&delete s[a]},jn=rP;function zD(t){return VD(t)}function VD(t,e){const n=_d();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:a,createComment:l,setText:u,setElementText:c,parentNode:d,nextSibling:f,setScopeId:p=hs,insertStaticContent:h}=t,g=(M,P,Q,ye=null,_e=null,be=null,U=void 0,B=null,ce=!!P.dynamicChildren)=>{if(M===P)return;M&&!za(M,P)&&(ye=T(M),pe(M,_e,be,!0),M=null),P.patchFlag===-2&&(ce=!1,P.dynamicChildren=null);const{type:me,ref:Ie,shapeFlag:Ce}=P;switch(me){case xa:w(M,P,Q,ye);break;case Yr:x(M,P,Q,ye);break;case ml:M==null&&A(P,Q,ye,U);break;case je:J(M,P,Q,ye,_e,be,U,B,ce);break;default:Ce&1?v(M,P,Q,ye,_e,be,U,B,ce):Ce&6?W(M,P,Q,ye,_e,be,U,B,ce):(Ce&64||Ce&128)&&me.process(M,P,Q,ye,_e,be,U,B,ce,ne)}Ie!=null&&_e?pl(Ie,M&&M.ref,be,P||M,!P):Ie==null&&M&&M.ref!=null&&pl(M.ref,null,be,M,!0)},w=(M,P,Q,ye)=>{if(M==null)r(P.el=a(P.children),Q,ye);else{const _e=P.el=M.el;P.children!==M.children&&u(_e,P.children)}},x=(M,P,Q,ye)=>{M==null?r(P.el=l(P.children||""),Q,ye):P.el=M.el},A=(M,P,Q,ye)=>{[M.el,M.anchor]=h(M.children,P,Q,ye,M.el,M.anchor)},E=({el:M,anchor:P},Q,ye)=>{let _e;for(;M&&M!==P;)_e=f(M),r(M,Q,ye),M=_e;r(P,Q,ye)},m=({el:M,anchor:P})=>{let Q;for(;M&&M!==P;)Q=f(M),s(M),M=Q;s(P)},v=(M,P,Q,ye,_e,be,U,B,ce)=>{P.type==="svg"?U="svg":P.type==="math"&&(U="mathml"),M==null?_(P,Q,ye,_e,be,U,B,ce):k(M,P,_e,be,U,B,ce)},_=(M,P,Q,ye,_e,be,U,B)=>{let ce,me;const{props:Ie,shapeFlag:Ce,transition:de,dirs:ve}=M;if(ce=M.el=o(M.type,be,Ie&&Ie.is,Ie),Ce&8?c(ce,M.children):Ce&16&&$(M.children,ce,null,ye,_e,Cp(M,be),U,B),ve&&Gi(M,null,ye,"created"),C(ce,M,M.scopeId,U,ye),Ie){for(const O in Ie)O!=="value"&&!ul(O)&&i(ce,O,null,Ie[O],be,ye);"value"in Ie&&i(ce,"value",null,Ie.value,be),(me=Ie.onVnodeBeforeMount)&&os(me,ye,M)}ve&&Gi(M,null,ye,"beforeMount");const Oe=HD(_e,de);Oe&&de.beforeEnter(ce),r(ce,P,Q),((me=Ie&&Ie.onVnodeMounted)||Oe||ve)&&jn(()=>{me&&os(me,ye,M),Oe&&de.enter(ce),ve&&Gi(M,null,ye,"mounted")},_e)},C=(M,P,Q,ye,_e)=>{if(Q&&p(M,Q),ye)for(let be=0;be<ye.length;be++)p(M,ye[be]);if(_e){let be=_e.subTree;if(P===be||pS(be.type)&&(be.ssContent===P||be.ssFallback===P)){const U=_e.vnode;C(M,U,U.scopeId,U.slotScopeIds,_e.parent)}}},$=(M,P,Q,ye,_e,be,U,B,ce=0)=>{for(let me=ce;me<M.length;me++){const Ie=M[me]=B?pi(M[me]):ds(M[me]);g(null,Ie,P,Q,ye,_e,be,U,B)}},k=(M,P,Q,ye,_e,be,U)=>{const B=P.el=M.el;let{patchFlag:ce,dynamicChildren:me,dirs:Ie}=P;ce|=M.patchFlag&16;const Ce=M.props||pt,de=P.props||pt;let ve;if(Q&&Ji(Q,!1),(ve=de.onVnodeBeforeUpdate)&&os(ve,Q,P,M),Ie&&Gi(P,M,Q,"beforeUpdate"),Q&&Ji(Q,!0),(Ce.innerHTML&&de.innerHTML==null||Ce.textContent&&de.textContent==null)&&c(B,""),me?D(M.dynamicChildren,me,B,Q,ye,Cp(P,_e),be):U||F(M,P,B,null,Q,ye,Cp(P,_e),be,!1),ce>0){if(ce&16)G(B,Ce,de,Q,_e);else if(ce&2&&Ce.class!==de.class&&i(B,"class",null,de.class,_e),ce&4&&i(B,"style",Ce.style,de.style,_e),ce&8){const Oe=P.dynamicProps;for(let O=0;O<Oe.length;O++){const b=Oe[O],S=Ce[b],q=de[b];(q!==S||b==="value")&&i(B,b,S,q,_e,Q)}}ce&1&&M.children!==P.children&&c(B,P.children)}else!U&&me==null&&G(B,Ce,de,Q,_e);((ve=de.onVnodeUpdated)||Ie)&&jn(()=>{ve&&os(ve,Q,P,M),Ie&&Gi(P,M,Q,"updated")},ye)},D=(M,P,Q,ye,_e,be,U)=>{for(let B=0;B<P.length;B++){const ce=M[B],me=P[B],Ie=ce.el&&(ce.type===je||!za(ce,me)||ce.shapeFlag&198)?d(ce.el):Q;g(ce,me,Ie,null,ye,_e,be,U,!0)}},G=(M,P,Q,ye,_e)=>{if(P!==Q){if(P!==pt)for(const be in P)!ul(be)&&!(be in Q)&&i(M,be,P[be],null,_e,ye);for(const be in Q){if(ul(be))continue;const U=Q[be],B=P[be];U!==B&&be!=="value"&&i(M,be,B,U,_e,ye)}"value"in Q&&i(M,"value",P.value,Q.value,_e)}},J=(M,P,Q,ye,_e,be,U,B,ce)=>{const me=P.el=M?M.el:a(""),Ie=P.anchor=M?M.anchor:a("");let{patchFlag:Ce,dynamicChildren:de,slotScopeIds:ve}=P;ve&&(B=B?B.concat(ve):ve),M==null?(r(me,Q,ye),r(Ie,Q,ye),$(P.children||[],Q,Ie,_e,be,U,B,ce)):Ce>0&&Ce&64&&de&&M.dynamicChildren?(D(M.dynamicChildren,de,Q,_e,be,U,B),(P.key!=null||_e&&P===_e.subTree)&&kg(M,P,!0)):F(M,P,Q,Ie,_e,be,U,B,ce)},W=(M,P,Q,ye,_e,be,U,B,ce)=>{P.slotScopeIds=B,M==null?P.shapeFlag&512?_e.ctx.activate(P,Q,ye,U,ce):j(P,Q,ye,_e,be,U,ce):se(M,P,ce)},j=(M,P,Q,ye,_e,be,U)=>{const B=M.component=lP(M,ye,_e);if(Bx(M)&&(B.ctx.renderer=ne),uP(B,!1,U),B.asyncDep){if(_e&&_e.registerDep(B,R,U),!M.el){const ce=B.subTree=N(Yr);x(null,ce,P,Q),M.placeholder=ce.el}}else R(B,M,P,Q,_e,be,U)},se=(M,P,Q)=>{const ye=P.component=M.component;if(tP(M,P,Q))if(ye.asyncDep&&!ye.asyncResolved){V(ye,P,Q);return}else ye.next=P,ye.update();else P.el=M.el,ye.vnode=P},R=(M,P,Q,ye,_e,be,U)=>{const B=()=>{if(M.isMounted){let{next:Ce,bu:de,u:ve,parent:Oe,vnode:O}=M;{const ge=aS(M);if(ge){Ce&&(Ce.el=O.el,V(M,Ce,U)),ge.asyncDep.then(()=>{M.isUnmounted||B()});return}}let b=Ce,S;Ji(M,!1),Ce?(Ce.el=O.el,V(M,Ce,U)):Ce=O,de&&nc(de),(S=Ce.props&&Ce.props.onVnodeBeforeUpdate)&&os(S,Oe,Ce,O),Ji(M,!0);const q=Wb(M),oe=M.subTree;M.subTree=q,g(oe,q,d(oe.el),T(oe),M,_e,be),Ce.el=q.el,b===null&&nP(M,q.el),ve&&jn(ve,_e),(S=Ce.props&&Ce.props.onVnodeUpdated)&&jn(()=>os(S,Oe,Ce,O),_e)}else{let Ce;const{el:de,props:ve}=P,{bm:Oe,m:O,parent:b,root:S,type:q}=M,oe=Zo(P);Ji(M,!1),Oe&&nc(Oe),!oe&&(Ce=ve&&ve.onVnodeBeforeMount)&&os(Ce,b,P),Ji(M,!0);{S.ce&&S.ce._def.shadowRoot!==!1&&S.ce._injectChildStyle(q);const ge=M.subTree=Wb(M);g(null,ge,Q,ye,M,_e,be),P.el=ge.el}if(O&&jn(O,_e),!oe&&(Ce=ve&&ve.onVnodeMounted)){const ge=P;jn(()=>os(Ce,b,ge),_e)}(P.shapeFlag&256||b&&Zo(b.vnode)&&b.vnode.shapeFlag&256)&&M.a&&jn(M.a,_e),M.isMounted=!0,P=Q=ye=null}};M.scope.on();const ce=M.effect=new hx(B);M.scope.off();const me=M.update=ce.run.bind(ce),Ie=M.job=ce.runIfDirty.bind(ce);Ie.i=M,Ie.id=M.uid,ce.scheduler=()=>wg(Ie),Ji(M,!0),me()},V=(M,P,Q)=>{P.component=M;const ye=M.vnode.props;M.vnode=P,M.next=null,FD(M,P.props,ye,Q),BD(M,P.children,Q),Gs(),Lb(M),Js()},F=(M,P,Q,ye,_e,be,U,B,ce=!1)=>{const me=M&&M.children,Ie=M?M.shapeFlag:0,Ce=P.children,{patchFlag:de,shapeFlag:ve}=P;if(de>0){if(de&128){z(me,Ce,Q,ye,_e,be,U,B,ce);return}else if(de&256){ee(me,Ce,Q,ye,_e,be,U,B,ce);return}}ve&8?(Ie&16&&te(me,_e,be),Ce!==me&&c(Q,Ce)):Ie&16?ve&16?z(me,Ce,Q,ye,_e,be,U,B,ce):te(me,_e,be,!0):(Ie&8&&c(Q,""),ve&16&&$(Ce,Q,ye,_e,be,U,B,ce))},ee=(M,P,Q,ye,_e,be,U,B,ce)=>{M=M||Yo,P=P||Yo;const me=M.length,Ie=P.length,Ce=Math.min(me,Ie);let de;for(de=0;de<Ce;de++){const ve=P[de]=ce?pi(P[de]):ds(P[de]);g(M[de],ve,Q,null,_e,be,U,B,ce)}me>Ie?te(M,_e,be,!0,!1,Ce):$(P,Q,ye,_e,be,U,B,ce,Ce)},z=(M,P,Q,ye,_e,be,U,B,ce)=>{let me=0;const Ie=P.length;let Ce=M.length-1,de=Ie-1;for(;me<=Ce&&me<=de;){const ve=M[me],Oe=P[me]=ce?pi(P[me]):ds(P[me]);if(za(ve,Oe))g(ve,Oe,Q,null,_e,be,U,B,ce);else break;me++}for(;me<=Ce&&me<=de;){const ve=M[Ce],Oe=P[de]=ce?pi(P[de]):ds(P[de]);if(za(ve,Oe))g(ve,Oe,Q,null,_e,be,U,B,ce);else break;Ce--,de--}if(me>Ce){if(me<=de){const ve=de+1,Oe=ve<Ie?P[ve].el:ye;for(;me<=de;)g(null,P[me]=ce?pi(P[me]):ds(P[me]),Q,Oe,_e,be,U,B,ce),me++}}else if(me>de)for(;me<=Ce;)pe(M[me],_e,be,!0),me++;else{const ve=me,Oe=me,O=new Map;for(me=Oe;me<=de;me++){const We=P[me]=ce?pi(P[me]):ds(P[me]);We.key!=null&&O.set(We.key,me)}let b,S=0;const q=de-Oe+1;let oe=!1,ge=0;const Se=new Array(q);for(me=0;me<q;me++)Se[me]=0;for(me=ve;me<=Ce;me++){const We=M[me];if(S>=q){pe(We,_e,be,!0);continue}let Xe;if(We.key!=null)Xe=O.get(We.key);else for(b=Oe;b<=de;b++)if(Se[b-Oe]===0&&za(We,P[b])){Xe=b;break}Xe===void 0?pe(We,_e,be,!0):(Se[Xe-Oe]=me+1,Xe>=ge?ge=Xe:oe=!0,g(We,P[Xe],Q,null,_e,be,U,B,ce),S++)}const Je=oe?KD(Se):Yo;for(b=Je.length-1,me=q-1;me>=0;me--){const We=Oe+me,Xe=P[We],St=P[We+1],lt=We+1<Ie?St.el||St.placeholder:ye;Se[me]===0?g(null,Xe,Q,lt,_e,be,U,B,ce):oe&&(b<0||me!==Je[b]?ie(Xe,Q,lt,2):b--)}}},ie=(M,P,Q,ye,_e=null)=>{const{el:be,type:U,transition:B,children:ce,shapeFlag:me}=M;if(me&6){ie(M.component.subTree,P,Q,ye);return}if(me&128){M.suspense.move(P,Q,ye);return}if(me&64){U.move(M,P,Q,ne);return}if(U===je){r(be,P,Q);for(let Ce=0;Ce<ce.length;Ce++)ie(ce[Ce],P,Q,ye);r(M.anchor,P,Q);return}if(U===ml){E(M,P,Q);return}if(ye!==2&&me&1&&B)if(ye===0)B.beforeEnter(be),r(be,P,Q),jn(()=>B.enter(be),_e);else{const{leave:Ce,delayLeave:de,afterLeave:ve}=B,Oe=()=>{M.ctx.isUnmounted?s(be):r(be,P,Q)},O=()=>{be._isLeaving&&be[mD](!0),Ce(be,()=>{Oe(),ve&&ve()})};de?de(be,Oe,O):O()}else r(be,P,Q)},pe=(M,P,Q,ye=!1,_e=!1)=>{const{type:be,props:U,ref:B,children:ce,dynamicChildren:me,shapeFlag:Ie,patchFlag:Ce,dirs:de,cacheIndex:ve}=M;if(Ce===-2&&(_e=!1),B!=null&&(Gs(),pl(B,null,Q,M,!0),Js()),ve!=null&&(P.renderCache[ve]=void 0),Ie&256){P.ctx.deactivate(M);return}const Oe=Ie&1&&de,O=!Zo(M);let b;if(O&&(b=U&&U.onVnodeBeforeUnmount)&&os(b,P,M),Ie&6)X(M.component,Q,ye);else{if(Ie&128){M.suspense.unmount(Q,ye);return}Oe&&Gi(M,null,P,"beforeUnmount"),Ie&64?M.type.remove(M,P,Q,ne,ye):me&&!me.hasOnce&&(be!==je||Ce>0&&Ce&64)?te(me,P,Q,!1,!0):(be===je&&Ce&384||!_e&&Ie&16)&&te(ce,P,Q),ye&&he(M)}(O&&(b=U&&U.onVnodeUnmounted)||Oe)&&jn(()=>{b&&os(b,P,M),Oe&&Gi(M,null,P,"unmounted")},Q)},he=M=>{const{type:P,el:Q,anchor:ye,transition:_e}=M;if(P===je){Ae(Q,ye);return}if(P===ml){m(M);return}const be=()=>{s(Q),_e&&!_e.persisted&&_e.afterLeave&&_e.afterLeave()};if(M.shapeFlag&1&&_e&&!_e.persisted){const{leave:U,delayLeave:B}=_e,ce=()=>U(Q,be);B?B(M.el,be,ce):ce()}else be()},Ae=(M,P)=>{let Q;for(;M!==P;)Q=f(M),s(M),M=Q;s(P)},X=(M,P,Q)=>{const{bum:ye,scope:_e,job:be,subTree:U,um:B,m:ce,a:me}=M;Kb(ce),Kb(me),ye&&nc(ye),_e.stop(),be&&(be.flags|=8,pe(U,M,P,Q)),B&&jn(B,P),jn(()=>{M.isUnmounted=!0},P)},te=(M,P,Q,ye=!1,_e=!1,be=0)=>{for(let U=be;U<M.length;U++)pe(M[U],P,Q,ye,_e)},T=M=>{if(M.shapeFlag&6)return T(M.component.subTree);if(M.shapeFlag&128)return M.suspense.next();const P=f(M.anchor||M.el),Q=P&&P[Fx];return Q?f(Q):P};let Y=!1;const re=(M,P,Q)=>{M==null?P._vnode&&pe(P._vnode,null,null,!0):g(P._vnode||null,M,P,null,null,null,Q),P._vnode=M,Y||(Y=!0,Lb(),Mx(),Y=!1)},ne={p:g,um:pe,m:ie,r:he,mt:j,mc:$,pc:F,pbc:D,n:T,o:t};return{render:re,hydrate:void 0,createApp:MD(re)}}function Cp({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Ji({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function HD(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function kg(t,e,n=!1){const r=t.children,s=e.children;if(Ve(r)&&Ve(s))for(let i=0;i<r.length;i++){const o=r[i];let a=s[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[i]=pi(s[i]),a.el=o.el),!n&&a.patchFlag!==-2&&kg(o,a)),a.type===xa&&a.patchFlag!==-1&&(a.el=o.el),a.type===Yr&&!a.el&&(a.el=o.el)}}function KD(t){const e=t.slice(),n=[0];let r,s,i,o,a;const l=t.length;for(r=0;r<l;r++){const u=t[r];if(u!==0){if(s=n[n.length-1],t[s]<u){e[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,t[n[a]]<u?i=a+1:o=a;u<t[n[i]]&&(i>0&&(e[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function aS(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:aS(e)}function Kb(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const WD=Symbol.for("v-scx"),GD=()=>Kt(WD);function Nt(t,e){return Gl(t,null,e)}function lS(t,e){return Gl(t,null,{flush:"post"})}function uS(t,e){return Gl(t,null,{flush:"sync"})}function Ke(t,e,n){return Gl(t,e,n)}function Gl(t,e,n=pt){const{immediate:r,deep:s,flush:i,once:o}=n,a=Dn({},n),l=e&&r||!e&&i!=="post";let u;if(Ol){if(i==="sync"){const p=GD();u=p.__watcherHandles||(p.__watcherHandles=[])}else if(!l){const p=()=>{};return p.stop=hs,p.resume=hs,p.pause=hs,p}}const c=In;a.call=(p,h,g)=>bs(p,c,h,g);let d=!1;i==="post"?a.scheduler=p=>{jn(p,c&&c.suspense)}:i!=="sync"&&(d=!0,a.scheduler=(p,h)=>{h?p():wg(p)}),a.augmentJob=p=>{e&&(p.flags|=4),d&&(p.flags|=2,c&&(p.id=c.uid,p.i=c))};const f=uD(t,e,a);return Ol&&(u?u.push(f):l&&f()),f}function JD(t,e,n){const r=this.proxy,s=Vt(t)?t.includes(".")?cS(r,t):()=>r[t]:t.bind(r,r);let i;Ge(e)?i=e:(i=e.handler,n=e);const o=Jl(this),a=Gl(s,i.bind(r),n);return o(),a}function cS(t,e){const n=e.split(".");return()=>{let r=t;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}function YD(t,e,n=pt){const r=wn(),s=Kn(e),i=ni(e),o=dS(t,s),a=_a((l,u)=>{let c,d=pt,f;return uS(()=>{const p=t[s];Un(c,p)&&(c=p,u())}),{get(){return l(),n.get?n.get(c):c},set(p){const h=n.set?n.set(p):p;if(!Un(h,c)&&!(d!==pt&&Un(p,d)))return;const g=r.vnode.props;g&&(e in g||s in g||i in g)&&(`onUpdate:${e}`in g||`onUpdate:${s}`in g||`onUpdate:${i}`in g)||(c=p,u()),r.emit(`update:${e}`,h),Un(p,h)&&Un(p,d)&&!Un(h,f)&&u(),d=p,f=h}}});return a[Symbol.iterator]=()=>{let l=0;return{next(){return l<2?{value:l++?o||pt:a,done:!1}:{done:!0}}}},a}const dS=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Kn(e)}Modifiers`]||t[`${ni(e)}Modifiers`];function XD(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||pt;let s=n;const i=e.startsWith("update:"),o=i&&dS(r,e.slice(7));o&&(o.trim&&(s=n.map(c=>Vt(c)?c.trim():c)),o.number&&(s=n.map(Ph)));let a,l=r[a=tc(e)]||r[a=tc(Kn(e))];!l&&i&&(l=r[a=tc(ni(e))]),l&&bs(l,t,6,s);const u=r[a+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,bs(u,t,6,s)}}const QD=new WeakMap;function fS(t,e,n=!1){const r=n?QD:e.emitsCache,s=r.get(t);if(s!==void 0)return s;const i=t.emits;let o={},a=!1;if(!Ge(t)){const l=u=>{const c=fS(u,e,!0);c&&(a=!0,Dn(o,c))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!i&&!a?(It(t)&&r.set(t,null),null):(Ve(i)?i.forEach(l=>o[l]=null):Dn(o,i),It(t)&&r.set(t,o),o)}function Td(t,e){return!t||!yd(e)?!1:(e=e.slice(2).replace(/Once$/,""),bt(t,e[0].toLowerCase()+e.slice(1))||bt(t,ni(e))||bt(t,e))}function Wb(t){const{type:e,vnode:n,proxy:r,withProxy:s,propsOptions:[i],slots:o,attrs:a,emit:l,render:u,renderCache:c,props:d,data:f,setupState:p,ctx:h,inheritAttrs:g}=t,w=Cc(t);let x,A;try{if(n.shapeFlag&4){const m=s||r,v=m;x=ds(u.call(v,m,c,d,p,f,h)),A=a}else{const m=e;x=ds(m.length>1?m(d,{attrs:a,slots:o,emit:l}):m(d,null)),A=e.props?a:ZD(a)}}catch(m){gl.length=0,kd(m,t,1),x=N(Yr)}let E=x;if(A&&g!==!1){const m=Object.keys(A),{shapeFlag:v}=E;m.length&&v&7&&(i&&m.some(pg)&&(A=eP(A,i)),E=fo(E,A,!1,!0))}return n.dirs&&(E=fo(E,null,!1,!0),E.dirs=E.dirs?E.dirs.concat(n.dirs):n.dirs),n.transition&&xg(E,n.transition),x=E,Cc(w),x}const ZD=t=>{let e;for(const n in t)(n==="class"||n==="style"||yd(n))&&((e||(e={}))[n]=t[n]);return e},eP=(t,e)=>{const n={};for(const r in t)(!pg(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function tP(t,e,n){const{props:r,children:s,component:i}=t,{props:o,children:a,patchFlag:l}=e,u=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?Gb(r,o,u):!!o;if(l&8){const c=e.dynamicProps;for(let d=0;d<c.length;d++){const f=c[d];if(o[f]!==r[f]&&!Td(u,f))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?Gb(r,o,u):!0:!!o;return!1}function Gb(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(e[i]!==t[i]&&!Td(n,i))return!0}return!1}function nP({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const pS=t=>t.__isSuspense;function rP(t,e){e&&e.pendingBranch?Ve(t)?e.effects.push(...t):e.effects.push(t):fD(t)}const je=Symbol.for("v-fgt"),xa=Symbol.for("v-txt"),Yr=Symbol.for("v-cmt"),ml=Symbol.for("v-stc"),gl=[];let zn=null;function I(t=!1){gl.push(zn=t?null:[])}function sP(){gl.pop(),zn=gl[gl.length-1]||null}let ua=1;function Ic(t,e=!1){ua+=t,t<0&&zn&&e&&(zn.hasOnce=!0)}function hS(t){return t.dynamicChildren=ua>0?zn||Yo:null,sP(),ua>0&&zn&&zn.push(t),t}function ae(t,e,n,r,s,i){return hS(L(t,e,n,r,s,i,!0))}function Z(t,e,n,r,s){return hS(N(t,e,n,r,s,!0))}function Rl(t){return t?t.__v_isVNode===!0:!1}function za(t,e){return t.type===e.type&&t.key===e.key}const mS=({key:t})=>t??null,sc=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Vt(t)||Mt(t)||Ge(t)?{i:yn,r:t,k:e,f:!!n}:t:null);function L(t,e=null,n=null,r=0,s=null,i=t===je?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&mS(e),ref:e&&sc(e),scopeId:Nx,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:yn};return a?(Ig(l,n),i&128&&t.normalize(l)):n&&(l.shapeFlag|=Vt(n)?8:16),ua>0&&!o&&zn&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&zn.push(l),l}const N=iP;function iP(t,e=null,n=null,r=0,s=null,i=!1){if((!t||t===Hx)&&(t=Yr),Rl(t)){const a=fo(t,e,!0);return n&&Ig(a,n),ua>0&&!i&&zn&&(a.shapeFlag&6?zn[zn.indexOf(t)]=a:zn.push(a)),a.patchFlag=-2,a}if(pP(t)&&(t=t.__vccOpts),e){e=sr(e);let{class:a,style:l}=e;a&&!Vt(a)&&(e.class=De(a)),It(l)&&(bg(l)&&!Ve(l)&&(l=Dn({},l)),e.style=Xt(l))}const o=Vt(t)?1:pS(t)?128:pD(t)?64:It(t)?4:Ge(t)?2:0;return L(t,e,n,r,s,o,i,!0)}function sr(t){return t?bg(t)||tS(t)?Dn({},t):t:null}function fo(t,e,n=!1,r=!1){const{props:s,ref:i,patchFlag:o,children:a,transition:l}=t,u=e?Te(s||{},e):s,c={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&mS(u),ref:e&&e.ref?n&&i?Ve(i)?i.concat(sc(e)):[i,sc(e)]:sc(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==je?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&fo(t.ssContent),ssFallback:t.ssFallback&&fo(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&r&&xg(c,l.clone(c)),c}function Ue(t=" ",e=0){return N(xa,null,t,e)}function gS(t,e){const n=N(ml,null,t);return n.staticCount=e,n}function ke(t="",e=!1){return e?(I(),Z(Yr,null,t)):N(Yr,null,t)}function ds(t){return t==null||typeof t=="boolean"?N(Yr):Ve(t)?N(je,null,t.slice()):Rl(t)?pi(t):N(xa,null,String(t))}function pi(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:fo(t)}function Ig(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(Ve(e))n=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),Ig(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!tS(e)?e._ctx=yn:s===3&&yn&&(yn.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Ge(e)?(e={default:e,_ctx:yn},n=32):(e=String(e),r&64?(n=16,e=[Ue(e)]):n=8);t.children=e,t.shapeFlag|=n}function Te(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=De([e.class,r.class]));else if(s==="style")e.style=Xt([e.style,r.style]);else if(yd(s)){const i=e[s],o=r[s];o&&i!==o&&!(Ve(i)&&i.includes(o))&&(e[s]=i?[].concat(i,o):o)}else s!==""&&(e[s]=r[s])}return e}function os(t,e,n,r=null){bs(t,e,7,[n,r])}const oP=Qx();let aP=0;function lP(t,e,n){const r=t.type,s=(e?e.appContext:t.appContext)||oP,i={uid:aP++,vnode:t,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new px(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:rS(r,s),emitsOptions:fS(r,s),emit:null,emitted:null,propsDefaults:pt,inheritAttrs:r.inheritAttrs,ctx:pt,data:pt,props:pt,attrs:pt,slots:pt,refs:pt,setupState:pt,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=XD.bind(null,i),t.ce&&t.ce(i),i}let In=null;const wn=()=>In||yn;let Rc,Vh;{const t=_d(),e=(n,r)=>{let s;return(s=t[n])||(s=t[n]=[]),s.push(r),i=>{s.length>1?s.forEach(o=>o(i)):s[0](i)}};Rc=e("__VUE_INSTANCE_SETTERS__",n=>In=n),Vh=e("__VUE_SSR_SETTERS__",n=>Ol=n)}const Jl=t=>{const e=In;return Rc(t),t.scope.on(),()=>{t.scope.off(),Rc(e)}},Jb=()=>{In&&In.scope.off(),Rc(null)};function yS(t){return t.vnode.shapeFlag&4}let Ol=!1;function uP(t,e=!1,n=!1){e&&Vh(e);const{props:r,children:s}=t.vnode,i=yS(t);ND(t,r,i,e),UD(t,s,n||e);const o=i?cP(t,e):void 0;return e&&Vh(!1),o}function cP(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,kD);const{setup:r}=n;if(r){Gs();const s=t.setupContext=r.length>1?bS(t):null,i=Jl(t),o=Wl(r,t,0,[t.props,s]),a=ix(o);if(Js(),i(),(a||t.sp)&&!Zo(t)&&Ux(t),a){if(o.then(Jb,Jb),e)return o.then(l=>{Yb(t,l)}).catch(l=>{kd(l,t,0)});t.asyncDep=o}else Yb(t,o)}else vS(t)}function Yb(t,e,n){Ge(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:It(e)&&(t.setupState=Ox(e)),vS(t)}function vS(t,e,n){const r=t.type;t.render||(t.render=r.render||hs);{const s=Jl(t);Gs();try{ID(t)}finally{Js(),s()}}}const dP={get(t,e){return $n(t,"get",""),t[e]}};function bS(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,dP),slots:t.slots,emit:t.emit,expose:e}}function Dd(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Ox(Qe(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in hl)return hl[n](t)},has(e,n){return n in e||n in hl}})):t.proxy}function fP(t,e=!0){return Ge(t)?t.displayName||t.name:t.name||e&&t.__name}function pP(t){return Ge(t)&&"__vccOpts"in t}const H=(t,e)=>aD(t,e,Ol);function dr(t,e,n){try{Ic(-1);const r=arguments.length;return r===2?It(e)&&!Ve(e)?Rl(e)?N(t,null,[e]):N(t,e):N(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Rl(n)&&(n=[n]),N(t,e,n))}finally{Ic(1)}}function hP(t,e,n,r){const s=n[r];if(s&&mP(s,t))return s;const i=e();return i.memo=t.slice(),i.cacheIndex=r,n[r]=i}function mP(t,e){const n=t.memo;if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(Un(n[r],e[r]))return!1;return ua>0&&zn&&zn.push(t),!0}const gP="3.5.22";/**
* @vue/runtime-dom v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Hh;const Xb=typeof window<"u"&&window.trustedTypes;if(Xb)try{Hh=Xb.createPolicy("vue",{createHTML:t=>t})}catch{}const wS=Hh?t=>Hh.createHTML(t):t=>t,yP="http://www.w3.org/2000/svg",vP="http://www.w3.org/1998/Math/MathML",Ps=typeof document<"u"?document:null,Qb=Ps&&Ps.createElement("template"),bP={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const s=e==="svg"?Ps.createElementNS(yP,t):e==="mathml"?Ps.createElementNS(vP,t):n?Ps.createElement(t,{is:n}):Ps.createElement(t);return t==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:t=>Ps.createTextNode(t),createComment:t=>Ps.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Ps.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,s,i){const o=n?n.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{Qb.innerHTML=wS(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const a=Qb.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},wP=Symbol("_vtc");function _P(t,e,n){const r=t[wP];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const Zb=Symbol("_vod"),xP=Symbol("_vsh"),SP=Symbol(""),EP=/(?:^|;)\s*display\s*:/;function AP(t,e,n){const r=t.style,s=Vt(n);let i=!1;if(n&&!s){if(e)if(Vt(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&ic(r,a,"")}else for(const o in e)n[o]==null&&ic(r,o,"");for(const o in n)o==="display"&&(i=!0),ic(r,o,n[o])}else if(s){if(e!==n){const o=r[SP];o&&(n+=";"+o),r.cssText=n,i=EP.test(n)}}else e&&t.removeAttribute("style");Zb in t&&(t[Zb]=i?r.display:"",t[xP]&&(r.display="none"))}const e0=/\s*!important$/;function ic(t,e,n){if(Ve(n))n.forEach(r=>ic(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=CP(t,e);e0.test(n)?t.setProperty(ni(r),n.replace(e0,""),"important"):t[r]=n}}const t0=["Webkit","Moz","ms"],$p={};function CP(t,e){const n=$p[e];if(n)return n;let r=Kn(e);if(r!=="filter"&&r in t)return $p[e]=r;r=wd(r);for(let s=0;s<t0.length;s++){const i=t0[s]+r;if(i in t)return $p[e]=i}return e}const n0="http://www.w3.org/1999/xlink";function r0(t,e,n,r,s,i=DT(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(n0,e.slice(6,e.length)):t.setAttributeNS(n0,e,n):n==null||i&&!ux(n)?t.removeAttribute(e):t.setAttribute(e,i?"":Jr(n)?String(n):n)}function s0(t,e,n,r,s){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?wS(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?t.getAttribute("value")||"":t.value,l=n==null?t.type==="checkbox"?"on":"":String(n);(a!==l||!("_value"in t))&&(t.value=l),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=ux(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(s||e)}function Qi(t,e,n,r){t.addEventListener(e,n,r)}function $P(t,e,n,r){t.removeEventListener(e,n,r)}const i0=Symbol("_vei");function kP(t,e,n,r,s=null){const i=t[i0]||(t[i0]={}),o=i[e];if(r&&o)o.value=r;else{const[a,l]=IP(e);if(r){const u=i[e]=TP(r,s);Qi(t,a,u,l)}else o&&($P(t,a,o,l),i[e]=void 0)}}const o0=/(?:Once|Passive|Capture)$/;function IP(t){let e;if(o0.test(t)){e={};let r;for(;r=t.match(o0);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):ni(t.slice(2)),e]}let kp=0;const RP=Promise.resolve(),OP=()=>kp||(RP.then(()=>kp=0),kp=Date.now());function TP(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;bs(DP(r,n.value),e,5,[r])};return n.value=t,n.attached=OP(),n}function DP(t,e){if(Ve(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const a0=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,PP=(t,e,n,r,s,i)=>{const o=s==="svg";e==="class"?_P(t,r,o):e==="style"?AP(t,n,r):yd(e)?pg(e)||kP(t,e,n,r,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):MP(t,e,r,o))?(s0(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&r0(t,e,r,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Vt(r))?s0(t,Kn(e),r,i,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),r0(t,e,r,o))};function MP(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&a0(e)&&Ge(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return a0(e)&&Vt(n)?!1:e in t}const Oc=t=>{const e=t.props["onUpdate:modelValue"]||!1;return Ve(e)?n=>nc(e,n):e};function LP(t){t.target.composing=!0}function l0(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const ea=Symbol("_assign"),NP={created(t,{modifiers:{lazy:e,trim:n,number:r}},s){t[ea]=Oc(s);const i=r||s.props&&s.props.type==="number";Qi(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;n&&(a=a.trim()),i&&(a=Ph(a)),t[ea](a)}),n&&Qi(t,"change",()=>{t.value=t.value.trim()}),e||(Qi(t,"compositionstart",LP),Qi(t,"compositionend",l0),Qi(t,"change",l0))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:s,number:i}},o){if(t[ea]=Oc(o),t.composing)return;const a=(i||t.type==="number")&&!/^0\d/.test(t.value)?Ph(t.value):t.value,l=e??"";a!==l&&(document.activeElement===t&&t.type!=="range"&&(r&&e===n||s&&t.value.trim()===l)||(t.value=l))}},FP={deep:!0,created(t,e,n){t[ea]=Oc(n),Qi(t,"change",()=>{const r=t._modelValue,s=jP(t),i=t.checked,o=t[ea];if(Ve(r)){const a=cx(r,s),l=a!==-1;if(i&&!l)o(r.concat(s));else if(!i&&l){const u=[...r];u.splice(a,1),o(u)}}else if(vd(r)){const a=new Set(r);i?a.add(s):a.delete(s),o(a)}else o(_S(t,i))})},mounted:u0,beforeUpdate(t,e,n){t[ea]=Oc(n),u0(t,e,n)}};function u0(t,{value:e,oldValue:n},r){t._modelValue=e;let s;if(Ve(e))s=cx(e,r.props.value)>-1;else if(vd(e))s=e.has(r.props.value);else{if(e===n)return;s=xd(e,_S(t,!0))}t.checked!==s&&(t.checked=s)}function jP(t){return"_value"in t?t._value:t.value}function _S(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const qP=["ctrl","shift","alt","meta"],UP={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>qP.some(n=>t[`${n}Key`]&&!e.includes(n))},nr=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=((s,...i)=>{for(let o=0;o<e.length;o++){const a=UP[e[o]];if(a&&a(s,e))return}return t(s,...i)}))},BP={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Ys=(t,e)=>{const n=t._withKeys||(t._withKeys={}),r=e.join(".");return n[r]||(n[r]=(s=>{if(!("key"in s))return;const i=ni(s.key);if(e.some(o=>o===i||BP[o]===i))return t(s)}))},zP=Dn({patchProp:PP},bP);let c0;function VP(){return c0||(c0=zD(zP))}const HP=((...t)=>{const e=VP().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=WP(r);if(!s)return;const i=e._component;!Ge(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const o=n(s,!1,KP(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e});function KP(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function WP(t){return Vt(t)?document.querySelector(t):t}var xS={},GP=Object.defineProperty,JP=(t,e,n)=>e in t?GP(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,fr=(t,e,n)=>JP(t,typeof e!="symbol"?e+"":e,n);function YP(t){return typeof t=="function"?t():t}function Wt(t="Something went wrong",...e){const n=typeof t=="string"?Error:t;throw new n(...typeof t=="string"?[t]:e)}function XP(){return typeof global<"u"?global:typeof globalThis<"u"?globalThis:window}const QP=XP().Error;let yo=class extends QP{constructor(e,n){super(e,n),this.name=new.target.name==="JSError"?"Error":new.target.name,Object.setPrototypeOf(this,new.target.prototype)}};function ZP(t,e){return t==null&&e==null?[t===null?1:0,e===null?1:0]:[t??null,e??null]}function Ip(t,e){const[n,r]=ZP(t,e);return n>r?1:r>n?-1:0}const Tc=Array.isArray.bind(Array);function Rp(t){return t==null?!0:Array.isArray(t)||typeof t=="string"?t.length===0:typeof t=="object"?Object.keys(t).length===0:!1}function er(t,e){return t instanceof e}function e2(t){return typeof(t==null?void 0:t[Symbol.iterator])=="function"}function Ai(t){return typeof t=="object"&&t!==null}function t2(t){return typeof t=="string"||t instanceof String}function SS(t){t={...t};for(const e in t)s2(t,e)&&(t[e]=SS(t[e]));return t}function xu(t,e){let n=t;const r=e.split(".");for(const s of r){if(!Ai(n))return;n=n[s]}return n}Object.entries.bind(Object);function n2(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function r2(t,e){return t.reduce((n,r)=>(n[r[e]]=r,n),{})}function bi(t,e){const n={},r=Array.isArray(e)?e:[e];for(const s of r)s in t&&(n[s]=t[s]);return n}function s2(t,e){let n;return n2(t,e)&&Ai(n=t[e])&&n.constructor===Object}function po(t,e){if(typeof e=="function"){const s=e,i={};for(const[o,a]of Object.entries(t))s(a)||(i[o]=a);return i}const n={...t},r=Array.isArray(e)?e:[e];for(const s of r)delete n[s];return n}function Rg(t){return po(t,e=>e==null)}function rr(t){return String(t)}function i2(t){return t instanceof Error?t:new Error(rr(t))}function o2(t){t.splice(0,t.length)}function a2(t,e,n){const r=t.slice(0),s=[],i=n?(o,a)=>a.findIndex(l=>n(o,l)):(o,a)=>a.indexOf(o);for(const o of e){const a=i(o,r);a!==-1?r.splice(a,1):s.push(o)}return{added:s,removed:r}}function d0(t,e){const n=[];for(let r=0;r<t.length;r+=e)n.push(t.slice(r,r+e));return n}function Pd(t,e){return e?t.filter(e):t.filter(n=>!!n)}function l2(t,e){for(const n of t)if(e(n))return n;return null}function u2(t,e){return[...t.entries()].flatMap(([n,r])=>e(r,n))}function c2(t,e){const n=typeof e=="string"?r=>rr(r[e]):e;return t.reduce((r,s)=>{var i;return(r[i=n(s)]??(r[i]=[])).push(s),r},{})}function d2(t){return t.length===0}function f2(t,e){return t.map(n=>n[e])}function p2(t){return t.length===0?null:t[Math.floor(Math.random()*t.length)]}function h2(t,e){const n=t.slice(0),r=[];for(;n.length>0&&r.length<e;){const s=Math.floor(Math.random()*n.length);r.push(n[s]),n.splice(s,1)}return r}function Hs(t,e){const n=t.indexOf(e);return n===-1?!1:(t.splice(n,1),!0)}function m2(t,e){return t.splice(Number(e),1).length>0}function g2(t,e,n){const r=t.indexOf(e);return r===-1?!1:(t[r]=n,!0)}function ES(t,e,n){n=e==="asc"||e==="desc"?e:n;const r={},s=a=>{switch(typeof a){case"string":return"";case"number":return Number.MIN_SAFE_INTEGER;case"boolean":return!1;default:return null}},i=(a,l)=>{if(!(l in r)){const u=xu(t.find(c=>xu(c,l)!==void 0&&xu(c,l)!==null),l);r[l]=s(u)}return xu(a,l)??r[l]},o=()=>{const a=n==="desc"?l=>(u,c)=>Ip(i(c,l),i(u,l)):l=>(u,c)=>Ip(i(u,l),i(c,l));switch(typeof e){case"function":return e;case"string":return e==="asc"?void 0:e==="desc"?(l,u)=>Ip(u,l):a(e);case"object":{const l=e.map(u=>a(u));return(u,c)=>{for(const d of l){const f=d(u,c);if(f!==0)return f}return 0}}}};return t.slice(0).sort(o())}function Kh(t,e){return e?Object.values(t.reduce((n,r)=>{const s=e(r);return n[s]=n[s]??r,n},{})):[...new Set(t)]}function y2(t,e,n){return t.filter(r=>{const s=r[e],i=typeof s=="function"?s.call(r):s;return n?i===n:!!i})}function Og(t,e){return Array.isArray(e)?Pd(t,n=>e.indexOf(n)===-1):v2(t,t.indexOf(e))}function v2(t,e){return AS(t,[e])}function AS(t,e){return t.map((n,r)=>[n,r]).filter(([n,r])=>!e.includes(r)).map(([n])=>n)}function Yl(t,e=!1){return Array.isArray(t)||e2(t)&&!t2(t)?Array.from(t):e&&t==null?[]:[t]}let b2=class{constructor(){fr(this,"listeners",[])}add(e){return this.listeners.push(e),()=>this.remove(e)}remove(e){Hs(this.listeners,e)}async emit(e,...n){for(const r of this.listeners){const s=r[e];typeof s=="function"&&await(s==null?void 0:s.call(r,...n))}}};class Dc{static isConjuring(){return this.__conjuring}static isMagicReady(){return this.__reservedProperties.has(this)}static prepareMagic(){this.__conjuring=!0,this.__reservedProperties.set(this,new Set(Object.getOwnPropertyNames(new this))),this.__conjuring=!1}static isReservedProperty(e){var n;return!!((n=this.__reservedProperties.get(this))!=null&&n.has(e))}constructor(...e){if(!this.static().isConjuring())return this.static().isMagicReady()||this.static().prepareMagic(),this._proxy=this.createProxy(),this.initialize(...e),this._proxy.instance}static(e){const n=this.constructor;return e?n[e]:n}reserveProperty(e){Object.assign(this,{[e]:null})}initialize(...e){}__get(e){return Reflect.get(this._proxy.target,e)}__set(e,n){Reflect.set(this._proxy.target,e,n)}__delete(e){Reflect.deleteProperty(this._proxy.target,e)}createProxy(){const e=this.static();return{target:this,instance:new Proxy(this,{get(n,r,s){return typeof r!="string"||r in n||e.isReservedProperty(r)?Reflect.get(n,r,s):n.__get(r)},set(n,r,s,i){return typeof r!="string"||r in n||e.isReservedProperty(r)?Reflect.set(n,r,s,i):(n.__set(r,s),!0)},deleteProperty(n,r){return typeof r!="string"||r in n||e.isReservedProperty(r)?Reflect.deleteProperty(n,r):(n.__delete(r),!0)}})}}}fr(Dc,"__conjuring"),fr(Dc,"__reservedProperties",new WeakMap);let w2=class CS{constructor(e){fr(this,"keysToItems"),fr(this,"itemsToKeys"),fr(this,"getKey"),this.keysToItems=new Map,this.itemsToKeys=new WeakMap,this.getKey=e??(n=>rr(n))}static createFromArray(e,n){const r=typeof n=="string"?i=>i[n]:n,s=new CS(r);for(const i of e)s.add(i);return s}*[Symbol.iterator](){yield*this.keysToItems}get size(){return this.keysToItems.size}items(){return this.keysToItems.values()}keys(){return this.keysToItems.keys()}entries(){return this.keysToItems.entries()}add(e){const n=this.getKey(e);this.keysToItems.set(n,e),this.itemsToKeys.set(e,n)}require(e){return this.keysToItems.get(e)??Wt(`Couldn't find item with '${e}' key`)}get(e){return this.keysToItems.get(e)}getKeys(){return[...this.keysToItems.keys()]}getItems(){return[...this.keysToItems.values()]}hasKey(e){return this.keysToItems.has(e)}hasItem(e){return this.itemsToKeys.has(e)}delete(e){const n=this.itemsToKeys.get(e);n&&(this.itemsToKeys.delete(e),this.keysToItems.delete(n))}filter(e){const n=this.constructor.createFromArray([],this.getKey);for(const[r,s]of this.entries())e(s,r)&&n.add(s);return n}clear(){this.itemsToKeys=new WeakMap,this.keysToItems.clear()}clone(){const e=this.constructor,n=new e(this.getKey);n.keysToItems=new Map(this.keysToItems),n.itemsToKeys=new WeakMap;for(const[r,s]of n.keysToItems.entries())n.itemsToKeys.set(s,r);return n}},ms=class $S{constructor(){fr(this,"resolveListeners",[]),fr(this,"rejectListeners",[]),fr(this,"resetListeners",[]),this.setPromiseValues()}static from(e){const n=new $S;return e.then(n.resolve.bind(n)).catch(n.reject.bind(n)),n}get value(){return this._value||null}isResolved(){return"_value"in this}then(e,n){return this.promise.then(e,n)}catch(e){return this.promise.catch(e)}finally(e){return this.promise.finally(e)}resolve(e){this.isResolved()&&this.reset(),this._value=e,this._resolve(e),this.resolveListeners.forEach(n=>n(e))}reject(e){this.isResolved()&&this.reset(),delete this._value,this._reject(e),this.rejectListeners.forEach(n=>n(e))}onResolve(e){return this.resolveListeners.push(e),()=>Hs(this.resolveListeners,e)}onReject(e){return this.rejectListeners.push(e),()=>Hs(this.rejectListeners,e)}onReset(e){return this.resetListeners.push(e),()=>Hs(this.resetListeners,e)}reset(){this.setPromiseValues(),this.rejectListeners.forEach(e=>e())}setPromiseValues(){this.promise=new Promise((e,n)=>{this._resolve=e,this._reject=n})}};class _2{constructor(e=1){fr(this,"count"),fr(this,"listeners"),this.count=e,this.listeners=new Set}acquire(){return this.count===0?this.waitAvailable().then(()=>this.acquire()):(this.count=Math.max(this.count-1,0),Promise.resolve())}release(){this.count++,this.notifyAvailable()}isAvailable(){return this.count!==0}async run(e){await this.acquire();try{return await e()}finally{this.release()}}async waitAvailable(){for(;!this.isAvailable();)await new Promise(e=>{const n=()=>{this.listeners.delete(n),e(null)};this.listeners.add(n)})}notifyAvailable(){this.listeners.forEach(e=>e())}}const f0={},kS=class IS{static get instance(){return this._instance=this._instance??new IS}constructor(){}set(e,n){typeof n>"u"&&(n="__undefined__"),localStorage.setItem(e,JSON.stringify(n))}get(e,n=null){const r=localStorage.getItem(e);if(r===null)return n;if(r!=="__undefined__")return JSON.parse(r)}require(e){const n=this.get(e,f0);if(n===f0)throw new Error(`Failed getting required key from local storage: '${e}'`);return n}has(e){return localStorage.getItem(e)!==null}remove(e){localStorage.removeItem(e)}pull(e,n=null){if(!this.has(e))return n;const r=this.get(e);return this.remove(e),r}};fr(kS,"_instance");let x2=kS;const _r=x2.instance;function Pc(t){return!(!t||["0","false"].includes(t))}const Ci={};function p0(t,e){return Ci[t]=Ci[t]??ms.from(e()),Ci[t]}function S2(t){const e={};return(...n)=>"result"in e?e.result:e.result=t(...n)}function h0(t){Yl(t??Object.keys(Ci)).forEach(e=>delete Ci[e])}function m0(t,e){var n;Ci[t]=Ci[t]??new ms,(n=Ci[t])==null||n.resolve(e)}function RS(){return typeof globalThis=="object"&&("Cypress"in globalThis||typeof globalThis.top=="object"&&globalThis.top&&"Cypress"in globalThis.top)?"e2e":typeof process=="object"&&xS.VITEST?"unit":null}function Tg(){var t;if(RS())return"testing";if(typeof process=="object"&&(t=xS)!=null&&t.NODE_ENV)return"production";try{return"production"}catch{return null}}function Ri(){return Tg()==="development"}function Tl(t){return Tg()!=="testing"?!1:!t||t===RS()}function E2(t){const e=t;return(e^Math.random()*16>>e/4).toString(16)}function Dl(){return("10000000-1000-4000-8000"+-1e11).replace(/[018]/g,E2)}function pr(t={}){const e=typeof t=="number"?t:(t.milliseconds||t.ms||0)+(t.seconds||0)*1e3;return new Promise(n=>setTimeout(n,e))}async function A2(){await new Promise(()=>{})}async function C2(t){for(;location.href!==t;)await pr({ms:1})}function yl(t){return $2()[t]}function $2(){const t=new URL(location.href),e={};return t.searchParams.forEach((n,r)=>e[r]=n),e}function zo(t){return new URL(location.href).searchParams.has(t)}async function k2(t){const e=Object.entries(t).reduce((n,[r,s])=>(s?n.searchParams.set(r,s):n.searchParams.delete(r),n),new URL(location.href));history.pushState(null,document.title,e.href),await C2(e.href)}function OS(t,e=0){const n=10**e;return Math.round(t*n)/n}const I2=Object.getPrototypeOf(Object);function R2(t,e){class n extends t{constructor(...s){super(...s);for(const i of e){const o=new i(...s);Object.assign(this,o)}return this}}return fr(n,"__mixins",e),T2(n,e),n}function O2(t,e){if(e===Object)return;let n=e;do{const r=po(Object.getOwnPropertyDescriptors(n.prototype),["constructor"]);for(const[s,i]of Object.entries(r))Object.defineProperty(t.prototype,s,i);n=Object.getPrototypeOf(n)}while(n!==I2)}function T2(t,e=[]){for(const n of e)O2(t,n)}function TS(t,e=[]){const n=Array.isArray(t)?Object:t,r=Array.isArray(t)?t:e;return R2(n,r)}function D2(t,e=300,n="..."){return t.length<e?t:t.substring(0,e-n.length)+n}function P2(t,e){return t.match(e)}function DS(t,e){return t.matchAll(e)}function M2(t){return t.split("").reverse().join("")}function Dg(t){return t.split(/_|-|\s|(?=[A-Z])/)}function L2(t){const[e,...n]=Dg(t);return(e??"").toLowerCase()+n.map(r=>r.slice(0,1).toUpperCase()+r.slice(1).toLowerCase()).join("")}function PS(t,e="-"){return t=t.normalize("NFD").replace(/[֊־᐀‐‑‒–—―⸗⸚⸺⸻~〜〰゠︱︲﹘﹣－(){}><[\]]/g," ").replace(/[\u0300-\u036f]/g,"").replace(/[\u3000-\u303f]/g,"").replace(/['".,#!$%/\\^&*;:=`@+?]/g,"").toLowerCase().trim().replace(/\s+/g,e),e.length>0&&(t=t.replace(new RegExp(`${e}+`,"g"),e)),t}function N2(t){return Dg(t).map(e=>e.slice(0,1).toUpperCase()+e.slice(1).toLowerCase()).join("")}function F2(t){return Dg(t).map(e=>e.slice(0,1).toUpperCase()+e.slice(1).toLowerCase()).join(" ")}function Zn(t){return B2(t)??Wt(`Failed getting parent directory from '${t}'`)}function j2(t){return MS(t)??Wt(`Failed parsing url from '${t}'`)}function q2(...t){let e=t.shift();for(;t.length>0;){const n=t.shift();n.startsWith("/")?e=Pg(e)+n:n.match(/^[\w-]+:\/\//)?e=n:e.endsWith("/")?e+=n:e+="/"+n}return e}function U2(...t){const e=q2(...t);return e.endsWith("/")?e:e+"/"}function Pg(t){const e=t.indexOf("://")+3,n=t.substr(e).indexOf("/");return n!==-1?t.substring(0,e+n):t}function B2(t){if(t.endsWith("/")&&(t=t.substring(0,t.length-1)),Pg(t)===t)return null;const e=t.lastIndexOf("/");return e!==-1?t.substr(0,e+1):null}function MS(t){const e=t.trim().match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/);if(!e)return null;const n=e[4]||"",[r,s]=n.indexOf(":")===-1?[n]:n.split(":");return{protocol:e[2]||void 0,domain:r||void 0,port:s||void 0,path:e[5]||void 0,query:e[7]||void 0,fragment:e[9]||void 0}}function z2(t,e){const n=MS(t);if(!n)return t;for(const[r,s]of Object.entries(n))n[r]=e[r]!==!1&&s||"";return[n.protocol?`${n.protocol}://`:"",n.domain??"",n.port?`:${n.port}`:"",n.path??"",n.query?`?${n.query}`:"",n.fragment?`#${n.fragment}`:""].join("")}function LS(t){return z2(t,{protocol:!0,domain:!0,port:!0,path:!0,query:!1,fragment:!1})}function NS(t,e){const n=t.prototype;for(const[r,s]of Object.entries(e))n[r]=function(...i){var o;const a=s(this.value,...i);return(o=this.chain)==null?void 0:o.call(this,a)}}function FS(t,e){const n=t.prototype,r=Object.getOwnPropertyDescriptors(e.prototype);for(const[s,i]of Object.entries(r))if(!(s in n)){if(typeof i.value!="function"){Object.defineProperty(n,s,{get(){return this.chain(this.value[s])}});continue}n[s]=function(...o){var a;const l=i.value.call(this.value,...o);return(a=this.chain)==null?void 0:a.call(this,l)}}}let jS=class{constructor(e){this.value=e}static isPrimitive(e){return this.prototype.isPrimitive(e)}create(e){const n=this.constructor;return new n(e)}chain(e){return this.isPrimitive(e)?this.create(e):e}};const V2={clear:o2,diff:a2,filter:Pd,first:l2,flatMap:u2,groupBy:c2,isEmpty:d2,project:f2,randomItem:p2,randomItems:h2,remove:Hs,removeIndex:m2,replace:g2,sorted:ES,unique:Kh,where:y2,without:Og,withoutIndexes:AS};class Mg extends jS{static create(e=[]){const{prototype:n}=this;return n.create(e)}*[Symbol.iterator](){yield*this.value}get(e){return this.value[e]}toArray(){return this.value.slice(0)}isPrimitive(e){return Array.isArray(e)}}NS(Mg,V2);FS(Mg,Array);const H2={reverse:M2,toCamelCase:L2,toSlug:PS,toStudlyCase:N2,toTitleCase:F2};let qS=class extends jS{static create(e=""){const{prototype:n}=this;return n.create(e)}toString(){return this.value}isPrimitive(e){return typeof e=="string"}};NS(qS,H2);FS(qS,String);const K2=[];function rs(t){let e=null;function n(){try{return t()}catch{return new t}}function r(i){return e=i,i}const s={setInstance:r,newInstance:n,requireInstance:()=>e??r(n()),reset:()=>r(n())};return K2.forEach(i=>i(s)),new Proxy(s,{get:(i,o,a)=>{const l=o!=="constructor"&&o in s?s:s.requireInstance();return Reflect.get(l,o,a)},set:(i,o,a)=>Reflect.set(s.requireInstance(),o,a)})}function W2(t){const e=new Proxy(t,{get(n,r,s){const i=Reflect.get(n,r,s);return typeof i!="function"?i:(...o)=>(i.call(n,...o),e)}});return e}function Hn(t,e){if(!e)return W2(t);const n=e(t);return n instanceof Promise?n.then(()=>t):t}function G2(){}let J2=class{constructor(e,n){this.errorMessage=e,this.getValue=n}get(e,n,r){const s=this.getValue()??Wt(this.errorMessage),i=Reflect.get(s,n,r);return typeof i=="function"?i.bind(s):i}set(e,n,r,s){const i=this.getValue()??Wt(this.errorMessage);return Reflect.set(i,n,r,s)}getPrototypeOf(){const e=this.getValue()??Wt(this.errorMessage);return Object.getPrototypeOf(e)}};function On(t,e){return e??(e="Required value is missing"),typeof t=="function"?new Proxy({},new J2(e,t)):t??Wt(e)}function Y2(t=[]){return Mg.create(Yl(t))}function wr(t=[],e){if(!Array.isArray(t)||typeof t[0]!="string")return w2.createFromArray(t,e);const n=e;return t.reduce((r,s)=>(r[s]=n(s),r),{})}const Br={name:"Calories Tracker",version:"0.0.0",sourceHash:`b2c7d72bed269921736c2e3dbc5c86f6cc02b0d9
`,basePath:"/",locales:{en:"English"}};/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let US;const Xl=t=>US=t,BS=Symbol();function Wh(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var vl;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(vl||(vl={}));function X2(){const t=Hl(!0),e=t.run(()=>we({}));let n=[],r=[];const s=Qe({install(i){Xl(s),s._a=i,i.provide(BS,s),i.config.globalProperties.$pinia=s,r.forEach(o=>n.push(o)),r=[]},use(i){return this._a?n.push(i):r.push(i),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return s}const zS=()=>{};function g0(t,e,n,r=zS){t.push(e);const s=()=>{const i=t.indexOf(e);i>-1&&(t.splice(i,1),r())};return!n&&wa()&&Kl(s),s}function Ro(t,...e){t.slice().forEach(n=>{n(...e)})}const Q2=t=>t(),y0=Symbol(),Op=Symbol();function Gh(t,e){t instanceof Map&&e instanceof Map?e.forEach((n,r)=>t.set(r,n)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const r=e[n],s=t[n];Wh(s)&&Wh(r)&&t.hasOwnProperty(n)&&!Mt(r)&&!Ei(r)?t[n]=Gh(s,r):t[n]=r}return t}const Z2=Symbol();function eM(t){return!Wh(t)||!t.hasOwnProperty(Z2)}const{assign:ci}=Object;function tM(t){return!!(Mt(t)&&t.effect)}function nM(t,e,n,r){const{state:s,actions:i,getters:o}=e,a=n.state.value[t];let l;function u(){a||(n.state.value[t]=s?s():{});const c=bn(n.state.value[t]);return ci(c,i,Object.keys(o||{}).reduce((d,f)=>(d[f]=Qe(H(()=>{Xl(n);const p=n._s.get(t);return o[f].call(p,p)})),d),{}))}return l=VS(t,u,e,n,r,!0),l}function VS(t,e,n={},r,s,i){let o;const a=ci({actions:{}},n),l={deep:!0};let u,c,d=[],f=[],p;const h=r.state.value[t];!i&&!h&&(r.state.value[t]={}),we({});let g;function w($){let k;u=c=!1,typeof $=="function"?($(r.state.value[t]),k={type:vl.patchFunction,storeId:t,events:p}):(Gh(r.state.value[t],$),k={type:vl.patchObject,payload:$,storeId:t,events:p});const D=g=Symbol();_t().then(()=>{g===D&&(u=!0)}),c=!0,Ro(d,k,r.state.value[t])}const x=i?function(){const{state:k}=n,D=k?k():{};this.$patch(G=>{ci(G,D)})}:zS;function A(){o.stop(),d=[],f=[],r._s.delete(t)}const E=($,k="")=>{if(y0 in $)return $[Op]=k,$;const D=function(){Xl(r);const G=Array.from(arguments),J=[],W=[];function j(V){J.push(V)}function se(V){W.push(V)}Ro(f,{args:G,name:D[Op],store:v,after:j,onError:se});let R;try{R=$.apply(this&&this.$id===t?this:v,G)}catch(V){throw Ro(W,V),V}return R instanceof Promise?R.then(V=>(Ro(J,V),V)).catch(V=>(Ro(W,V),Promise.reject(V))):(Ro(J,R),R)};return D[y0]=!0,D[Op]=k,D},m={_p:r,$id:t,$onAction:g0.bind(null,f),$patch:w,$reset:x,$subscribe($,k={}){const D=g0(d,$,k.detached,()=>G()),G=o.run(()=>Ke(()=>r.state.value[t],J=>{(k.flush==="sync"?c:u)&&$({storeId:t,type:vl.direct,events:p},J)},ci({},l,k)));return D},$dispose:A},v=tr(m);r._s.set(t,v);const C=(r._a&&r._a.runWithContext||Q2)(()=>r._e.run(()=>(o=Hl()).run(()=>e({action:E}))));for(const $ in C){const k=C[$];if(Mt(k)&&!tM(k)||Ei(k))i||(h&&eM(k)&&(Mt(k)?k.value=h[$]:Gh(k,h[$])),r.state.value[t][$]=k);else if(typeof k=="function"){const D=E(k,$);C[$]=D,a.actions[$]=k}}return ci(v,C),ci(it(v),C),Object.defineProperty(v,"$state",{get:()=>r.state.value[t],set:$=>{w(k=>{ci(k,$)})}}),r._p.forEach($=>{ci(v,o.run(()=>$({store:v,app:r._a,pinia:r,options:a})))}),h&&i&&n.hydrate&&n.hydrate(v.$state,h),u=!0,c=!0,v}/*! #__NO_SIDE_EFFECTS__ */function rM(t,e,n){let r,s;const i=typeof e=="function";typeof t=="string"?(r=t,s=i?n:e):(s=t,r=t.id);function o(a,l){const u=LD();return a=a||(u?Kt(BS,null):null),a&&Xl(a),a=US,a._s.has(r)||(i?VS(r,e,s,a):nM(r,s,a)),a._s.get(r)}return o.$id=r,o}/*! @license DOMPurify 3.3.0 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.3.0/LICENSE */const{entries:HS,setPrototypeOf:v0,isFrozen:sM,getPrototypeOf:iM,getOwnPropertyDescriptor:oM}=Object;let{freeze:Wn,seal:Dr,create:Jh}=Object,{apply:Yh,construct:Xh}=typeof Reflect<"u"&&Reflect;Wn||(Wn=function(e){return e});Dr||(Dr=function(e){return e});Yh||(Yh=function(e,n){for(var r=arguments.length,s=new Array(r>2?r-2:0),i=2;i<r;i++)s[i-2]=arguments[i];return e.apply(n,s)});Xh||(Xh=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return new e(...r)});const Su=Gn(Array.prototype.forEach),aM=Gn(Array.prototype.lastIndexOf),b0=Gn(Array.prototype.pop),Va=Gn(Array.prototype.push),lM=Gn(Array.prototype.splice),oc=Gn(String.prototype.toLowerCase),Tp=Gn(String.prototype.toString),Dp=Gn(String.prototype.match),Ha=Gn(String.prototype.replace),uM=Gn(String.prototype.indexOf),cM=Gn(String.prototype.trim),Nr=Gn(Object.prototype.hasOwnProperty),Ln=Gn(RegExp.prototype.test),Ka=dM(TypeError);function Gn(t){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return Yh(t,e,r)}}function dM(t){return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Xh(t,n)}}function nt(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:oc;v0&&v0(t,null);let r=e.length;for(;r--;){let s=e[r];if(typeof s=="string"){const i=n(s);i!==s&&(sM(e)||(e[r]=i),s=i)}t[s]=!0}return t}function fM(t){for(let e=0;e<t.length;e++)Nr(t,e)||(t[e]=null);return t}function Ds(t){const e=Jh(null);for(const[n,r]of HS(t))Nr(t,n)&&(Array.isArray(r)?e[n]=fM(r):r&&typeof r=="object"&&r.constructor===Object?e[n]=Ds(r):e[n]=r);return e}function Wa(t,e){for(;t!==null;){const r=oM(t,e);if(r){if(r.get)return Gn(r.get);if(typeof r.value=="function")return Gn(r.value)}t=iM(t)}function n(){return null}return n}const w0=Wn(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Pp=Wn(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Mp=Wn(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),pM=Wn(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Lp=Wn(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),hM=Wn(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),_0=Wn(["#text"]),x0=Wn(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Np=Wn(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),S0=Wn(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Eu=Wn(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),mM=Dr(/\{\{[\w\W]*|[\w\W]*\}\}/gm),gM=Dr(/<%[\w\W]*|[\w\W]*%>/gm),yM=Dr(/\$\{[\w\W]*/gm),vM=Dr(/^data-[\-\w.\u00B7-\uFFFF]+$/),bM=Dr(/^aria-[\-\w]+$/),KS=Dr(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),wM=Dr(/^(?:\w+script|data):/i),_M=Dr(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),WS=Dr(/^html$/i),xM=Dr(/^[a-z][.\w]*(-[.\w]+)+$/i);var E0=Object.freeze({__proto__:null,ARIA_ATTR:bM,ATTR_WHITESPACE:_M,CUSTOM_ELEMENT:xM,DATA_ATTR:vM,DOCTYPE_NAME:WS,ERB_EXPR:gM,IS_ALLOWED_URI:KS,IS_SCRIPT_OR_DATA:wM,MUSTACHE_EXPR:mM,TMPLIT_EXPR:yM});const Ga={element:1,text:3,progressingInstruction:7,comment:8,document:9},SM=function(){return typeof window>"u"?null:window},EM=function(e,n){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let r=null;const s="data-tt-policy-suffix";n&&n.hasAttribute(s)&&(r=n.getAttribute(s));const i="dompurify"+(r?"#"+r:"");try{return e.createPolicy(i,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+i+" could not be created."),null}},A0=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function GS(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:SM();const e=Be=>GS(Be);if(e.version="3.3.0",e.removed=[],!t||!t.document||t.document.nodeType!==Ga.document||!t.Element)return e.isSupported=!1,e;let{document:n}=t;const r=n,s=r.currentScript,{DocumentFragment:i,HTMLTemplateElement:o,Node:a,Element:l,NodeFilter:u,NamedNodeMap:c=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:d,DOMParser:f,trustedTypes:p}=t,h=l.prototype,g=Wa(h,"cloneNode"),w=Wa(h,"remove"),x=Wa(h,"nextSibling"),A=Wa(h,"childNodes"),E=Wa(h,"parentNode");if(typeof o=="function"){const Be=n.createElement("template");Be.content&&Be.content.ownerDocument&&(n=Be.content.ownerDocument)}let m,v="";const{implementation:_,createNodeIterator:C,createDocumentFragment:$,getElementsByTagName:k}=n,{importNode:D}=r;let G=A0();e.isSupported=typeof HS=="function"&&typeof E=="function"&&_&&_.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:J,ERB_EXPR:W,TMPLIT_EXPR:j,DATA_ATTR:se,ARIA_ATTR:R,IS_SCRIPT_OR_DATA:V,ATTR_WHITESPACE:F,CUSTOM_ELEMENT:ee}=E0;let{IS_ALLOWED_URI:z}=E0,ie=null;const pe=nt({},[...w0,...Pp,...Mp,...Lp,..._0]);let he=null;const Ae=nt({},[...x0,...Np,...S0,...Eu]);let X=Object.seal(Jh(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),te=null,T=null;const Y=Object.seal(Jh(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let re=!0,ne=!0,xe=!1,M=!0,P=!1,Q=!0,ye=!1,_e=!1,be=!1,U=!1,B=!1,ce=!1,me=!0,Ie=!1;const Ce="user-content-";let de=!0,ve=!1,Oe={},O=null;const b=nt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let S=null;const q=nt({},["audio","video","img","source","image","track"]);let oe=null;const ge=nt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Se="http://www.w3.org/1998/Math/MathML",Je="http://www.w3.org/2000/svg",We="http://www.w3.org/1999/xhtml";let Xe=We,St=!1,lt=null;const i$=nt({},[Se,Je,We],Tp);let au=nt({},["mi","mo","mn","ms","mtext"]),lu=nt({},["annotation-xml"]);const o$=nt({},["title","style","font","a","script"]);let Pa=null;const a$=["application/xhtml+xml","text/html"],l$="text/html";let an=null,Eo=null;const u$=n.createElement("form"),zy=function(le){return le instanceof RegExp||le instanceof Function},pf=function(){let le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Eo&&Eo===le)){if((!le||typeof le!="object")&&(le={}),le=Ds(le),Pa=a$.indexOf(le.PARSER_MEDIA_TYPE)===-1?l$:le.PARSER_MEDIA_TYPE,an=Pa==="application/xhtml+xml"?Tp:oc,ie=Nr(le,"ALLOWED_TAGS")?nt({},le.ALLOWED_TAGS,an):pe,he=Nr(le,"ALLOWED_ATTR")?nt({},le.ALLOWED_ATTR,an):Ae,lt=Nr(le,"ALLOWED_NAMESPACES")?nt({},le.ALLOWED_NAMESPACES,Tp):i$,oe=Nr(le,"ADD_URI_SAFE_ATTR")?nt(Ds(ge),le.ADD_URI_SAFE_ATTR,an):ge,S=Nr(le,"ADD_DATA_URI_TAGS")?nt(Ds(q),le.ADD_DATA_URI_TAGS,an):q,O=Nr(le,"FORBID_CONTENTS")?nt({},le.FORBID_CONTENTS,an):b,te=Nr(le,"FORBID_TAGS")?nt({},le.FORBID_TAGS,an):Ds({}),T=Nr(le,"FORBID_ATTR")?nt({},le.FORBID_ATTR,an):Ds({}),Oe=Nr(le,"USE_PROFILES")?le.USE_PROFILES:!1,re=le.ALLOW_ARIA_ATTR!==!1,ne=le.ALLOW_DATA_ATTR!==!1,xe=le.ALLOW_UNKNOWN_PROTOCOLS||!1,M=le.ALLOW_SELF_CLOSE_IN_ATTR!==!1,P=le.SAFE_FOR_TEMPLATES||!1,Q=le.SAFE_FOR_XML!==!1,ye=le.WHOLE_DOCUMENT||!1,U=le.RETURN_DOM||!1,B=le.RETURN_DOM_FRAGMENT||!1,ce=le.RETURN_TRUSTED_TYPE||!1,be=le.FORCE_BODY||!1,me=le.SANITIZE_DOM!==!1,Ie=le.SANITIZE_NAMED_PROPS||!1,de=le.KEEP_CONTENT!==!1,ve=le.IN_PLACE||!1,z=le.ALLOWED_URI_REGEXP||KS,Xe=le.NAMESPACE||We,au=le.MATHML_TEXT_INTEGRATION_POINTS||au,lu=le.HTML_INTEGRATION_POINTS||lu,X=le.CUSTOM_ELEMENT_HANDLING||{},le.CUSTOM_ELEMENT_HANDLING&&zy(le.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(X.tagNameCheck=le.CUSTOM_ELEMENT_HANDLING.tagNameCheck),le.CUSTOM_ELEMENT_HANDLING&&zy(le.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(X.attributeNameCheck=le.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),le.CUSTOM_ELEMENT_HANDLING&&typeof le.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(X.allowCustomizedBuiltInElements=le.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),P&&(ne=!1),B&&(U=!0),Oe&&(ie=nt({},_0),he=[],Oe.html===!0&&(nt(ie,w0),nt(he,x0)),Oe.svg===!0&&(nt(ie,Pp),nt(he,Np),nt(he,Eu)),Oe.svgFilters===!0&&(nt(ie,Mp),nt(he,Np),nt(he,Eu)),Oe.mathMl===!0&&(nt(ie,Lp),nt(he,S0),nt(he,Eu))),le.ADD_TAGS&&(typeof le.ADD_TAGS=="function"?Y.tagCheck=le.ADD_TAGS:(ie===pe&&(ie=Ds(ie)),nt(ie,le.ADD_TAGS,an))),le.ADD_ATTR&&(typeof le.ADD_ATTR=="function"?Y.attributeCheck=le.ADD_ATTR:(he===Ae&&(he=Ds(he)),nt(he,le.ADD_ATTR,an))),le.ADD_URI_SAFE_ATTR&&nt(oe,le.ADD_URI_SAFE_ATTR,an),le.FORBID_CONTENTS&&(O===b&&(O=Ds(O)),nt(O,le.FORBID_CONTENTS,an)),de&&(ie["#text"]=!0),ye&&nt(ie,["html","head","body"]),ie.table&&(nt(ie,["tbody"]),delete te.tbody),le.TRUSTED_TYPES_POLICY){if(typeof le.TRUSTED_TYPES_POLICY.createHTML!="function")throw Ka('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof le.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Ka('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');m=le.TRUSTED_TYPES_POLICY,v=m.createHTML("")}else m===void 0&&(m=EM(p,s)),m!==null&&typeof v=="string"&&(v=m.createHTML(""));Wn&&Wn(le),Eo=le}},Vy=nt({},[...Pp,...Mp,...pM]),Hy=nt({},[...Lp,...hM]),c$=function(le){let Re=E(le);(!Re||!Re.tagName)&&(Re={namespaceURI:Xe,tagName:"template"});const qe=oc(le.tagName),Ft=oc(Re.tagName);return lt[le.namespaceURI]?le.namespaceURI===Je?Re.namespaceURI===We?qe==="svg":Re.namespaceURI===Se?qe==="svg"&&(Ft==="annotation-xml"||au[Ft]):!!Vy[qe]:le.namespaceURI===Se?Re.namespaceURI===We?qe==="math":Re.namespaceURI===Je?qe==="math"&&lu[Ft]:!!Hy[qe]:le.namespaceURI===We?Re.namespaceURI===Je&&!lu[Ft]||Re.namespaceURI===Se&&!au[Ft]?!1:!Hy[qe]&&(o$[qe]||!Vy[qe]):!!(Pa==="application/xhtml+xml"&&lt[le.namespaceURI]):!1},is=function(le){Va(e.removed,{element:le});try{E(le).removeChild(le)}catch{w(le)}},Ki=function(le,Re){try{Va(e.removed,{attribute:Re.getAttributeNode(le),from:Re})}catch{Va(e.removed,{attribute:null,from:Re})}if(Re.removeAttribute(le),le==="is")if(U||B)try{is(Re)}catch{}else try{Re.setAttribute(le,"")}catch{}},Ky=function(le){let Re=null,qe=null;if(be)le="<remove></remove>"+le;else{const Qt=Dp(le,/^[\r\n\t ]+/);qe=Qt&&Qt[0]}Pa==="application/xhtml+xml"&&Xe===We&&(le='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+le+"</body></html>");const Ft=m?m.createHTML(le):le;if(Xe===We)try{Re=new f().parseFromString(Ft,Pa)}catch{}if(!Re||!Re.documentElement){Re=_.createDocument(Xe,"template",null);try{Re.documentElement.innerHTML=St?v:Ft}catch{}}const _n=Re.body||Re.documentElement;return le&&qe&&_n.insertBefore(n.createTextNode(qe),_n.childNodes[0]||null),Xe===We?k.call(Re,ye?"html":"body")[0]:ye?Re.documentElement:_n},Wy=function(le){return C.call(le.ownerDocument||le,le,u.SHOW_ELEMENT|u.SHOW_COMMENT|u.SHOW_TEXT|u.SHOW_PROCESSING_INSTRUCTION|u.SHOW_CDATA_SECTION,null)},hf=function(le){return le instanceof d&&(typeof le.nodeName!="string"||typeof le.textContent!="string"||typeof le.removeChild!="function"||!(le.attributes instanceof c)||typeof le.removeAttribute!="function"||typeof le.setAttribute!="function"||typeof le.namespaceURI!="string"||typeof le.insertBefore!="function"||typeof le.hasChildNodes!="function")},Gy=function(le){return typeof a=="function"&&le instanceof a};function Cs(Be,le,Re){Su(Be,qe=>{qe.call(e,le,Re,Eo)})}const Jy=function(le){let Re=null;if(Cs(G.beforeSanitizeElements,le,null),hf(le))return is(le),!0;const qe=an(le.nodeName);if(Cs(G.uponSanitizeElement,le,{tagName:qe,allowedTags:ie}),Q&&le.hasChildNodes()&&!Gy(le.firstElementChild)&&Ln(/<[/\w!]/g,le.innerHTML)&&Ln(/<[/\w!]/g,le.textContent)||le.nodeType===Ga.progressingInstruction||Q&&le.nodeType===Ga.comment&&Ln(/<[/\w]/g,le.data))return is(le),!0;if(!(Y.tagCheck instanceof Function&&Y.tagCheck(qe))&&(!ie[qe]||te[qe])){if(!te[qe]&&Xy(qe)&&(X.tagNameCheck instanceof RegExp&&Ln(X.tagNameCheck,qe)||X.tagNameCheck instanceof Function&&X.tagNameCheck(qe)))return!1;if(de&&!O[qe]){const Ft=E(le)||le.parentNode,_n=A(le)||le.childNodes;if(_n&&Ft){const Qt=_n.length;for(let Xn=Qt-1;Xn>=0;--Xn){const $s=g(_n[Xn],!0);$s.__removalCount=(le.__removalCount||0)+1,Ft.insertBefore($s,x(le))}}}return is(le),!0}return le instanceof l&&!c$(le)||(qe==="noscript"||qe==="noembed"||qe==="noframes")&&Ln(/<\/no(script|embed|frames)/i,le.innerHTML)?(is(le),!0):(P&&le.nodeType===Ga.text&&(Re=le.textContent,Su([J,W,j],Ft=>{Re=Ha(Re,Ft," ")}),le.textContent!==Re&&(Va(e.removed,{element:le.cloneNode()}),le.textContent=Re)),Cs(G.afterSanitizeElements,le,null),!1)},Yy=function(le,Re,qe){if(me&&(Re==="id"||Re==="name")&&(qe in n||qe in u$))return!1;if(!(ne&&!T[Re]&&Ln(se,Re))){if(!(re&&Ln(R,Re))){if(!(Y.attributeCheck instanceof Function&&Y.attributeCheck(Re,le))){if(!he[Re]||T[Re]){if(!(Xy(le)&&(X.tagNameCheck instanceof RegExp&&Ln(X.tagNameCheck,le)||X.tagNameCheck instanceof Function&&X.tagNameCheck(le))&&(X.attributeNameCheck instanceof RegExp&&Ln(X.attributeNameCheck,Re)||X.attributeNameCheck instanceof Function&&X.attributeNameCheck(Re,le))||Re==="is"&&X.allowCustomizedBuiltInElements&&(X.tagNameCheck instanceof RegExp&&Ln(X.tagNameCheck,qe)||X.tagNameCheck instanceof Function&&X.tagNameCheck(qe))))return!1}else if(!oe[Re]){if(!Ln(z,Ha(qe,F,""))){if(!((Re==="src"||Re==="xlink:href"||Re==="href")&&le!=="script"&&uM(qe,"data:")===0&&S[le])){if(!(xe&&!Ln(V,Ha(qe,F,"")))){if(qe)return!1}}}}}}}return!0},Xy=function(le){return le!=="annotation-xml"&&Dp(le,ee)},Qy=function(le){Cs(G.beforeSanitizeAttributes,le,null);const{attributes:Re}=le;if(!Re||hf(le))return;const qe={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:he,forceKeepAttr:void 0};let Ft=Re.length;for(;Ft--;){const _n=Re[Ft],{name:Qt,namespaceURI:Xn,value:$s}=_n,Ao=an(Qt),mf=$s;let pn=Qt==="value"?mf:cM(mf);if(qe.attrName=Ao,qe.attrValue=pn,qe.keepAttr=!0,qe.forceKeepAttr=void 0,Cs(G.uponSanitizeAttribute,le,qe),pn=qe.attrValue,Ie&&(Ao==="id"||Ao==="name")&&(Ki(Qt,le),pn=Ce+pn),Q&&Ln(/((--!?|])>)|<\/(style|title|textarea)/i,pn)){Ki(Qt,le);continue}if(Ao==="attributename"&&Dp(pn,"href")){Ki(Qt,le);continue}if(qe.forceKeepAttr)continue;if(!qe.keepAttr){Ki(Qt,le);continue}if(!M&&Ln(/\/>/i,pn)){Ki(Qt,le);continue}P&&Su([J,W,j],ev=>{pn=Ha(pn,ev," ")});const Zy=an(le.nodeName);if(!Yy(Zy,Ao,pn)){Ki(Qt,le);continue}if(m&&typeof p=="object"&&typeof p.getAttributeType=="function"&&!Xn)switch(p.getAttributeType(Zy,Ao)){case"TrustedHTML":{pn=m.createHTML(pn);break}case"TrustedScriptURL":{pn=m.createScriptURL(pn);break}}if(pn!==mf)try{Xn?le.setAttributeNS(Xn,Qt,pn):le.setAttribute(Qt,pn),hf(le)?is(le):b0(e.removed)}catch{Ki(Qt,le)}}Cs(G.afterSanitizeAttributes,le,null)},d$=function Be(le){let Re=null;const qe=Wy(le);for(Cs(G.beforeSanitizeShadowDOM,le,null);Re=qe.nextNode();)Cs(G.uponSanitizeShadowNode,Re,null),Jy(Re),Qy(Re),Re.content instanceof i&&Be(Re.content);Cs(G.afterSanitizeShadowDOM,le,null)};return e.sanitize=function(Be){let le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Re=null,qe=null,Ft=null,_n=null;if(St=!Be,St&&(Be="<!-->"),typeof Be!="string"&&!Gy(Be))if(typeof Be.toString=="function"){if(Be=Be.toString(),typeof Be!="string")throw Ka("dirty is not a string, aborting")}else throw Ka("toString is not a function");if(!e.isSupported)return Be;if(_e||pf(le),e.removed=[],typeof Be=="string"&&(ve=!1),ve){if(Be.nodeName){const $s=an(Be.nodeName);if(!ie[$s]||te[$s])throw Ka("root node is forbidden and cannot be sanitized in-place")}}else if(Be instanceof a)Re=Ky("<!---->"),qe=Re.ownerDocument.importNode(Be,!0),qe.nodeType===Ga.element&&qe.nodeName==="BODY"||qe.nodeName==="HTML"?Re=qe:Re.appendChild(qe);else{if(!U&&!P&&!ye&&Be.indexOf("<")===-1)return m&&ce?m.createHTML(Be):Be;if(Re=Ky(Be),!Re)return U?null:ce?v:""}Re&&be&&is(Re.firstChild);const Qt=Wy(ve?Be:Re);for(;Ft=Qt.nextNode();)Jy(Ft),Qy(Ft),Ft.content instanceof i&&d$(Ft.content);if(ve)return Be;if(U){if(B)for(_n=$.call(Re.ownerDocument);Re.firstChild;)_n.appendChild(Re.firstChild);else _n=Re;return(he.shadowroot||he.shadowrootmode)&&(_n=D.call(r,_n,!0)),_n}let Xn=ye?Re.outerHTML:Re.innerHTML;return ye&&ie["!doctype"]&&Re.ownerDocument&&Re.ownerDocument.doctype&&Re.ownerDocument.doctype.name&&Ln(WS,Re.ownerDocument.doctype.name)&&(Xn="<!DOCTYPE "+Re.ownerDocument.doctype.name+`>
`+Xn),P&&Su([J,W,j],$s=>{Xn=Ha(Xn,$s," ")}),m&&ce?m.createHTML(Xn):Xn},e.setConfig=function(){let Be=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};pf(Be),_e=!0},e.clearConfig=function(){Eo=null,_e=!1},e.isValidAttribute=function(Be,le,Re){Eo||pf({});const qe=an(Be),Ft=an(le);return Yy(qe,Ft,Re)},e.addHook=function(Be,le){typeof le=="function"&&Va(G[Be],le)},e.removeHook=function(Be,le){if(le!==void 0){const Re=aM(G[Be],le);return Re===-1?void 0:lM(G[Be],Re,1)[0]}return b0(G[Be])},e.removeHooks=function(Be){G[Be]=[]},e.removeAllHooks=function(){G=A0()},e}var AM=GS();function Lg(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var vo=Lg();function JS(t){vo=t}var bl={exec:()=>null};function xt(t,e=""){let n=typeof t=="string"?t:t.source;const r={replace:(s,i)=>{let o=typeof i=="string"?i:i.source;return o=o.replace(Vn.caret,"$1"),n=n.replace(s,o),r},getRegex:()=>new RegExp(n,e)};return r}var Vn={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:t=>new RegExp(`^( {0,3}${t})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}#`),htmlBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}<(?:[a-z].*>|!--)`,"i")},CM=/^(?:[ \t]*(?:\n|$))+/,$M=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,kM=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Ql=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,IM=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Ng=/(?:[*+-]|\d{1,9}[.)])/,YS=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,XS=xt(YS).replace(/bull/g,Ng).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),RM=xt(YS).replace(/bull/g,Ng).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),Fg=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,OM=/^[^\n]+/,jg=/(?!\s*\])(?:\\.|[^\[\]\\])+/,TM=xt(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",jg).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),DM=xt(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Ng).getRegex(),Md="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",qg=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,PM=xt("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",qg).replace("tag",Md).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),QS=xt(Fg).replace("hr",Ql).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Md).getRegex(),MM=xt(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",QS).getRegex(),Ug={blockquote:MM,code:$M,def:TM,fences:kM,heading:IM,hr:Ql,html:PM,lheading:XS,list:DM,newline:CM,paragraph:QS,table:bl,text:OM},C0=xt("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Ql).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Md).getRegex(),LM={...Ug,lheading:RM,table:C0,paragraph:xt(Fg).replace("hr",Ql).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",C0).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Md).getRegex()},NM={...Ug,html:xt(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",qg).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:bl,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:xt(Fg).replace("hr",Ql).replace("heading",` *#{1,6} *[^
]`).replace("lheading",XS).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},FM=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,jM=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,ZS=/^( {2,}|\\)\n(?!\s*$)/,qM=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Ld=/[\p{P}\p{S}]/u,Bg=/[\s\p{P}\p{S}]/u,eE=/[^\s\p{P}\p{S}]/u,UM=xt(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,Bg).getRegex(),tE=/(?!~)[\p{P}\p{S}]/u,BM=/(?!~)[\s\p{P}\p{S}]/u,zM=/(?:[^\s\p{P}\p{S}]|~)/u,VM=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,nE=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,HM=xt(nE,"u").replace(/punct/g,Ld).getRegex(),KM=xt(nE,"u").replace(/punct/g,tE).getRegex(),rE="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",WM=xt(rE,"gu").replace(/notPunctSpace/g,eE).replace(/punctSpace/g,Bg).replace(/punct/g,Ld).getRegex(),GM=xt(rE,"gu").replace(/notPunctSpace/g,zM).replace(/punctSpace/g,BM).replace(/punct/g,tE).getRegex(),JM=xt("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,eE).replace(/punctSpace/g,Bg).replace(/punct/g,Ld).getRegex(),YM=xt(/\\(punct)/,"gu").replace(/punct/g,Ld).getRegex(),XM=xt(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),QM=xt(qg).replace("(?:-->|$)","-->").getRegex(),ZM=xt("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",QM).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Mc=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,eL=xt(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",Mc).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),sE=xt(/^!?\[(label)\]\[(ref)\]/).replace("label",Mc).replace("ref",jg).getRegex(),iE=xt(/^!?\[(ref)\](?:\[\])?/).replace("ref",jg).getRegex(),tL=xt("reflink|nolink(?!\\()","g").replace("reflink",sE).replace("nolink",iE).getRegex(),zg={_backpedal:bl,anyPunctuation:YM,autolink:XM,blockSkip:VM,br:ZS,code:jM,del:bl,emStrongLDelim:HM,emStrongRDelimAst:WM,emStrongRDelimUnd:JM,escape:FM,link:eL,nolink:iE,punctuation:UM,reflink:sE,reflinkSearch:tL,tag:ZM,text:qM,url:bl},nL={...zg,link:xt(/^!?\[(label)\]\((.*?)\)/).replace("label",Mc).getRegex(),reflink:xt(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Mc).getRegex()},Qh={...zg,emStrongRDelimAst:GM,emStrongLDelim:KM,url:xt(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},rL={...Qh,br:xt(ZS).replace("{2,}","*").getRegex(),text:xt(Qh.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Au={normal:Ug,gfm:LM,pedantic:NM},Ja={normal:zg,gfm:Qh,breaks:rL,pedantic:nL},sL={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},$0=t=>sL[t];function ls(t,e){if(e){if(Vn.escapeTest.test(t))return t.replace(Vn.escapeReplace,$0)}else if(Vn.escapeTestNoEncode.test(t))return t.replace(Vn.escapeReplaceNoEncode,$0);return t}function k0(t){try{t=encodeURI(t).replace(Vn.percentDecode,"%")}catch{return null}return t}function I0(t,e){var i;const n=t.replace(Vn.findPipe,(o,a,l)=>{let u=!1,c=a;for(;--c>=0&&l[c]==="\\";)u=!u;return u?"|":" |"}),r=n.split(Vn.splitPipe);let s=0;if(r[0].trim()||r.shift(),r.length>0&&!((i=r.at(-1))!=null&&i.trim())&&r.pop(),e)if(r.length>e)r.splice(e);else for(;r.length<e;)r.push("");for(;s<r.length;s++)r[s]=r[s].trim().replace(Vn.slashPipe,"|");return r}function Ya(t,e,n){const r=t.length;if(r===0)return"";let s=0;for(;s<r&&t.charAt(r-s-1)===e;)s++;return t.slice(0,r-s)}function iL(t,e){if(t.indexOf(e[1])===-1)return-1;let n=0;for(let r=0;r<t.length;r++)if(t[r]==="\\")r++;else if(t[r]===e[0])n++;else if(t[r]===e[1]&&(n--,n<0))return r;return n>0?-2:-1}function R0(t,e,n,r,s){const i=e.href,o=e.title||null,a=t[1].replace(s.other.outputLinkReplace,"$1");r.state.inLink=!0;const l={type:t[0].charAt(0)==="!"?"image":"link",raw:n,href:i,title:o,text:a,tokens:r.inlineTokens(a)};return r.state.inLink=!1,l}function oL(t,e,n){const r=t.match(n.other.indentCodeCompensation);if(r===null)return e;const s=r[1];return e.split(`
`).map(i=>{const o=i.match(n.other.beginningSpace);if(o===null)return i;const[a]=o;return a.length>=s.length?i.slice(s.length):i}).join(`
`)}var Lc=class{constructor(t){ht(this,"options");ht(this,"rules");ht(this,"lexer");this.options=t||vo}space(t){const e=this.rules.block.newline.exec(t);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(t){const e=this.rules.block.code.exec(t);if(e){const n=e[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?n:Ya(n,`
`)}}}fences(t){const e=this.rules.block.fences.exec(t);if(e){const n=e[0],r=oL(n,e[3]||"",this.rules);return{type:"code",raw:n,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:r}}}heading(t){const e=this.rules.block.heading.exec(t);if(e){let n=e[2].trim();if(this.rules.other.endingHash.test(n)){const r=Ya(n,"#");(this.options.pedantic||!r||this.rules.other.endingSpaceChar.test(r))&&(n=r.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(t){const e=this.rules.block.hr.exec(t);if(e)return{type:"hr",raw:Ya(e[0],`
`)}}blockquote(t){const e=this.rules.block.blockquote.exec(t);if(e){let n=Ya(e[0],`
`).split(`
`),r="",s="";const i=[];for(;n.length>0;){let o=!1;const a=[];let l;for(l=0;l<n.length;l++)if(this.rules.other.blockquoteStart.test(n[l]))a.push(n[l]),o=!0;else if(!o)a.push(n[l]);else break;n=n.slice(l);const u=a.join(`
`),c=u.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");r=r?`${r}
${u}`:u,s=s?`${s}
${c}`:c;const d=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(c,i,!0),this.lexer.state.top=d,n.length===0)break;const f=i.at(-1);if((f==null?void 0:f.type)==="code")break;if((f==null?void 0:f.type)==="blockquote"){const p=f,h=p.raw+`
`+n.join(`
`),g=this.blockquote(h);i[i.length-1]=g,r=r.substring(0,r.length-p.raw.length)+g.raw,s=s.substring(0,s.length-p.text.length)+g.text;break}else if((f==null?void 0:f.type)==="list"){const p=f,h=p.raw+`
`+n.join(`
`),g=this.list(h);i[i.length-1]=g,r=r.substring(0,r.length-f.raw.length)+g.raw,s=s.substring(0,s.length-p.raw.length)+g.raw,n=h.substring(i.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:r,tokens:i,text:s}}}list(t){let e=this.rules.block.list.exec(t);if(e){let n=e[1].trim();const r=n.length>1,s={type:"list",raw:"",ordered:r,start:r?+n.slice(0,-1):"",loose:!1,items:[]};n=r?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=r?n:"[*+-]");const i=this.rules.other.listItemRegex(n);let o=!1;for(;t;){let l=!1,u="",c="";if(!(e=i.exec(t))||this.rules.block.hr.test(t))break;u=e[0],t=t.substring(u.length);let d=e[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,x=>" ".repeat(3*x.length)),f=t.split(`
`,1)[0],p=!d.trim(),h=0;if(this.options.pedantic?(h=2,c=d.trimStart()):p?h=e[1].length+1:(h=e[2].search(this.rules.other.nonSpaceChar),h=h>4?1:h,c=d.slice(h),h+=e[1].length),p&&this.rules.other.blankLine.test(f)&&(u+=f+`
`,t=t.substring(f.length+1),l=!0),!l){const x=this.rules.other.nextBulletRegex(h),A=this.rules.other.hrRegex(h),E=this.rules.other.fencesBeginRegex(h),m=this.rules.other.headingBeginRegex(h),v=this.rules.other.htmlBeginRegex(h);for(;t;){const _=t.split(`
`,1)[0];let C;if(f=_,this.options.pedantic?(f=f.replace(this.rules.other.listReplaceNesting,"  "),C=f):C=f.replace(this.rules.other.tabCharGlobal,"    "),E.test(f)||m.test(f)||v.test(f)||x.test(f)||A.test(f))break;if(C.search(this.rules.other.nonSpaceChar)>=h||!f.trim())c+=`
`+C.slice(h);else{if(p||d.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||E.test(d)||m.test(d)||A.test(d))break;c+=`
`+f}!p&&!f.trim()&&(p=!0),u+=_+`
`,t=t.substring(_.length+1),d=C.slice(h)}}s.loose||(o?s.loose=!0:this.rules.other.doubleBlankLine.test(u)&&(o=!0));let g=null,w;this.options.gfm&&(g=this.rules.other.listIsTask.exec(c),g&&(w=g[0]!=="[ ] ",c=c.replace(this.rules.other.listReplaceTask,""))),s.items.push({type:"list_item",raw:u,task:!!g,checked:w,loose:!1,text:c,tokens:[]}),s.raw+=u}const a=s.items.at(-1);if(a)a.raw=a.raw.trimEnd(),a.text=a.text.trimEnd();else return;s.raw=s.raw.trimEnd();for(let l=0;l<s.items.length;l++)if(this.lexer.state.top=!1,s.items[l].tokens=this.lexer.blockTokens(s.items[l].text,[]),!s.loose){const u=s.items[l].tokens.filter(d=>d.type==="space"),c=u.length>0&&u.some(d=>this.rules.other.anyLine.test(d.raw));s.loose=c}if(s.loose)for(let l=0;l<s.items.length;l++)s.items[l].loose=!0;return s}}html(t){const e=this.rules.block.html.exec(t);if(e)return{type:"html",block:!0,raw:e[0],pre:e[1]==="pre"||e[1]==="script"||e[1]==="style",text:e[0]}}def(t){const e=this.rules.block.def.exec(t);if(e){const n=e[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),r=e[2]?e[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",s=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:n,raw:e[0],href:r,title:s}}}table(t){var o;const e=this.rules.block.table.exec(t);if(!e||!this.rules.other.tableDelimiter.test(e[2]))return;const n=I0(e[1]),r=e[2].replace(this.rules.other.tableAlignChars,"").split("|"),s=(o=e[3])!=null&&o.trim()?e[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],i={type:"table",raw:e[0],header:[],align:[],rows:[]};if(n.length===r.length){for(const a of r)this.rules.other.tableAlignRight.test(a)?i.align.push("right"):this.rules.other.tableAlignCenter.test(a)?i.align.push("center"):this.rules.other.tableAlignLeft.test(a)?i.align.push("left"):i.align.push(null);for(let a=0;a<n.length;a++)i.header.push({text:n[a],tokens:this.lexer.inline(n[a]),header:!0,align:i.align[a]});for(const a of s)i.rows.push(I0(a,i.header.length).map((l,u)=>({text:l,tokens:this.lexer.inline(l),header:!1,align:i.align[u]})));return i}}lheading(t){const e=this.rules.block.lheading.exec(t);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(t){const e=this.rules.block.paragraph.exec(t);if(e){const n=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:n,tokens:this.lexer.inline(n)}}}text(t){const e=this.rules.block.text.exec(t);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(t){const e=this.rules.inline.escape.exec(t);if(e)return{type:"escape",raw:e[0],text:e[1]}}tag(t){const e=this.rules.inline.tag.exec(t);if(e)return!this.lexer.state.inLink&&this.rules.other.startATag.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(t){const e=this.rules.inline.link.exec(t);if(e){const n=e[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(n)){if(!this.rules.other.endAngleBracket.test(n))return;const i=Ya(n.slice(0,-1),"\\");if((n.length-i.length)%2===0)return}else{const i=iL(e[2],"()");if(i===-2)return;if(i>-1){const a=(e[0].indexOf("!")===0?5:4)+e[1].length+i;e[2]=e[2].substring(0,i),e[0]=e[0].substring(0,a).trim(),e[3]=""}}let r=e[2],s="";if(this.options.pedantic){const i=this.rules.other.pedanticHrefTitle.exec(r);i&&(r=i[1],s=i[3])}else s=e[3]?e[3].slice(1,-1):"";return r=r.trim(),this.rules.other.startAngleBracket.test(r)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(n)?r=r.slice(1):r=r.slice(1,-1)),R0(e,{href:r&&r.replace(this.rules.inline.anyPunctuation,"$1"),title:s&&s.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer,this.rules)}}reflink(t,e){let n;if((n=this.rules.inline.reflink.exec(t))||(n=this.rules.inline.nolink.exec(t))){const r=(n[2]||n[1]).replace(this.rules.other.multipleSpaceGlobal," "),s=e[r.toLowerCase()];if(!s){const i=n[0].charAt(0);return{type:"text",raw:i,text:i}}return R0(n,s,n[0],this.lexer,this.rules)}}emStrong(t,e,n=""){let r=this.rules.inline.emStrongLDelim.exec(t);if(!r||r[3]&&n.match(this.rules.other.unicodeAlphaNumeric))return;if(!(r[1]||r[2]||"")||!n||this.rules.inline.punctuation.exec(n)){const i=[...r[0]].length-1;let o,a,l=i,u=0;const c=r[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(c.lastIndex=0,e=e.slice(-1*t.length+i);(r=c.exec(e))!=null;){if(o=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!o)continue;if(a=[...o].length,r[3]||r[4]){l+=a;continue}else if((r[5]||r[6])&&i%3&&!((i+a)%3)){u+=a;continue}if(l-=a,l>0)continue;a=Math.min(a,a+l+u);const d=[...r[0]][0].length,f=t.slice(0,i+r.index+d+a);if(Math.min(i,a)%2){const h=f.slice(1,-1);return{type:"em",raw:f,text:h,tokens:this.lexer.inlineTokens(h)}}const p=f.slice(2,-2);return{type:"strong",raw:f,text:p,tokens:this.lexer.inlineTokens(p)}}}}codespan(t){const e=this.rules.inline.code.exec(t);if(e){let n=e[2].replace(this.rules.other.newLineCharGlobal," ");const r=this.rules.other.nonSpaceChar.test(n),s=this.rules.other.startingSpaceChar.test(n)&&this.rules.other.endingSpaceChar.test(n);return r&&s&&(n=n.substring(1,n.length-1)),{type:"codespan",raw:e[0],text:n}}}br(t){const e=this.rules.inline.br.exec(t);if(e)return{type:"br",raw:e[0]}}del(t){const e=this.rules.inline.del.exec(t);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(t){const e=this.rules.inline.autolink.exec(t);if(e){let n,r;return e[2]==="@"?(n=e[1],r="mailto:"+n):(n=e[1],r=n),{type:"link",raw:e[0],text:n,href:r,tokens:[{type:"text",raw:n,text:n}]}}}url(t){var n;let e;if(e=this.rules.inline.url.exec(t)){let r,s;if(e[2]==="@")r=e[0],s="mailto:"+r;else{let i;do i=e[0],e[0]=((n=this.rules.inline._backpedal.exec(e[0]))==null?void 0:n[0])??"";while(i!==e[0]);r=e[0],e[1]==="www."?s="http://"+e[0]:s=e[0]}return{type:"link",raw:e[0],text:r,href:s,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(t){const e=this.rules.inline.text.exec(t);if(e){const n=this.lexer.state.inRawBlock;return{type:"text",raw:e[0],text:e[0],escaped:n}}}},qs=class Zh{constructor(e){ht(this,"tokens");ht(this,"options");ht(this,"state");ht(this,"tokenizer");ht(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=e||vo,this.options.tokenizer=this.options.tokenizer||new Lc,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const n={other:Vn,block:Au.normal,inline:Ja.normal};this.options.pedantic?(n.block=Au.pedantic,n.inline=Ja.pedantic):this.options.gfm&&(n.block=Au.gfm,this.options.breaks?n.inline=Ja.breaks:n.inline=Ja.gfm),this.tokenizer.rules=n}static get rules(){return{block:Au,inline:Ja}}static lex(e,n){return new Zh(n).lex(e)}static lexInline(e,n){return new Zh(n).inlineTokens(e)}lex(e){e=e.replace(Vn.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let n=0;n<this.inlineQueue.length;n++){const r=this.inlineQueue[n];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,n=[],r=!1){var s,i,o;for(this.options.pedantic&&(e=e.replace(Vn.tabCharGlobal,"    ").replace(Vn.spaceLine,""));e;){let a;if((i=(s=this.options.extensions)==null?void 0:s.block)!=null&&i.some(u=>(a=u.call({lexer:this},e,n))?(e=e.substring(a.raw.length),n.push(a),!0):!1))continue;if(a=this.tokenizer.space(e)){e=e.substring(a.raw.length);const u=n.at(-1);a.raw.length===1&&u!==void 0?u.raw+=`
`:n.push(a);continue}if(a=this.tokenizer.code(e)){e=e.substring(a.raw.length);const u=n.at(-1);(u==null?void 0:u.type)==="paragraph"||(u==null?void 0:u.type)==="text"?(u.raw+=`
`+a.raw,u.text+=`
`+a.text,this.inlineQueue.at(-1).src=u.text):n.push(a);continue}if(a=this.tokenizer.fences(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.heading(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.hr(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.blockquote(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.list(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.html(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.def(e)){e=e.substring(a.raw.length);const u=n.at(-1);(u==null?void 0:u.type)==="paragraph"||(u==null?void 0:u.type)==="text"?(u.raw+=`
`+a.raw,u.text+=`
`+a.raw,this.inlineQueue.at(-1).src=u.text):this.tokens.links[a.tag]||(this.tokens.links[a.tag]={href:a.href,title:a.title});continue}if(a=this.tokenizer.table(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.lheading(e)){e=e.substring(a.raw.length),n.push(a);continue}let l=e;if((o=this.options.extensions)!=null&&o.startBlock){let u=1/0;const c=e.slice(1);let d;this.options.extensions.startBlock.forEach(f=>{d=f.call({lexer:this},c),typeof d=="number"&&d>=0&&(u=Math.min(u,d))}),u<1/0&&u>=0&&(l=e.substring(0,u+1))}if(this.state.top&&(a=this.tokenizer.paragraph(l))){const u=n.at(-1);r&&(u==null?void 0:u.type)==="paragraph"?(u.raw+=`
`+a.raw,u.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=u.text):n.push(a),r=l.length!==e.length,e=e.substring(a.raw.length);continue}if(a=this.tokenizer.text(e)){e=e.substring(a.raw.length);const u=n.at(-1);(u==null?void 0:u.type)==="text"?(u.raw+=`
`+a.raw,u.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=u.text):n.push(a);continue}if(e){const u="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(u);break}else throw new Error(u)}}return this.state.top=!0,n}inline(e,n=[]){return this.inlineQueue.push({src:e,tokens:n}),n}inlineTokens(e,n=[]){var a,l,u;let r=e,s=null;if(this.tokens.links){const c=Object.keys(this.tokens.links);if(c.length>0)for(;(s=this.tokenizer.rules.inline.reflinkSearch.exec(r))!=null;)c.includes(s[0].slice(s[0].lastIndexOf("[")+1,-1))&&(r=r.slice(0,s.index)+"["+"a".repeat(s[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(s=this.tokenizer.rules.inline.anyPunctuation.exec(r))!=null;)r=r.slice(0,s.index)+"++"+r.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(s=this.tokenizer.rules.inline.blockSkip.exec(r))!=null;)r=r.slice(0,s.index)+"["+"a".repeat(s[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);let i=!1,o="";for(;e;){i||(o=""),i=!1;let c;if((l=(a=this.options.extensions)==null?void 0:a.inline)!=null&&l.some(f=>(c=f.call({lexer:this},e,n))?(e=e.substring(c.raw.length),n.push(c),!0):!1))continue;if(c=this.tokenizer.escape(e)){e=e.substring(c.raw.length),n.push(c);continue}if(c=this.tokenizer.tag(e)){e=e.substring(c.raw.length),n.push(c);continue}if(c=this.tokenizer.link(e)){e=e.substring(c.raw.length),n.push(c);continue}if(c=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(c.raw.length);const f=n.at(-1);c.type==="text"&&(f==null?void 0:f.type)==="text"?(f.raw+=c.raw,f.text+=c.text):n.push(c);continue}if(c=this.tokenizer.emStrong(e,r,o)){e=e.substring(c.raw.length),n.push(c);continue}if(c=this.tokenizer.codespan(e)){e=e.substring(c.raw.length),n.push(c);continue}if(c=this.tokenizer.br(e)){e=e.substring(c.raw.length),n.push(c);continue}if(c=this.tokenizer.del(e)){e=e.substring(c.raw.length),n.push(c);continue}if(c=this.tokenizer.autolink(e)){e=e.substring(c.raw.length),n.push(c);continue}if(!this.state.inLink&&(c=this.tokenizer.url(e))){e=e.substring(c.raw.length),n.push(c);continue}let d=e;if((u=this.options.extensions)!=null&&u.startInline){let f=1/0;const p=e.slice(1);let h;this.options.extensions.startInline.forEach(g=>{h=g.call({lexer:this},p),typeof h=="number"&&h>=0&&(f=Math.min(f,h))}),f<1/0&&f>=0&&(d=e.substring(0,f+1))}if(c=this.tokenizer.inlineText(d)){e=e.substring(c.raw.length),c.raw.slice(-1)!=="_"&&(o=c.raw.slice(-1)),i=!0;const f=n.at(-1);(f==null?void 0:f.type)==="text"?(f.raw+=c.raw,f.text+=c.text):n.push(c);continue}if(e){const f="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(f);break}else throw new Error(f)}}return n}},ca=class{constructor(t){ht(this,"options");ht(this,"parser");this.options=t||vo}space(t){return""}code({text:t,lang:e,escaped:n}){var i;const r=(i=(e||"").match(Vn.notSpaceStart))==null?void 0:i[0],s=t.replace(Vn.endingNewline,"")+`
`;return r?'<pre><code class="language-'+ls(r)+'">'+(n?s:ls(s,!0))+`</code></pre>
`:"<pre><code>"+(n?s:ls(s,!0))+`</code></pre>
`}blockquote({tokens:t}){return`<blockquote>
${this.parser.parse(t)}</blockquote>
`}html({text:t}){return t}heading({tokens:t,depth:e}){return`<h${e}>${this.parser.parseInline(t)}</h${e}>
`}hr(t){return`<hr>
`}list(t){const e=t.ordered,n=t.start;let r="";for(let o=0;o<t.items.length;o++){const a=t.items[o];r+=this.listitem(a)}const s=e?"ol":"ul",i=e&&n!==1?' start="'+n+'"':"";return"<"+s+i+`>
`+r+"</"+s+`>
`}listitem(t){var n;let e="";if(t.task){const r=this.checkbox({checked:!!t.checked});t.loose?((n=t.tokens[0])==null?void 0:n.type)==="paragraph"?(t.tokens[0].text=r+" "+t.tokens[0].text,t.tokens[0].tokens&&t.tokens[0].tokens.length>0&&t.tokens[0].tokens[0].type==="text"&&(t.tokens[0].tokens[0].text=r+" "+ls(t.tokens[0].tokens[0].text),t.tokens[0].tokens[0].escaped=!0)):t.tokens.unshift({type:"text",raw:r+" ",text:r+" ",escaped:!0}):e+=r+" "}return e+=this.parser.parse(t.tokens,!!t.loose),`<li>${e}</li>
`}checkbox({checked:t}){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:t}){return`<p>${this.parser.parseInline(t)}</p>
`}table(t){let e="",n="";for(let s=0;s<t.header.length;s++)n+=this.tablecell(t.header[s]);e+=this.tablerow({text:n});let r="";for(let s=0;s<t.rows.length;s++){const i=t.rows[s];n="";for(let o=0;o<i.length;o++)n+=this.tablecell(i[o]);r+=this.tablerow({text:n})}return r&&(r=`<tbody>${r}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+r+`</table>
`}tablerow({text:t}){return`<tr>
${t}</tr>
`}tablecell(t){const e=this.parser.parseInline(t.tokens),n=t.header?"th":"td";return(t.align?`<${n} align="${t.align}">`:`<${n}>`)+e+`</${n}>
`}strong({tokens:t}){return`<strong>${this.parser.parseInline(t)}</strong>`}em({tokens:t}){return`<em>${this.parser.parseInline(t)}</em>`}codespan({text:t}){return`<code>${ls(t,!0)}</code>`}br(t){return"<br>"}del({tokens:t}){return`<del>${this.parser.parseInline(t)}</del>`}link({href:t,title:e,tokens:n}){const r=this.parser.parseInline(n),s=k0(t);if(s===null)return r;t=s;let i='<a href="'+t+'"';return e&&(i+=' title="'+ls(e)+'"'),i+=">"+r+"</a>",i}image({href:t,title:e,text:n,tokens:r}){r&&(n=this.parser.parseInline(r,this.parser.textRenderer));const s=k0(t);if(s===null)return ls(n);t=s;let i=`<img src="${t}" alt="${n}"`;return e&&(i+=` title="${ls(e)}"`),i+=">",i}text(t){return"tokens"in t&&t.tokens?this.parser.parseInline(t.tokens):"escaped"in t&&t.escaped?t.text:ls(t.text)}},Vg=class{strong({text:t}){return t}em({text:t}){return t}codespan({text:t}){return t}del({text:t}){return t}html({text:t}){return t}text({text:t}){return t}link({text:t}){return""+t}image({text:t}){return""+t}br(){return""}},Us=class em{constructor(e){ht(this,"options");ht(this,"renderer");ht(this,"textRenderer");this.options=e||vo,this.options.renderer=this.options.renderer||new ca,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Vg}static parse(e,n){return new em(n).parse(e)}static parseInline(e,n){return new em(n).parseInline(e)}parse(e,n=!0){var s,i;let r="";for(let o=0;o<e.length;o++){const a=e[o];if((i=(s=this.options.extensions)==null?void 0:s.renderers)!=null&&i[a.type]){const u=a,c=this.options.extensions.renderers[u.type].call({parser:this},u);if(c!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(u.type)){r+=c||"";continue}}const l=a;switch(l.type){case"space":{r+=this.renderer.space(l);continue}case"hr":{r+=this.renderer.hr(l);continue}case"heading":{r+=this.renderer.heading(l);continue}case"code":{r+=this.renderer.code(l);continue}case"table":{r+=this.renderer.table(l);continue}case"blockquote":{r+=this.renderer.blockquote(l);continue}case"list":{r+=this.renderer.list(l);continue}case"html":{r+=this.renderer.html(l);continue}case"paragraph":{r+=this.renderer.paragraph(l);continue}case"text":{let u=l,c=this.renderer.text(u);for(;o+1<e.length&&e[o+1].type==="text";)u=e[++o],c+=`
`+this.renderer.text(u);n?r+=this.renderer.paragraph({type:"paragraph",raw:c,text:c,tokens:[{type:"text",raw:c,text:c,escaped:!0}]}):r+=c;continue}default:{const u='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(u),"";throw new Error(u)}}}return r}parseInline(e,n=this.renderer){var s,i;let r="";for(let o=0;o<e.length;o++){const a=e[o];if((i=(s=this.options.extensions)==null?void 0:s.renderers)!=null&&i[a.type]){const u=this.options.extensions.renderers[a.type].call({parser:this},a);if(u!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(a.type)){r+=u||"";continue}}const l=a;switch(l.type){case"escape":{r+=n.text(l);break}case"html":{r+=n.html(l);break}case"link":{r+=n.link(l);break}case"image":{r+=n.image(l);break}case"strong":{r+=n.strong(l);break}case"em":{r+=n.em(l);break}case"codespan":{r+=n.codespan(l);break}case"br":{r+=n.br(l);break}case"del":{r+=n.del(l);break}case"text":{r+=n.text(l);break}default:{const u='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(u),"";throw new Error(u)}}}return r}},hh,ac=(hh=class{constructor(t){ht(this,"options");ht(this,"block");this.options=t||vo}preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}provideLexer(){return this.block?qs.lex:qs.lexInline}provideParser(){return this.block?Us.parse:Us.parseInline}},ht(hh,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"])),hh),aL=class{constructor(...t){ht(this,"defaults",Lg());ht(this,"options",this.setOptions);ht(this,"parse",this.parseMarkdown(!0));ht(this,"parseInline",this.parseMarkdown(!1));ht(this,"Parser",Us);ht(this,"Renderer",ca);ht(this,"TextRenderer",Vg);ht(this,"Lexer",qs);ht(this,"Tokenizer",Lc);ht(this,"Hooks",ac);this.use(...t)}walkTokens(t,e){var r,s;let n=[];for(const i of t)switch(n=n.concat(e.call(this,i)),i.type){case"table":{const o=i;for(const a of o.header)n=n.concat(this.walkTokens(a.tokens,e));for(const a of o.rows)for(const l of a)n=n.concat(this.walkTokens(l.tokens,e));break}case"list":{const o=i;n=n.concat(this.walkTokens(o.items,e));break}default:{const o=i;(s=(r=this.defaults.extensions)==null?void 0:r.childTokens)!=null&&s[o.type]?this.defaults.extensions.childTokens[o.type].forEach(a=>{const l=o[a].flat(1/0);n=n.concat(this.walkTokens(l,e))}):o.tokens&&(n=n.concat(this.walkTokens(o.tokens,e)))}}return n}use(...t){const e=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach(n=>{const r={...n};if(r.async=this.defaults.async||r.async||!1,n.extensions&&(n.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if("renderer"in s){const i=e.renderers[s.name];i?e.renderers[s.name]=function(...o){let a=s.renderer.apply(this,o);return a===!1&&(a=i.apply(this,o)),a}:e.renderers[s.name]=s.renderer}if("tokenizer"in s){if(!s.level||s.level!=="block"&&s.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const i=e[s.level];i?i.unshift(s.tokenizer):e[s.level]=[s.tokenizer],s.start&&(s.level==="block"?e.startBlock?e.startBlock.push(s.start):e.startBlock=[s.start]:s.level==="inline"&&(e.startInline?e.startInline.push(s.start):e.startInline=[s.start]))}"childTokens"in s&&s.childTokens&&(e.childTokens[s.name]=s.childTokens)}),r.extensions=e),n.renderer){const s=this.defaults.renderer||new ca(this.defaults);for(const i in n.renderer){if(!(i in s))throw new Error(`renderer '${i}' does not exist`);if(["options","parser"].includes(i))continue;const o=i,a=n.renderer[o],l=s[o];s[o]=(...u)=>{let c=a.apply(s,u);return c===!1&&(c=l.apply(s,u)),c||""}}r.renderer=s}if(n.tokenizer){const s=this.defaults.tokenizer||new Lc(this.defaults);for(const i in n.tokenizer){if(!(i in s))throw new Error(`tokenizer '${i}' does not exist`);if(["options","rules","lexer"].includes(i))continue;const o=i,a=n.tokenizer[o],l=s[o];s[o]=(...u)=>{let c=a.apply(s,u);return c===!1&&(c=l.apply(s,u)),c}}r.tokenizer=s}if(n.hooks){const s=this.defaults.hooks||new ac;for(const i in n.hooks){if(!(i in s))throw new Error(`hook '${i}' does not exist`);if(["options","block"].includes(i))continue;const o=i,a=n.hooks[o],l=s[o];ac.passThroughHooks.has(i)?s[o]=u=>{if(this.defaults.async)return Promise.resolve(a.call(s,u)).then(d=>l.call(s,d));const c=a.call(s,u);return l.call(s,c)}:s[o]=(...u)=>{let c=a.apply(s,u);return c===!1&&(c=l.apply(s,u)),c}}r.hooks=s}if(n.walkTokens){const s=this.defaults.walkTokens,i=n.walkTokens;r.walkTokens=function(o){let a=[];return a.push(i.call(this,o)),s&&(a=a.concat(s.call(this,o))),a}}this.defaults={...this.defaults,...r}}),this}setOptions(t){return this.defaults={...this.defaults,...t},this}lexer(t,e){return qs.lex(t,e??this.defaults)}parser(t,e){return Us.parse(t,e??this.defaults)}parseMarkdown(t){return(n,r)=>{const s={...r},i={...this.defaults,...s},o=this.onError(!!i.silent,!!i.async);if(this.defaults.async===!0&&s.async===!1)return o(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof n>"u"||n===null)return o(new Error("marked(): input parameter is undefined or null"));if(typeof n!="string")return o(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected"));i.hooks&&(i.hooks.options=i,i.hooks.block=t);const a=i.hooks?i.hooks.provideLexer():t?qs.lex:qs.lexInline,l=i.hooks?i.hooks.provideParser():t?Us.parse:Us.parseInline;if(i.async)return Promise.resolve(i.hooks?i.hooks.preprocess(n):n).then(u=>a(u,i)).then(u=>i.hooks?i.hooks.processAllTokens(u):u).then(u=>i.walkTokens?Promise.all(this.walkTokens(u,i.walkTokens)).then(()=>u):u).then(u=>l(u,i)).then(u=>i.hooks?i.hooks.postprocess(u):u).catch(o);try{i.hooks&&(n=i.hooks.preprocess(n));let u=a(n,i);i.hooks&&(u=i.hooks.processAllTokens(u)),i.walkTokens&&this.walkTokens(u,i.walkTokens);let c=l(u,i);return i.hooks&&(c=i.hooks.postprocess(c)),c}catch(u){return o(u)}}}onError(t,e){return n=>{if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,t){const r="<p>An error occurred:</p><pre>"+ls(n.message+"",!0)+"</pre>";return e?Promise.resolve(r):r}if(e)return Promise.reject(n);throw n}}},ho=new aL;function At(t,e){return ho.parse(t,e)}At.options=At.setOptions=function(t){return ho.setOptions(t),At.defaults=ho.defaults,JS(At.defaults),At};At.getDefaults=Lg;At.defaults=vo;At.use=function(...t){return ho.use(...t),At.defaults=ho.defaults,JS(At.defaults),At};At.walkTokens=function(t,e){return ho.walkTokens(t,e)};At.parseInline=ho.parseInline;At.Parser=Us;At.parser=Us.parse;At.Renderer=ca;At.TextRenderer=Vg;At.Lexer=qs;At.lexer=qs.lex;At.Tokenizer=Lc;At.Hooks=ac;At.parse=At;At.options;At.setOptions;At.use;At.walkTokens;At.parseInline;Us.parse;qs.lex;const oE=Symbol();function Hg(){return Kt(oE)??Jo("Could not inject modal controller, are you calling injectModal() or useModal() outside of a modal component?")}function lL(t){cr(oE,t)}function uL(t){let e=!1;const n=Hg();return(t==null?void 0:t.removeOnClose)!==void 0&&Ke(n,(r,s)=>{r.removeOnClose.value=!!(t!=null&&t.removeOnClose),r.visible.value=e,!(!s||!e)&&(s.visible.value=!1)},{immediate:!0}),Dt(()=>(e=!0,n.value.visible.value=!0)),{id:H(()=>n.value.id),visible:H(()=>n.value.visible.value),child:H(()=>n.value.child.value),close:r=>n.value.close(r),remove:()=>n.value.remove()}}const tm=ue({__name:"ModalComponent",props:{is:{}},setup(t){const e=Mn(t.is),n=H(()=>{const r={};for(const s in t.is.props)r[s]=y(t.is.props[s]);return r});return lL(e),Ke(()=>t.is,()=>void(e.value=t.is)),(r,s)=>(I(),Z(ns(t.is.component),Te(n.value,{onClose:s[0]||(s[0]=i=>t.is.close(i))}),null,16))}}),Ht=Mn([]),cL=["data-open"],dL=ue({__name:"ModalsPortal",props:{nested:{type:Boolean,default:!1}},setup(t){return(e,n)=>(I(),ae("div",{"data-open":y(Ht).length?"true":void 0},[Ee(e.$slots,"overlay",{show:y(Ht).length>0}),e.nested?y(Ht)[0]?(I(),Z(tm,{key:1,is:y(Ht)[0]},null,8,["is"])):ke("",!0):(I(!0),ae(je,{key:0},at(y(Ht),r=>(I(),Z(tm,{key:r.id,is:r},null,8,["is"]))),128))],8,cL))}});function aE(t,e){const n=cT(),r=e??{},s=we(!1),i=we(!0),o=Mn(null),a=new aT,l=Ke(s,d=>d||u()),u=async d=>{l.stop(),s.value=!1,zO(d)?a.resolve({dismissed:!1,...d}):d!==void 0?a.resolve({dismissed:!1,response:d}):a.resolve({dismissed:!0}),i.value&&c()},c=()=>{var p,h,g;const d=Ht.value.findIndex(w=>w.id===n);if(d===-1)return;(p=Ht.value[d])!=null&&p.visible.value&&((h=Ht.value[d])==null||h.close());const f=Ht.value[d-1];f&&(f.child.value=((g=Ht.value[d])==null?void 0:g.child.value)??null),Ht.value=Ht.value.filter(w=>w.id!==n)};return{id:n,component:t,props:r,removeOnClose:i,visible:s,child:o,close:u,remove:c,promisedResult:a}}function O0(t,e){const n="removeOnClose"in t?t:aE(t,e??{}),r=Ht.value[Ht.value.length-1];return r&&(r.child.value=n),Ht.value=Ht.value.concat([n]),n.promisedResult}async function T0(t,e={}){const n=Ht.value.find(r=>r.id===t);n&&(n.close(),e.remove&&n.remove(),e.removeAfter&&(await dT(e.removeAfter),n.remove()))}function lE(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=lE(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function uE(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=lE(t))&&(r&&(r+=" "),r+=e);return r}const D0=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,P0=uE,fL=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return P0(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(u=>{const c=n==null?void 0:n[u],d=i==null?void 0:i[u];if(c===null)return null;const f=D0(c)||D0(d);return s[u][f]}),a=n&&Object.entries(n).reduce((u,c)=>{let[d,f]=c;return f===void 0||(u[d]=f),u},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,c)=>{let{class:d,className:f,...p}=c;return Object.entries(p).every(h=>{let[g,w]=h;return Array.isArray(w)?w.includes({...i,...a}[g]):{...i,...a}[g]===w})?[...u,d,f]:u},[]);return P0(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)},pL=(t,e)=>{const n=new Array(t.length+e.length);for(let r=0;r<t.length;r++)n[r]=t[r];for(let r=0;r<e.length;r++)n[t.length+r]=e[r];return n},hL=(t,e)=>({classGroupId:t,validator:e}),cE=(t=new Map,e=null,n)=>({nextPart:t,validators:e,classGroupId:n}),Nc="-",M0=[],mL="arbitrary..",gL=t=>{const e=vL(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{if(o.startsWith("[")&&o.endsWith("]"))return yL(o);const a=o.split(Nc),l=a[0]===""&&a.length>1?1:0;return dE(a,l,e)},getConflictingClassGroupIds:(o,a)=>{if(a){const l=r[o],u=n[o];return l?u?pL(u,l):l:u||M0}return n[o]||M0}}},dE=(t,e,n)=>{if(t.length-e===0)return n.classGroupId;const s=t[e],i=n.nextPart.get(s);if(i){const u=dE(t,e+1,i);if(u)return u}const o=n.validators;if(o===null)return;const a=e===0?t.join(Nc):t.slice(e).join(Nc),l=o.length;for(let u=0;u<l;u++){const c=o[u];if(c.validator(a))return c.classGroupId}},yL=t=>t.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const e=t.slice(1,-1),n=e.indexOf(":"),r=e.slice(0,n);return r?mL+r:void 0})(),vL=t=>{const{theme:e,classGroups:n}=t;return bL(n,e)},bL=(t,e)=>{const n=cE();for(const r in t){const s=t[r];Kg(s,n,r,e)}return n},Kg=(t,e,n,r)=>{const s=t.length;for(let i=0;i<s;i++){const o=t[i];wL(o,e,n,r)}},wL=(t,e,n,r)=>{if(typeof t=="string"){_L(t,e,n);return}if(typeof t=="function"){xL(t,e,n,r);return}SL(t,e,n,r)},_L=(t,e,n)=>{const r=t===""?e:fE(e,t);r.classGroupId=n},xL=(t,e,n,r)=>{if(EL(t)){Kg(t(r),e,n,r);return}e.validators===null&&(e.validators=[]),e.validators.push(hL(n,t))},SL=(t,e,n,r)=>{const s=Object.entries(t),i=s.length;for(let o=0;o<i;o++){const[a,l]=s[o];Kg(l,fE(e,a),n,r)}},fE=(t,e)=>{let n=t;const r=e.split(Nc),s=r.length;for(let i=0;i<s;i++){const o=r[i];let a=n.nextPart.get(o);a||(a=cE(),n.nextPart.set(o,a)),n=a}return n},EL=t=>"isThemeGetter"in t&&t.isThemeGetter===!0,AL=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=Object.create(null),r=Object.create(null);const s=(i,o)=>{n[i]=o,e++,e>t&&(e=0,r=n,n=Object.create(null))};return{get(i){let o=n[i];if(o!==void 0)return o;if((o=r[i])!==void 0)return s(i,o),o},set(i,o){i in n?n[i]=o:s(i,o)}}},nm="!",L0=":",CL=[],N0=(t,e,n,r,s)=>({modifiers:t,hasImportantModifier:e,baseClassName:n,maybePostfixModifierPosition:r,isExternal:s}),$L=t=>{const{prefix:e,experimentalParseClassName:n}=t;let r=s=>{const i=[];let o=0,a=0,l=0,u;const c=s.length;for(let g=0;g<c;g++){const w=s[g];if(o===0&&a===0){if(w===L0){i.push(s.slice(l,g)),l=g+1;continue}if(w==="/"){u=g;continue}}w==="["?o++:w==="]"?o--:w==="("?a++:w===")"&&a--}const d=i.length===0?s:s.slice(l);let f=d,p=!1;d.endsWith(nm)?(f=d.slice(0,-1),p=!0):d.startsWith(nm)&&(f=d.slice(1),p=!0);const h=u&&u>l?u-l:void 0;return N0(i,p,f,h)};if(e){const s=e+L0,i=r;r=o=>o.startsWith(s)?i(o.slice(s.length)):N0(CL,!1,o,void 0,!0)}if(n){const s=r;r=i=>n({className:i,parseClassName:s})}return r},kL=t=>{const e=new Map;return t.orderSensitiveModifiers.forEach((n,r)=>{e.set(n,1e6+r)}),n=>{const r=[];let s=[];for(let i=0;i<n.length;i++){const o=n[i],a=o[0]==="[",l=e.has(o);a||l?(s.length>0&&(s.sort(),r.push(...s),s=[]),r.push(o)):s.push(o)}return s.length>0&&(s.sort(),r.push(...s)),r}},IL=t=>({cache:AL(t.cacheSize),parseClassName:$L(t),sortModifiers:kL(t),...gL(t)}),RL=/\s+/,OL=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s,sortModifiers:i}=e,o=[],a=t.trim().split(RL);let l="";for(let u=a.length-1;u>=0;u-=1){const c=a[u],{isExternal:d,modifiers:f,hasImportantModifier:p,baseClassName:h,maybePostfixModifierPosition:g}=n(c);if(d){l=c+(l.length>0?" "+l:l);continue}let w=!!g,x=r(w?h.substring(0,g):h);if(!x){if(!w){l=c+(l.length>0?" "+l:l);continue}if(x=r(h),!x){l=c+(l.length>0?" "+l:l);continue}w=!1}const A=f.length===0?"":f.length===1?f[0]:i(f).join(":"),E=p?A+nm:A,m=E+x;if(o.indexOf(m)>-1)continue;o.push(m);const v=s(x,w);for(let _=0;_<v.length;++_){const C=v[_];o.push(E+C)}l=c+(l.length>0?" "+l:l)}return l},TL=(...t)=>{let e=0,n,r,s="";for(;e<t.length;)(n=t[e++])&&(r=pE(n))&&(s&&(s+=" "),s+=r);return s},pE=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=pE(t[r]))&&(n&&(n+=" "),n+=e);return n},DL=(t,...e)=>{let n,r,s,i;const o=l=>{const u=e.reduce((c,d)=>d(c),t());return n=IL(u),r=n.cache.get,s=n.cache.set,i=a,a(l)},a=l=>{const u=r(l);if(u)return u;const c=OL(l,n);return s(l,c),c};return i=o,(...l)=>i(TL(...l))},PL=[],nn=t=>{const e=n=>n[t]||PL;return e.isThemeGetter=!0,e},hE=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,mE=/^\((?:(\w[\w-]*):)?(.+)\)$/i,ML=/^\d+\/\d+$/,LL=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,NL=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,FL=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,jL=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,qL=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Oo=t=>ML.test(t),et=t=>!!t&&!Number.isNaN(Number(t)),oi=t=>!!t&&Number.isInteger(Number(t)),Fp=t=>t.endsWith("%")&&et(t.slice(0,-1)),Is=t=>LL.test(t),UL=()=>!0,BL=t=>NL.test(t)&&!FL.test(t),gE=()=>!1,zL=t=>jL.test(t),VL=t=>qL.test(t),HL=t=>!Me(t)&&!Le(t),KL=t=>Sa(t,bE,gE),Me=t=>hE.test(t),Yi=t=>Sa(t,wE,BL),jp=t=>Sa(t,XL,et),F0=t=>Sa(t,yE,gE),WL=t=>Sa(t,vE,VL),Cu=t=>Sa(t,_E,zL),Le=t=>mE.test(t),Xa=t=>Ea(t,wE),GL=t=>Ea(t,QL),j0=t=>Ea(t,yE),JL=t=>Ea(t,bE),YL=t=>Ea(t,vE),$u=t=>Ea(t,_E,!0),Sa=(t,e,n)=>{const r=hE.exec(t);return r?r[1]?e(r[1]):n(r[2]):!1},Ea=(t,e,n=!1)=>{const r=mE.exec(t);return r?r[1]?e(r[1]):n:!1},yE=t=>t==="position"||t==="percentage",vE=t=>t==="image"||t==="url",bE=t=>t==="length"||t==="size"||t==="bg-size",wE=t=>t==="length",XL=t=>t==="number",QL=t=>t==="family-name",_E=t=>t==="shadow",ZL=()=>{const t=nn("color"),e=nn("font"),n=nn("text"),r=nn("font-weight"),s=nn("tracking"),i=nn("leading"),o=nn("breakpoint"),a=nn("container"),l=nn("spacing"),u=nn("radius"),c=nn("shadow"),d=nn("inset-shadow"),f=nn("text-shadow"),p=nn("drop-shadow"),h=nn("blur"),g=nn("perspective"),w=nn("aspect"),x=nn("ease"),A=nn("animate"),E=()=>["auto","avoid","all","avoid-page","page","left","right","column"],m=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],v=()=>[...m(),Le,Me],_=()=>["auto","hidden","clip","visible","scroll"],C=()=>["auto","contain","none"],$=()=>[Le,Me,l],k=()=>[Oo,"full","auto",...$()],D=()=>[oi,"none","subgrid",Le,Me],G=()=>["auto",{span:["full",oi,Le,Me]},oi,Le,Me],J=()=>[oi,"auto",Le,Me],W=()=>["auto","min","max","fr",Le,Me],j=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],se=()=>["start","end","center","stretch","center-safe","end-safe"],R=()=>["auto",...$()],V=()=>[Oo,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...$()],F=()=>[t,Le,Me],ee=()=>[...m(),j0,F0,{position:[Le,Me]}],z=()=>["no-repeat",{repeat:["","x","y","space","round"]}],ie=()=>["auto","cover","contain",JL,KL,{size:[Le,Me]}],pe=()=>[Fp,Xa,Yi],he=()=>["","none","full",u,Le,Me],Ae=()=>["",et,Xa,Yi],X=()=>["solid","dashed","dotted","double"],te=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],T=()=>[et,Fp,j0,F0],Y=()=>["","none",h,Le,Me],re=()=>["none",et,Le,Me],ne=()=>["none",et,Le,Me],xe=()=>[et,Le,Me],M=()=>[Oo,"full",...$()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Is],breakpoint:[Is],color:[UL],container:[Is],"drop-shadow":[Is],ease:["in","out","in-out"],font:[HL],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Is],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Is],shadow:[Is],spacing:["px",et],text:[Is],"text-shadow":[Is],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Oo,Me,Le,w]}],container:["container"],columns:[{columns:[et,Me,Le,a]}],"break-after":[{"break-after":E()}],"break-before":[{"break-before":E()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:v()}],overflow:[{overflow:_()}],"overflow-x":[{"overflow-x":_()}],"overflow-y":[{"overflow-y":_()}],overscroll:[{overscroll:C()}],"overscroll-x":[{"overscroll-x":C()}],"overscroll-y":[{"overscroll-y":C()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:k()}],"inset-x":[{"inset-x":k()}],"inset-y":[{"inset-y":k()}],start:[{start:k()}],end:[{end:k()}],top:[{top:k()}],right:[{right:k()}],bottom:[{bottom:k()}],left:[{left:k()}],visibility:["visible","invisible","collapse"],z:[{z:[oi,"auto",Le,Me]}],basis:[{basis:[Oo,"full","auto",a,...$()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[et,Oo,"auto","initial","none",Me]}],grow:[{grow:["",et,Le,Me]}],shrink:[{shrink:["",et,Le,Me]}],order:[{order:[oi,"first","last","none",Le,Me]}],"grid-cols":[{"grid-cols":D()}],"col-start-end":[{col:G()}],"col-start":[{"col-start":J()}],"col-end":[{"col-end":J()}],"grid-rows":[{"grid-rows":D()}],"row-start-end":[{row:G()}],"row-start":[{"row-start":J()}],"row-end":[{"row-end":J()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":W()}],"auto-rows":[{"auto-rows":W()}],gap:[{gap:$()}],"gap-x":[{"gap-x":$()}],"gap-y":[{"gap-y":$()}],"justify-content":[{justify:[...j(),"normal"]}],"justify-items":[{"justify-items":[...se(),"normal"]}],"justify-self":[{"justify-self":["auto",...se()]}],"align-content":[{content:["normal",...j()]}],"align-items":[{items:[...se(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...se(),{baseline:["","last"]}]}],"place-content":[{"place-content":j()}],"place-items":[{"place-items":[...se(),"baseline"]}],"place-self":[{"place-self":["auto",...se()]}],p:[{p:$()}],px:[{px:$()}],py:[{py:$()}],ps:[{ps:$()}],pe:[{pe:$()}],pt:[{pt:$()}],pr:[{pr:$()}],pb:[{pb:$()}],pl:[{pl:$()}],m:[{m:R()}],mx:[{mx:R()}],my:[{my:R()}],ms:[{ms:R()}],me:[{me:R()}],mt:[{mt:R()}],mr:[{mr:R()}],mb:[{mb:R()}],ml:[{ml:R()}],"space-x":[{"space-x":$()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":$()}],"space-y-reverse":["space-y-reverse"],size:[{size:V()}],w:[{w:[a,"screen",...V()]}],"min-w":[{"min-w":[a,"screen","none",...V()]}],"max-w":[{"max-w":[a,"screen","none","prose",{screen:[o]},...V()]}],h:[{h:["screen","lh",...V()]}],"min-h":[{"min-h":["screen","lh","none",...V()]}],"max-h":[{"max-h":["screen","lh",...V()]}],"font-size":[{text:["base",n,Xa,Yi]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,Le,jp]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Fp,Me]}],"font-family":[{font:[GL,Me,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,Le,Me]}],"line-clamp":[{"line-clamp":[et,"none",Le,jp]}],leading:[{leading:[i,...$()]}],"list-image":[{"list-image":["none",Le,Me]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Le,Me]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:F()}],"text-color":[{text:F()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...X(),"wavy"]}],"text-decoration-thickness":[{decoration:[et,"from-font","auto",Le,Yi]}],"text-decoration-color":[{decoration:F()}],"underline-offset":[{"underline-offset":[et,"auto",Le,Me]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:$()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Le,Me]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Le,Me]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:ee()}],"bg-repeat":[{bg:z()}],"bg-size":[{bg:ie()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},oi,Le,Me],radial:["",Le,Me],conic:[oi,Le,Me]},YL,WL]}],"bg-color":[{bg:F()}],"gradient-from-pos":[{from:pe()}],"gradient-via-pos":[{via:pe()}],"gradient-to-pos":[{to:pe()}],"gradient-from":[{from:F()}],"gradient-via":[{via:F()}],"gradient-to":[{to:F()}],rounded:[{rounded:he()}],"rounded-s":[{"rounded-s":he()}],"rounded-e":[{"rounded-e":he()}],"rounded-t":[{"rounded-t":he()}],"rounded-r":[{"rounded-r":he()}],"rounded-b":[{"rounded-b":he()}],"rounded-l":[{"rounded-l":he()}],"rounded-ss":[{"rounded-ss":he()}],"rounded-se":[{"rounded-se":he()}],"rounded-ee":[{"rounded-ee":he()}],"rounded-es":[{"rounded-es":he()}],"rounded-tl":[{"rounded-tl":he()}],"rounded-tr":[{"rounded-tr":he()}],"rounded-br":[{"rounded-br":he()}],"rounded-bl":[{"rounded-bl":he()}],"border-w":[{border:Ae()}],"border-w-x":[{"border-x":Ae()}],"border-w-y":[{"border-y":Ae()}],"border-w-s":[{"border-s":Ae()}],"border-w-e":[{"border-e":Ae()}],"border-w-t":[{"border-t":Ae()}],"border-w-r":[{"border-r":Ae()}],"border-w-b":[{"border-b":Ae()}],"border-w-l":[{"border-l":Ae()}],"divide-x":[{"divide-x":Ae()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Ae()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...X(),"hidden","none"]}],"divide-style":[{divide:[...X(),"hidden","none"]}],"border-color":[{border:F()}],"border-color-x":[{"border-x":F()}],"border-color-y":[{"border-y":F()}],"border-color-s":[{"border-s":F()}],"border-color-e":[{"border-e":F()}],"border-color-t":[{"border-t":F()}],"border-color-r":[{"border-r":F()}],"border-color-b":[{"border-b":F()}],"border-color-l":[{"border-l":F()}],"divide-color":[{divide:F()}],"outline-style":[{outline:[...X(),"none","hidden"]}],"outline-offset":[{"outline-offset":[et,Le,Me]}],"outline-w":[{outline:["",et,Xa,Yi]}],"outline-color":[{outline:F()}],shadow:[{shadow:["","none",c,$u,Cu]}],"shadow-color":[{shadow:F()}],"inset-shadow":[{"inset-shadow":["none",d,$u,Cu]}],"inset-shadow-color":[{"inset-shadow":F()}],"ring-w":[{ring:Ae()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:F()}],"ring-offset-w":[{"ring-offset":[et,Yi]}],"ring-offset-color":[{"ring-offset":F()}],"inset-ring-w":[{"inset-ring":Ae()}],"inset-ring-color":[{"inset-ring":F()}],"text-shadow":[{"text-shadow":["none",f,$u,Cu]}],"text-shadow-color":[{"text-shadow":F()}],opacity:[{opacity:[et,Le,Me]}],"mix-blend":[{"mix-blend":[...te(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":te()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[et]}],"mask-image-linear-from-pos":[{"mask-linear-from":T()}],"mask-image-linear-to-pos":[{"mask-linear-to":T()}],"mask-image-linear-from-color":[{"mask-linear-from":F()}],"mask-image-linear-to-color":[{"mask-linear-to":F()}],"mask-image-t-from-pos":[{"mask-t-from":T()}],"mask-image-t-to-pos":[{"mask-t-to":T()}],"mask-image-t-from-color":[{"mask-t-from":F()}],"mask-image-t-to-color":[{"mask-t-to":F()}],"mask-image-r-from-pos":[{"mask-r-from":T()}],"mask-image-r-to-pos":[{"mask-r-to":T()}],"mask-image-r-from-color":[{"mask-r-from":F()}],"mask-image-r-to-color":[{"mask-r-to":F()}],"mask-image-b-from-pos":[{"mask-b-from":T()}],"mask-image-b-to-pos":[{"mask-b-to":T()}],"mask-image-b-from-color":[{"mask-b-from":F()}],"mask-image-b-to-color":[{"mask-b-to":F()}],"mask-image-l-from-pos":[{"mask-l-from":T()}],"mask-image-l-to-pos":[{"mask-l-to":T()}],"mask-image-l-from-color":[{"mask-l-from":F()}],"mask-image-l-to-color":[{"mask-l-to":F()}],"mask-image-x-from-pos":[{"mask-x-from":T()}],"mask-image-x-to-pos":[{"mask-x-to":T()}],"mask-image-x-from-color":[{"mask-x-from":F()}],"mask-image-x-to-color":[{"mask-x-to":F()}],"mask-image-y-from-pos":[{"mask-y-from":T()}],"mask-image-y-to-pos":[{"mask-y-to":T()}],"mask-image-y-from-color":[{"mask-y-from":F()}],"mask-image-y-to-color":[{"mask-y-to":F()}],"mask-image-radial":[{"mask-radial":[Le,Me]}],"mask-image-radial-from-pos":[{"mask-radial-from":T()}],"mask-image-radial-to-pos":[{"mask-radial-to":T()}],"mask-image-radial-from-color":[{"mask-radial-from":F()}],"mask-image-radial-to-color":[{"mask-radial-to":F()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":m()}],"mask-image-conic-pos":[{"mask-conic":[et]}],"mask-image-conic-from-pos":[{"mask-conic-from":T()}],"mask-image-conic-to-pos":[{"mask-conic-to":T()}],"mask-image-conic-from-color":[{"mask-conic-from":F()}],"mask-image-conic-to-color":[{"mask-conic-to":F()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:ee()}],"mask-repeat":[{mask:z()}],"mask-size":[{mask:ie()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Le,Me]}],filter:[{filter:["","none",Le,Me]}],blur:[{blur:Y()}],brightness:[{brightness:[et,Le,Me]}],contrast:[{contrast:[et,Le,Me]}],"drop-shadow":[{"drop-shadow":["","none",p,$u,Cu]}],"drop-shadow-color":[{"drop-shadow":F()}],grayscale:[{grayscale:["",et,Le,Me]}],"hue-rotate":[{"hue-rotate":[et,Le,Me]}],invert:[{invert:["",et,Le,Me]}],saturate:[{saturate:[et,Le,Me]}],sepia:[{sepia:["",et,Le,Me]}],"backdrop-filter":[{"backdrop-filter":["","none",Le,Me]}],"backdrop-blur":[{"backdrop-blur":Y()}],"backdrop-brightness":[{"backdrop-brightness":[et,Le,Me]}],"backdrop-contrast":[{"backdrop-contrast":[et,Le,Me]}],"backdrop-grayscale":[{"backdrop-grayscale":["",et,Le,Me]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[et,Le,Me]}],"backdrop-invert":[{"backdrop-invert":["",et,Le,Me]}],"backdrop-opacity":[{"backdrop-opacity":[et,Le,Me]}],"backdrop-saturate":[{"backdrop-saturate":[et,Le,Me]}],"backdrop-sepia":[{"backdrop-sepia":["",et,Le,Me]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":$()}],"border-spacing-x":[{"border-spacing-x":$()}],"border-spacing-y":[{"border-spacing-y":$()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Le,Me]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[et,"initial",Le,Me]}],ease:[{ease:["linear","initial",x,Le,Me]}],delay:[{delay:[et,Le,Me]}],animate:[{animate:["none",A,Le,Me]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[g,Le,Me]}],"perspective-origin":[{"perspective-origin":v()}],rotate:[{rotate:re()}],"rotate-x":[{"rotate-x":re()}],"rotate-y":[{"rotate-y":re()}],"rotate-z":[{"rotate-z":re()}],scale:[{scale:ne()}],"scale-x":[{"scale-x":ne()}],"scale-y":[{"scale-y":ne()}],"scale-z":[{"scale-z":ne()}],"scale-3d":["scale-3d"],skew:[{skew:xe()}],"skew-x":[{"skew-x":xe()}],"skew-y":[{"skew-y":xe()}],transform:[{transform:[Le,Me,"","none","gpu","cpu"]}],"transform-origin":[{origin:v()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:M()}],"translate-x":[{"translate-x":M()}],"translate-y":[{"translate-y":M()}],"translate-z":[{"translate-z":M()}],"translate-none":["translate-none"],accent:[{accent:F()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:F()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Le,Me]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":$()}],"scroll-mx":[{"scroll-mx":$()}],"scroll-my":[{"scroll-my":$()}],"scroll-ms":[{"scroll-ms":$()}],"scroll-me":[{"scroll-me":$()}],"scroll-mt":[{"scroll-mt":$()}],"scroll-mr":[{"scroll-mr":$()}],"scroll-mb":[{"scroll-mb":$()}],"scroll-ml":[{"scroll-ml":$()}],"scroll-p":[{"scroll-p":$()}],"scroll-px":[{"scroll-px":$()}],"scroll-py":[{"scroll-py":$()}],"scroll-ps":[{"scroll-ps":$()}],"scroll-pe":[{"scroll-pe":$()}],"scroll-pt":[{"scroll-pt":$()}],"scroll-pr":[{"scroll-pr":$()}],"scroll-pb":[{"scroll-pb":$()}],"scroll-pl":[{"scroll-pl":$()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Le,Me]}],fill:[{fill:["none",...F()]}],"stroke-w":[{stroke:[et,Xa,Yi,jp]}],stroke:[{stroke:["none",...F()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},eN=DL(ZL);function q0(t){return typeof t=="string"?`'${t}'`:new tN().serialize(t)}const tN=(function(){var e;class t{constructor(){nv(this,e,new Map)}compare(r,s){const i=typeof r,o=typeof s;return i==="string"&&o==="string"?r.localeCompare(s):i==="number"&&o==="number"?r-s:String.prototype.localeCompare.call(this.serialize(r,!0),this.serialize(s,!0))}serialize(r,s){if(r===null)return"null";switch(typeof r){case"string":return s?r:`'${r}'`;case"bigint":return`${r}n`;case"object":return this.$object(r);case"function":return this.$function(r)}return String(r)}serializeObject(r){const s=Object.prototype.toString.call(r);if(s!=="[object Object]")return this.serializeBuiltInType(s.length<10?`unknown:${s}`:s.slice(8,-1),r);const i=r.constructor,o=i===Object||i===void 0?"":i.name;if(o!==""&&globalThis[o]===i)return this.serializeBuiltInType(o,r);if(typeof r.toJSON=="function"){const a=r.toJSON();return o+(a!==null&&typeof a=="object"?this.$object(a):`(${this.serialize(a)})`)}return this.serializeObjectEntries(o,Object.entries(r))}serializeBuiltInType(r,s){const i=this["$"+r];if(i)return i.call(this,s);if(typeof(s==null?void 0:s.entries)=="function")return this.serializeObjectEntries(r,s.entries());throw new Error(`Cannot serialize ${r}`)}serializeObjectEntries(r,s){const i=Array.from(s).sort((a,l)=>this.compare(a[0],l[0]));let o=`${r}{`;for(let a=0;a<i.length;a++){const[l,u]=i[a];o+=`${this.serialize(l,!0)}:${this.serialize(u)}`,a<i.length-1&&(o+=",")}return o+"}"}$object(r){let s=Ma(this,e).get(r);return s===void 0&&(Ma(this,e).set(r,`#${Ma(this,e).size}`),s=this.serializeObject(r),Ma(this,e).set(r,s)),s}$function(r){const s=Function.prototype.toString.call(r);return s.slice(-15)==="[native code] }"?`${r.name||""}()[native]`:`${r.name}(${r.length})${s.replace(/\s*\n\s*/g,"")}`}$Array(r){let s="[";for(let i=0;i<r.length;i++)s+=this.serialize(r[i]),i<r.length-1&&(s+=",");return s+"]"}$Date(r){try{return`Date(${r.toISOString()})`}catch{return"Date(null)"}}$ArrayBuffer(r){return`ArrayBuffer[${new Uint8Array(r).join(",")}]`}$Set(r){return`Set${this.$Array(Array.from(r).sort((s,i)=>this.compare(s,i)))}`}$Map(r){return this.serializeObjectEntries("Map",r.entries())}}e=new WeakMap;for(const n of["Error","RegExp","URL"])t.prototype["$"+n]=function(r){return`${n}(${r})`};for(const n of["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"])t.prototype["$"+n]=function(r){return`${n}[${r.join(",")}]`};for(const n of["BigInt64Array","BigUint64Array"])t.prototype["$"+n]=function(r){return`${n}[${r.join("n,")}${r.length>0?"n":""}]`};return t})();function Fc(t,e){return t===e||q0(t)===q0(e)}function nN(t,e,n){const r=t.findIndex(a=>Fc(a,e)),s=t.findIndex(a=>Fc(a,n));if(r===-1||s===-1)return[];const[i,o]=[r,s].sort((a,l)=>a-l);return t.slice(i,o+1)}function U0(t,e=Number.NEGATIVE_INFINITY,n=Number.POSITIVE_INFINITY){return Math.min(n,Math.max(e,t))}function Jt(t,e){const n=typeof t=="string"&&!e?`${t}Context`:e,r=Symbol(n);return[o=>{const a=Kt(r,o);if(a||a===null)return a;throw new Error(`Injection \`${r.toString()}\` not found. Component must be used within ${Array.isArray(t)?`one of the following components: ${t.join(", ")}`:`\`${t}\``}`)},o=>(cr(r,o),o)]}function cn(){let t=document.activeElement;if(t==null)return null;for(;t!=null&&t.shadowRoot!=null&&t.shadowRoot.activeElement!=null;)t=t.shadowRoot.activeElement;return t}function Nd(t,e,n){const r=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&r.addEventListener(t,e,{once:!0}),r.dispatchEvent(s)}function B0(t){return t==null}function Wg(t){return t?t.flatMap(e=>e.type===je?Wg(e.children):[e]):[]}const rN=["INPUT","TEXTAREA"];function sN(t,e,n,r={}){if(!e||r.enableIgnoredElement&&rN.includes(e.nodeName))return null;const{arrowKeyOptions:s="both",attributeName:i="[data-reka-collection-item]",itemsArray:o=[],loop:a=!0,dir:l="ltr",preventScroll:u=!0,focus:c=!1}=r,[d,f,p,h,g,w]=[t.key==="ArrowRight",t.key==="ArrowLeft",t.key==="ArrowUp",t.key==="ArrowDown",t.key==="Home",t.key==="End"],x=p||h,A=d||f;if(!g&&!w&&(!x&&!A||s==="vertical"&&A||s==="horizontal"&&x))return null;const E=n?Array.from(n.querySelectorAll(i)):o;if(!E.length)return null;u&&t.preventDefault();let m=null;return A||x?m=xE(E,e,{goForward:x?h:l==="ltr"?d:f,loop:a}):g?m=E.at(0)||null:w&&(m=E.at(-1)||null),c&&(m==null||m.focus()),m}function xE(t,e,n,r=t.length){if(--r===0)return null;const s=t.indexOf(e),i=n.goForward?s+1:s-1;if(!n.loop&&(i<0||i>=t.length))return null;const o=(i+t.length)%t.length,a=t[o];return a?a.hasAttribute("disabled")&&a.getAttribute("disabled")!=="false"?xE(t,a,n,r):a:null}const[Gg]=Jt("ConfigProvider");function iN(t,e){var n;const r=Mn();return Nt(()=>{r.value=t()},{...e,flush:(n=void 0)!=null?n:"sync"}),vs(r)}function bo(t){return wa()?(Kl(t),!0):!1}function lc(){const t=new Set,e=i=>{t.delete(i)};return{on:i=>{t.add(i);const o=()=>e(i);return bo(o),{off:o}},off:e,trigger:(...i)=>Promise.all(Array.from(t).map(o=>o(...i))),clear:()=>{t.clear()}}}function oN(t){let e=!1,n;const r=Hl(!0);return(...s)=>(e||(n=r.run(()=>t(...s)),e=!0),n)}function SE(t){let e=0,n,r;const s=()=>{e-=1,r&&e<=0&&(r.stop(),n=void 0,r=void 0)};return(...i)=>(e+=1,r||(r=Hl(!0),n=r.run(()=>t(...i))),bo(s),n)}const Ss=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const aN=t=>typeof t<"u",lN=Object.prototype.toString,uN=t=>lN.call(t)==="[object Object]",cN=()=>{},z0=dN();function dN(){var t,e;return Ss&&((t=window==null?void 0:window.navigator)==null?void 0:t.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((e=window==null?void 0:window.navigator)==null?void 0:e.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}function fN(t){return wn()}function qp(t){return Array.isArray(t)?t:[t]}function EE(t,e=1e4){return _a((n,r)=>{let s=vn(t),i;const o=()=>setTimeout(()=>{s=vn(t),r()},vn(e));return bo(()=>{clearTimeout(i)}),{get(){return n(),s},set(a){s=a,r(),clearTimeout(i),i=o()}}})}const pN=vn;function hN(t,e){fN()&&Vx(t,e)}function mN(t,e,n={}){const{immediate:r=!0,immediateCallback:s=!1}=n,i=Mn(!1);let o=null;function a(){o&&(clearTimeout(o),o=null)}function l(){i.value=!1,a()}function u(...c){s&&t(),a(),i.value=!0,o=setTimeout(()=>{i.value=!1,o=null,t(...c)},vn(e))}return r&&(i.value=!0,Ss&&u()),bo(l),{isPending:vs(i),start:u,stop:l}}function gN(t=1e3,e={}){const{controls:n=!1,callback:r}=e,s=mN(r??cN,t,e),i=H(()=>!s.isPending.value);return n?{ready:i,...s}:i}function yN(t,e,n){return Ke(t,e,{...n,immediate:!0})}const Zl=Ss?window:void 0;function Pr(t){var e;const n=vn(t);return(e=n==null?void 0:n.$el)!=null?e:n}function jc(...t){const e=[],n=()=>{e.forEach(a=>a()),e.length=0},r=(a,l,u,c)=>(a.addEventListener(l,u,c),()=>a.removeEventListener(l,u,c)),s=H(()=>{const a=qp(vn(t[0])).filter(l=>l!=null);return a.every(l=>typeof l!="string")?a:void 0}),i=yN(()=>{var a,l;return[(l=(a=s.value)==null?void 0:a.map(u=>Pr(u)))!=null?l:[Zl].filter(u=>u!=null),qp(vn(s.value?t[1]:t[0])),qp(y(s.value?t[2]:t[1])),vn(s.value?t[3]:t[2])]},([a,l,u,c])=>{if(n(),!(a!=null&&a.length)||!(l!=null&&l.length)||!(u!=null&&u.length))return;const d=uN(c)?{...c}:c;e.push(...a.flatMap(f=>l.flatMap(p=>u.map(h=>r(f,p,h,d)))))},{flush:"post"}),o=()=>{i(),n()};return bo(n),o}function AE(){const t=Mn(!1),e=wn();return e&&Dt(()=>{t.value=!0},e),t}function vN(t){const e=AE();return H(()=>(e.value,!!t()))}function bN(t){return typeof t=="function"?t:typeof t=="string"?e=>e.key===t:Array.isArray(t)?e=>t.includes(e.key):()=>!0}function Jg(...t){let e,n,r={};t.length===3?(e=t[0],n=t[1],r=t[2]):t.length===2?typeof t[1]=="object"?(e=!0,n=t[0],r=t[1]):(e=t[0],n=t[1]):(e=!0,n=t[0]);const{target:s=Zl,eventName:i="keydown",passive:o=!1,dedupe:a=!1}=r,l=bN(e);return jc(s,i,c=>{c.repeat&&vn(a)||l(c)&&n(c)},o)}function CE(t,e={}){const{immediate:n=!0,fpsLimit:r=void 0,window:s=Zl,once:i=!1}=e,o=Mn(!1),a=H(()=>r?1e3/vn(r):null);let l=0,u=null;function c(p){if(!o.value||!s)return;l||(l=p);const h=p-l;if(a.value&&h<a.value){u=s.requestAnimationFrame(c);return}if(l=p,t({delta:h,timestamp:p}),i){o.value=!1,u=null;return}u=s.requestAnimationFrame(c)}function d(){!o.value&&s&&(o.value=!0,l=0,u=s.requestAnimationFrame(c))}function f(){o.value=!1,u!=null&&s&&(s.cancelAnimationFrame(u),u=null)}return n&&d(),bo(f),{isActive:vs(o),pause:f,resume:d}}function wN(t){return JSON.parse(JSON.stringify(t))}function _N(t,e,n={}){const{window:r=Zl,...s}=n;let i;const o=vN(()=>r&&"ResizeObserver"in r),a=()=>{i&&(i.disconnect(),i=void 0)},l=H(()=>{const d=vn(t);return Array.isArray(d)?d.map(f=>Pr(f)):[Pr(d)]}),u=Ke(l,d=>{if(a(),o.value&&r){i=new ResizeObserver(e);for(const f of d)f&&i.observe(f,s)}},{immediate:!0,flush:"post"}),c=()=>{a(),u()};return bo(c),{isSupported:o,stop:c}}function mr(t,e,n,r={}){var s,i,o;const{clone:a=!1,passive:l=!1,eventName:u,deep:c=!1,defaultValue:d,shouldEmit:f}=r,p=wn(),h=n||(p==null?void 0:p.emit)||((s=p==null?void 0:p.$emit)==null?void 0:s.bind(p))||((o=(i=p==null?void 0:p.proxy)==null?void 0:i.$emit)==null?void 0:o.bind(p==null?void 0:p.proxy));let g=u;e||(e="modelValue"),g=g||`update:${e.toString()}`;const w=E=>a?typeof a=="function"?a(E):wN(E):E,x=()=>aN(t[e])?w(t[e]):d,A=E=>{f?f(E)&&h(g,E):h(g,E)};if(l){const E=x(),m=we(E);let v=!1;return Ke(()=>t[e],_=>{v||(v=!0,m.value=w(_),_t(()=>v=!1))}),Ke(m,_=>{!v&&(_!==t[e]||c)&&A(_)},{deep:c}),m}else return H({get(){return x()},set(E){A(E)}})}function Up(t){if(t===null||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e!==null&&e!==Object.prototype&&Object.getPrototypeOf(e)!==null||Symbol.iterator in t?!1:Symbol.toStringTag in t?Object.prototype.toString.call(t)==="[object Module]":!0}function rm(t,e,n=".",r){if(!Up(e))return rm(t,{},n,r);const s=Object.assign({},e);for(const i in t){if(i==="__proto__"||i==="constructor")continue;const o=t[i];o!=null&&(r&&r(s,i,o,n)||(Array.isArray(o)&&Array.isArray(s[i])?s[i]=[...o,...s[i]]:Up(o)&&Up(s[i])?s[i]=rm(o,s[i],(n?`${n}.`:"")+i.toString(),r):s[i]=o))}return s}function xN(t){return(...e)=>e.reduce((n,r)=>rm(n,r,"",t),{})}const SN=xN(),EN=SE(()=>{const t=we(new Map),e=we(),n=H(()=>{for(const o of t.value.values())if(o)return!0;return!1}),r=Gg({scrollBody:we(!0)});let s=null;const i=()=>{document.body.style.paddingRight="",document.body.style.marginRight="",document.body.style.pointerEvents="",document.documentElement.style.removeProperty("--scrollbar-width"),document.body.style.overflow=e.value??"",z0&&(s==null||s()),e.value=void 0};return Ke(n,(o,a)=>{var d;if(!Ss)return;if(!o){a&&i();return}e.value===void 0&&(e.value=document.body.style.overflow);const l=window.innerWidth-document.documentElement.clientWidth,u={padding:l,margin:0},c=(d=r.scrollBody)!=null&&d.value?typeof r.scrollBody.value=="object"?SN({padding:r.scrollBody.value.padding===!0?l:r.scrollBody.value.padding,margin:r.scrollBody.value.margin===!0?l:r.scrollBody.value.margin},u):u:{padding:0,margin:0};l>0&&(document.body.style.paddingRight=typeof c.padding=="number"?`${c.padding}px`:String(c.padding),document.body.style.marginRight=typeof c.margin=="number"?`${c.margin}px`:String(c.margin),document.documentElement.style.setProperty("--scrollbar-width",`${l}px`),document.body.style.overflow="hidden"),z0&&(s=jc(document,"touchmove",f=>AN(f),{passive:!1})),_t(()=>{document.body.style.pointerEvents="none",document.body.style.overflow="hidden"})},{immediate:!0,flush:"sync"}),t});function Fd(t){const e=Math.random().toString(36).substring(2,7),n=EN();n.value.set(e,t??!1);const r=H({get:()=>n.value.get(e)??!1,set:s=>n.value.set(e,s)});return hN(()=>{n.value.delete(e)}),r}function $E(t){const e=window.getComputedStyle(t);if(e.overflowX==="scroll"||e.overflowY==="scroll"||e.overflowX==="auto"&&t.clientWidth<t.scrollWidth||e.overflowY==="auto"&&t.clientHeight<t.scrollHeight)return!0;{const n=t.parentNode;return!(n instanceof Element)||n.tagName==="BODY"?!1:$E(n)}}function AN(t){const e=t||window.event,n=e.target;return n instanceof Element&&$E(n)?!1:e.touches.length>1?!0:(e.preventDefault&&e.cancelable&&e.preventDefault(),!1)}function Aa(t){const e=Gg({dir:we("ltr")});return H(()=>{var n;return(t==null?void 0:t.value)||((n=e.dir)==null?void 0:n.value)||"ltr"})}function eu(t){const e=wn(),n=e==null?void 0:e.type.emits,r={};return n!=null&&n.length||console.warn(`No emitted event found. Please check component: ${e==null?void 0:e.type.__name}`),n==null||n.forEach(s=>{r[tc(Kn(s))]=(...i)=>t(s,...i)}),r}function kE(t){const e=H(()=>y(t)),n=H(()=>new Intl.Collator("en",{usage:"search",...e.value}));return{startsWith:(o,a)=>a.length===0?!0:(o=o.normalize("NFC"),a=a.normalize("NFC"),n.value.compare(o.slice(0,a.length),a)===0),endsWith:(o,a)=>a.length===0?!0:(o=o.normalize("NFC"),a=a.normalize("NFC"),n.value.compare(o.slice(-a.length),a)===0),contains:(o,a)=>{if(a.length===0)return!0;o=o.normalize("NFC"),a=a.normalize("NFC");let l=0;const u=a.length;for(;l+u<=o.length;l++){const c=o.slice(l,l+u);if(n.value.compare(a,c)===0)return!0}return!1}}}let Bp=0;function IE(){Nt(t=>{if(!Ss)return;const e=document.querySelectorAll("[data-reka-focus-guard]");document.body.insertAdjacentElement("afterbegin",e[0]??V0()),document.body.insertAdjacentElement("beforeend",e[1]??V0()),Bp++,t(()=>{Bp===1&&document.querySelectorAll("[data-reka-focus-guard]").forEach(n=>n.remove()),Bp--})})}function V0(){const t=document.createElement("span");return t.setAttribute("data-reka-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}function Yg(t){return H(()=>{var e;return pN(t)?!!((e=Pr(t))!=null&&e.closest("form")):!0})}function Ze(){const t=wn(),e=we(),n=H(()=>{var o,a;return["#text","#comment"].includes((o=e.value)==null?void 0:o.$el.nodeName)?(a=e.value)==null?void 0:a.$el.nextElementSibling:Pr(e)}),r=Object.assign({},t.exposed),s={};for(const o in t.props)Object.defineProperty(s,o,{enumerable:!0,configurable:!0,get:()=>t.props[o]});if(Object.keys(r).length>0)for(const o in r)Object.defineProperty(s,o,{enumerable:!0,configurable:!0,get:()=>r[o]});Object.defineProperty(s,"$el",{enumerable:!0,configurable:!0,get:()=>t.vnode.el}),t.exposed=s;function i(o){e.value=o,o&&(Object.defineProperty(s,"$el",{enumerable:!0,configurable:!0,get:()=>o instanceof Element?o:o.$el}),t.exposed=s)}return{forwardRef:i,currentRef:e,currentElement:n}}function jd(t){const e=wn(),n=Object.keys((e==null?void 0:e.type.props)??{}).reduce((s,i)=>{const o=(e==null?void 0:e.type.props[i]).default;return o!==void 0&&(s[i]=o),s},{}),r=iD(t);return H(()=>{const s={},i=(e==null?void 0:e.vnode.props)??{};return Object.keys(i).forEach(o=>{s[Kn(o)]=i[o]}),Object.keys({...n,...s}).reduce((o,a)=>(r.value[a]!==void 0&&(o[a]=r.value[a]),o),{})})}function Ca(t,e){const n=jd(t),r=e?eu(e):{};return H(()=>({...n.value,...r}))}var CN=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},To=new WeakMap,ku=new WeakMap,Iu={},zp=0,RE=function(t){return t&&(t.host||RE(t.parentNode))},$N=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=RE(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},kN=function(t,e,n,r){var s=$N(e,Array.isArray(t)?t:[t]);Iu[n]||(Iu[n]=new WeakMap);var i=Iu[n],o=[],a=new Set,l=new Set(s),u=function(d){!d||a.has(d)||(a.add(d),u(d.parentNode))};s.forEach(u);var c=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(f){if(a.has(f))c(f);else try{var p=f.getAttribute(r),h=p!==null&&p!=="false",g=(To.get(f)||0)+1,w=(i.get(f)||0)+1;To.set(f,g),i.set(f,w),o.push(f),g===1&&h&&ku.set(f,!0),w===1&&f.setAttribute(n,"true"),h||f.setAttribute(r,"true")}catch(x){console.error("aria-hidden: cannot operate on ",f,x)}})};return c(e),a.clear(),zp++,function(){o.forEach(function(d){var f=To.get(d)-1,p=i.get(d)-1;To.set(d,f),i.set(d,p),f||(ku.has(d)||d.removeAttribute(r),ku.delete(d)),p||d.removeAttribute(n)}),zp--,zp||(To=new WeakMap,To=new WeakMap,ku=new WeakMap,Iu={})}},IN=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=CN(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),kN(r,s,n,"aria-hidden")):function(){return null}};function qd(t){let e;Ke(()=>Pr(t),n=>{n?e=IN(n):e&&e()}),on(()=>{e&&e()})}function Xr(t,e="reka"){return`${e}-${Ep==null?void 0:Ep()}`}function RN(){return{ALT:"Alt",ARROW_DOWN:"ArrowDown",ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight",ARROW_UP:"ArrowUp",BACKSPACE:"Backspace",CAPS_LOCK:"CapsLock",CONTROL:"Control",DELETE:"Delete",END:"End",ENTER:"Enter",ESCAPE:"Escape",F1:"F1",F10:"F10",F11:"F11",F12:"F12",F2:"F2",F3:"F3",F4:"F4",F5:"F5",F6:"F6",F7:"F7",F8:"F8",F9:"F9",HOME:"Home",META:"Meta",PAGE_DOWN:"PageDown",PAGE_UP:"PageUp",SHIFT:"Shift",SPACE:" ",TAB:"Tab",CTRL:"Control",ASTERISK:"*",SPACE_CODE:"Space"}}function ON(t){const e=we(),n=H(()=>{var s;return((s=e.value)==null?void 0:s.width)??0}),r=H(()=>{var s;return((s=e.value)==null?void 0:s.height)??0});return Dt(()=>{const s=Pr(t);if(s){e.value={width:s.offsetWidth,height:s.offsetHeight};const i=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const a=o[0];let l,u;if("borderBoxSize"in a){const c=a.borderBoxSize,d=Array.isArray(c)?c[0]:c;l=d.inlineSize,u=d.blockSize}else l=s.offsetWidth,u=s.offsetHeight;e.value={width:l,height:u}});return i.observe(s,{box:"border-box"}),()=>i.unobserve(s)}else e.value=void 0}),{width:n,height:r}}function TN(t,e){const n=we(t);function r(i){return e[n.value][i]??n.value}return{state:n,dispatch:i=>{n.value=r(i)}}}function Ud(t){const e=EE("",1e3);return{search:e,handleTypeaheadSearch:(s,i)=>{e.value=e.value+s;{const o=cn(),a=i.map(f=>{var p,h;return{...f,textValue:((p=f.value)==null?void 0:p.textValue)??((h=f.ref.textContent)==null?void 0:h.trim())??""}}),l=a.find(f=>f.ref===o),u=a.map(f=>f.textValue),c=PN(u,e.value,l==null?void 0:l.textValue),d=a.find(f=>f.textValue===c);return d&&d.ref.focus(),d==null?void 0:d.ref}},resetTypeahead:()=>{e.value=""}}}function DN(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function PN(t,e,n){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let o=DN(t,Math.max(i,0));s.length===1&&(o=o.filter(u=>u!==n));const l=o.find(u=>u.toLowerCase().startsWith(s.toLowerCase()));return l!==n?l:void 0}function MN(t,e){var w;const n=we({}),r=we("none"),s=we(t),i=t.value?"mounted":"unmounted";let o;const a=((w=e.value)==null?void 0:w.ownerDocument.defaultView)??Zl,{state:l,dispatch:u}=TN(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}}),c=x=>{var A;if(Ss){const E=new CustomEvent(x,{bubbles:!1,cancelable:!1});(A=e.value)==null||A.dispatchEvent(E)}};Ke(t,async(x,A)=>{var m;const E=A!==x;if(await _t(),E){const v=r.value,_=Ru(e.value);x?(u("MOUNT"),c("enter"),_==="none"&&c("after-enter")):_==="none"||_==="undefined"||((m=n.value)==null?void 0:m.display)==="none"?(u("UNMOUNT"),c("leave"),c("after-leave")):A&&v!==_?(u("ANIMATION_OUT"),c("leave")):(u("UNMOUNT"),c("after-leave"))}},{immediate:!0});const d=x=>{const A=Ru(e.value),E=A.includes(CSS.escape(x.animationName)),m=l.value==="mounted"?"enter":"leave";if(x.target===e.value&&E&&(c(`after-${m}`),u("ANIMATION_END"),!s.value)){const v=e.value.style.animationFillMode;e.value.style.animationFillMode="forwards",o=a==null?void 0:a.setTimeout(()=>{var _;((_=e.value)==null?void 0:_.style.animationFillMode)==="forwards"&&(e.value.style.animationFillMode=v)})}x.target===e.value&&A==="none"&&u("ANIMATION_END")},f=x=>{x.target===e.value&&(r.value=Ru(e.value))},p=Ke(e,(x,A)=>{x?(n.value=getComputedStyle(x),x.addEventListener("animationstart",f),x.addEventListener("animationcancel",d),x.addEventListener("animationend",d)):(u("ANIMATION_END"),o!==void 0&&(a==null||a.clearTimeout(o)),A==null||A.removeEventListener("animationstart",f),A==null||A.removeEventListener("animationcancel",d),A==null||A.removeEventListener("animationend",d))},{immediate:!0}),h=Ke(l,()=>{const x=Ru(e.value);r.value=l.value==="mounted"?x:"none"});return on(()=>{p(),h()}),{isPresent:H(()=>["mounted","unmountSuspended"].includes(l.value))}}function Ru(t){return t&&getComputedStyle(t).animationName||"none"}var $a=ue({name:"Presence",props:{present:{type:Boolean,required:!0},forceMount:{type:Boolean}},slots:{},setup(t,{slots:e,expose:n}){var u;const{present:r,forceMount:s}=bn(t),i=we(),{isPresent:o}=MN(r,i);n({present:o});let a=e.default({present:o.value});a=Wg(a||[]);const l=wn();if(a&&(a==null?void 0:a.length)>1){const c=(u=l==null?void 0:l.parent)!=null&&u.type.name?`<${l.parent.type.name} />`:"component";throw new Error([`Detected an invalid children for \`${c}\` for  \`Presence\` component.`,"","Note: Presence works similarly to `v-if` directly, but it waits for animation/transition to finished before unmounting. So it expect only one direct child of valid VNode type.","You can apply a few solutions:",["Provide a single child element so that `presence` directive attach correctly.","Ensure the first child is an actual element instead of a raw text node or comment node."].map(d=>`  - ${d}`).join(`
`)].join(`
`))}return()=>s.value||r.value||o.value?dr(e.default({present:o.value})[0],{ref:c=>{const d=Pr(c);return typeof(d==null?void 0:d.hasAttribute)>"u"||(d!=null&&d.hasAttribute("data-reka-popper-content-wrapper")?i.value=d.firstElementChild:i.value=d),d}}):null}});const sm=ue({name:"PrimitiveSlot",inheritAttrs:!1,setup(t,{attrs:e,slots:n}){return()=>{var l;if(!n.default)return null;const r=Wg(n.default()),s=r.findIndex(u=>u.type!==Yr);if(s===-1)return r;const i=r[s];(l=i.props)==null||delete l.ref;const o=i.props?Te(e,i.props):e,a=fo({...i,props:{}},o);return r.length===1?a:(r[s]=a,r)}}}),LN=["area","img","input"],tt=ue({name:"Primitive",inheritAttrs:!1,props:{asChild:{type:Boolean,default:!1},as:{type:[String,Object],default:"div"}},setup(t,{attrs:e,slots:n}){const r=t.asChild?"template":t.as;return typeof r=="string"&&LN.includes(r)?()=>dr(r,e):r!=="template"?()=>dr(t.as,e,{default:n.default}):()=>dr(sm,e,{default:n.default})}});function Oi(){const t=we(),e=H(()=>{var n,r;return["#text","#comment"].includes((n=t.value)==null?void 0:n.$el.nodeName)?(r=t.value)==null?void 0:r.$el.nextElementSibling:Pr(t)});return{primitiveElement:t,currentElement:e}}const[Ni,NN]=Jt("DialogRoot");var FN=ue({inheritAttrs:!1,__name:"DialogRoot",props:{open:{type:Boolean,required:!1,default:void 0},defaultOpen:{type:Boolean,required:!1,default:!1},modal:{type:Boolean,required:!1,default:!0}},emits:["update:open"],setup(t,{emit:e}){const n=t,s=mr(n,"open",e,{defaultValue:n.defaultOpen,passive:n.open===void 0}),i=we(),o=we(),{modal:a}=bn(n);return NN({open:s,modal:a,openModal:()=>{s.value=!0},onOpenChange:l=>{s.value=l},onOpenToggle:()=>{s.value=!s.value},contentId:"",titleId:"",descriptionId:"",triggerElement:i,contentElement:o}),(l,u)=>Ee(l.$slots,"default",{open:y(s),close:()=>s.value=!1})}}),jN=FN;const qN="dismissableLayer.pointerDownOutside",UN="dismissableLayer.focusOutside";function OE(t,e){const n=e.closest("[data-dismissable-layer]"),r=t.dataset.dismissableLayer===""?t:t.querySelector("[data-dismissable-layer]"),s=Array.from(t.ownerDocument.querySelectorAll("[data-dismissable-layer]"));return!!(n&&(r===n||s.indexOf(r)<s.indexOf(n)))}function BN(t,e,n=!0){var o;const r=((o=e==null?void 0:e.value)==null?void 0:o.ownerDocument)??(globalThis==null?void 0:globalThis.document),s=we(!1),i=we(()=>{});return Nt(a=>{if(!Ss||!vn(n))return;const l=async c=>{const d=c.target;if(!(!(e!=null&&e.value)||!d)){if(OE(e.value,d)){s.value=!1;return}if(c.target&&!s.value){let p=function(){Nd(qN,t,f)};const f={originalEvent:c};c.pointerType==="touch"?(r.removeEventListener("click",i.value),i.value=p,r.addEventListener("click",i.value,{once:!0})):p()}else r.removeEventListener("click",i.value);s.value=!1}},u=window.setTimeout(()=>{r.addEventListener("pointerdown",l)},0);a(()=>{window.clearTimeout(u),r.removeEventListener("pointerdown",l),r.removeEventListener("click",i.value)})}),{onPointerDownCapture:()=>{vn(n)&&(s.value=!0)}}}function zN(t,e,n=!0){var i;const r=((i=e==null?void 0:e.value)==null?void 0:i.ownerDocument)??(globalThis==null?void 0:globalThis.document),s=we(!1);return Nt(o=>{if(!Ss||!vn(n))return;const a=async l=>{if(!(e!=null&&e.value))return;await _t(),await _t();const u=l.target;!e.value||!u||OE(e.value,u)||l.target&&!s.value&&Nd(UN,t,{originalEvent:l})};r.addEventListener("focusin",a),o(()=>r.removeEventListener("focusin",a))}),{onFocusCapture:()=>{vn(n)&&(s.value=!0)},onBlurCapture:()=>{vn(n)&&(s.value=!1)}}}const Fr=tr({layersRoot:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set});var VN=ue({__name:"DismissableLayer",props:{disableOutsidePointerEvents:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","dismiss"],setup(t,{emit:e}){const n=t,r=e,{forwardRef:s,currentElement:i}=Ze(),o=H(()=>{var h;return((h=i.value)==null?void 0:h.ownerDocument)??globalThis.document}),a=H(()=>Fr.layersRoot),l=H(()=>i.value?Array.from(a.value).indexOf(i.value):-1),u=H(()=>Fr.layersWithOutsidePointerEventsDisabled.size>0),c=H(()=>{const h=Array.from(a.value),[g]=[...Fr.layersWithOutsidePointerEventsDisabled].slice(-1),w=h.indexOf(g);return l.value>=w}),d=BN(async h=>{const g=[...Fr.branches].some(w=>w==null?void 0:w.contains(h.target));!c.value||g||(r("pointerDownOutside",h),r("interactOutside",h),await _t(),h.defaultPrevented||r("dismiss"))},i),f=zN(h=>{[...Fr.branches].some(w=>w==null?void 0:w.contains(h.target))||(r("focusOutside",h),r("interactOutside",h),h.defaultPrevented||r("dismiss"))},i);Jg("Escape",h=>{l.value===a.value.size-1&&(r("escapeKeyDown",h),h.defaultPrevented||r("dismiss"))});let p;return Nt(h=>{i.value&&(n.disableOutsidePointerEvents&&(Fr.layersWithOutsidePointerEventsDisabled.size===0&&(p=o.value.body.style.pointerEvents,o.value.body.style.pointerEvents="none"),Fr.layersWithOutsidePointerEventsDisabled.add(i.value)),a.value.add(i.value),h(()=>{n.disableOutsidePointerEvents&&Fr.layersWithOutsidePointerEventsDisabled.size===1&&(o.value.body.style.pointerEvents=p)}))}),Nt(h=>{h(()=>{i.value&&(a.value.delete(i.value),Fr.layersWithOutsidePointerEventsDisabled.delete(i.value))})}),(h,g)=>(I(),Z(y(tt),{ref:y(s),"as-child":h.asChild,as:h.as,"data-dismissable-layer":"",style:Xt({pointerEvents:u.value?c.value?"auto":"none":void 0}),onFocusCapture:y(f).onFocusCapture,onBlurCapture:y(f).onBlurCapture,onPointerdownCapture:y(d).onPointerDownCapture},{default:K(()=>[Ee(h.$slots,"default")]),_:3},8,["as-child","as","style","onFocusCapture","onBlurCapture","onPointerdownCapture"]))}}),Bd=VN,HN=ue({__name:"DismissableLayerBranch",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(t){const e=t,{forwardRef:n,currentElement:r}=Ze();return Dt(()=>{Fr.branches.add(r.value)}),on(()=>{Fr.branches.delete(r.value)}),(s,i)=>(I(),Z(y(tt),Te({ref:y(n)},e),{default:K(()=>[Ee(s.$slots,"default")]),_:3},16))}}),KN=HN;const WN=oN(()=>we([]));function GN(){const t=WN();return{add(e){const n=t.value[0];e!==n&&(n==null||n.pause()),t.value=H0(t.value,e),t.value.unshift(e)},remove(e){var n;t.value=H0(t.value,e),(n=t.value[0])==null||n.resume()}}}function H0(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function JN(t){return t.filter(e=>e.tagName!=="A")}const Vp="focusScope.autoFocusOnMount",Hp="focusScope.autoFocusOnUnmount",K0={bubbles:!1,cancelable:!0};function uc(t,{select:e=!1}={}){const n=cn();for(const r of t)if(di(r,{select:e}),cn()!==n)return!0}function YN(t){const e=Xg(t),n=W0(e,t),r=W0(e.reverse(),t);return[n,r]}function Xg(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function W0(t,e){for(const n of t)if(!XN(n,{upTo:e}))return n}function XN(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function QN(t){return t instanceof HTMLInputElement&&"select"in t}function di(t,{select:e=!1}={}){if(t&&t.focus){const n=cn();t.focus({preventScroll:!0}),t!==n&&QN(t)&&e&&t.select()}}var ZN=ue({__name:"FocusScope",props:{loop:{type:Boolean,required:!1,default:!1},trapped:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["mountAutoFocus","unmountAutoFocus"],setup(t,{emit:e}){const n=t,r=e,{currentRef:s,currentElement:i}=Ze(),o=we(null),a=GN(),l=tr({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}});Nt(c=>{if(!Ss)return;const d=i.value;if(!n.trapped)return;function f(w){if(l.paused||!d)return;const x=w.target;d.contains(x)?o.value=x:di(o.value,{select:!0})}function p(w){if(l.paused||!d)return;const x=w.relatedTarget;x!==null&&(d.contains(x)||di(o.value,{select:!0}))}function h(w){d.contains(o.value)||di(d)}document.addEventListener("focusin",f),document.addEventListener("focusout",p);const g=new MutationObserver(h);d&&g.observe(d,{childList:!0,subtree:!0}),c(()=>{document.removeEventListener("focusin",f),document.removeEventListener("focusout",p),g.disconnect()})}),Nt(async c=>{const d=i.value;if(await _t(),!d)return;a.add(l);const f=cn();if(!d.contains(f)){const h=new CustomEvent(Vp,K0);d.addEventListener(Vp,g=>r("mountAutoFocus",g)),d.dispatchEvent(h),h.defaultPrevented||(uc(JN(Xg(d)),{select:!0}),cn()===f&&di(d))}c(()=>{d.removeEventListener(Vp,w=>r("mountAutoFocus",w));const h=new CustomEvent(Hp,K0),g=w=>{r("unmountAutoFocus",w)};d.addEventListener(Hp,g),d.dispatchEvent(h),setTimeout(()=>{h.defaultPrevented||di(f??document.body,{select:!0}),d.removeEventListener(Hp,g),a.remove(l)},0)})});function u(c){if(!n.loop&&!n.trapped||l.paused)return;const d=c.key==="Tab"&&!c.altKey&&!c.ctrlKey&&!c.metaKey,f=cn();if(d&&f){const p=c.currentTarget,[h,g]=YN(p);h&&g?!c.shiftKey&&f===g?(c.preventDefault(),n.loop&&di(h,{select:!0})):c.shiftKey&&f===h&&(c.preventDefault(),n.loop&&di(g,{select:!0})):f===p&&c.preventDefault()}}return(c,d)=>(I(),Z(y(tt),{ref_key:"currentRef",ref:s,tabindex:"-1","as-child":c.asChild,as:c.as,onKeydown:u},{default:K(()=>[Ee(c.$slots,"default")]),_:3},8,["as-child","as"]))}}),Qg=ZN;const eF="menu.itemSelect",im=["Enter"," "],tF=["ArrowDown","PageUp","Home"],TE=["ArrowUp","PageDown","End"],nF=[...tF,...TE];[...im],[...im];function DE(t){return t?"open":"closed"}function om(t){const e=cn();for(const n of t)if(n===e||(n.focus(),cn()!==e))return}function rF(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i].x,l=e[i].y,u=e[o].x,c=e[o].y;l>r!=c>r&&n<(u-a)*(r-l)/(c-l)+a&&(s=!s)}return s}function sF(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return rF(n,e)}function am(t){return t.pointerType==="mouse"}var iF=ue({__name:"DialogContentImpl",props:{forceMount:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const n=t,r=e,s=Ni(),{forwardRef:i,currentElement:o}=Ze();return s.titleId||(s.titleId=Xr(void 0,"reka-dialog-title")),s.descriptionId||(s.descriptionId=Xr(void 0,"reka-dialog-description")),Dt(()=>{s.contentElement=o,cn()!==document.body&&(s.triggerElement.value=cn())}),(a,l)=>(I(),Z(y(Qg),{"as-child":"",loop:"",trapped:n.trapFocus,onMountAutoFocus:l[5]||(l[5]=u=>r("openAutoFocus",u)),onUnmountAutoFocus:l[6]||(l[6]=u=>r("closeAutoFocus",u))},{default:K(()=>[N(y(Bd),Te({id:y(s).contentId,ref:y(i),as:a.as,"as-child":a.asChild,"disable-outside-pointer-events":a.disableOutsidePointerEvents,role:"dialog","aria-describedby":y(s).descriptionId,"aria-labelledby":y(s).titleId,"data-state":y(DE)(y(s).open.value)},a.$attrs,{onDismiss:l[0]||(l[0]=u=>y(s).onOpenChange(!1)),onEscapeKeyDown:l[1]||(l[1]=u=>r("escapeKeyDown",u)),onFocusOutside:l[2]||(l[2]=u=>r("focusOutside",u)),onInteractOutside:l[3]||(l[3]=u=>r("interactOutside",u)),onPointerDownOutside:l[4]||(l[4]=u=>r("pointerDownOutside",u))}),{default:K(()=>[Ee(a.$slots,"default")]),_:3},16,["id","as","as-child","disable-outside-pointer-events","aria-describedby","aria-labelledby","data-state"])]),_:3},8,["trapped"]))}}),PE=iF,oF=ue({__name:"DialogContentModal",props:{forceMount:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const n=t,r=e,s=Ni(),i=eu(r),{forwardRef:o,currentElement:a}=Ze();return qd(a),(l,u)=>(I(),Z(PE,Te({...n,...y(i)},{ref:y(o),"trap-focus":y(s).open.value,"disable-outside-pointer-events":!0,onCloseAutoFocus:u[0]||(u[0]=c=>{var d;c.defaultPrevented||(c.preventDefault(),(d=y(s).triggerElement.value)==null||d.focus())}),onPointerDownOutside:u[1]||(u[1]=c=>{const d=c.detail.originalEvent,f=d.button===0&&d.ctrlKey===!0;(d.button===2||f)&&c.preventDefault()}),onFocusOutside:u[2]||(u[2]=c=>{c.preventDefault()})}),{default:K(()=>[Ee(l.$slots,"default")]),_:3},16,["trap-focus"]))}}),aF=oF,lF=ue({__name:"DialogContentNonModal",props:{forceMount:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const n=t,s=eu(e);Ze();const i=Ni(),o=we(!1),a=we(!1);return(l,u)=>(I(),Z(PE,Te({...n,...y(s)},{"trap-focus":!1,"disable-outside-pointer-events":!1,onCloseAutoFocus:u[0]||(u[0]=c=>{var d;c.defaultPrevented||(o.value||(d=y(i).triggerElement.value)==null||d.focus(),c.preventDefault()),o.value=!1,a.value=!1}),onInteractOutside:u[1]||(u[1]=c=>{var p;c.defaultPrevented||(o.value=!0,c.detail.originalEvent.type==="pointerdown"&&(a.value=!0));const d=c.target;((p=y(i).triggerElement.value)==null?void 0:p.contains(d))&&c.preventDefault(),c.detail.originalEvent.type==="focusin"&&a.value&&c.preventDefault()})}),{default:K(()=>[Ee(l.$slots,"default")]),_:3},16))}}),uF=lF,cF=ue({__name:"DialogContent",props:{forceMount:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const n=t,r=e,s=Ni(),i=eu(r),{forwardRef:o}=Ze();return(a,l)=>(I(),Z(y($a),{present:a.forceMount||y(s).open.value},{default:K(()=>[y(s).modal.value?(I(),Z(aF,Te({key:0,ref:y(o)},{...n,...y(i),...a.$attrs}),{default:K(()=>[Ee(a.$slots,"default")]),_:3},16)):(I(),Z(uF,Te({key:1,ref:y(o)},{...n,...y(i),...a.$attrs}),{default:K(()=>[Ee(a.$slots,"default")]),_:3},16))]),_:3},8,["present"]))}}),dF=cF,fF=ue({__name:"DialogDescription",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"p"}},setup(t){const e=t;Ze();const n=Ni();return(r,s)=>(I(),Z(y(tt),Te(e,{id:y(n).descriptionId}),{default:K(()=>[Ee(r.$slots,"default")]),_:3},16,["id"]))}}),pF=fF,hF=ue({__name:"DialogOverlayImpl",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(t){const e=Ni();return Fd(!0),Ze(),(n,r)=>(I(),Z(y(tt),{as:n.as,"as-child":n.asChild,"data-state":y(e).open.value?"open":"closed",style:{"pointer-events":"auto"}},{default:K(()=>[Ee(n.$slots,"default")]),_:3},8,["as","as-child","data-state"]))}}),mF=hF,gF=ue({__name:"DialogOverlay",props:{forceMount:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(t){const e=Ni(),{forwardRef:n}=Ze();return(r,s)=>{var i;return(i=y(e))!=null&&i.modal.value?(I(),Z(y($a),{key:0,present:r.forceMount||y(e).open.value},{default:K(()=>[N(mF,Te(r.$attrs,{ref:y(n),as:r.as,"as-child":r.asChild}),{default:K(()=>[Ee(r.$slots,"default")]),_:3},16,["as","as-child"])]),_:3},8,["present"])):ke("v-if",!0)}}}),yF=gF,vF=ue({__name:"Teleport",props:{to:{type:null,required:!1,default:"body"},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(t){const e=AE();return(n,r)=>y(e)||n.forceMount?(I(),Z(Id,{key:0,to:n.to,disabled:n.disabled,defer:n.defer},[Ee(n.$slots,"default")],8,["to","disabled","defer"])):ke("v-if",!0)}}),zd=vF,bF=ue({__name:"DialogPortal",props:{to:{type:null,required:!1},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(t){const e=t;return(n,r)=>(I(),Z(y(zd),Pn(sr(e)),{default:K(()=>[Ee(n.$slots,"default")]),_:3},16))}}),wF=bF,_F=ue({__name:"DialogTitle",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"h2"}},setup(t){const e=t,n=Ni();return Ze(),(r,s)=>(I(),Z(y(tt),Te(e,{id:y(n).titleId}),{default:K(()=>[Ee(r.$slots,"default")]),_:3},16,["id"]))}}),xF=_F;const G0="data-reka-collection-item";function yr(t={}){const{key:e="",isProvider:n=!1}=t,r=`${e}CollectionProvider`;let s;if(n){const c=we(new Map);s={collectionRef:we(),itemMap:c},cr(r,s)}else s=Kt(r);const i=(c=!1)=>{const d=s.collectionRef.value;if(!d)return[];const f=Array.from(d.querySelectorAll(`[${G0}]`)),h=Array.from(s.itemMap.value.values()).sort((g,w)=>f.indexOf(g.ref)-f.indexOf(w.ref));return c?h:h.filter(g=>g.ref.dataset.disabled!=="")},o=ue({name:"CollectionSlot",setup(c,{slots:d}){const{primitiveElement:f,currentElement:p}=Oi();return Ke(p,()=>{s.collectionRef.value=p.value}),()=>dr(sm,{ref:f},d)}}),a=ue({name:"CollectionItem",inheritAttrs:!1,props:{value:{validator:()=>!0}},setup(c,{slots:d,attrs:f}){const{primitiveElement:p,currentElement:h}=Oi();return Nt(g=>{if(h.value){const w=Qe(h.value);s.itemMap.value.set(w,{ref:h.value,value:c.value}),g(()=>s.itemMap.value.delete(w))}}),()=>dr(sm,{...f,[G0]:"",ref:p},d)}}),l=H(()=>Array.from(s.itemMap.value.values())),u=H(()=>s.itemMap.value.size);return{getItems:i,reactiveItems:l,itemMapSize:u,CollectionSlot:o,CollectionItem:a}}const SF="rovingFocusGroup.onEntryFocus",EF={bubbles:!1,cancelable:!0},AF={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function CF(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function $F(t,e,n){const r=CF(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return AF[r]}function kF(t,e=!1){const n=cn();for(const r of t)if(r===n||(r.focus({preventScroll:e}),cn()!==n))return}const[DX,IF]=Jt("RovingFocusGroup");var RF=ue({__name:"RovingFocusGroup",props:{orientation:{type:String,required:!1,default:void 0},dir:{type:String,required:!1},loop:{type:Boolean,required:!1,default:!1},currentTabStopId:{type:[String,null],required:!1},defaultCurrentTabStopId:{type:String,required:!1},preventScrollOnEntryFocus:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["entryFocus","update:currentTabStopId"],setup(t,{expose:e,emit:n}){const r=t,s=n,{loop:i,orientation:o,dir:a}=bn(r),l=Aa(a),u=mr(r,"currentTabStopId",s,{defaultValue:r.defaultCurrentTabStopId,passive:r.currentTabStopId===void 0}),c=we(!1),d=we(!1),f=we(0),{getItems:p,CollectionSlot:h}=yr({isProvider:!0});function g(x){const A=!d.value;if(x.currentTarget&&x.target===x.currentTarget&&A&&!c.value){const E=new CustomEvent(SF,EF);if(x.currentTarget.dispatchEvent(E),s("entryFocus",E),!E.defaultPrevented){const m=p().map(k=>k.ref).filter(k=>k.dataset.disabled!==""),v=m.find(k=>k.getAttribute("data-active")===""),_=m.find(k=>k.getAttribute("data-highlighted")===""),C=m.find(k=>k.id===u.value),$=[v,_,C,...m].filter(Boolean);kF($,r.preventScrollOnEntryFocus)}}d.value=!1}function w(){setTimeout(()=>{d.value=!1},1)}return e({getItems:p}),IF({loop:i,dir:l,orientation:o,currentTabStopId:u,onItemFocus:x=>{u.value=x},onItemShiftTab:()=>{c.value=!0},onFocusableItemAdd:()=>{f.value++},onFocusableItemRemove:()=>{f.value--}}),(x,A)=>(I(),Z(y(h),null,{default:K(()=>[N(y(tt),{tabindex:c.value||f.value===0?-1:0,"data-orientation":y(o),as:x.as,"as-child":x.asChild,dir:y(l),style:{outline:"none"},onMousedown:A[0]||(A[0]=E=>d.value=!0),onMouseup:w,onFocus:g,onBlur:A[1]||(A[1]=E=>c.value=!1)},{default:K(()=>[Ee(x.$slots,"default")]),_:3},8,["tabindex","data-orientation","as","as-child","dir"])]),_:3}))}}),OF=RF,TF=ue({__name:"VisuallyHidden",props:{feature:{type:String,required:!1,default:"focusable"},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(t){return(e,n)=>(I(),Z(y(tt),{as:e.as,"as-child":e.asChild,"aria-hidden":e.feature==="focusable"?"true":void 0,"data-hidden":e.feature==="fully-hidden"?"":void 0,tabindex:e.feature==="fully-hidden"?"-1":void 0,style:{position:"absolute",border:0,width:"1px",height:"1px",padding:0,margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",whiteSpace:"nowrap",wordWrap:"normal",top:"-1px",left:"-1px"}},{default:K(()=>[Ee(e.$slots,"default")]),_:3},8,["as","as-child","aria-hidden","data-hidden","tabindex"]))}}),Vd=TF,DF=ue({inheritAttrs:!1,__name:"VisuallyHiddenInputBubble",props:{name:{type:String,required:!0},value:{type:null,required:!0},checked:{type:Boolean,required:!1,default:void 0},required:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},feature:{type:String,required:!1,default:"fully-hidden"}},setup(t){const e=t,{primitiveElement:n,currentElement:r}=Oi(),s=H(()=>e.checked??e.value);return Ke(s,(i,o)=>{if(!r.value)return;const a=r.value,l=window.HTMLInputElement.prototype,c=Object.getOwnPropertyDescriptor(l,"value").set;if(c&&i!==o){const d=new Event("input",{bubbles:!0}),f=new Event("change",{bubbles:!0});c.call(a,i),a.dispatchEvent(d),a.dispatchEvent(f)}}),(i,o)=>(I(),Z(Vd,Te({ref_key:"primitiveElement",ref:n},{...e,...i.$attrs},{as:"input"}),null,16))}}),J0=DF,PF=ue({inheritAttrs:!1,__name:"VisuallyHiddenInput",props:{name:{type:String,required:!0},value:{type:null,required:!0},checked:{type:Boolean,required:!1,default:void 0},required:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},feature:{type:String,required:!1,default:"fully-hidden"}},setup(t){const e=t,n=H(()=>typeof e.value=="object"&&Array.isArray(e.value)&&e.value.length===0&&e.required),r=H(()=>typeof e.value=="string"||typeof e.value=="number"||typeof e.value=="boolean"||e.value===null||e.value===void 0?[{name:e.name,value:e.value}]:typeof e.value=="object"&&Array.isArray(e.value)?e.value.flatMap((s,i)=>typeof s=="object"?Object.entries(s).map(([o,a])=>({name:`${e.name}[${i}][${o}]`,value:a})):{name:`${e.name}[${i}]`,value:s}):e.value!==null&&typeof e.value=="object"&&!Array.isArray(e.value)?Object.entries(e.value).map(([s,i])=>({name:`${e.name}[${s}]`,value:i})):[]);return(s,i)=>(I(),ae(je,null,[ke(" We render single input if it's required "),n.value?(I(),Z(J0,Te({key:s.name},{...e,...s.$attrs},{name:s.name,value:s.value}),null,16,["name","value"])):(I(!0),ae(je,{key:1},at(r.value,o=>(I(),Z(J0,Te({key:o.name},{ref_for:!0},{...e,...s.$attrs},{name:o.name,value:o.value}),null,16,["name","value"]))),128))],2112))}}),ME=PF;const[LE,MF]=Jt("PopperRoot");var LF=ue({inheritAttrs:!1,__name:"PopperRoot",setup(t){const e=we();return MF({anchor:e,onAnchorChange:n=>e.value=n}),(n,r)=>Ee(n.$slots,"default")}}),Zg=LF,NF=ue({__name:"PopperAnchor",props:{reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(t){const e=t,{forwardRef:n,currentElement:r}=Ze(),s=LE();return lS(()=>{s.onAnchorChange(e.reference??r.value)}),(i,o)=>(I(),Z(y(tt),{ref:y(n),as:i.as,"as-child":i.asChild},{default:K(()=>[Ee(i.$slots,"default")]),_:3},8,["as","as-child"]))}}),ey=NF;function FF(t){return t!==null}function jF(t){return{name:"transformOrigin",options:t,fn(e){var w,x,A;const{placement:n,rects:r,middlewareData:s}=e,o=((w=s.arrow)==null?void 0:w.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[u,c]=lm(n),d={start:"0%",center:"50%",end:"100%"}[c],f=(((x=s.arrow)==null?void 0:x.x)??0)+a/2,p=(((A=s.arrow)==null?void 0:A.y)??0)+l/2;let h="",g="";return u==="bottom"?(h=o?d:`${f}px`,g=`${-l}px`):u==="top"?(h=o?d:`${f}px`,g=`${r.floating.height+l}px`):u==="right"?(h=`${-l}px`,g=o?d:`${p}px`):u==="left"&&(h=`${r.floating.width+l}px`,g=o?d:`${p}px`),{data:{x:h,y:g}}}}}function lm(t){const[e,n="center"]=t.split("-");return[e,n]}const qF=["top","right","bottom","left"],Ti=Math.min,or=Math.max,qc=Math.round,Ou=Math.floor,gs=t=>({x:t,y:t}),UF={left:"right",right:"left",bottom:"top",top:"bottom"},BF={start:"end",end:"start"};function um(t,e,n){return or(t,Ti(e,n))}function Xs(t,e){return typeof t=="function"?t(e):t}function Qs(t){return t.split("-")[0]}function ka(t){return t.split("-")[1]}function ty(t){return t==="x"?"y":"x"}function ny(t){return t==="y"?"height":"width"}const zF=new Set(["top","bottom"]);function ps(t){return zF.has(Qs(t))?"y":"x"}function ry(t){return ty(ps(t))}function VF(t,e,n){n===void 0&&(n=!1);const r=ka(t),s=ry(t),i=ny(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=Uc(o)),[o,Uc(o)]}function HF(t){const e=Uc(t);return[cm(t),e,cm(e)]}function cm(t){return t.replace(/start|end/g,e=>BF[e])}const Y0=["left","right"],X0=["right","left"],KF=["top","bottom"],WF=["bottom","top"];function GF(t,e,n){switch(t){case"top":case"bottom":return n?e?X0:Y0:e?Y0:X0;case"left":case"right":return e?KF:WF;default:return[]}}function JF(t,e,n,r){const s=ka(t);let i=GF(Qs(t),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(cm)))),i}function Uc(t){return t.replace(/left|right|bottom|top/g,e=>UF[e])}function YF(t){return{top:0,right:0,bottom:0,left:0,...t}}function NE(t){return typeof t!="number"?YF(t):{top:t,right:t,bottom:t,left:t}}function Bc(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function Q0(t,e,n){let{reference:r,floating:s}=t;const i=ps(e),o=ry(e),a=ny(o),l=Qs(e),u=i==="y",c=r.x+r.width/2-s.width/2,d=r.y+r.height/2-s.height/2,f=r[a]/2-s[a]/2;let p;switch(l){case"top":p={x:c,y:r.y-s.height};break;case"bottom":p={x:c,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:d};break;case"left":p={x:r.x-s.width,y:d};break;default:p={x:r.x,y:r.y}}switch(ka(e)){case"start":p[o]-=f*(n&&u?-1:1);break;case"end":p[o]+=f*(n&&u?-1:1);break}return p}const XF=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,a=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:c,y:d}=Q0(u,r,l),f=r,p={},h=0;for(let g=0;g<a.length;g++){const{name:w,fn:x}=a[g],{x:A,y:E,data:m,reset:v}=await x({x:c,y:d,initialPlacement:r,placement:f,strategy:s,middlewareData:p,rects:u,platform:o,elements:{reference:t,floating:e}});c=A??c,d=E??d,p={...p,[w]:{...p[w],...m}},v&&h<=50&&(h++,typeof v=="object"&&(v.placement&&(f=v.placement),v.rects&&(u=v.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):v.rects),{x:c,y:d}=Q0(u,f,l)),g=-1)}return{x:c,y:d,placement:f,strategy:s,middlewareData:p}};async function Pl(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:a,strategy:l}=t,{boundary:u="clippingAncestors",rootBoundary:c="viewport",elementContext:d="floating",altBoundary:f=!1,padding:p=0}=Xs(e,t),h=NE(p),w=a[f?d==="floating"?"reference":"floating":d],x=Bc(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(w)))==null||n?w:w.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:u,rootBoundary:c,strategy:l})),A=d==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,E=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),m=await(i.isElement==null?void 0:i.isElement(E))?await(i.getScale==null?void 0:i.getScale(E))||{x:1,y:1}:{x:1,y:1},v=Bc(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:A,offsetParent:E,strategy:l}):A);return{top:(x.top-v.top+h.top)/m.y,bottom:(v.bottom-x.bottom+h.bottom)/m.y,left:(x.left-v.left+h.left)/m.x,right:(v.right-x.right+h.right)/m.x}}const QF=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:o,elements:a,middlewareData:l}=e,{element:u,padding:c=0}=Xs(t,e)||{};if(u==null)return{};const d=NE(c),f={x:n,y:r},p=ry(s),h=ny(p),g=await o.getDimensions(u),w=p==="y",x=w?"top":"left",A=w?"bottom":"right",E=w?"clientHeight":"clientWidth",m=i.reference[h]+i.reference[p]-f[p]-i.floating[h],v=f[p]-i.reference[p],_=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let C=_?_[E]:0;(!C||!await(o.isElement==null?void 0:o.isElement(_)))&&(C=a.floating[E]||i.floating[h]);const $=m/2-v/2,k=C/2-g[h]/2-1,D=Ti(d[x],k),G=Ti(d[A],k),J=D,W=C-g[h]-G,j=C/2-g[h]/2+$,se=um(J,j,W),R=!l.arrow&&ka(s)!=null&&j!==se&&i.reference[h]/2-(j<J?D:G)-g[h]/2<0,V=R?j<J?j-J:j-W:0;return{[p]:f[p]+V,data:{[p]:se,centerOffset:j-se-V,...R&&{alignmentOffset:V}},reset:R}}}),ZF=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:l,elements:u}=e,{mainAxis:c=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:h="none",flipAlignment:g=!0,...w}=Xs(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const x=Qs(s),A=ps(a),E=Qs(a)===a,m=await(l.isRTL==null?void 0:l.isRTL(u.floating)),v=f||(E||!g?[Uc(a)]:HF(a)),_=h!=="none";!f&&_&&v.push(...JF(a,g,h,m));const C=[a,...v],$=await Pl(e,w),k=[];let D=((r=i.flip)==null?void 0:r.overflows)||[];if(c&&k.push($[x]),d){const j=VF(s,o,m);k.push($[j[0]],$[j[1]])}if(D=[...D,{placement:s,overflows:k}],!k.every(j=>j<=0)){var G,J;const j=(((G=i.flip)==null?void 0:G.index)||0)+1,se=C[j];if(se&&(!(d==="alignment"?A!==ps(se):!1)||D.every(F=>ps(F.placement)===A?F.overflows[0]>0:!0)))return{data:{index:j,overflows:D},reset:{placement:se}};let R=(J=D.filter(V=>V.overflows[0]<=0).sort((V,F)=>V.overflows[1]-F.overflows[1])[0])==null?void 0:J.placement;if(!R)switch(p){case"bestFit":{var W;const V=(W=D.filter(F=>{if(_){const ee=ps(F.placement);return ee===A||ee==="y"}return!0}).map(F=>[F.placement,F.overflows.filter(ee=>ee>0).reduce((ee,z)=>ee+z,0)]).sort((F,ee)=>F[1]-ee[1])[0])==null?void 0:W[0];V&&(R=V);break}case"initialPlacement":R=a;break}if(s!==R)return{reset:{placement:R}}}return{}}}};function Z0(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function ew(t){return qF.some(e=>t[e]>=0)}const ej=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=Xs(t,e);switch(r){case"referenceHidden":{const i=await Pl(e,{...s,elementContext:"reference"}),o=Z0(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:ew(o)}}}case"escaped":{const i=await Pl(e,{...s,altBoundary:!0}),o=Z0(i,n.floating);return{data:{escapedOffsets:o,escaped:ew(o)}}}default:return{}}}}},FE=new Set(["left","top"]);async function tj(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=Qs(n),a=ka(n),l=ps(n)==="y",u=FE.has(o)?-1:1,c=i&&l?-1:1,d=Xs(e,t);let{mainAxis:f,crossAxis:p,alignmentAxis:h}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof h=="number"&&(p=a==="end"?h*-1:h),l?{x:p*c,y:f*u}:{x:f*u,y:p*c}}const nj=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:o,middlewareData:a}=e,l=await tj(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+l.x,y:i+l.y,data:{...l,placement:o}}}}},rj=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:w=>{let{x,y:A}=w;return{x,y:A}}},...l}=Xs(t,e),u={x:n,y:r},c=await Pl(e,l),d=ps(Qs(s)),f=ty(d);let p=u[f],h=u[d];if(i){const w=f==="y"?"top":"left",x=f==="y"?"bottom":"right",A=p+c[w],E=p-c[x];p=um(A,p,E)}if(o){const w=d==="y"?"top":"left",x=d==="y"?"bottom":"right",A=h+c[w],E=h-c[x];h=um(A,h,E)}const g=a.fn({...e,[f]:p,[d]:h});return{...g,data:{x:g.x-n,y:g.y-r,enabled:{[f]:i,[d]:o}}}}}},sj=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:u=!0}=Xs(t,e),c={x:n,y:r},d=ps(s),f=ty(d);let p=c[f],h=c[d];const g=Xs(a,e),w=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(l){const E=f==="y"?"height":"width",m=i.reference[f]-i.floating[E]+w.mainAxis,v=i.reference[f]+i.reference[E]-w.mainAxis;p<m?p=m:p>v&&(p=v)}if(u){var x,A;const E=f==="y"?"width":"height",m=FE.has(Qs(s)),v=i.reference[d]-i.floating[E]+(m&&((x=o.offset)==null?void 0:x[d])||0)+(m?0:w.crossAxis),_=i.reference[d]+i.reference[E]+(m?0:((A=o.offset)==null?void 0:A[d])||0)-(m?w.crossAxis:0);h<v?h=v:h>_&&(h=_)}return{[f]:p,[d]:h}}}},ij=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:o,elements:a}=e,{apply:l=()=>{},...u}=Xs(t,e),c=await Pl(e,u),d=Qs(s),f=ka(s),p=ps(s)==="y",{width:h,height:g}=i.floating;let w,x;d==="top"||d==="bottom"?(w=d,x=f===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(x=d,w=f==="end"?"top":"bottom");const A=g-c.top-c.bottom,E=h-c.left-c.right,m=Ti(g-c[w],A),v=Ti(h-c[x],E),_=!e.middlewareData.shift;let C=m,$=v;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&($=E),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(C=A),_&&!f){const D=or(c.left,0),G=or(c.right,0),J=or(c.top,0),W=or(c.bottom,0);p?$=h-2*(D!==0||G!==0?D+G:or(c.left,c.right)):C=g-2*(J!==0||W!==0?J+W:or(c.top,c.bottom))}await l({...e,availableWidth:$,availableHeight:C});const k=await o.getDimensions(a.floating);return h!==k.width||g!==k.height?{reset:{rects:!0}}:{}}}};function Hd(){return typeof window<"u"}function wo(t){return sy(t)?(t.nodeName||"").toLowerCase():"#document"}function hr(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Es(t){var e;return(e=(sy(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function sy(t){return Hd()?t instanceof Node||t instanceof hr(t).Node:!1}function Qr(t){return Hd()?t instanceof Element||t instanceof hr(t).Element:!1}function ws(t){return Hd()?t instanceof HTMLElement||t instanceof hr(t).HTMLElement:!1}function tw(t){return!Hd()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof hr(t).ShadowRoot}const oj=new Set(["inline","contents"]);function tu(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=Zr(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!oj.has(s)}const aj=new Set(["table","td","th"]);function lj(t){return aj.has(wo(t))}const uj=[":popover-open",":modal"];function Kd(t){return uj.some(e=>{try{return t.matches(e)}catch{return!1}})}const cj=["transform","translate","scale","rotate","perspective"],dj=["transform","translate","scale","rotate","perspective","filter"],fj=["paint","layout","strict","content"];function iy(t){const e=oy(),n=Qr(t)?Zr(t):t;return cj.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||dj.some(r=>(n.willChange||"").includes(r))||fj.some(r=>(n.contain||"").includes(r))}function pj(t){let e=Di(t);for(;ws(e)&&!da(e);){if(iy(e))return e;if(Kd(e))return null;e=Di(e)}return null}function oy(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const hj=new Set(["html","body","#document"]);function da(t){return hj.has(wo(t))}function Zr(t){return hr(t).getComputedStyle(t)}function Wd(t){return Qr(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Di(t){if(wo(t)==="html")return t;const e=t.assignedSlot||t.parentNode||tw(t)&&t.host||Es(t);return tw(e)?e.host:e}function jE(t){const e=Di(t);return da(e)?t.ownerDocument?t.ownerDocument.body:t.body:ws(e)&&tu(e)?e:jE(e)}function Ml(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=jE(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),o=hr(s);if(i){const a=dm(o);return e.concat(o,o.visualViewport||[],tu(s)?s:[],a&&n?Ml(a):[])}return e.concat(s,Ml(s,[],n))}function dm(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function qE(t){const e=Zr(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=ws(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,a=qc(n)!==i||qc(r)!==o;return a&&(n=i,r=o),{width:n,height:r,$:a}}function ay(t){return Qr(t)?t:t.contextElement}function ta(t){const e=ay(t);if(!ws(e))return gs(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=qE(e);let o=(i?qc(n.width):n.width)/r,a=(i?qc(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const mj=gs(0);function UE(t){const e=hr(t);return!oy()||!e.visualViewport?mj:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function gj(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==hr(t)?!1:e}function mo(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=ay(t);let o=gs(1);e&&(r?Qr(r)&&(o=ta(r)):o=ta(t));const a=gj(i,n,r)?UE(i):gs(0);let l=(s.left+a.x)/o.x,u=(s.top+a.y)/o.y,c=s.width/o.x,d=s.height/o.y;if(i){const f=hr(i),p=r&&Qr(r)?hr(r):r;let h=f,g=dm(h);for(;g&&r&&p!==h;){const w=ta(g),x=g.getBoundingClientRect(),A=Zr(g),E=x.left+(g.clientLeft+parseFloat(A.paddingLeft))*w.x,m=x.top+(g.clientTop+parseFloat(A.paddingTop))*w.y;l*=w.x,u*=w.y,c*=w.x,d*=w.y,l+=E,u+=m,h=hr(g),g=dm(h)}}return Bc({width:c,height:d,x:l,y:u})}function Gd(t,e){const n=Wd(t).scrollLeft;return e?e.left+n:mo(Es(t)).left+n}function BE(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-Gd(t,n),s=n.top+e.scrollTop;return{x:r,y:s}}function yj(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",o=Es(r),a=e?Kd(e.floating):!1;if(r===o||a&&i)return n;let l={scrollLeft:0,scrollTop:0},u=gs(1);const c=gs(0),d=ws(r);if((d||!d&&!i)&&((wo(r)!=="body"||tu(o))&&(l=Wd(r)),ws(r))){const p=mo(r);u=ta(r),c.x=p.x+r.clientLeft,c.y=p.y+r.clientTop}const f=o&&!d&&!i?BE(o,l):gs(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-l.scrollLeft*u.x+c.x+f.x,y:n.y*u.y-l.scrollTop*u.y+c.y+f.y}}function vj(t){return Array.from(t.getClientRects())}function bj(t){const e=Es(t),n=Wd(t),r=t.ownerDocument.body,s=or(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=or(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+Gd(t);const a=-n.scrollTop;return Zr(r).direction==="rtl"&&(o+=or(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}const nw=25;function wj(t,e){const n=hr(t),r=Es(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;const c=oy();(!c||c&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}const u=Gd(r);if(u<=0){const c=r.ownerDocument,d=c.body,f=getComputedStyle(d),p=c.compatMode==="CSS1Compat"&&parseFloat(f.marginLeft)+parseFloat(f.marginRight)||0,h=Math.abs(r.clientWidth-d.clientWidth-p);h<=nw&&(i-=h)}else u<=nw&&(i+=u);return{width:i,height:o,x:a,y:l}}const _j=new Set(["absolute","fixed"]);function xj(t,e){const n=mo(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=ws(t)?ta(t):gs(1),o=t.clientWidth*i.x,a=t.clientHeight*i.y,l=s*i.x,u=r*i.y;return{width:o,height:a,x:l,y:u}}function rw(t,e,n){let r;if(e==="viewport")r=wj(t,n);else if(e==="document")r=bj(Es(t));else if(Qr(e))r=xj(e,n);else{const s=UE(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return Bc(r)}function zE(t,e){const n=Di(t);return n===e||!Qr(n)||da(n)?!1:Zr(n).position==="fixed"||zE(n,e)}function Sj(t,e){const n=e.get(t);if(n)return n;let r=Ml(t,[],!1).filter(a=>Qr(a)&&wo(a)!=="body"),s=null;const i=Zr(t).position==="fixed";let o=i?Di(t):t;for(;Qr(o)&&!da(o);){const a=Zr(o),l=iy(o);!l&&a.position==="fixed"&&(s=null),(i?!l&&!s:!l&&a.position==="static"&&!!s&&_j.has(s.position)||tu(o)&&!l&&zE(t,o))?r=r.filter(c=>c!==o):s=a,o=Di(o)}return e.set(t,r),r}function Ej(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?Kd(e)?[]:Sj(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((u,c)=>{const d=rw(e,c,s);return u.top=or(d.top,u.top),u.right=Ti(d.right,u.right),u.bottom=Ti(d.bottom,u.bottom),u.left=or(d.left,u.left),u},rw(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Aj(t){const{width:e,height:n}=qE(t);return{width:e,height:n}}function Cj(t,e,n){const r=ws(e),s=Es(e),i=n==="fixed",o=mo(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=gs(0);function u(){l.x=Gd(s)}if(r||!r&&!i)if((wo(e)!=="body"||tu(s))&&(a=Wd(e)),r){const p=mo(e,!0,i,e);l.x=p.x+e.clientLeft,l.y=p.y+e.clientTop}else s&&u();i&&!r&&s&&u();const c=s&&!r&&!i?BE(s,a):gs(0),d=o.left+a.scrollLeft-l.x-c.x,f=o.top+a.scrollTop-l.y-c.y;return{x:d,y:f,width:o.width,height:o.height}}function Kp(t){return Zr(t).position==="static"}function sw(t,e){if(!ws(t)||Zr(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Es(t)===n&&(n=n.ownerDocument.body),n}function VE(t,e){const n=hr(t);if(Kd(t))return n;if(!ws(t)){let s=Di(t);for(;s&&!da(s);){if(Qr(s)&&!Kp(s))return s;s=Di(s)}return n}let r=sw(t,e);for(;r&&lj(r)&&Kp(r);)r=sw(r,e);return r&&da(r)&&Kp(r)&&!iy(r)?n:r||pj(t)||n}const $j=async function(t){const e=this.getOffsetParent||VE,n=this.getDimensions,r=await n(t.floating);return{reference:Cj(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function kj(t){return Zr(t).direction==="rtl"}const Ij={convertOffsetParentRelativeRectToViewportRelativeRect:yj,getDocumentElement:Es,getClippingRect:Ej,getOffsetParent:VE,getElementRects:$j,getClientRects:vj,getDimensions:Aj,getScale:ta,isElement:Qr,isRTL:kj};function HE(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function Rj(t,e){let n=null,r;const s=Es(t);function i(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const u=t.getBoundingClientRect(),{left:c,top:d,width:f,height:p}=u;if(a||e(),!f||!p)return;const h=Ou(d),g=Ou(s.clientWidth-(c+f)),w=Ou(s.clientHeight-(d+p)),x=Ou(c),E={rootMargin:-h+"px "+-g+"px "+-w+"px "+-x+"px",threshold:or(0,Ti(1,l))||1};let m=!0;function v(_){const C=_[0].intersectionRatio;if(C!==l){if(!m)return o();C?o(!1,C):r=setTimeout(()=>{o(!1,1e-7)},1e3)}C===1&&!HE(u,t.getBoundingClientRect())&&o(),m=!1}try{n=new IntersectionObserver(v,{...E,root:s.ownerDocument})}catch{n=new IntersectionObserver(v,E)}n.observe(t)}return o(!0),i}function Oj(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,u=ay(t),c=s||i?[...u?Ml(u):[],...Ml(e)]:[];c.forEach(x=>{s&&x.addEventListener("scroll",n,{passive:!0}),i&&x.addEventListener("resize",n)});const d=u&&a?Rj(u,n):null;let f=-1,p=null;o&&(p=new ResizeObserver(x=>{let[A]=x;A&&A.target===u&&p&&(p.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var E;(E=p)==null||E.observe(e)})),n()}),u&&!l&&p.observe(u),p.observe(e));let h,g=l?mo(t):null;l&&w();function w(){const x=mo(t);g&&!HE(g,x)&&n(),g=x,h=requestAnimationFrame(w)}return n(),()=>{var x;c.forEach(A=>{s&&A.removeEventListener("scroll",n),i&&A.removeEventListener("resize",n)}),d==null||d(),(x=p)==null||x.disconnect(),p=null,l&&cancelAnimationFrame(h)}}const Tj=nj,Dj=rj,iw=ZF,Pj=ij,Mj=ej,Lj=QF,Nj=sj,Fj=(t,e,n)=>{const r=new Map,s={platform:Ij,...n},i={...s.platform,_c:r};return XF(t,e,{...s,platform:i})};function jj(t){return t!=null&&typeof t=="object"&&"$el"in t}function fm(t){if(jj(t)){const e=t.$el;return sy(e)&&wo(e)==="#comment"?null:e}return t}function No(t){return typeof t=="function"?t():y(t)}function qj(t){return{name:"arrow",options:t,fn(e){const n=fm(No(t.element));return n==null?{}:Lj({element:n,padding:t.padding}).fn(e)}}}function KE(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function ow(t,e){const n=KE(t);return Math.round(e*n)/n}function Uj(t,e,n){n===void 0&&(n={});const r=n.whileElementsMounted,s=H(()=>{var C;return(C=No(n.open))!=null?C:!0}),i=H(()=>No(n.middleware)),o=H(()=>{var C;return(C=No(n.placement))!=null?C:"bottom"}),a=H(()=>{var C;return(C=No(n.strategy))!=null?C:"absolute"}),l=H(()=>{var C;return(C=No(n.transform))!=null?C:!0}),u=H(()=>fm(t.value)),c=H(()=>fm(e.value)),d=we(0),f=we(0),p=we(a.value),h=we(o.value),g=Mn({}),w=we(!1),x=H(()=>{const C={position:p.value,left:"0",top:"0"};if(!c.value)return C;const $=ow(c.value,d.value),k=ow(c.value,f.value);return l.value?{...C,transform:"translate("+$+"px, "+k+"px)",...KE(c.value)>=1.5&&{willChange:"transform"}}:{position:p.value,left:$+"px",top:k+"px"}});let A;function E(){if(u.value==null||c.value==null)return;const C=s.value;Fj(u.value,c.value,{middleware:i.value,placement:o.value,strategy:a.value}).then($=>{d.value=$.x,f.value=$.y,p.value=$.strategy,h.value=$.placement,g.value=$.middlewareData,w.value=C!==!1})}function m(){typeof A=="function"&&(A(),A=void 0)}function v(){if(m(),r===void 0){E();return}if(u.value!=null&&c.value!=null){A=r(u.value,c.value,E);return}}function _(){s.value||(w.value=!1)}return Ke([i,o,a,s],E,{flush:"sync"}),Ke([u,c],v,{flush:"sync"}),Ke(s,_,{flush:"sync"}),wa()&&Kl(m),{x:Io(d),y:Io(f),strategy:Io(p),placement:Io(h),middlewareData:Io(g),isPositioned:Io(w),floatingStyles:x,update:E}}const WE={side:"bottom",sideOffset:0,sideFlip:!0,align:"center",alignOffset:0,alignFlip:!0,arrowPadding:0,avoidCollisions:!0,collisionBoundary:()=>[],collisionPadding:0,sticky:"partial",hideWhenDetached:!1,positionStrategy:"fixed",updatePositionStrategy:"optimized",prioritizePosition:!1},[PX,Bj]=Jt("PopperContent");var zj=ue({inheritAttrs:!1,__name:"PopperContent",props:Jx({side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},{...WE}),emits:["placed"],setup(t,{emit:e}){const n=t,r=e,s=LE(),{forwardRef:i,currentElement:o}=Ze(),a=we(),l=we(),{width:u,height:c}=ON(l),d=H(()=>n.side+(n.align!=="center"?`-${n.align}`:"")),f=H(()=>typeof n.collisionPadding=="number"?n.collisionPadding:{top:0,right:0,bottom:0,left:0,...n.collisionPadding}),p=H(()=>Array.isArray(n.collisionBoundary)?n.collisionBoundary:[n.collisionBoundary]),h=H(()=>({padding:f.value,boundary:p.value.filter(FF),altBoundary:p.value.length>0})),g=H(()=>({mainAxis:n.sideFlip,crossAxis:n.alignFlip})),w=iN(()=>[Tj({mainAxis:n.sideOffset+c.value,alignmentAxis:n.alignOffset}),n.prioritizePosition&&n.avoidCollisions&&iw({...h.value,...g.value}),n.avoidCollisions&&Dj({mainAxis:!0,crossAxis:!!n.prioritizePosition,limiter:n.sticky==="partial"?Nj():void 0,...h.value}),!n.prioritizePosition&&n.avoidCollisions&&iw({...h.value,...g.value}),Pj({...h.value,apply:({elements:J,rects:W,availableWidth:j,availableHeight:se})=>{const{width:R,height:V}=W.reference,F=J.floating.style;F.setProperty("--reka-popper-available-width",`${j}px`),F.setProperty("--reka-popper-available-height",`${se}px`),F.setProperty("--reka-popper-anchor-width",`${R}px`),F.setProperty("--reka-popper-anchor-height",`${V}px`)}}),l.value&&qj({element:l.value,padding:n.arrowPadding}),jF({arrowWidth:u.value,arrowHeight:c.value}),n.hideWhenDetached&&Mj({strategy:"referenceHidden",...h.value})]),x=H(()=>n.reference??s.anchor.value),{floatingStyles:A,placement:E,isPositioned:m,middlewareData:v}=Uj(x,a,{strategy:n.positionStrategy,placement:d,whileElementsMounted:(...J)=>Oj(...J,{layoutShift:!n.disableUpdateOnLayoutShift,animationFrame:n.updatePositionStrategy==="always"}),middleware:w}),_=H(()=>lm(E.value)[0]),C=H(()=>lm(E.value)[1]);lS(()=>{m.value&&r("placed")});const $=H(()=>{var J;return((J=v.value.arrow)==null?void 0:J.centerOffset)!==0}),k=we("");Nt(()=>{o.value&&(k.value=window.getComputedStyle(o.value).zIndex)});const D=H(()=>{var J;return((J=v.value.arrow)==null?void 0:J.x)??0}),G=H(()=>{var J;return((J=v.value.arrow)==null?void 0:J.y)??0});return Bj({placedSide:_,onArrowChange:J=>l.value=J,arrowX:D,arrowY:G,shouldHideArrow:$}),(J,W)=>{var j,se,R;return I(),ae("div",{ref_key:"floatingRef",ref:a,"data-reka-popper-content-wrapper":"",style:Xt({...y(A),transform:y(m)?y(A).transform:"translate(0, -200%)",minWidth:"max-content",zIndex:k.value,"--reka-popper-transform-origin":[(j=y(v).transformOrigin)==null?void 0:j.x,(se=y(v).transformOrigin)==null?void 0:se.y].join(" "),...((R=y(v).hide)==null?void 0:R.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}})},[N(y(tt),Te({ref:y(i)},J.$attrs,{"as-child":n.asChild,as:J.as,"data-side":_.value,"data-align":C.value,style:{animation:y(m)?void 0:"none"}}),{default:K(()=>[Ee(J.$slots,"default")]),_:3},16,["as-child","as","data-side","data-align","style"])],4)}}}),ly=zj,Vj=ue({__name:"ComboboxAnchor",props:{reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(t){const{forwardRef:e}=Ze();return(n,r)=>(I(),Z(y(ey),{"as-child":"",reference:n.reference},{default:K(()=>[N(y(tt),Te({ref:y(e),"as-child":n.asChild,as:n.as},n.$attrs),{default:K(()=>[Ee(n.$slots,"default")]),_:3},16,["as-child","as"])]),_:3},8,["reference"]))}}),Hj=Vj;function Kj(t,e,n){return t===void 0?!1:Array.isArray(t)?t.some(r=>wl(r,e,n)):wl(t,e,n)}function wl(t,e,n){return t===void 0||e===void 0?!1:typeof t=="string"?t===e:typeof n=="function"?n(t,e):typeof n=="string"?(t==null?void 0:t[n])===(e==null?void 0:e[n]):Fc(t,e)}const[Jd,Wj]=Jt("ListboxRoot");var Gj=ue({__name:"ListboxRoot",props:{modelValue:{type:null,required:!1},defaultValue:{type:null,required:!1},multiple:{type:Boolean,required:!1},orientation:{type:String,required:!1,default:"vertical"},dir:{type:String,required:!1},disabled:{type:Boolean,required:!1},selectionBehavior:{type:String,required:!1,default:"toggle"},highlightOnHover:{type:Boolean,required:!1},by:{type:[String,Function],required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:["update:modelValue","highlight","entryFocus","leave"],setup(t,{expose:e,emit:n}){const r=t,s=n,{multiple:i,highlightOnHover:o,orientation:a,disabled:l,selectionBehavior:u,dir:c}=bn(r),{getItems:d}=yr({isProvider:!0}),{handleTypeaheadSearch:f}=Ud(),{primitiveElement:p,currentElement:h}=Oi(),g=RN(),w=Aa(c),x=Yg(h),A=we(),E=we(!1),m=we(!0),v=mr(r,"modelValue",s,{defaultValue:r.defaultValue??(i.value?[]:void 0),passive:r.modelValue===void 0,deep:!0});function _(T){if(E.value=!0,r.multiple){const Y=Array.isArray(v.value)?[...v.value]:[],re=Y.findIndex(ne=>wl(ne,T,r.by));r.selectionBehavior==="toggle"?(re===-1?Y.push(T):Y.splice(re,1),v.value=Y):(v.value=[T],A.value=T)}else r.selectionBehavior==="toggle"&&wl(v.value,T,r.by)?v.value=void 0:v.value=T;setTimeout(()=>{E.value=!1},1)}const C=we(null),$=we(null),k=we(!1),D=we(!1),G=lc(),J=lc(),W=lc();function j(){return d().map(T=>T.ref).filter(T=>T.dataset.disabled!=="")}function se(T,Y=!0){if(!T)return;C.value=T,m.value&&C.value.focus(),Y&&C.value.scrollIntoView({block:"nearest"});const re=d().find(ne=>ne.ref===T);s("highlight",re)}function R(T){if(k.value)W.trigger(T);else{const Y=d().find(re=>wl(re.value,T,r.by));Y&&(C.value=Y.ref,se(Y.ref))}}function V(T){C.value&&C.value.isConnected&&(T.preventDefault(),T.stopPropagation(),D.value||C.value.click())}function F(T){if(m.value){if(E.value=!0,k.value)J.trigger(T);else{const Y=T.altKey||T.ctrlKey||T.metaKey;if(Y&&T.key==="a"&&i.value){const re=d(),ne=re.map(xe=>xe.value);v.value=[...ne],T.preventDefault(),se(re[re.length-1].ref)}else if(!Y){const re=f(T.key,d());re&&se(re)}}setTimeout(()=>{E.value=!1},1)}}function ee(){D.value=!0}function z(){_t(()=>{D.value=!1})}function ie(){_t(()=>{const T=new KeyboardEvent("keydown",{key:"PageUp"});Ae(T)})}function pe(T){const Y=C.value;Y!=null&&Y.isConnected&&($.value=Y),C.value=null,s("leave",T)}function he(T){var re,ne;const Y=new CustomEvent("listbox.entryFocus",{bubbles:!1,cancelable:!0});if((re=T.currentTarget)==null||re.dispatchEvent(Y),s("entryFocus",Y),!Y.defaultPrevented)if($.value)se($.value);else{const xe=(ne=j())==null?void 0:ne[0];se(xe)}}function Ae(T){const Y=$F(T,a.value,w.value);if(!Y)return;let re=j();if(C.value){if(Y==="last")re.reverse();else if(Y==="prev"||Y==="next"){Y==="prev"&&re.reverse();const ne=re.indexOf(C.value);re=re.slice(ne+1)}X(T,re[0])}if(re.length){const ne=!C.value&&Y==="prev"?re.length-1:0;se(re[ne])}if(k.value)return J.trigger(T)}function X(T,Y){var ne;if(!(k.value||r.selectionBehavior!=="replace"||!i.value||!Array.isArray(v.value)||(T.altKey||T.ctrlKey||T.metaKey)&&!T.shiftKey)&&T.shiftKey){const xe=d().filter(Q=>Q.ref.dataset.disabled!=="");let M=(ne=xe.find(Q=>Q.ref===Y))==null?void 0:ne.value;if(T.key===g.END?M=xe[xe.length-1].value:T.key===g.HOME&&(M=xe[0].value),!M||!A.value)return;const P=nN(xe.map(Q=>Q.value),A.value,M);v.value=P}}async function te(T){if(await _t(),k.value)G.trigger(T);else{const Y=j(),re=Y.find(ne=>ne.dataset.state==="checked");re?se(re):Y.length&&se(Y[0])}}return Ke(v,()=>{E.value||_t(()=>{te()})},{immediate:!0,deep:!0}),e({highlightedElement:C,highlightItem:R,highlightFirstItem:ie,highlightSelected:te,getItems:d}),Wj({modelValue:v,onValueChange:_,multiple:i,orientation:a,dir:w,disabled:l,highlightOnHover:o,highlightedElement:C,isVirtual:k,virtualFocusHook:G,virtualKeydownHook:J,virtualHighlightHook:W,by:r.by,firstValue:A,selectionBehavior:u,focusable:m,onLeave:pe,onEnter:he,changeHighlight:se,onKeydownEnter:V,onKeydownNavigation:Ae,onKeydownTypeAhead:F,onCompositionStart:ee,onCompositionEnd:z,highlightFirstItem:ie}),(T,Y)=>(I(),Z(y(tt),{ref_key:"primitiveElement",ref:p,as:T.as,"as-child":T.asChild,dir:y(w),"data-disabled":y(l)?"":void 0,onPointerleave:pe,onFocusout:Y[0]||(Y[0]=async re=>{const ne=re.relatedTarget||re.target;await _t(),C.value&&y(h)&&!y(h).contains(ne)&&pe(re)})},{default:K(()=>[Ee(T.$slots,"default",{modelValue:y(v)}),y(x)&&T.name?(I(),Z(y(ME),{key:0,name:T.name,value:y(v),disabled:y(l),required:T.required},null,8,["name","value","disabled","required"])):ke("v-if",!0)]),_:3},8,["as","as-child","dir","data-disabled"]))}}),Jj=Gj,Yj=ue({__name:"ListboxContent",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(t){const{CollectionSlot:e}=yr(),n=Jd(),r=EE(!1,10);return(s,i)=>(I(),Z(y(e),null,{default:K(()=>[N(y(tt),{role:"listbox",as:s.as,"as-child":s.asChild,tabindex:y(n).focusable.value?y(n).highlightedElement.value?"-1":"0":"-1","aria-orientation":y(n).orientation.value,"aria-multiselectable":!!y(n).multiple.value,"data-orientation":y(n).orientation.value,onMousedown:i[0]||(i[0]=nr(o=>r.value=!0,["left"])),onFocus:i[1]||(i[1]=o=>{y(r)||y(n).onEnter(o)}),onKeydown:[i[2]||(i[2]=Ys(o=>{y(n).orientation.value==="vertical"&&(o.key==="ArrowLeft"||o.key==="ArrowRight")||y(n).orientation.value==="horizontal"&&(o.key==="ArrowUp"||o.key==="ArrowDown")||(o.preventDefault(),y(n).focusable.value&&y(n).onKeydownNavigation(o))},["down","up","left","right","home","end"])),Ys(y(n).onKeydownEnter,["enter"]),y(n).onKeydownTypeAhead]},{default:K(()=>[Ee(s.$slots,"default")]),_:3},8,["as","as-child","tabindex","aria-orientation","aria-multiselectable","data-orientation","onKeydown"])]),_:3}))}}),Xj=Yj,Qj=ue({__name:"ListboxFilter",props:{modelValue:{type:String,required:!1},autoFocus:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"input"}},emits:["update:modelValue"],setup(t,{emit:e}){const n=t,s=mr(n,"modelValue",e,{defaultValue:"",passive:n.modelValue===void 0}),i=Jd(),{primitiveElement:o,currentElement:a}=Oi(),l=H(()=>n.disabled||i.disabled.value||!1),u=we();return uS(()=>{var c;return u.value=(c=i.highlightedElement.value)==null?void 0:c.id}),Dt(()=>{i.focusable.value=!1,setTimeout(()=>{var c;n.autoFocus&&((c=a.value)==null||c.focus())},1)}),on(()=>{i.focusable.value=!0}),(c,d)=>(I(),Z(y(tt),{ref_key:"primitiveElement",ref:o,as:c.as,"as-child":c.asChild,value:y(s),disabled:l.value?"":void 0,"data-disabled":l.value?"":void 0,"aria-disabled":l.value??void 0,"aria-activedescendant":u.value,type:"text",onKeydown:[Ys(nr(y(i).onKeydownNavigation,["prevent"]),["down","up","home","end"]),Ys(y(i).onKeydownEnter,["enter"])],onInput:d[0]||(d[0]=f=>{s.value=f.target.value,y(i).highlightFirstItem()}),onCompositionstart:y(i).onCompositionStart,onCompositionend:y(i).onCompositionEnd},{default:K(()=>[Ee(c.$slots,"default",{modelValue:y(s)})]),_:3},8,["as","as-child","value","disabled","data-disabled","aria-disabled","aria-activedescendant","onKeydown","onCompositionstart","onCompositionend"]))}}),Zj=Qj;const[MX,e3]=Jt("ListboxGroup");var t3=ue({__name:"ListboxGroup",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(t){const e=t,n=Xr(void 0,"reka-listbox-group");return e3({id:n}),(r,s)=>(I(),Z(y(tt),Te({role:"group"},e,{"aria-labelledby":y(n)}),{default:K(()=>[Ee(r.$slots,"default")]),_:3},16,["aria-labelledby"]))}}),n3=t3;const r3="listbox.select",[LX,s3]=Jt("ListboxItem");var i3=ue({__name:"ListboxItem",props:{value:{type:null,required:!0},disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"div"}},emits:["select"],setup(t,{emit:e}){const n=t,r=e,s=Xr(void 0,"reka-listbox-item"),{CollectionItem:i}=yr(),{forwardRef:o,currentElement:a}=Ze(),l=Jd(),u=H(()=>a.value===l.highlightedElement.value),c=H(()=>Kj(l.modelValue.value,n.value,l.by)),d=H(()=>l.disabled.value||n.disabled);async function f(h){r("select",h),!(h!=null&&h.defaultPrevented)&&!d.value&&h&&(l.onValueChange(n.value),l.changeHighlight(a.value))}function p(h){const g={originalEvent:h,value:n.value};Nd(r3,f,g)}return s3({isSelected:c}),(h,g)=>(I(),Z(y(i),{value:h.value},{default:K(()=>[hP([u.value,c.value],()=>N(y(tt),Te({id:y(s)},h.$attrs,{ref:y(o),role:"option",tabindex:y(l).focusable.value?u.value?"0":"-1":-1,"aria-selected":c.value,as:h.as,"as-child":h.asChild,disabled:d.value?"":void 0,"data-disabled":d.value?"":void 0,"data-highlighted":u.value?"":void 0,"data-state":c.value?"checked":"unchecked",onClick:p,onKeydown:Ys(nr(p,["prevent"]),["space"]),onPointermove:g[0]||(g[0]=()=>{y(l).highlightedElement.value!==y(a)&&y(l).highlightOnHover.value&&!y(l).focusable.value&&y(l).changeHighlight(y(a),!1)})}),{default:K(()=>[Ee(h.$slots,"default")]),_:3},16,["id","tabindex","aria-selected","as","as-child","disabled","data-disabled","data-highlighted","data-state","onKeydown"]),g,1)]),_:3},8,["value"]))}}),o3=i3;const[Fi,a3]=Jt("ComboboxRoot");var l3=ue({__name:"ComboboxRoot",props:{open:{type:Boolean,required:!1,default:void 0},defaultOpen:{type:Boolean,required:!1},resetSearchTermOnBlur:{type:Boolean,required:!1,default:!0},resetSearchTermOnSelect:{type:Boolean,required:!1,default:!0},openOnFocus:{type:Boolean,required:!1,default:!1},openOnClick:{type:Boolean,required:!1,default:!1},ignoreFilter:{type:Boolean,required:!1},resetModelValueOnClear:{type:Boolean,required:!1,default:!1},modelValue:{type:null,required:!1},defaultValue:{type:null,required:!1},multiple:{type:Boolean,required:!1},dir:{type:String,required:!1},disabled:{type:Boolean,required:!1},highlightOnHover:{type:Boolean,required:!1,default:!0},by:{type:[String,Function],required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:["update:modelValue","highlight","update:open"],setup(t,{expose:e,emit:n}){var R,V,F;const r=t,s=n,{primitiveElement:i,currentElement:o}=Oi(),{multiple:a,disabled:l,ignoreFilter:u,resetSearchTermOnSelect:c,openOnFocus:d,openOnClick:f,dir:p,resetModelValueOnClear:h,highlightOnHover:g}=bn(r),w=Aa(p),x=mr(r,"modelValue",s,{defaultValue:r.defaultValue??(a.value?[]:void 0),passive:r.modelValue===void 0,deep:!0}),A=mr(r,"open",s,{defaultValue:r.defaultOpen,passive:r.open===void 0});async function E(ee){var z,ie;A.value=ee,W.value="",ee?(await _t(),(z=i.value)==null||z.highlightSelected(),v.value=!0):v.value=!1,(ie=C.value)==null||ie.focus(),setTimeout(()=>{!ee&&r.resetSearchTermOnBlur&&m.trigger()},1)}const m=lc(),v=we(!1),_=we(!1),C=we(),$=we(),k=H(()=>{var ee;return((ee=i.value)==null?void 0:ee.highlightedElement)??void 0}),D=we(new Map),G=we(new Map),{contains:J}=kE({sensitivity:"base"}),W=we(""),j=H(ee=>{if(!W.value||r.ignoreFilter||_.value)return{count:D.value.size,items:(ee==null?void 0:ee.items)??new Map,groups:(ee==null?void 0:ee.groups)??new Set(G.value.keys())};let z=0;const ie=new Map,pe=new Set;for(const[he,Ae]of D.value){const X=J(Ae,W.value);ie.set(he,X?1:0),X&&z++}for(const[he,Ae]of G.value)for(const X of Ae)if(ie.get(X)>0){pe.add(he);break}return{count:z,items:ie,groups:pe}}),se=wn();return Dt(()=>{var ee,z,ie;se!=null&&se.exposed&&(se.exposed.highlightItem=(ee=i.value)==null?void 0:ee.highlightItem,se.exposed.highlightFirstItem=(z=i.value)==null?void 0:z.highlightFirstItem,se.exposed.highlightSelected=(ie=i.value)==null?void 0:ie.highlightSelected)}),e({filtered:j,highlightedElement:k,highlightItem:(R=i.value)==null?void 0:R.highlightItem,highlightFirstItem:(V=i.value)==null?void 0:V.highlightFirstItem,highlightSelected:(F=i.value)==null?void 0:F.highlightSelected}),a3({modelValue:x,multiple:a,disabled:l,open:A,onOpenChange:E,contentId:"",isUserInputted:v,isVirtual:_,inputElement:C,highlightedElement:k,onInputElementChange:ee=>C.value=ee,triggerElement:$,onTriggerElementChange:ee=>$.value=ee,parentElement:o,resetSearchTermOnSelect:c,onResetSearchTerm:m.on,allItems:D,allGroups:G,filterSearch:W,filterState:j,ignoreFilter:u,openOnFocus:d,openOnClick:f,resetModelValueOnClear:h}),(ee,z)=>(I(),Z(y(Zg),null,{default:K(()=>[N(y(Jj),Te({ref_key:"primitiveElement",ref:i},ee.$attrs,{modelValue:y(x),"onUpdate:modelValue":z[0]||(z[0]=ie=>Mt(x)?x.value=ie:null),style:{pointerEvents:y(A)?"auto":void 0},as:ee.as,"as-child":ee.asChild,dir:y(w),multiple:y(a),name:ee.name,required:ee.required,disabled:y(l),"highlight-on-hover":y(g),by:r.by,onHighlight:z[1]||(z[1]=ie=>s("highlight",ie))}),{default:K(()=>[Ee(ee.$slots,"default",{open:y(A),modelValue:y(x)})]),_:3},16,["modelValue","style","as","as-child","dir","multiple","name","required","disabled","highlight-on-hover","by"])]),_:3}))}}),u3=l3;const[NX,c3]=Jt("ComboboxContent");var d3=ue({__name:"ComboboxContentImpl",props:{position:{type:String,required:!1,default:"inline"},bodyLock:{type:Boolean,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside"],setup(t,{emit:e}){const n=t,r=e,{position:s}=bn(n),i=Fi(),{forwardRef:o,currentElement:a}=Ze();Fd(n.bodyLock),qd(i.parentElement);const l=H(()=>n.position==="popper"?n:{}),u=jd(l.value),c={boxSizing:"border-box","--reka-combobox-content-transform-origin":"var(--reka-popper-transform-origin)","--reka-combobox-content-available-width":"var(--reka-popper-available-width)","--reka-combobox-content-available-height":"var(--reka-popper-available-height)","--reka-combobox-trigger-width":"var(--reka-popper-anchor-width)","--reka-combobox-trigger-height":"var(--reka-popper-anchor-height)"};c3({position:s});const d=we(!1);return Dt(()=>{i.inputElement.value&&(d.value=a.value.contains(i.inputElement.value),d.value&&i.inputElement.value.focus())}),on(()=>{var f;d.value&&((f=i.triggerElement.value)==null||f.focus())}),(f,p)=>(I(),Z(y(Xj),{"as-child":""},{default:K(()=>[N(y(Bd),{"as-child":"","disable-outside-pointer-events":f.disableOutsidePointerEvents,onDismiss:p[0]||(p[0]=h=>y(i).onOpenChange(!1)),onFocusOutside:p[1]||(p[1]=h=>{var g;(g=y(i).parentElement.value)!=null&&g.contains(h.target)&&h.preventDefault(),r("focusOutside",h)}),onInteractOutside:p[2]||(p[2]=h=>r("interactOutside",h)),onEscapeKeyDown:p[3]||(p[3]=h=>r("escapeKeyDown",h)),onPointerDownOutside:p[4]||(p[4]=h=>{var g;(g=y(i).parentElement.value)!=null&&g.contains(h.target)&&h.preventDefault(),r("pointerDownOutside",h)})},{default:K(()=>[(I(),Z(ns(y(s)==="popper"?y(ly):y(tt)),Te({...f.$attrs,...y(u)},{id:y(i).contentId,ref:y(o),"data-state":y(i).open.value?"open":"closed",style:{display:"flex",flexDirection:"column",outline:"none",...y(s)==="popper"?c:{}}}),{default:K(()=>[Ee(f.$slots,"default")]),_:3},16,["id","data-state","style"]))]),_:3},8,["disable-outside-pointer-events"])]),_:3}))}}),f3=d3,p3=ue({__name:"ComboboxContent",props:{forceMount:{type:Boolean,required:!1},position:{type:String,required:!1},bodyLock:{type:Boolean,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside"],setup(t,{emit:e}){const s=Ca(t,e),{forwardRef:i}=Ze(),o=Fi();return o.contentId||(o.contentId=Xr(void 0,"reka-combobox-content")),(a,l)=>(I(),Z(y($a),{present:a.forceMount||y(o).open.value},{default:K(()=>[N(f3,Te({...y(s),...a.$attrs},{ref:y(i)}),{default:K(()=>[Ee(a.$slots,"default")]),_:3},16)]),_:3},8,["present"]))}}),h3=p3,m3=ue({__name:"ComboboxEmpty",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(t){const e=t,n=Fi(),r=H(()=>n.ignoreFilter.value?n.allItems.value.size===0:n.filterState.value.count===0);return(s,i)=>r.value?(I(),Z(y(tt),Pn(Te({key:0},e)),{default:K(()=>[Ee(s.$slots,"default",{},()=>[i[0]||(i[0]=Ue("No options"))])]),_:3},16)):ke("v-if",!0)}}),g3=m3;const[y3,v3]=Jt("ComboboxGroup");var b3=ue({__name:"ComboboxGroup",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(t){const e=t,n=Xr(void 0,"reka-combobox-group"),r=Fi(),s=H(()=>r.ignoreFilter.value?!0:r.filterSearch.value?r.filterState.value.groups.has(n):!0),i=v3({id:n,labelId:""});return Dt(()=>{r.allGroups.value.has(n)||r.allGroups.value.set(n,new Set)}),on(()=>{r.allGroups.value.delete(n)}),(o,a)=>(I(),Z(y(n3),Te({id:y(n),"aria-labelledby":y(i).labelId},e,{hidden:s.value?void 0:!0}),{default:K(()=>[Ee(o.$slots,"default")]),_:3},16,["id","aria-labelledby","hidden"]))}}),w3=b3,_3=ue({__name:"ComboboxInput",props:{displayValue:{type:Function,required:!1},modelValue:{type:String,required:!1},autoFocus:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"input"}},emits:["update:modelValue"],setup(t,{emit:e}){const n=t,r=e,s=Fi(),i=Jd(),{primitiveElement:o,currentElement:a}=Oi(),l=mr(n,"modelValue",r,{passive:n.modelValue===void 0});Dt(()=>{a.value&&s.onInputElementChange(a.value)});function u(h){s.open.value||s.onOpenChange(!0)}function c(h){const g=h.target;s.open.value?s.filterSearch.value=g.value:(s.onOpenChange(!0),_t(()=>{g.value&&(s.filterSearch.value=g.value,i.highlightFirstItem())}))}function d(){s.openOnFocus.value&&!s.open.value&&s.onOpenChange(!0)}function f(){s.openOnClick.value&&!s.open.value&&s.onOpenChange(!0)}function p(){const h=s.modelValue.value;n.displayValue?l.value=n.displayValue(h):!s.multiple.value&&h&&!Array.isArray(h)&&typeof h!="object"?l.value=h.toString():l.value="",_t(()=>{l.value=l.value})}return s.onResetSearchTerm(()=>{p()}),Ke(s.modelValue,async()=>{!s.isUserInputted.value&&s.resetSearchTermOnSelect.value&&p()},{immediate:!0,deep:!0}),Ke(s.filterState,()=>{!s.isVirtual.value&&!s.highlightedElement.value&&i.highlightFirstItem()}),(h,g)=>(I(),Z(y(Zj),{ref_key:"primitiveElement",ref:o,modelValue:y(l),"onUpdate:modelValue":g[0]||(g[0]=w=>Mt(l)?l.value=w:null),as:h.as,"as-child":h.asChild,"auto-focus":h.autoFocus,disabled:h.disabled,"aria-expanded":y(s).open.value,"aria-controls":y(s).contentId,"aria-autocomplete":"list",role:"combobox",autocomplete:"off",onClick:f,onInput:c,onKeydown:Ys(nr(u,["prevent"]),["down","up"]),onFocus:d},{default:K(()=>[Ee(h.$slots,"default")]),_:3},8,["modelValue","as","as-child","auto-focus","disabled","aria-expanded","aria-controls","onKeydown"]))}}),x3=_3,S3=ue({__name:"ComboboxItem",props:{textValue:{type:String,required:!1},value:{type:null,required:!0},disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["select"],setup(t,{emit:e}){const n=t,r=e,s=Xr(void 0,"reka-combobox-item"),i=Fi(),o=y3(null),{primitiveElement:a,currentElement:l}=Oi();if(n.value==="")throw new Error("A <ComboboxItem /> must have a value prop that is not an empty string. This is because the Combobox value can be set to an empty string to clear the selection and show the placeholder.");const u=H(()=>{if(i.isVirtual.value||i.ignoreFilter.value||!i.filterSearch.value)return!0;{const c=i.filterState.value.items.get(s);return c===void 0?!0:c>0}});return Dt(()=>{var d;i.allItems.value.set(s,n.textValue||l.value.textContent||l.value.innerText);const c=o==null?void 0:o.id;c&&(i.allGroups.value.has(c)?(d=i.allGroups.value.get(c))==null||d.add(s):i.allGroups.value.set(c,new Set([s])))}),on(()=>{i.allItems.value.delete(s)}),(c,d)=>u.value?(I(),Z(y(o3),Te({key:0},n,{id:y(s),ref_key:"primitiveElement",ref:a,disabled:y(i).disabled.value||c.disabled,onSelect:d[0]||(d[0]=f=>{r("select",f),!f.defaultPrevented&&!y(i).multiple.value&&!c.disabled&&!y(i).disabled.value&&(f.preventDefault(),y(i).onOpenChange(!1),y(i).modelValue.value=n.value)})}),{default:K(()=>[Ee(c.$slots,"default",{},()=>[Ue(fe(c.value),1)])]),_:3},16,["id","disabled"])):ke("v-if",!0)}}),E3=S3,A3=ue({__name:"ComboboxPortal",props:{to:{type:null,required:!1},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(t){const e=t;return(n,r)=>(I(),Z(y(zd),Pn(sr(e)),{default:K(()=>[Ee(n.$slots,"default")]),_:3},16))}}),C3=A3;function GE(t){const e=Gg({nonce:we()});return H(()=>{var n;return(t==null?void 0:t.value)||((n=e.nonce)==null?void 0:n.value)})}var $3=ue({__name:"ComboboxViewport",props:{nonce:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(t){const e=t,{forwardRef:n}=Ze(),{nonce:r}=bn(e),s=GE(r),i=Fi();return(o,a)=>(I(),ae(je,null,[N(y(tt),Te({...o.$attrs,...e},{ref:y(n),"data-reka-combobox-viewport":"",role:"presentation",style:{position:"relative",flex:y(i).isVirtual.value?void 0:1,overflow:"auto"}}),{default:K(()=>[Ee(o.$slots,"default")]),_:3},16,["style"]),N(y(tt),{as:"style",nonce:y(s)},{default:K(()=>a[0]||(a[0]=[Ue(" /* Hide scrollbars cross-browser and enable momentum scroll for touch devices */ [data-reka-combobox-viewport] { scrollbar-width:none; -ms-overflow-style: none; -webkit-overflow-scrolling: touch; } [data-reka-combobox-viewport]::-webkit-scrollbar { display: none; } ")])),_:1,__:[0]},8,["nonce"])],64))}}),k3=$3,I3=ue({__name:"MenuAnchor",props:{reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(t){const e=t;return(n,r)=>(I(),Z(y(ey),Pn(sr(e)),{default:K(()=>[Ee(n.$slots,"default")]),_:3},16))}}),R3=I3;function O3(){const t=we(!1);return Dt(()=>{jc("keydown",()=>{t.value=!0},{capture:!0,passive:!0}),jc(["pointerdown","pointermove"],()=>{t.value=!1},{capture:!0,passive:!0})}),t}const T3=SE(O3),[Yd,D3]=Jt(["MenuRoot","MenuSub"],"MenuContext"),[uy,P3]=Jt("MenuRoot");var M3=ue({__name:"MenuRoot",props:{open:{type:Boolean,required:!1,default:!1},dir:{type:String,required:!1},modal:{type:Boolean,required:!1,default:!0}},emits:["update:open"],setup(t,{emit:e}){const n=t,r=e,{modal:s,dir:i}=bn(n),o=Aa(i),a=mr(n,"open",r),l=we(),u=T3();return D3({open:a,onOpenChange:c=>{a.value=c},content:l,onContentChange:c=>{l.value=c}}),P3({onClose:()=>{a.value=!1},isUsingKeyboardRef:u,dir:o,modal:s}),(c,d)=>(I(),Z(y(Zg),null,{default:K(()=>[Ee(c.$slots,"default")]),_:3}))}}),L3=M3;const[JE,N3]=Jt("MenuContent");var F3=ue({__name:"MenuContentImpl",props:Jx({loop:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},disableOutsideScroll:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},{...WE}),emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus","dismiss"],setup(t,{emit:e}){const n=t,r=e,s=Yd(),i=uy(),{trapFocus:o,disableOutsidePointerEvents:a,loop:l}=bn(n);IE(),Fd(a.value);const u=we(""),c=we(0),d=we(0),f=we(null),p=we("right"),h=we(0),g=we(null),w=we(),{forwardRef:x,currentElement:A}=Ze(),{handleTypeaheadSearch:E}=Ud();Ke(A,k=>{s.onContentChange(k)}),on(()=>{window.clearTimeout(c.value)});function m(k){var G,J;return p.value===((G=f.value)==null?void 0:G.side)&&sF(k,(J=f.value)==null?void 0:J.area)}async function v(k){var D;r("openAutoFocus",k),!k.defaultPrevented&&(k.preventDefault(),(D=A.value)==null||D.focus({preventScroll:!0}))}function _(k){var V;if(k.defaultPrevented)return;const G=k.target.closest("[data-reka-menu-content]")===k.currentTarget,J=k.ctrlKey||k.altKey||k.metaKey,W=k.key.length===1,j=sN(k,cn(),A.value,{loop:l.value,arrowKeyOptions:"vertical",dir:i==null?void 0:i.dir.value,focus:!0,attributeName:"[data-reka-collection-item]:not([data-disabled])"});if(j)return j==null?void 0:j.focus();if(k.code==="Space")return;const se=((V=w.value)==null?void 0:V.getItems())??[];if(G&&(k.key==="Tab"&&k.preventDefault(),!J&&W&&E(k.key,se)),k.target!==A.value||!nF.includes(k.key))return;k.preventDefault();const R=[...se.map(F=>F.ref)];TE.includes(k.key)&&R.reverse(),om(R)}function C(k){var D,G;(G=(D=k==null?void 0:k.currentTarget)==null?void 0:D.contains)!=null&&G.call(D,k.target)||(window.clearTimeout(c.value),u.value="")}function $(k){var J;if(!am(k))return;const D=k.target,G=h.value!==k.clientX;if((J=k==null?void 0:k.currentTarget)!=null&&J.contains(D)&&G){const W=k.clientX>h.value?"right":"left";p.value=W,h.value=k.clientX}}return N3({onItemEnter:k=>!!m(k),onItemLeave:k=>{var D;m(k)||((D=A.value)==null||D.focus(),g.value=null)},onTriggerLeave:k=>!!m(k),searchRef:u,pointerGraceTimerRef:d,onPointerGraceIntentChange:k=>{f.value=k}}),(k,D)=>(I(),Z(y(Qg),{"as-child":"",trapped:y(o),onMountAutoFocus:v,onUnmountAutoFocus:D[7]||(D[7]=G=>r("closeAutoFocus",G))},{default:K(()=>[N(y(Bd),{"as-child":"","disable-outside-pointer-events":y(a),onEscapeKeyDown:D[2]||(D[2]=G=>r("escapeKeyDown",G)),onPointerDownOutside:D[3]||(D[3]=G=>r("pointerDownOutside",G)),onFocusOutside:D[4]||(D[4]=G=>r("focusOutside",G)),onInteractOutside:D[5]||(D[5]=G=>r("interactOutside",G)),onDismiss:D[6]||(D[6]=G=>r("dismiss"))},{default:K(()=>[N(y(OF),{ref_key:"rovingFocusGroupRef",ref:w,"current-tab-stop-id":g.value,"onUpdate:currentTabStopId":D[0]||(D[0]=G=>g.value=G),"as-child":"",orientation:"vertical",dir:y(i).dir.value,loop:y(l),onEntryFocus:D[1]||(D[1]=G=>{r("entryFocus",G),y(i).isUsingKeyboardRef.value||G.preventDefault()})},{default:K(()=>[N(y(ly),{ref:y(x),role:"menu",as:k.as,"as-child":k.asChild,"aria-orientation":"vertical","data-reka-menu-content":"","data-state":y(DE)(y(s).open.value),dir:y(i).dir.value,side:k.side,"side-offset":k.sideOffset,align:k.align,"align-offset":k.alignOffset,"avoid-collisions":k.avoidCollisions,"collision-boundary":k.collisionBoundary,"collision-padding":k.collisionPadding,"arrow-padding":k.arrowPadding,"prioritize-position":k.prioritizePosition,"position-strategy":k.positionStrategy,"update-position-strategy":k.updatePositionStrategy,sticky:k.sticky,"hide-when-detached":k.hideWhenDetached,reference:k.reference,onKeydown:_,onBlur:C,onPointermove:$},{default:K(()=>[Ee(k.$slots,"default")]),_:3},8,["as","as-child","data-state","dir","side","side-offset","align","align-offset","avoid-collisions","collision-boundary","collision-padding","arrow-padding","prioritize-position","position-strategy","update-position-strategy","sticky","hide-when-detached","reference"])]),_:3},8,["current-tab-stop-id","dir","loop"])]),_:3},8,["disable-outside-pointer-events"])]),_:3},8,["trapped"]))}}),YE=F3,j3=ue({inheritAttrs:!1,__name:"MenuItemImpl",props:{disabled:{type:Boolean,required:!1},textValue:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(t){const e=t,n=JE(),{forwardRef:r}=Ze(),{CollectionItem:s}=yr(),i=we(!1);async function o(l){if(!l.defaultPrevented&&am(l)){if(e.disabled)n.onItemLeave(l);else if(!n.onItemEnter(l)){const c=l.currentTarget;c==null||c.focus({preventScroll:!0})}}}async function a(l){await _t(),!l.defaultPrevented&&am(l)&&n.onItemLeave(l)}return(l,u)=>(I(),Z(y(s),{value:{textValue:l.textValue}},{default:K(()=>[N(y(tt),Te({ref:y(r),role:"menuitem",tabindex:"-1"},l.$attrs,{as:l.as,"as-child":l.asChild,"aria-disabled":l.disabled||void 0,"data-disabled":l.disabled?"":void 0,"data-highlighted":i.value?"":void 0,onPointermove:o,onPointerleave:a,onFocus:u[0]||(u[0]=async c=>{await _t(),!(c.defaultPrevented||l.disabled)&&(i.value=!0)}),onBlur:u[1]||(u[1]=async c=>{await _t(),!c.defaultPrevented&&(i.value=!1)})}),{default:K(()=>[Ee(l.$slots,"default")]),_:3},16,["as","as-child","aria-disabled","data-disabled","data-highlighted"])]),_:3},8,["value"]))}}),q3=j3,U3=ue({__name:"MenuItem",props:{disabled:{type:Boolean,required:!1},textValue:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["select"],setup(t,{emit:e}){const n=t,r=e,{forwardRef:s,currentElement:i}=Ze(),o=uy(),a=JE(),l=we(!1);async function u(){const c=i.value;if(!n.disabled&&c){const d=new CustomEvent(eF,{bubbles:!0,cancelable:!0});r("select",d),await _t(),d.defaultPrevented?l.value=!1:o.onClose()}}return(c,d)=>(I(),Z(q3,Te(n,{ref:y(s),onClick:u,onPointerdown:d[0]||(d[0]=()=>{l.value=!0}),onPointerup:d[1]||(d[1]=async f=>{var p;await _t(),!f.defaultPrevented&&(l.value||(p=f.currentTarget)==null||p.click())}),onKeydown:d[2]||(d[2]=async f=>{const p=y(a).searchRef.value!=="";c.disabled||p&&f.key===" "||y(im).includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})}),{default:K(()=>[Ee(c.$slots,"default")]),_:3},16))}}),B3=U3,z3=ue({__name:"MenuRootContentModal",props:{loop:{type:Boolean,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const n=t,r=e,s=Ca(n,r),i=Yd(),{forwardRef:o,currentElement:a}=Ze();return qd(a),(l,u)=>(I(),Z(YE,Te(y(s),{ref:y(o),"trap-focus":y(i).open.value,"disable-outside-pointer-events":y(i).open.value,"disable-outside-scroll":!0,onDismiss:u[0]||(u[0]=c=>y(i).onOpenChange(!1)),onFocusOutside:u[1]||(u[1]=nr(c=>r("focusOutside",c),["prevent"]))}),{default:K(()=>[Ee(l.$slots,"default")]),_:3},16,["trap-focus","disable-outside-pointer-events"]))}}),V3=z3,H3=ue({__name:"MenuRootContentNonModal",props:{loop:{type:Boolean,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const s=Ca(t,e),i=Yd();return(o,a)=>(I(),Z(YE,Te(y(s),{"trap-focus":!1,"disable-outside-pointer-events":!1,"disable-outside-scroll":!1,onDismiss:a[0]||(a[0]=l=>y(i).onOpenChange(!1))}),{default:K(()=>[Ee(o.$slots,"default")]),_:3},16))}}),K3=H3,W3=ue({__name:"MenuContent",props:{forceMount:{type:Boolean,required:!1},loop:{type:Boolean,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const s=Ca(t,e),i=Yd(),o=uy();return(a,l)=>(I(),Z(y($a),{present:a.forceMount||y(i).open.value},{default:K(()=>[y(o).modal.value?(I(),Z(V3,Pn(Te({key:0},{...a.$attrs,...y(s)})),{default:K(()=>[Ee(a.$slots,"default")]),_:3},16)):(I(),Z(K3,Pn(Te({key:1},{...a.$attrs,...y(s)})),{default:K(()=>[Ee(a.$slots,"default")]),_:3},16))]),_:3},8,["present"]))}}),G3=W3,J3=ue({__name:"MenuPortal",props:{to:{type:null,required:!1},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(t){const e=t;return(n,r)=>(I(),Z(y(zd),Pn(sr(e)),{default:K(()=>[Ee(n.$slots,"default")]),_:3},16))}}),Y3=J3;const[XE,X3]=Jt("DropdownMenuRoot");var Q3=ue({__name:"DropdownMenuRoot",props:{defaultOpen:{type:Boolean,required:!1},open:{type:Boolean,required:!1,default:void 0},dir:{type:String,required:!1},modal:{type:Boolean,required:!1,default:!0}},emits:["update:open"],setup(t,{emit:e}){const n=t,r=e;Ze();const s=mr(n,"open",r,{defaultValue:n.defaultOpen,passive:n.open===void 0}),i=we(),{modal:o,dir:a}=bn(n),l=Aa(a);return X3({open:s,onOpenChange:u=>{s.value=u},onOpenToggle:()=>{s.value=!s.value},triggerId:"",triggerElement:i,contentId:"",modal:o,dir:l}),(u,c)=>(I(),Z(y(L3),{open:y(s),"onUpdate:open":c[0]||(c[0]=d=>Mt(s)?s.value=d:null),dir:y(l),modal:y(o)},{default:K(()=>[Ee(u.$slots,"default",{open:y(s)})]),_:3},8,["open","dir","modal"]))}}),Z3=Q3,eq=ue({__name:"DropdownMenuContent",props:{forceMount:{type:Boolean,required:!1},loop:{type:Boolean,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","closeAutoFocus"],setup(t,{emit:e}){const s=Ca(t,e);Ze();const i=XE(),o=we(!1);function a(l){l.defaultPrevented||(o.value||setTimeout(()=>{var u;(u=i.triggerElement.value)==null||u.focus()},0),o.value=!1,l.preventDefault())}return i.contentId||(i.contentId=Xr(void 0,"reka-dropdown-menu-content")),(l,u)=>{var c;return I(),Z(y(G3),Te(y(s),{id:y(i).contentId,"aria-labelledby":(c=y(i))==null?void 0:c.triggerId,style:{"--reka-dropdown-menu-content-transform-origin":"var(--reka-popper-transform-origin)","--reka-dropdown-menu-content-available-width":"var(--reka-popper-available-width)","--reka-dropdown-menu-content-available-height":"var(--reka-popper-available-height)","--reka-dropdown-menu-trigger-width":"var(--reka-popper-anchor-width)","--reka-dropdown-menu-trigger-height":"var(--reka-popper-anchor-height)"},onCloseAutoFocus:a,onInteractOutside:u[0]||(u[0]=d=>{var g;if(d.defaultPrevented)return;const f=d.detail.originalEvent,p=f.button===0&&f.ctrlKey===!0,h=f.button===2||p;(!y(i).modal.value||h)&&(o.value=!0),(g=y(i).triggerElement.value)!=null&&g.contains(d.target)&&d.preventDefault()})}),{default:K(()=>[Ee(l.$slots,"default")]),_:3},16,["id","aria-labelledby"])}}}),tq=eq,nq=ue({__name:"DropdownMenuItem",props:{disabled:{type:Boolean,required:!1},textValue:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["select"],setup(t,{emit:e}){const n=t,s=eu(e);return Ze(),(i,o)=>(I(),Z(y(B3),Pn(sr({...n,...y(s)})),{default:K(()=>[Ee(i.$slots,"default")]),_:3},16))}}),rq=nq,sq=ue({__name:"DropdownMenuPortal",props:{to:{type:null,required:!1},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(t){const e=t;return(n,r)=>(I(),Z(y(Y3),Pn(sr(e)),{default:K(()=>[Ee(n.$slots,"default")]),_:3},16))}}),iq=sq,oq=ue({__name:"DropdownMenuTrigger",props:{disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(t){const e=t,n=XE(),{forwardRef:r,currentElement:s}=Ze();return Dt(()=>{n.triggerElement=s}),n.triggerId||(n.triggerId=Xr(void 0,"reka-dropdown-menu-trigger")),(i,o)=>(I(),Z(y(R3),{"as-child":""},{default:K(()=>[N(y(tt),{id:y(n).triggerId,ref:y(r),type:i.as==="button"?"button":void 0,"as-child":e.asChild,as:i.as,"aria-haspopup":"menu","aria-expanded":y(n).open.value,"aria-controls":y(n).open.value?y(n).contentId:void 0,"data-disabled":i.disabled?"":void 0,disabled:i.disabled,"data-state":y(n).open.value?"open":"closed",onClick:o[0]||(o[0]=async a=>{var l;!i.disabled&&a.button===0&&a.ctrlKey===!1&&((l=y(n))==null||l.onOpenToggle(),await _t(),y(n).open.value&&a.preventDefault())}),onKeydown:o[1]||(o[1]=Ys(a=>{i.disabled||(["Enter"," "].includes(a.key)&&y(n).onOpenToggle(),a.key==="ArrowDown"&&y(n).onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())},["enter","space","arrow-down"]))},{default:K(()=>[Ee(i.$slots,"default")]),_:3},8,["id","type","as-child","as","aria-expanded","aria-controls","data-disabled","disabled","data-state"])]),_:3}))}}),aq=oq,lq=ue({__name:"Label",props:{for:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"label"}},setup(t){const e=t;return Ze(),(n,r)=>(I(),Z(y(tt),Te(e,{onMousedown:r[0]||(r[0]=s=>{!s.defaultPrevented&&s.detail>1&&s.preventDefault()})}),{default:K(()=>[Ee(n.$slots,"default")]),_:3},16))}}),QE=lq;const uq=[" ","Enter","ArrowUp","ArrowDown"],cq=[" ","Enter"],jr=10;function Ll(t,e,n){return t===void 0?!1:Array.isArray(t)?t.some(r=>pm(r,e,n)):pm(t,e,n)}function pm(t,e,n){return t===void 0||e===void 0?!1:typeof t=="string"?t===e:typeof n=="function"?n(t,e):typeof n=="string"?(t==null?void 0:t[n])===(e==null?void 0:e[n]):Fc(t,e)}function dq(t){return t==null||t===""||Array.isArray(t)&&t.length===0}const fq={key:0,value:""},[ji,ZE]=Jt("SelectRoot");var pq=ue({inheritAttrs:!1,__name:"SelectRoot",props:{open:{type:Boolean,required:!1,default:void 0},defaultOpen:{type:Boolean,required:!1},defaultValue:{type:null,required:!1},modelValue:{type:null,required:!1,default:void 0},by:{type:[String,Function],required:!1},dir:{type:String,required:!1},multiple:{type:Boolean,required:!1},autocomplete:{type:String,required:!1},disabled:{type:Boolean,required:!1},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:["update:modelValue","update:open"],setup(t,{emit:e}){const n=t,r=e,{required:s,disabled:i,multiple:o,dir:a}=bn(n),l=mr(n,"modelValue",r,{defaultValue:n.defaultValue??(o.value?[]:void 0),passive:n.modelValue===void 0,deep:!0}),u=mr(n,"open",r,{defaultValue:n.defaultOpen,passive:n.open===void 0}),c=we(),d=we(),f=we({x:0,y:0}),p=H(()=>{var m;return o.value&&Array.isArray(l.value)?((m=l.value)==null?void 0:m.length)===0:B0(l.value)});yr({isProvider:!0});const h=Aa(a),g=Yg(c),w=we(new Set),x=H(()=>Array.from(w.value).map(m=>m.value).join(";"));function A(m){if(o.value){const v=Array.isArray(l.value)?[...l.value]:[],_=v.findIndex(C=>pm(C,m,n.by));_===-1?v.push(m):v.splice(_,1),l.value=[...v]}else l.value=m}function E(m){return Array.from(w.value).find(v=>Ll(m,v.value,n.by))}return ZE({triggerElement:c,onTriggerChange:m=>{c.value=m},valueElement:d,onValueElementChange:m=>{d.value=m},contentId:"",modelValue:l,onValueChange:A,by:n.by,open:u,multiple:o,required:s,onOpenChange:m=>{u.value=m},dir:h,triggerPointerDownPosRef:f,disabled:i,isEmptyModelValue:p,optionsSet:w,onOptionAdd:m=>{const v=E(m.value);v&&w.value.delete(v),w.value.add(m)},onOptionRemove:m=>{const v=E(m.value);v&&w.value.delete(v)}}),(m,v)=>(I(),Z(y(Zg),null,{default:K(()=>[Ee(m.$slots,"default",{modelValue:y(l),open:y(u)}),y(g)?(I(),Z(gq,{key:x.value,"aria-hidden":"true",tabindex:"-1",multiple:y(o),required:y(s),name:m.name,autocomplete:m.autocomplete,disabled:y(i),value:y(l)},{default:K(()=>[y(B0)(y(l))?(I(),ae("option",fq)):ke("v-if",!0),(I(!0),ae(je,null,at(Array.from(w.value),_=>(I(),ae("option",Te({key:_.value??""},{ref_for:!0},_),null,16))),128))]),_:1},8,["multiple","required","name","autocomplete","disabled","value"])):ke("v-if",!0)]),_:3}))}}),hq=pq,mq=ue({__name:"BubbleSelect",props:{autocomplete:{type:String,required:!1},autofocus:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},form:{type:String,required:!1},multiple:{type:Boolean,required:!1},name:{type:String,required:!1},required:{type:Boolean,required:!1},size:{type:Number,required:!1},value:{type:null,required:!1}},setup(t){const e=t,n=we(),r=ji();Ke(()=>e.value,(i,o)=>{const a=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(a,"value").set;if(i!==o&&u&&n.value){const c=new Event("change",{bubbles:!0});u.call(n.value,i),n.value.dispatchEvent(c)}});function s(i){r.onValueChange(i.target.value)}return(i,o)=>(I(),Z(y(Vd),{"as-child":""},{default:K(()=>[L("select",Te({ref_key:"selectElement",ref:n},e,{onInput:s}),[Ee(i.$slots,"default")],16)]),_:3}))}}),gq=mq,yq=ue({__name:"SelectPopperPosition",props:{side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1,default:"start"},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1,default:jr},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(t){const n=jd(t);return(r,s)=>(I(),Z(y(ly),Te(y(n),{style:{boxSizing:"border-box","--reka-select-content-transform-origin":"var(--reka-popper-transform-origin)","--reka-select-content-available-width":"var(--reka-popper-available-width)","--reka-select-content-available-height":"var(--reka-popper-available-height)","--reka-select-trigger-width":"var(--reka-popper-anchor-width)","--reka-select-trigger-height":"var(--reka-popper-anchor-height)"}}),{default:K(()=>[Ee(r.$slots,"default")]),_:3},16))}}),vq=yq;const bq={onViewportChange:()=>{},itemTextRefCallback:()=>{},itemRefCallback:()=>{}},[Xd,eA]=Jt("SelectContent");var wq=ue({__name:"SelectContentImpl",props:{position:{type:String,required:!1,default:"item-aligned"},bodyLock:{type:Boolean,required:!1,default:!0},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1,default:"start"},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["closeAutoFocus","escapeKeyDown","pointerDownOutside"],setup(t,{emit:e}){const n=t,r=e,s=ji();IE(),Fd(n.bodyLock);const{CollectionSlot:i,getItems:o}=yr(),a=we();qd(a);const{search:l,handleTypeaheadSearch:u}=Ud(),c=we(),d=we(),f=we(),p=we(!1),h=we(!1),g=we(!1);function w(){d.value&&a.value&&om([d.value,a.value])}Ke(p,()=>{w()});const{onOpenChange:x,triggerPointerDownPosRef:A}=s;Nt(_=>{if(!a.value)return;let C={x:0,y:0};const $=D=>{var G,J;C={x:Math.abs(Math.round(D.pageX)-(((G=A.value)==null?void 0:G.x)??0)),y:Math.abs(Math.round(D.pageY)-(((J=A.value)==null?void 0:J.y)??0))}},k=D=>{var G;D.pointerType!=="touch"&&(C.x<=10&&C.y<=10?D.preventDefault():(G=a.value)!=null&&G.contains(D.target)||x(!1),document.removeEventListener("pointermove",$),A.value=null)};A.value!==null&&(document.addEventListener("pointermove",$),document.addEventListener("pointerup",k,{capture:!0,once:!0})),_(()=>{document.removeEventListener("pointermove",$),document.removeEventListener("pointerup",k,{capture:!0})})});function E(_){const C=_.ctrlKey||_.altKey||_.metaKey;if(_.key==="Tab"&&_.preventDefault(),!C&&_.key.length===1&&u(_.key,o()),["ArrowUp","ArrowDown","Home","End"].includes(_.key)){let k=[...o().map(D=>D.ref)];if(["ArrowUp","End"].includes(_.key)&&(k=k.slice().reverse()),["ArrowUp","ArrowDown"].includes(_.key)){const D=_.target,G=k.indexOf(D);k=k.slice(G+1)}setTimeout(()=>om(k)),_.preventDefault()}}const m=H(()=>n.position==="popper"?n:{}),v=jd(m.value);return eA({content:a,viewport:c,onViewportChange:_=>{c.value=_},itemRefCallback:(_,C,$)=>{const k=!h.value&&!$,D=Ll(s.modelValue.value,C,s.by);if(s.multiple.value){if(g.value)return;(D||k)&&(d.value=_,D&&(g.value=!0))}else(D||k)&&(d.value=_);k&&(h.value=!0)},selectedItem:d,selectedItemText:f,onItemLeave:()=>{var _;(_=a.value)==null||_.focus()},itemTextRefCallback:(_,C,$)=>{const k=!h.value&&!$;(Ll(s.modelValue.value,C,s.by)||k)&&(f.value=_)},focusSelectedItem:w,position:n.position,isPositioned:p,searchRef:l}),(_,C)=>(I(),Z(y(i),null,{default:K(()=>[N(y(Qg),{"as-child":"",onMountAutoFocus:C[6]||(C[6]=nr(()=>{},["prevent"])),onUnmountAutoFocus:C[7]||(C[7]=$=>{var k;r("closeAutoFocus",$),!$.defaultPrevented&&((k=y(s).triggerElement.value)==null||k.focus({preventScroll:!0}),$.preventDefault())})},{default:K(()=>[N(y(Bd),{"as-child":"","disable-outside-pointer-events":"",onFocusOutside:C[2]||(C[2]=nr(()=>{},["prevent"])),onDismiss:C[3]||(C[3]=$=>y(s).onOpenChange(!1)),onEscapeKeyDown:C[4]||(C[4]=$=>r("escapeKeyDown",$)),onPointerDownOutside:C[5]||(C[5]=$=>r("pointerDownOutside",$))},{default:K(()=>[(I(),Z(ns(_.position==="popper"?vq:Aq),Te({..._.$attrs,...y(v)},{id:y(s).contentId,ref:$=>{const k=y(Pr)($);k!=null&&k.hasAttribute("data-reka-popper-content-wrapper")?a.value=k.firstElementChild:a.value=k},role:"listbox","data-state":y(s).open.value?"open":"closed",dir:y(s).dir.value,style:{display:"flex",flexDirection:"column",outline:"none"},onContextmenu:C[0]||(C[0]=nr(()=>{},["prevent"])),onPlaced:C[1]||(C[1]=$=>p.value=!0),onKeydown:E}),{default:K(()=>[Ee(_.$slots,"default")]),_:3},16,["id","data-state","dir","onKeydown"]))]),_:3})]),_:3})]),_:3}))}}),_q=wq;const[xq,Sq]=Jt("SelectItemAlignedPosition");var Eq=ue({inheritAttrs:!1,__name:"SelectItemAlignedPosition",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["placed"],setup(t,{emit:e}){const n=t,r=e,{getItems:s}=yr(),i=ji(),o=Xd(),a=we(!1),l=we(!0),u=we(),{forwardRef:c,currentElement:d}=Ze(),{viewport:f,selectedItem:p,selectedItemText:h,focusSelectedItem:g}=o;function w(){if(i.triggerElement.value&&i.valueElement.value&&u.value&&d.value&&(f!=null&&f.value)&&(p!=null&&p.value)&&(h!=null&&h.value)){const E=i.triggerElement.value.getBoundingClientRect(),m=d.value.getBoundingClientRect(),v=i.valueElement.value.getBoundingClientRect(),_=h.value.getBoundingClientRect();if(i.dir.value!=="rtl"){const T=_.left-m.left,Y=v.left-T,re=E.left-Y,ne=E.width+re,xe=Math.max(ne,m.width),M=window.innerWidth-jr,P=U0(Y,jr,Math.max(jr,M-xe));u.value.style.minWidth=`${ne}px`,u.value.style.left=`${P}px`}else{const T=m.right-_.right,Y=window.innerWidth-v.right-T,re=window.innerWidth-E.right-Y,ne=E.width+re,xe=Math.max(ne,m.width),M=window.innerWidth-jr,P=U0(Y,jr,Math.max(jr,M-xe));u.value.style.minWidth=`${ne}px`,u.value.style.right=`${P}px`}const C=s().map(T=>T.ref),$=window.innerHeight-jr*2,k=f.value.scrollHeight,D=window.getComputedStyle(d.value),G=Number.parseInt(D.borderTopWidth,10),J=Number.parseInt(D.paddingTop,10),W=Number.parseInt(D.borderBottomWidth,10),j=Number.parseInt(D.paddingBottom,10),se=G+J+k+j+W,R=Math.min(p.value.offsetHeight*5,se),V=window.getComputedStyle(f.value),F=Number.parseInt(V.paddingTop,10),ee=Number.parseInt(V.paddingBottom,10),z=E.top+E.height/2-jr,ie=$-z,pe=p.value.offsetHeight/2,he=p.value.offsetTop+pe,Ae=G+J+he,X=se-Ae;if(Ae<=z){const T=p.value===C[C.length-1];u.value.style.bottom="0px";const Y=d.value.clientHeight-f.value.offsetTop-f.value.offsetHeight,re=Math.max(ie,pe+(T?ee:0)+Y+W),ne=Ae+re;u.value.style.height=`${ne}px`}else{const T=p.value===C[0];u.value.style.top="0px";const re=Math.max(z,G+f.value.offsetTop+(T?F:0)+pe)+X;u.value.style.height=`${re}px`,f.value.scrollTop=Ae-z+f.value.offsetTop}u.value.style.margin=`${jr}px 0`,u.value.style.minHeight=`${R}px`,u.value.style.maxHeight=`${$}px`,r("placed"),requestAnimationFrame(()=>a.value=!0)}}const x=we("");Dt(async()=>{await _t(),w(),d.value&&(x.value=window.getComputedStyle(d.value).zIndex)});function A(E){E&&l.value===!0&&(w(),g==null||g(),l.value=!1)}return _N(i.triggerElement,()=>{w()}),Sq({contentWrapper:u,shouldExpandOnScrollRef:a,onScrollButtonChange:A}),(E,m)=>(I(),ae("div",{ref_key:"contentWrapperElement",ref:u,style:Xt({display:"flex",flexDirection:"column",position:"fixed",zIndex:x.value})},[N(y(tt),Te({ref:y(c),style:{boxSizing:"border-box",maxHeight:"100%"}},{...E.$attrs,...n}),{default:K(()=>[Ee(E.$slots,"default")]),_:3},16)],4))}}),Aq=Eq,Cq=ue({inheritAttrs:!1,__name:"SelectProvider",props:{context:{type:Object,required:!0}},setup(t){return ZE(t.context),eA(bq),(n,r)=>Ee(n.$slots,"default")}}),$q=Cq;const kq={key:1};var Iq=ue({inheritAttrs:!1,__name:"SelectContent",props:{forceMount:{type:Boolean,required:!1},position:{type:String,required:!1},bodyLock:{type:Boolean,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["closeAutoFocus","escapeKeyDown","pointerDownOutside"],setup(t,{emit:e}){const n=t,s=Ca(n,e),i=ji(),o=we();Dt(()=>{o.value=new DocumentFragment});const a=we(),l=H(()=>n.forceMount||i.open.value),u=we(l.value);return Ke(l,()=>{setTimeout(()=>u.value=l.value)}),(c,d)=>{var f;return l.value||u.value||(f=a.value)!=null&&f.present?(I(),Z(y($a),{key:0,ref_key:"presenceRef",ref:a,present:l.value},{default:K(()=>[N(_q,Pn(sr({...y(s),...c.$attrs})),{default:K(()=>[Ee(c.$slots,"default")]),_:3},16)]),_:3},8,["present"])):o.value?(I(),ae("div",kq,[(I(),Z(Id,{to:o.value},[N($q,{context:y(i)},{default:K(()=>[Ee(c.$slots,"default")]),_:3},8,["context"])],8,["to"]))])):ke("v-if",!0)}}}),Rq=Iq,Oq=ue({__name:"SelectIcon",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(t){return(e,n)=>(I(),Z(y(tt),{"aria-hidden":"true",as:e.as,"as-child":e.asChild},{default:K(()=>[Ee(e.$slots,"default",{},()=>[n[0]||(n[0]=Ue("▼"))])]),_:3},8,["as","as-child"]))}}),Tq=Oq;const[Dq,Pq]=Jt("SelectItem");var Mq=ue({__name:"SelectItem",props:{value:{type:null,required:!0},disabled:{type:Boolean,required:!1},textValue:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["select"],setup(t,{emit:e}){const n=t,r=e,{disabled:s}=bn(n),i=ji(),o=Xd(),{forwardRef:a,currentElement:l}=Ze(),{CollectionItem:u}=yr(),c=H(()=>{var m;return Ll((m=i.modelValue)==null?void 0:m.value,n.value,i.by)}),d=we(!1),f=we(n.textValue??""),p=Xr(void 0,"reka-select-item-text"),h="select.select";async function g(m){if(m.defaultPrevented)return;const v={originalEvent:m,value:n.value};Nd(h,w,v)}async function w(m){await _t(),r("select",m),!m.defaultPrevented&&(s.value||(i.onValueChange(n.value),i.multiple.value||i.onOpenChange(!1)))}async function x(m){var v,_;await _t(),!m.defaultPrevented&&(s.value?(v=o.onItemLeave)==null||v.call(o):(_=m.currentTarget)==null||_.focus({preventScroll:!0}))}async function A(m){var v;await _t(),!m.defaultPrevented&&m.currentTarget===cn()&&((v=o.onItemLeave)==null||v.call(o))}async function E(m){var _;await _t(),!(m.defaultPrevented||((_=o.searchRef)==null?void 0:_.value)!==""&&m.key===" ")&&(cq.includes(m.key)&&g(m),m.key===" "&&m.preventDefault())}if(n.value==="")throw new Error("A <SelectItem /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return Dt(()=>{l.value&&o.itemRefCallback(l.value,n.value,n.disabled)}),Pq({value:n.value,disabled:s,textId:p,isSelected:c,onItemTextChange:m=>{f.value=((f.value||(m==null?void 0:m.textContent))??"").trim()}}),(m,v)=>(I(),Z(y(u),{value:{textValue:f.value}},{default:K(()=>[N(y(tt),{ref:y(a),role:"option","aria-labelledby":y(p),"data-highlighted":d.value?"":void 0,"aria-selected":c.value,"data-state":c.value?"checked":"unchecked","aria-disabled":y(s)||void 0,"data-disabled":y(s)?"":void 0,tabindex:y(s)?void 0:-1,as:m.as,"as-child":m.asChild,onFocus:v[0]||(v[0]=_=>d.value=!0),onBlur:v[1]||(v[1]=_=>d.value=!1),onPointerup:g,onPointerdown:v[2]||(v[2]=_=>{_.currentTarget.focus({preventScroll:!0})}),onTouchend:v[3]||(v[3]=nr(()=>{},["prevent","stop"])),onPointermove:x,onPointerleave:A,onKeydown:E},{default:K(()=>[Ee(m.$slots,"default")]),_:3},8,["aria-labelledby","data-highlighted","aria-selected","data-state","aria-disabled","data-disabled","tabindex","as","as-child"])]),_:3},8,["value"]))}}),Lq=Mq,Nq=ue({inheritAttrs:!1,__name:"SelectItemText",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(t){const e=t,n=ji(),r=Xd(),s=Dq(),{forwardRef:i,currentElement:o}=Ze(),a=H(()=>{var l,u;return{value:s.value,disabled:s.disabled.value,textContent:((l=o.value)==null?void 0:l.textContent)??((u=s.value)==null?void 0:u.toString())??""}});return Dt(()=>{o.value&&(s.onItemTextChange(o.value),r.itemTextRefCallback(o.value,s.value,s.disabled.value),n.onOptionAdd(a.value))}),on(()=>{n.onOptionRemove(a.value)}),(l,u)=>(I(),Z(y(tt),Te({id:y(s).textId,ref:y(i)},{...e,...l.$attrs}),{default:K(()=>[Ee(l.$slots,"default")]),_:3},16,["id"]))}}),Fq=Nq,jq=ue({__name:"SelectPortal",props:{to:{type:null,required:!1},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(t){const e=t;return(n,r)=>(I(),Z(y(zd),Pn(sr(e)),{default:K(()=>[Ee(n.$slots,"default")]),_:3},16))}}),qq=jq,Uq=ue({__name:"SelectTrigger",props:{disabled:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(t){const e=t,n=ji(),{forwardRef:r,currentElement:s}=Ze(),i=H(()=>{var f;return((f=n.disabled)==null?void 0:f.value)||e.disabled});n.contentId||(n.contentId=Xr(void 0,"reka-select-content")),Dt(()=>{n.onTriggerChange(s.value)});const{getItems:o}=yr(),{search:a,handleTypeaheadSearch:l,resetTypeahead:u}=Ud();function c(){i.value||(n.onOpenChange(!0),u())}function d(f){c(),n.triggerPointerDownPosRef.value={x:Math.round(f.pageX),y:Math.round(f.pageY)}}return(f,p)=>(I(),Z(y(ey),{"as-child":"",reference:f.reference},{default:K(()=>{var h,g,w,x;return[N(y(tt),{ref:y(r),role:"combobox",type:f.as==="button"?"button":void 0,"aria-controls":y(n).contentId,"aria-expanded":y(n).open.value||!1,"aria-required":(h=y(n).required)==null?void 0:h.value,"aria-autocomplete":"none",disabled:i.value,dir:(g=y(n))==null?void 0:g.dir.value,"data-state":(w=y(n))!=null&&w.open.value?"open":"closed","data-disabled":i.value?"":void 0,"data-placeholder":y(dq)((x=y(n).modelValue)==null?void 0:x.value)?"":void 0,"as-child":f.asChild,as:f.as,onClick:p[0]||(p[0]=A=>{var E;(E=A==null?void 0:A.currentTarget)==null||E.focus()}),onPointerdown:p[1]||(p[1]=A=>{if(A.pointerType==="touch")return A.preventDefault();const E=A.target;E.hasPointerCapture(A.pointerId)&&E.releasePointerCapture(A.pointerId),A.button===0&&A.ctrlKey===!1&&(d(A),A.preventDefault())}),onPointerup:p[2]||(p[2]=nr(A=>{A.pointerType==="touch"&&d(A)},["prevent"])),onKeydown:p[3]||(p[3]=A=>{const E=y(a)!=="";!(A.ctrlKey||A.altKey||A.metaKey)&&A.key.length===1&&E&&A.key===" "||(y(l)(A.key,y(o)()),y(uq).includes(A.key)&&(c(),A.preventDefault()))})},{default:K(()=>[Ee(f.$slots,"default")]),_:3},8,["type","aria-controls","aria-expanded","aria-required","disabled","dir","data-state","data-disabled","data-placeholder","as-child","as"])]}),_:3},8,["reference"]))}}),Bq=Uq,zq=ue({__name:"SelectValue",props:{placeholder:{type:String,required:!1,default:""},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(t){const e=t,{forwardRef:n,currentElement:r}=Ze(),s=ji();Dt(()=>{s.valueElement=r});const i=H(()=>{var c;let a=[];const l=Array.from(s.optionsSet.value),u=d=>l.find(f=>Ll(d,f.value,s.by));return Array.isArray(s.modelValue.value)?a=s.modelValue.value.map(d=>{var f;return((f=u(d))==null?void 0:f.textContent)??""}):a=[((c=u(s.modelValue.value))==null?void 0:c.textContent)??""],a.filter(Boolean)}),o=H(()=>i.value.length?i.value.join(", "):e.placeholder);return(a,l)=>(I(),Z(y(tt),{ref:y(n),as:a.as,"as-child":a.asChild,style:{pointerEvents:"none"},"data-placeholder":i.value.length?void 0:e.placeholder},{default:K(()=>[Ee(a.$slots,"default",{selectedLabel:i.value,modelValue:y(s).modelValue.value},()=>[Ue(fe(o.value),1)])]),_:3},8,["as","as-child","data-placeholder"]))}}),aw=zq,Vq=ue({__name:"SelectViewport",props:{nonce:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(t){const e=t,{nonce:n}=bn(e),r=GE(n),s=Xd(),i=s.position==="item-aligned"?xq():void 0,{forwardRef:o,currentElement:a}=Ze();Dt(()=>{s==null||s.onViewportChange(a.value)});const l=we(0);function u(c){const d=c.currentTarget,{shouldExpandOnScrollRef:f,contentWrapper:p}=i??{};if(f!=null&&f.value&&(p!=null&&p.value)){const h=Math.abs(l.value-d.scrollTop);if(h>0){const g=window.innerHeight-jr*2,w=Number.parseFloat(p.value.style.minHeight),x=Number.parseFloat(p.value.style.height),A=Math.max(w,x);if(A<g){const E=A+h,m=Math.min(g,E),v=E-m;p.value.style.height=`${m}px`,p.value.style.bottom==="0px"&&(d.scrollTop=v>0?v:0,p.value.style.justifyContent="flex-end")}}}l.value=d.scrollTop}return(c,d)=>(I(),ae(je,null,[N(y(tt),Te({ref:y(o),"data-reka-select-viewport":"",role:"presentation"},{...c.$attrs,...e},{style:{position:"relative",flex:1,overflow:"hidden auto"},onScroll:u}),{default:K(()=>[Ee(c.$slots,"default")]),_:3},16),N(y(tt),{as:"style",nonce:y(r)},{default:K(()=>d[0]||(d[0]=[Ue(" /* Hide scrollbars cross-browser and enable momentum scroll for touch devices */ [data-reka-select-viewport] { scrollbar-width:none; -ms-overflow-style: none; -webkit-overflow-scrolling: touch; } [data-reka-select-viewport]::-webkit-scrollbar { display: none; } ")])),_:1,__:[0]},8,["nonce"])],64))}}),Hq=Vq;const[Kq,Wq]=Jt("SwitchRoot");var Gq=ue({__name:"SwitchRoot",props:{defaultValue:{type:Boolean,required:!1},modelValue:{type:[Boolean,null],required:!1,default:void 0},disabled:{type:Boolean,required:!1},id:{type:String,required:!1},value:{type:String,required:!1,default:"on"},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:["update:modelValue"],setup(t,{emit:e}){const n=t,r=e,{disabled:s}=bn(n),i=mr(n,"modelValue",r,{defaultValue:n.defaultValue,passive:n.modelValue===void 0});function o(){s.value||(i.value=!i.value)}const{forwardRef:a,currentElement:l}=Ze(),u=Yg(l),c=H(()=>{var d;return n.id&&l.value?(d=document.querySelector(`[for="${n.id}"]`))==null?void 0:d.innerText:void 0});return Wq({modelValue:i,toggleCheck:o,disabled:s}),(d,f)=>(I(),Z(y(tt),Te(d.$attrs,{id:d.id,ref:y(a),role:"switch",type:d.as==="button"?"button":void 0,value:d.value,"aria-label":d.$attrs["aria-label"]||c.value,"aria-checked":y(i),"aria-required":d.required,"data-state":y(i)?"checked":"unchecked","data-disabled":y(s)?"":void 0,"as-child":d.asChild,as:d.as,disabled:y(s),onClick:o,onKeydown:Ys(nr(o,["prevent"]),["enter"])}),{default:K(()=>[Ee(d.$slots,"default",{modelValue:y(i)}),y(u)&&d.name?(I(),Z(y(ME),{key:0,type:"checkbox",name:d.name,disabled:y(s),required:d.required,value:d.value,checked:!!y(i)},null,8,["name","disabled","required","value","checked"])):ke("v-if",!0)]),_:3},16,["id","type","value","aria-label","aria-checked","aria-required","data-state","data-disabled","as-child","as","disabled","onKeydown"]))}}),Jq=Gq,Yq=ue({__name:"SwitchThumb",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(t){const e=Kq();return Ze(),(n,r)=>{var s;return I(),Z(y(tt),{"data-state":(s=y(e).modelValue)!=null&&s.value?"checked":"unchecked","data-disabled":y(e).disabled.value?"":void 0,"as-child":n.asChild,as:n.as},{default:K(()=>[Ee(n.$slots,"default")]),_:3},8,["data-state","data-disabled","as-child","as"])}}}),Xq=Yq,Qq=ue({__name:"ToastAnnounceExclude",props:{altText:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(t){return(e,n)=>(I(),Z(y(tt),{as:e.as,"as-child":e.asChild,"data-reka-toast-announce-exclude":"","data-reka-toast-announce-alt":e.altText||void 0},{default:K(()=>[Ee(e.$slots,"default")]),_:3},8,["as","as-child","data-reka-toast-announce-alt"]))}}),Zq=Qq;const[Qd,eU]=Jt("ToastProvider");var tU=ue({inheritAttrs:!1,__name:"ToastProvider",props:{label:{type:String,required:!1,default:"Notification"},duration:{type:Number,required:!1,default:5e3},disableSwipe:{type:Boolean,required:!1},swipeDirection:{type:String,required:!1,default:"right"},swipeThreshold:{type:Number,required:!1,default:50}},setup(t){const e=t,{label:n,duration:r,disableSwipe:s,swipeDirection:i,swipeThreshold:o}=bn(e);yr({isProvider:!0});const a=we(),l=we(0),u=we(!1),c=we(!1);if(e.label&&typeof e.label=="string"&&!e.label.trim()){const d="Invalid prop `label` supplied to `ToastProvider`. Expected non-empty `string`.";throw new Error(d)}return eU({label:n,duration:r,disableSwipe:s,swipeDirection:i,swipeThreshold:o,toastCount:l,viewport:a,onViewportChange(d){a.value=d},onToastAdd(){l.value++},onToastRemove(){l.value--},isFocusedToastEscapeKeyDownRef:u,isClosePausedRef:c}),(d,f)=>Ee(d.$slots,"default")}}),nU=tU,rU=ue({__name:"ToastAnnounce",setup(t){const e=Qd(),n=gN(1e3),r=we(!1);return CE(()=>{r.value=!0}),(s,i)=>y(n)||r.value?(I(),Z(y(Vd),{key:0},{default:K(()=>[Ue(fe(y(e).label.value)+" ",1),Ee(s.$slots,"default")]),_:3})):ke("v-if",!0)}}),sU=rU;const iU="toast.swipeStart",oU="toast.swipeMove",aU="toast.swipeCancel",lU="toast.swipeEnd",hm="toast.viewportPause",mm="toast.viewportResume";function Tu(t,e,n){const r=n.originalEvent.currentTarget,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&r.addEventListener(t,e,{once:!0}),r.dispatchEvent(s)}function lw(t,e,n=0){const r=Math.abs(t.x),s=Math.abs(t.y),i=r>s;return e==="left"||e==="right"?i&&r>n:!i&&s>n}function uU(t){return t.nodeType===t.ELEMENT_NODE}function tA(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),uU(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.rekaToastAnnounceExclude==="";if(!s)if(i){const o=r.dataset.rekaToastAnnounceAlt;o&&e.push(o)}else e.push(...tA(r))}}),e}const[cU,dU]=Jt("ToastRoot");var fU=ue({inheritAttrs:!1,__name:"ToastRootImpl",props:{type:{type:String,required:!1},open:{type:Boolean,required:!1,default:!1},duration:{type:Number,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"li"}},emits:["close","escapeKeyDown","pause","resume","swipeStart","swipeMove","swipeCancel","swipeEnd"],setup(t,{emit:e}){const n=t,r=e,{forwardRef:s,currentElement:i}=Ze(),{CollectionItem:o}=yr(),a=Qd(),l=we(null),u=we(null),c=H(()=>typeof n.duration=="number"?n.duration:a.duration.value),d=we(0),f=we(c.value),p=we(0),h=we(c.value),g=CE(()=>{const E=new Date().getTime()-d.value;h.value=Math.max(f.value-E,0)},{fpsLimit:60});function w(E){E<=0||E===Number.POSITIVE_INFINITY||Ss&&(window.clearTimeout(p.value),d.value=new Date().getTime(),p.value=window.setTimeout(x,E))}function x(E){var _,C;const m=(E==null?void 0:E.pointerType)==="";((_=i.value)==null?void 0:_.contains(cn()))&&m&&((C=a.viewport.value)==null||C.focus()),m&&(a.isClosePausedRef.value=!1),r("close")}const A=H(()=>i.value?tA(i.value):null);if(n.type&&!["foreground","background"].includes(n.type)){const E="Invalid prop `type` supplied to `Toast`. Expected `foreground | background`.";throw new Error(E)}return Nt(E=>{const m=a.viewport.value;if(m){const v=()=>{w(f.value),g.resume(),r("resume")},_=()=>{const C=new Date().getTime()-d.value;f.value=f.value-C,window.clearTimeout(p.value),g.pause(),r("pause")};return m.addEventListener(hm,_),m.addEventListener(mm,v),()=>{m.removeEventListener(hm,_),m.removeEventListener(mm,v)}}}),Ke(()=>[n.open,c.value],()=>{f.value=c.value,n.open&&!a.isClosePausedRef.value&&w(c.value)},{immediate:!0}),Jg("Escape",E=>{r("escapeKeyDown",E),E.defaultPrevented||(a.isFocusedToastEscapeKeyDownRef.value=!0,x())}),Dt(()=>{a.onToastAdd()}),on(()=>{a.onToastRemove()}),dU({onClose:x}),(E,m)=>(I(),ae(je,null,[A.value?(I(),Z(sU,{key:0,role:"alert","aria-live":E.type==="foreground"?"assertive":"polite","aria-atomic":"true"},{default:K(()=>[Ue(fe(A.value),1)]),_:1},8,["aria-live"])):ke("v-if",!0),y(a).viewport.value?(I(),Z(Id,{key:1,to:y(a).viewport.value},[N(y(o),null,{default:K(()=>[N(y(tt),Te({ref:y(s),role:"alert","aria-live":"off","aria-atomic":"true",tabindex:"0"},E.$attrs,{as:E.as,"as-child":E.asChild,"data-state":E.open?"open":"closed","data-swipe-direction":y(a).swipeDirection.value,style:y(a).disableSwipe.value?void 0:{userSelect:"none",touchAction:"none"},onPointerdown:m[0]||(m[0]=nr(v=>{y(a).disableSwipe.value||(l.value={x:v.clientX,y:v.clientY})},["left"])),onPointermove:m[1]||(m[1]=v=>{if(y(a).disableSwipe.value||!l.value)return;const _=v.clientX-l.value.x,C=v.clientY-l.value.y,$=!!u.value,k=["left","right"].includes(y(a).swipeDirection.value),D=["left","up"].includes(y(a).swipeDirection.value)?Math.min:Math.max,G=k?D(0,_):0,J=k?0:D(0,C),W=v.pointerType==="touch"?10:2,j={x:G,y:J},se={originalEvent:v,delta:j};$?(u.value=j,y(Tu)(y(oU),R=>r("swipeMove",R),se)):y(lw)(j,y(a).swipeDirection.value,W)?(u.value=j,y(Tu)(y(iU),R=>r("swipeStart",R),se),v.target.setPointerCapture(v.pointerId)):(Math.abs(_)>W||Math.abs(C)>W)&&(l.value=null)}),onPointerup:m[2]||(m[2]=v=>{if(y(a).disableSwipe.value)return;const _=u.value,C=v.target;if(C.hasPointerCapture(v.pointerId)&&C.releasePointerCapture(v.pointerId),u.value=null,l.value=null,_){const $=v.currentTarget,k={originalEvent:v,delta:_};y(lw)(_,y(a).swipeDirection.value,y(a).swipeThreshold.value)?y(Tu)(y(lU),D=>r("swipeEnd",D),k):y(Tu)(y(aU),D=>r("swipeCancel",D),k),$==null||$.addEventListener("click",D=>D.preventDefault(),{once:!0})}})}),{default:K(()=>[Ee(E.$slots,"default",{remaining:h.value,duration:c.value})]),_:3},16,["as","as-child","data-state","data-swipe-direction","style"])]),_:3})],8,["to"])):ke("v-if",!0)],64))}}),pU=fU,hU=ue({__name:"ToastClose",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(t){const e=t,n=cU(),{forwardRef:r}=Ze();return(s,i)=>(I(),Z(Zq,{"as-child":""},{default:K(()=>[N(y(tt),Te(e,{ref:y(r),type:s.as==="button"?"button":void 0,onClick:y(n).onClose}),{default:K(()=>[Ee(s.$slots,"default")]),_:3},16,["type","onClick"])]),_:3}))}}),mU=hU,gU=ue({__name:"ToastRoot",props:{defaultOpen:{type:Boolean,required:!1,default:!0},forceMount:{type:Boolean,required:!1},type:{type:String,required:!1,default:"foreground"},open:{type:Boolean,required:!1,default:void 0},duration:{type:Number,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"li"}},emits:["escapeKeyDown","pause","resume","swipeStart","swipeMove","swipeCancel","swipeEnd","update:open"],setup(t,{emit:e}){const n=t,r=e,{forwardRef:s}=Ze(),i=mr(n,"open",r,{defaultValue:n.defaultOpen,passive:n.open===void 0});return(o,a)=>(I(),Z(y($a),{present:o.forceMount||y(i)},{default:K(()=>[N(pU,Te({ref:y(s),open:y(i),type:o.type,as:o.as,"as-child":o.asChild,duration:o.duration},o.$attrs,{onClose:a[0]||(a[0]=l=>i.value=!1),onPause:a[1]||(a[1]=l=>r("pause")),onResume:a[2]||(a[2]=l=>r("resume")),onEscapeKeyDown:a[3]||(a[3]=l=>r("escapeKeyDown",l)),onSwipeStart:a[4]||(a[4]=l=>{r("swipeStart",l),l.defaultPrevented||l.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:a[5]||(a[5]=l=>{if(r("swipeMove",l),!l.defaultPrevented){const{x:u,y:c}=l.detail.delta,d=l.currentTarget;d.setAttribute("data-swipe","move"),d.style.setProperty("--reka-toast-swipe-move-x",`${u}px`),d.style.setProperty("--reka-toast-swipe-move-y",`${c}px`)}}),onSwipeCancel:a[6]||(a[6]=l=>{if(r("swipeCancel",l),!l.defaultPrevented){const u=l.currentTarget;u.setAttribute("data-swipe","cancel"),u.style.removeProperty("--reka-toast-swipe-move-x"),u.style.removeProperty("--reka-toast-swipe-move-y"),u.style.removeProperty("--reka-toast-swipe-end-x"),u.style.removeProperty("--reka-toast-swipe-end-y")}}),onSwipeEnd:a[7]||(a[7]=l=>{if(r("swipeEnd",l),!l.defaultPrevented){const{x:u,y:c}=l.detail.delta,d=l.currentTarget;d.setAttribute("data-swipe","end"),d.style.removeProperty("--reka-toast-swipe-move-x"),d.style.removeProperty("--reka-toast-swipe-move-y"),d.style.setProperty("--reka-toast-swipe-end-x",`${u}px`),d.style.setProperty("--reka-toast-swipe-end-y",`${c}px`),i.value=!1}})}),{default:K(({remaining:l,duration:u})=>[Ee(o.$slots,"default",{remaining:l,duration:u,open:y(i)})]),_:3},16,["open","type","as","as-child","duration"])]),_:3},8,["present"]))}}),yU=gU,vU=ue({__name:"FocusProxy",emits:["focusFromOutsideViewport"],setup(t,{emit:e}){const n=e,r=Qd();return(s,i)=>(I(),Z(y(Vd),{"aria-hidden":"true",tabindex:"0",style:{position:"fixed"},onFocus:i[0]||(i[0]=o=>{var u;const a=o.relatedTarget;!((u=y(r).viewport.value)!=null&&u.contains(a))&&n("focusFromOutsideViewport")})},{default:K(()=>[Ee(s.$slots,"default")]),_:3}))}}),uw=vU,bU=ue({inheritAttrs:!1,__name:"ToastViewport",props:{hotkey:{type:Array,required:!1,default:()=>["F8"]},label:{type:[String,Function],required:!1,default:"Notifications ({hotkey})"},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"ol"}},setup(t){const e=t,{hotkey:n,label:r}=bn(e),{forwardRef:s,currentElement:i}=Ze(),{CollectionSlot:o,getItems:a}=yr(),l=Qd(),u=H(()=>l.toastCount.value>0),c=we(),d=we(),f=H(()=>n.value.join("+").replace(/Key/g,"").replace(/Digit/g,""));Jg(n.value,()=>{i.value.focus()}),Dt(()=>{l.onViewportChange(i.value)}),Nt(h=>{const g=i.value;if(u.value&&g){const w=()=>{if(!l.isClosePausedRef.value){const v=new CustomEvent(hm);g.dispatchEvent(v),l.isClosePausedRef.value=!0}},x=()=>{if(l.isClosePausedRef.value){const v=new CustomEvent(mm);g.dispatchEvent(v),l.isClosePausedRef.value=!1}},A=v=>{!g.contains(v.relatedTarget)&&x()},E=()=>{g.contains(cn())||x()},m=v=>{var $,k,D;const _=v.altKey||v.ctrlKey||v.metaKey;if(v.key==="Tab"&&!_){const G=cn(),J=v.shiftKey;if(v.target===g&&J){($=c.value)==null||$.focus();return}const se=p({tabbingDirection:J?"backwards":"forwards"}),R=se.findIndex(V=>V===G);uc(se.slice(R+1))?v.preventDefault():J?(k=c.value)==null||k.focus():(D=d.value)==null||D.focus()}};g.addEventListener("focusin",w),g.addEventListener("focusout",A),g.addEventListener("pointermove",w),g.addEventListener("pointerleave",E),g.addEventListener("keydown",m),window.addEventListener("blur",w),window.addEventListener("focus",x),h(()=>{g.removeEventListener("focusin",w),g.removeEventListener("focusout",A),g.removeEventListener("pointermove",w),g.removeEventListener("pointerleave",E),g.removeEventListener("keydown",m),window.removeEventListener("blur",w),window.removeEventListener("focus",x)})}});function p({tabbingDirection:h}){const w=a().map(x=>x.ref).map(x=>{const A=[x,...Xg(x)];return h==="forwards"?A:A.reverse()});return(h==="forwards"?w.reverse():w).flat()}return(h,g)=>(I(),Z(y(KN),{role:"region","aria-label":typeof y(r)=="string"?y(r).replace("{hotkey}",f.value):y(r)(f.value),tabindex:"-1",style:Xt({pointerEvents:u.value?void 0:"none"})},{default:K(()=>[u.value?(I(),Z(uw,{key:0,ref:w=>{c.value=y(Pr)(w)},onFocusFromOutsideViewport:g[0]||(g[0]=()=>{const w=p({tabbingDirection:"forwards"});y(uc)(w)})},null,512)):ke("v-if",!0),N(y(o),null,{default:K(()=>[N(y(tt),Te({ref:y(s),tabindex:"-1",as:h.as,"as-child":h.asChild},h.$attrs),{default:K(()=>[Ee(h.$slots,"default")]),_:3},16,["as","as-child"])]),_:3}),u.value?(I(),Z(uw,{key:1,ref:w=>{d.value=y(Pr)(w)},onFocusFromOutsideViewport:g[1]||(g[1]=()=>{const w=p({tabbingDirection:"backwards"});y(uc)(w)})},null,512)):ke("v-if",!0)]),_:3},8,["aria-label","style"]))}}),wU=bU,_U=Object.defineProperty,xU=(t,e,n)=>e in t?_U(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,wt=(t,e,n)=>xU(t,typeof e!="symbol"?e+"":e,n);class gm extends yo{constructor(e,n){super(`Service '${e}' failed booting`,{cause:n})}}function cy(){return Br.namespace??PS(Br.name)}let dy=null;function nA(){return dy??SU()}function SU(){return Hn(X2(),t=>{dy=t,Xl(t)})}function EU(){return dy??nA()}function AU(t,e){return nA(),rM(t,e)()}function ss(t){var e;return e=class extends Zd{usesStore(){return!0}getName(){return t.name??null}getInitialState(){return typeof t.initialState=="function"?t.initialState():Object.entries(t.initialState).reduce((n,[r,s])=>{try{s=structuredClone(s)}catch{console.warn(`Could not clone '${r}' state from ${this.getName()} service, this may cause problems if you're using multiple instances of the service (for example, in unit tests).
To fix this problem, declare your initialState as a function instead.`)}return n[r]=s,n},{})}getComputedStateDefinition(){return t.computed??{}}getStateWatchers(){return t.watch??{}}serializePersistedState(n){var r;return((r=t.serialize)==null?void 0:r.call(t,n))??n}deserializePersistedState(n){var r;return((r=t.restore)==null?void 0:r.call(t,n))??n}},wt(e,"persist",t.persist??[]),e}var Wp;let Zd=(Wp=class extends Dc{constructor(){super(),wt(this,"_name"),wt(this,"_booted"),wt(this,"_computedStateKeys"),wt(this,"_watchers"),wt(this,"_store");const t=this.getComputedStateDefinition();this._name=this.getName()??new.target.name,this._booted=new ms,this._computedStateKeys=new Set(Object.keys(t)),this._watchers=this.getStateWatchers(),this._store=this.usesStore()&&AU(this._name,{state:()=>this.getInitialState(),getters:t})}get booted(){return this._booted}static(t){return super.static(t)}launch(){const t=e=>this._booted.reject(new gm(this._name,e));try{this.frameworkBoot().then(()=>this.boot()).then(()=>this._booted.resolve()).catch(t)}catch(e){t(e)}return this._booted}hasPersistedState(){return _r.has(this.storageKey)}hasState(t){return this._store?t in this._store.$state||this._computedStateKeys.has(t):!1}getState(t){const e=this._store;return t?e?e[t]:void 0:e||{}}setState(t,e){if(!this._store)return;const n=typeof t=="string"?{[t]:e}:t,r=bi(this._store.$state,Object.keys(n));Object.assign(this._store.$state,n),this.onStateUpdated(n,r)}updatePersistedState(t){if(!this._store)return;const e=Yl(t),n=bi(this._store.$state,e);Rp(n)||this.onPersistentStateUpdated(n)}__get(t){return this.hasState(t)?this.getState(t):super.__get(t)}__set(t,e){this.setState({[t]:e})}get storageKey(){return`${cy()}:${this._name}`}onStateUpdated(t,e){const n=bi(t,this.static("persist"));Rp(n)||this.onPersistentStateUpdated(n);for(const r in t){const s=this._watchers[r];!s||t[r]===e[r]||s.call(this,t[r],e[r])}}onPersistentStateUpdated(t){const e=_r.get(this.storageKey);e&&_r.set(this.storageKey,{...e,...this.serializePersistedState(SS(t))})}usesStore(){return!1}getName(){return null}getInitialState(){return{}}getComputedStateDefinition(){return{}}getStateWatchers(){return{}}serializePersistedState(t){return t}deserializePersistedState(t){return t}async frameworkBoot(){this.restorePersistedState()}async boot(){}restorePersistedState(){if(!(!this.usesStore()||Rp(this.static("persist")))){if(_r.has(this.storageKey)){const t=_r.require(this.storageKey);this.setState(this.deserializePersistedState(t));return}_r.set(this.storageKey,bi(this.getState(),this.static("persist")))}}requireStore(){return this._store?this._store:Wt(`Failed getting '${this._name}' store`)}},wt(Wp,"persist",[]),Wp);class CU extends Zd{constructor(){super(...arguments),wt(this,"listeners",{})}async boot(){Object.entries(globalThis.__aerogelEvents__??{}).forEach(([e,n])=>this.on(e,n))}async emit(e,n){var r;const s=this.listeners[e]??{priorities:[],handlers:{}};for(const i of s.priorities)await Promise.all(((r=s.handlers[i])==null?void 0:r.map(o=>o(n)))??[])}on(e,n,r){const s=typeof n=="function"?{}:typeof n=="number"?{priority:n}:n,i=typeof n=="function"?n:r;return this.registerListener(e,s,i),()=>this.off(e,i)}once(e,n,r){let s=null;const i=typeof n=="function"?{}:n,o=typeof n=="function"?n:r;return Hn(()=>s&&this.off(e,s),a=>{s=(...l)=>(a(),o(...l)),this.registerListener(e,i,o)})}off(e,n){var r;const s=this.listeners[e];if(!s)return;const i=[...s.priorities];for(const o of i)Hs(s.handlers[o]??[],n),((r=s.handlers[o])==null?void 0:r.length)===0&&(delete s.handlers[o],Hs(s.priorities,o));s.priorities.length===0&&delete this.listeners[e]}registerListener(e,n,r){var s,i,o;const a=n.priority??0;e in this.listeners||(this.listeners[e]={priorities:[],handlers:{}});const l=((s=this.listeners[e])==null?void 0:s.priorities)??Wt(`priorities missing for event '${e}'`),u=((i=this.listeners[e])==null?void 0:i.handlers)??Wt(`handlers missing for event '${e}'`);l.includes(a)||(l.push(a),l.sort((c,d)=>d-c),u[a]=[]),(o=u[a])==null||o.push(r)}}const He=rs(CU);const $U=ss({name:"app",initialState:{plugins:{},instance:null,environment:Tg()??"development",version:Br.version,sourceUrl:Br.sourceUrl,settings:[],settingsFullscreenOnMobile:!1},computed:{development:t=>t.environment==="development",staging:t=>t.environment==="staging",testing:t=>t.environment==="test"||t.environment==="testing",versionName(t){return this.development?"dev."+Br.sourceHash.toString().substring(0,7):this.staging?"staging."+Br.sourceHash.toString().substring(0,7):`v${t.version}`},versionUrl(t){return t.sourceUrl+(this.development||this.staging?`/tree/${Br.sourceHash}`:`/releases/tag/${this.versionName}`)}}});class kU extends $U{constructor(){super(...arguments),wt(this,"name",Br.name),wt(this,"ready",new ms),wt(this,"mounted",new ms)}isReady(){return this.ready.isResolved()}isMounted(){return this.mounted.isResolved()}addSetting(e){this.settings.push(Qe(e))}setSettingsFullscreenOnMobile(e){this.settingsFullscreenOnMobile=e}async whenReady(e){return await this.ready.then(e)}async reload(e){e&&k2(e),location.reload(),await A2()}plugin(e){return this.plugins[e]??null}service(e){var n;return((n=this.instance)==null?void 0:n.config.globalProperties[e])??null}async boot(){He.once("application-ready",()=>this.ready.resolve()),He.once("application-mounted",()=>this.mounted.resolve())}}const gt=rs(kU);async function IU(t,...e){gt.setState("plugins",t.reduce((n,r)=>(r.name&&(n[r.name]=r),n),{})),await Promise.all(t.map(n=>n.install(...e))??[])}function RU(t){return Object.entries(t.props??{}).reduce((e,[n,r])=>e+`${n}="${rr(r)}"`,"")}function OU(t){const e=Kt(t);return e?tr(e):void 0}function Gt(t,e){return OU(t)??Wt(e??`Could not resolve '${rr(t)}' injection key`)}function TU(t,e){return Kt(t)??Wt(`Could not resolve '${rr(t)}' injection key`)}function rA(t){return typeof t=="string"?t:t.type===Yr?"":t.type===xa||t.type===ml?t.children:t.type==="br"?`

`:`<${t.type} ${RU(t)}>${Array.from(t.children).map(rA).join("")}</${t.type}>`}const Gp=new WeakMap,DU={mounted(t,{value:e,modifiers:n}){const r=typeof e=="function"?e:null,s=()=>{const i=t.getBoundingClientRect();n.css&&(t.style.setProperty("--width",`${i.width}px`),t.style.setProperty("--height",`${i.height}px`)),r==null||r({width:i.width,height:i.height})};n.watch&&Gp.set(t,Hn(new ResizeObserver(s)).observe(t)),s()},unmounted(t){var e;(e=Gp.get(t))==null||e.unobserve(t),Gp.delete(t)}};function sA(t,e){const{baseClasses:n,...r}=t,{baseClasses:s,...i}=e,o=fL(s,i);return dt(o(r),y(n))}function dt(...t){return eN(uE(t))}function PU(t,e){const n=He.on(t,e);on(()=>n())}const MU={required:t=>t?void 0:"required"};function LU(t,e){var n;if(t==null)return!0;switch(e.type){case"string":return typeof t=="string";case"enum":return!!((n=e.values)!=null&&n.includes(t));case"number":return typeof t=="number";case"boolean":return typeof t=="boolean";case"date":return t instanceof Date;case"object":return typeof t=="object"}}const ym={...MU};function iA(t,e){ym[t]=e}function NU(t,e){return LU(t,e)?[]:["invalid_value"]}function FU(t,e){var n;const r=(n=ym[e])==null?void 0:n.call(ym,t);return r?Yl(r):[]}const cw=new WeakMap;class jU extends Dc{constructor(e){super(),wt(this,"errors"),wt(this,"_fields"),wt(this,"_data"),wt(this,"_submitted"),wt(this,"_errors"),wt(this,"_listeners",{}),this._fields=e,this._submitted=we(!1),this._data=this.getInitialData(e),this._errors=this.getInitialErrors(e),cw.set(this,H(()=>!Object.values(this._errors).some(n=>n!==null))),this.errors=vs(this._errors)}get valid(){var e;return!!((e=cw.get(this))!=null&&e.value)}get submitted(){return this._submitted.value}setFieldValue(e,n){this._data[e]=n,this._submitted.value&&this.validate()}getFieldValue(e){return this._data[e]}getFieldRules(e){var n;return((n=this._fields[e])==null?void 0:n.rules)??[]}setFieldErrors(e,n){this._errors[e]=n}getFieldType(e){var n;return((n=this._fields[e])==null?void 0:n.type)??null}data(){return{...this._data}}validate(){const e=Object.entries(this._fields).reduce((n,[r,s])=>(n[r]=this.getFieldErrors(r,s),n),{});return this.resetErrors(e),this.valid}reset(e={}){this._submitted.value=!1,e.keepData||this.resetData(),e.keepErrors||this.resetErrors()}submit(){var e;this._submitted.value=!0;for(const[r,s]of Object.entries(this._data)){const i=this._fields[r]??Wt();typeof s!="string"||!(i.trim??!0)||(this._data[r]=s.trim())}const n=this.validate();return n&&((e=this._listeners.submit)==null||e.forEach(r=>r())),n}on(e,n){var r,s;return(r=this._listeners)[e]??(r[e]=[]),(s=this._listeners[e])==null||s.push(n),()=>this.off(e,n)}off(e,n){Hs(this._listeners[e]??[],n)}async focus(e){var n;await _t(),(n=this._listeners.focus)==null||n.forEach(r=>r(e))}__get(e){return e in this._fields?this.getFieldValue(e):super.__get(e)}__set(e,n){if(!(e in this._fields)){super.__set(e,n);return}this.setFieldValue(e,n)}getFieldErrors(e,n){const r=[],s=this._data[e],i=n.rules??[];r.push(...NU(s,n));for(const o of i)o!=="required"&&s==null||r.push(...FU(s,o));return r.length>0?r:null}getInitialData(e){if(this.static().isConjuring())return{};const n=Object.entries(e).reduce((r,[s,i])=>(r[s]=i.default??null,r),{});return tr(n)}getInitialErrors(e){if(this.static().isConjuring())return{};const n=Object.keys(e).reduce((r,s)=>(r[s]=null,r),{});return tr(n)}resetData(){for(const[e,n]of Object.entries(this._fields))this._data[e]=n.default??null}resetErrors(e){Object.keys(this._errors).forEach(n=>delete this._errors[n]),e&&Object.assign(this._errors,e)}}function oA(t,e){const n=Kt("form",null),r=n==null?void 0:n.on("focus",s=>t.name===s&&e());on(()=>r==null?void 0:r())}function qi(t){return new jU(t)}function fy(){const t=Wx(),e=H(()=>t.class);return[H(()=>po(t,"class")),e]}function qU(t){let e=G2;Dt(()=>e=t()),on(()=>e())}function UU(t,e){const n=tr(_r.get(t)??e);return Ke(n,()=>_r.set(t,it(n))),n}function aA(t,e={}){let n=new Set(t),r,s;const i=e==null?void 0:e.equals,o=i?l=>a.value.values().some(u=>i(l,u)):()=>!1,a=_a((l,u)=>(s=l,r=u,{get:()=>n,set:()=>Wt("Attempted to write read-only reactive set")}));return{values(){return s(),Array.from(a.value.values())},has(l){return s(),a.value.has(l)||o(l)},add(l){r(),!o(l)&&a.value.add(l)},delete(l){r(),a.value.delete(l)},clear(){r(),a.value.clear()},reset(l){r(),n=new Set(l)}}}function lA(t){const e=we(),n=H(t);return Ke(n,async()=>e.value=await n.value,{immediate:!0}),e}let zc=null;function BU(){return Hn(new ca,t=>{t.link=function(e){const n=ca.prototype.link.apply(this,[e]);return e.href.startsWith("#")?n:n.replace("<a",'<a target="_blank"')}})}function zU(t){const e=DS(t,/<a[^>]*href="#action:([^"]+)"[^>]*>([^<]+)<\/a>/g);for(const[n,r,s]of e)t=t.replace(n,`<button type="button" data-markdown-action="${r}">${s}</button>`);return t}function VU(t){const e=DS(t,/<a[^>]*href="#route:([^"]+)"[^>]*>([^<]+)<\/a>/g);for(const[n,r,s]of e){const i=(zc==null?void 0:zc.resolve(r))??r;t=t.replace(n,`<a data-markdown-route="${r}" href="${i}">${s}</a>`)}return t}function HU(){return zc}function KU(t){zc=t}function WU(t){let e=At(t,{renderer:BU(),async:!1});return e=uA(e),e=zU(e),e=VU(e),e}function uA(t){return AM.sanitize(t,{ADD_ATTR:["target"]})}function dw(t){return-(t??new Date).getTimezoneOffset()*-6e4}const GU={mounted(t,{value:e}){t.innerHTML=uA(e)}},JU={measure:DU,"safe-html":GU},YU={install(t,e){const n={...JU,...e.directives};for(const[r,s]of Object.entries(n))t.directive(r,s)}};class XU extends Zd{constructor(){super(...arguments),wt(this,"cache")}async get(e){return await(await this.open()).match(e)??null}async store(e,n){await(await this.open()).put(e,n)}async replace(e,n){const r=await this.open();(await r.keys(e)).length!==0&&await r.put(e,n)}async open(){return this.cache=this.cache??Hn(new ms,e=>{caches.open("app").then(n=>e.resolve(n))})}}const Jp=rs(XU);class QU extends Zd{async purge(){await He.emit("purge-storage")}}const ef=rs(QU);function fw(t,e){return{...t,...bi(e,Object.keys(t))}}const ZU={$app:gt,$events:He,$storage:ef};async function _o(t,e){await Promise.all(Object.entries(e).map(async([n,r])=>{await r.launch().catch(s=>{var i,o;return(o=(i=t.config).errorHandler)==null?void 0:o.call(i,s,null,`Failed launching ${n}.`)})})),Object.assign(t.config.globalProperties,e),(Ri()||Tl())&&Object.assign(globalThis,e)}const e4={async install(t,e){var n;const r={...ZU,...e.services};t.use(EU()),(n=e.settings)==null||n.forEach(s=>gt.addSetting(s)),e.settingsFullscreenOnMobile!==void 0&&gt.setSettingsFullscreenOnMobile(e.settingsFullscreenOnMobile),await _o(t,r)}};class t4{constructor(e,n){this.locale=e,this.fallbackLocale=n}getLocale(){return this.locale}async setLocale(e){this.locale=e}getFallbackLocale(){return this.fallbackLocale}async setFallbackLocale(e){this.fallbackLocale=e}getLocales(){return["en"]}translate(e){return Ri()&&console.warn("Lang provider is missing"),e}translateWithDefault(e,n){return Ri()&&console.warn("Lang provider is missing"),n}}const n4=ss({name:"lang",persist:["locale","fallbackLocale"],initialState:{locale:null,locales:["en"],fallbackLocale:"en"}});class r4 extends n4{constructor(){super(),wt(this,"provider"),this.provider=new t4(this.getState("locale")??this.getBrowserLocale(),this.getState("fallbackLocale"))}async setProvider(e){this.provider=e,this.locales=e.getLocales(),await e.setLocale(this.locale??this.getBrowserLocale()),await e.setFallbackLocale(this.fallbackLocale)}translate(e,n){return this.provider.translate(e,n)??e}translateWithDefault(e,n,r={}){return this.provider.translateWithDefault(e,n,r)}getBrowserLocale(){const e=this.getState("locales");return navigator.languages.find(n=>e.includes(n))??"en"}async boot(){globalThis.document&&this.requireStore().$subscribe(async()=>{var e,n;await this.provider.setLocale(this.locale??this.getBrowserLocale()),await this.provider.setFallbackLocale(this.fallbackLocale),this.locale?(e=document.querySelector("html"))==null||e.setAttribute("lang",this.locale):(n=document.querySelector("html"))==null||n.removeAttribute("lang")},{immediate:!0})}}const Pi=rs(r4),qt=Pi.translate.bind(Pi),Fe=Pi.translateWithDefault.bind(Pi),cA=[];function s4(t){cA.push(t)}function dA(t){for(const e of cA){const n=e(t);if(n)return n}return typeof t=="string"?t:t instanceof Error||t instanceof yo?t.message:Ai(t)?rr(t.message??t.description??"Unknown error object"):Fe("errors.unknown","Unknown Error")}const pw=new WeakSet;function xo(){const t=Hg(),{close:e,remove:n,...r}=uL(pw.has(t)?{}:{removeOnClose:!1});return pw.add(t),{...r,async close(s){e(s),await pr(1e3),n()}}}const fA=768,Vc={Mobile:"mobile",Desktop:"desktop"};function pA(){return globalThis.innerWidth>fA?Vc.Desktop:Vc.Mobile}const i4=ss({name:"ui",initialState:{toasts:[],layout:pA()},computed:{desktop:({layout:t})=>t===Vc.Desktop,mobile:({layout:t})=>t===Vc.Mobile}});class o4 extends i4{constructor(){super(...arguments),wt(this,"components",{})}registerComponent(e,n){this.components[e]=n}resolveComponent(e){return this.components[e]??null}requireComponent(e){return this.resolveComponent(e)??Wt(`UI Component '${e}' is not defined!`)}alert(e,n){const r=()=>typeof n!="string"?{message:e}:{title:e,message:n};this.modal(this.requireComponent("alert-modal"),r())}async confirm(e,n,r){const s=typeof n!="string"?{...n??{},message:e,required:!!(n!=null&&n.required)}:{...r??{},title:e,message:n,required:!!(r!=null&&r.required)},{response:i}=await this.modal(this.requireComponent("confirm-modal"),s),o=typeof i=="object"?i[0]:i??!1,a=typeof i=="object"?i[1]:Object.entries(s.checkboxes??{}).reduce((l,[u,{default:c}])=>({[u]:c??!1,...l}),{});for(const[l,u]of Object.entries(s.checkboxes??{}))if(!(!u.required||a[l]))return o&&Ri()&&console.warn(`Confirmed confirm modal was suppressed because required '${l}' checkbox was missing`),[!1,a];return"checkboxes"in s?[o,a]:o}async prompt(e,n,r){const s=(r==null?void 0:r.trim)??!0,i=()=>typeof n!="string"?{message:e,...n??{}}:{title:e,message:n,...r??{}},{response:o}=await this.modal(this.requireComponent("prompt-modal"),i());return(s&&typeof o=="string"?o==null?void 0:o.trim():o)??null}async loading(e,n){const r=c=>typeof c=="function"?Promise.resolve(c()):c,s=()=>{if(typeof e=="string")return{props:{message:e},operationPromise:r(n)};if(typeof e=="function"||e instanceof Promise)return{operationPromise:r(e)};const{delay:c,...d}=e;return{props:d,delay:y(c),operationPromise:r(n)}};let i=!1;const{operationPromise:o,props:a,delay:l}=s();if(l&&await Promise.race([pr({ms:l}).then(()=>i=!0),o]),l&&!i)return o;const u=aE(this.requireComponent("loading-modal"),a);O0(u);try{const c=await o;return await pr({ms:500}),c}finally{await T0(u.id,{removeAfter:1e3})}}toast(e,n={}){const{component:r,...s}=n,i={id:Dl(),properties:{message:e,...s},component:Qe(r??this.requireComponent("toast"))};this.setState("toasts",this.toasts.concat(i))}modal(e,n){return O0(e,n??{})}async closeAllModals(){await Promise.all(Ht.value.map(({id:e})=>T0(e,{removeAfter:1e3})))}async boot(){this.watchMountedEvent(),this.watchViewportBreakpoints()}watchMountedEvent(){He.once("application-mounted",async()=>{if(!globalThis.document||!globalThis.getComputedStyle)return;const e=globalThis.document.getElementById("splash");e&&(globalThis.getComputedStyle(e).opacity!=="0"&&(e.style.opacity="0",await pr({ms:600})),e.remove())})}watchViewportBreakpoints(){globalThis.matchMedia&&globalThis.matchMedia(`(min-width: ${fA}px)`).addEventListener("change",()=>this.setState({layout:pA()}))}}const $t=rs(o4),a4=ss({name:"errors",initialState:{logs:[],startupErrors:[],debug:!1},computed:{hasErrors:({logs:t})=>t.length>0,hasNewErrors:({logs:t})=>t.some(e=>!e.seen),hasStartupErrors:({startupErrors:t})=>t.length>0}});class l4 extends a4{constructor(){super(...arguments),wt(this,"forceReporting",!1),wt(this,"enabled",!0),wt(this,"eruda",null),wt(this,"erudaPlugins",null)}enable(){this.enabled=!0}disable(){this.enabled=!1}async inspect(e,n){if(Array.isArray(e)&&e.length===0){$t.alert(Fe("errors.inspectEmpty","Nothing to inspect!"));return}const r=Array.isArray(e)?e[0]:this.isErrorReport(e)?e:await this.createErrorReport(e),s=Array.isArray(e)?e:n??[r];$t.modal($t.requireComponent("error-report-modal"),{report:r,reports:s})}async report(e,n){if(await He.emit("error",{error:e,message:n}),Tl("unit")||(Ri()&&this.logError(e),!this.enabled))throw e;if(!gt.isMounted()){const i=await this.createStartupErrorReport(e);i&&this.setState({startupErrors:this.startupErrors.concat(i)});return}const r=await this.createErrorReport(e),s={report:r,seen:!1,date:new Date};$t.toast(n??Fe("errors.notice","Something went wrong, but it's not your fault. Try again!"),{variant:"danger",actions:[{label:Fe("errors.viewDetails","View details"),dismiss:!0,click:()=>$t.modal($t.requireComponent("error-report-modal"),{report:r,reports:[r]})}]}),this.setState({logs:[s].concat(this.logs)})}reportDevelopmentError(e,n){Ri()&&(n&&console.warn(n),this.logError(e))}see(e){this.setState({logs:this.logs.map(n=>n.report!==e?n:{...n,seen:!0})})}async boot(){Nt(async()=>{var e;if(!this.debug){(e=this.eruda)==null||e.destroy();return}this.eruda??(this.eruda=(await no(async()=>{const{default:n}=await import("./eruda-CyKdWmHO.js").then(r=>r.e);return{default:n}},[])).default),this.erudaPlugins??(this.erudaPlugins=[(await no(async()=>{const{default:n}=await import("./eruda-indexeddb-B8yAyaUK.js");return{default:n}},__vite__mapDeps([0,1]))).default]),this.eruda.init(),this.erudaPlugins.forEach(n=>{var r;return(r=this.eruda)==null?void 0:r.add(n)})})}logError(e){console.error(e),Ai(e)&&e.cause&&this.logError(e.cause)}isErrorReport(e){return Ai(e)&&"title"in e}async createErrorReport(e){return typeof e=="string"?{title:e}:e instanceof Error||e instanceof yo?this.createErrorReportFromError(e):Ai(e)?Rg({title:rr(e.name??e.title??Fe("errors.unknown","Unknown Error")),description:rr(e.message??e.description??Fe("errors.unknownDescription","Unknown error object")),error:e}):{title:Fe("errors.unknown","Unknown Error"),error:e}}async createStartupErrorReport(e){return e instanceof gm?e.cause instanceof gm?null:this.createErrorReport(e.cause):this.createErrorReport(e)}createErrorReportFromError(e,n={}){return{title:e.name,description:e.message,details:e.stack,error:e,...n}}}const Mi=rs(l4),hA=ue({__name:"HeadlessButton",props:{class:{},disabled:{type:Boolean},href:{},route:{},routeParams:{},routeQuery:{},size:{},submit:{type:Boolean},variant:{},asChild:{type:Boolean},as:{}},setup(t){const e=H(()=>t.as?{as:t.as}:t.route?{as:$t.resolveComponent("router-link")??"a",to:Rg({name:t.route,params:t.routeParams,query:t.routeQuery})}:t.href?{as:"a",target:"_blank",href:t.href}:{as:"button",type:t.submit?"submit":"button"});return(n,r)=>(I(),Z(y(tt),Te({class:t.class,"as-child":n.asChild,disabled:n.disabled},e.value),{default:K(()=>[Ee(n.$slots,"default")]),_:3},16,["class","as-child","disabled"]))}}),rt=ue({__name:"Button",props:{class:{},disabled:{type:Boolean},href:{},route:{},routeParams:{},routeQuery:{},size:{},submit:{type:Boolean},variant:{},asChild:{type:Boolean},as:{}},setup(t){const e=xs(t,["class","size","variant","disabled"]),n=H(()=>sA({baseClasses:t.class,variant:t.variant,size:t.size,disabled:t.disabled},{baseClasses:"focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2",variants:{variant:{default:"bg-primary-600 text-white focus-visible:outline-primary-600",secondary:"bg-background text-gray-900 ring-gray-300",danger:"bg-red-600 text-white focus-visible:outline-red-600",warning:"bg-yellow-600 text-white focus-visible:outline-yellow-600",ghost:"bg-transparent",outline:"bg-transparent text-primary-600 ring-primary-600",link:"text-links"},size:{small:"text-xs min-h-6",default:"text-sm min-h-8",large:"text-base min-h-10",icon:"rounded-full p-2.5"},disabled:{false:null,true:"opacity-50 cursor-not-allowed"}},compoundVariants:[{variant:["default","secondary","danger","ghost","outline"],class:"flex items-center justify-center gap-1 font-medium"},{variant:["default","danger"],class:"shadow-sm"},{variant:["secondary","outline"],class:"ring-1 ring-inset"},{variant:["default","secondary","danger","ghost","outline"],size:"small",class:"rounded px-2 py-1"},{variant:["default","secondary","danger","ghost","outline"],size:"default",class:"rounded-md px-2.5 py-1.5"},{variant:["default","secondary","danger","ghost","outline"],size:"large",class:"rounded-md px-3 py-2"},{variant:"default",disabled:!1,class:"hover:bg-primary-500"},{variant:["secondary","ghost","outline"],disabled:!1,class:"hover:bg-gray-50"},{variant:"danger",disabled:!1,class:"hover:bg-red-500"},{variant:"link",disabled:!1,class:"hover:underline"},{variant:"link",size:"small",class:"leading-6"},{variant:"link",size:"default",class:"leading-8"},{variant:"link",size:"large",class:"leading-10"}],defaultVariants:{variant:"default",size:"default",disabled:!1}}));return(r,s)=>(I(),Z(hA,Te({class:n.value,disabled:r.disabled},e),{default:K(()=>[Ee(r.$slots,"default")]),_:3},16,["class","disabled"]))}});function u4(t){return typeof t=="object"&&t!==null&&"label"in t}function mA(t,e){const n=Kt("form",null),r=c=>c===void 0?"":t.value.renderOption?t.value.renderOption(c):u4(c)?YP(c.label):rr(c),s=H(()=>{const{name:c,modelValue:d}=t.value;return n&&c?n.getFieldValue(c):d}),i=H(()=>s.value),o=H(()=>!n||!t.value.name?null:n.errors[t.value.name]??null),a=H(()=>t.value.options?t.value.options.map(c=>({key:Dl(),label:r(c),value:c})):null),l={renderOption:r,labelClass:H(()=>t.value.labelClass),optionsClass:H(()=>t.value.optionsClass),align:H(()=>t.value.align),side:H(()=>t.value.side),value:s,id:`select-${Dl()}`,name:H(()=>t.value.name),label:H(()=>t.value.label),description:H(()=>t.value.description),placeholder:H(()=>t.value.placeholder??Fe("ui.select","Select an option")),options:a,selectedOption:H(()=>{var c;return(c=a.value)==null?void 0:c.find(d=>d.value===t.value.modelValue)}),errors:vs(o),required:H(()=>{if(!(!t.value.name||!n))return n.getFieldRules(t.value.name).includes("required")}),update(c){if(n&&t.value.name){n.setFieldValue(t.value.name,c);return}e("update:modelValue",c)}};function u(c){l.update(c)}return cr("select",l),{expose:l,acceptableValue:i,update:u,renderOption:r}}const gA=ue({__name:"HeadlessSelectValue",setup(t){const e=Gt("select","<HeadlessSelectValue> must be a child of a <HeadlessSelect>");return(n,r)=>n.$slots.default?(I(),Z(y(aw),{key:0,placeholder:y(e).placeholder},{default:K(()=>[Ee(n.$slots,"default")]),_:3},8,["placeholder"])):(I(),Z(y(aw),{key:1,placeholder:y(e).placeholder},null,8,["placeholder"]))}}),yA=ue({__name:"HeadlessSelectTrigger",setup(t){const e=Gt("select","<HeadlessSelectTrigger> must be a child of a <HeadlessSelect>");return(n,r)=>(I(),Z(y(Bq),{id:y(e).id},{default:K(()=>[Ee(n.$slots,"default",{},()=>[N(gA,{placeholder:y(e).placeholder},null,8,["placeholder"]),N(y(Tq))])]),_:3},8,["id"]))}}),vA=ue({__name:"HeadlessSelectOption",props:{value:{},disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{}},setup(t){const e=Gt("select","<HeadlessSelectOption> must be a child of a <HeadlessSelect>"),n=H(()=>{var r;const s=(r=e.options)==null?void 0:r.find(i=>i.value===t.value);return s?e.renderOption(s.value):rr(t.value)});return(r,s)=>(I(),Z(y(Lq),Pn(sr(r.$props)),{default:K(()=>[N(y(Fq),null,{default:K(()=>[Ee(r.$slots,"default",{},()=>[Ue(fe(n.value),1)])]),_:3})]),_:3},16))}}),bA=ue({__name:"HeadlessSelectOptions",props:{class:{},innerClass:{}},setup(t){const e=Gt("select","<HeadlessSelectOptions> must be a child of a <HeadlessSelect>"),n=H(()=>dt("min-w-(--reka-select-trigger-width) max-h-(--reka-select-content-available-height)",t.class));return(r,s)=>(I(),Z(y(qq),null,{default:K(()=>[N(y(Rq),{position:"popper",class:De(n.value),align:y(e).align,side:y(e).side,"side-offset":4},{default:K(()=>[N(y(Hq),{class:De(r.innerClass)},{default:K(()=>[Ee(r.$slots,"default",{},()=>[(I(!0),ae(je,null,at(y(e).options??[],i=>(I(),Z(vA,{key:i.key,value:i.value},null,8,["value"]))),128))])]),_:3},8,["class"])]),_:3},8,["class","align","side"])]),_:3}))}}),c4=ue({inheritAttrs:!1,__name:"HeadlessSelect",props:{as:{default:"div"},options:{},placeholder:{},renderOption:{type:Function},compareOptions:{type:Function,default:(t,e)=>t===e},labelClass:{},optionsClass:{},align:{},side:{},name:{},label:{},description:{},modelValue:{}},emits:["update:modelValue"],setup(t,{expose:e,emit:n}){const r=n,s=xs(t,["as","compareOptions"]),{expose:i,acceptableValue:o,update:a}=mA(H(()=>({as:t.as,compareOptions:t.compareOptions,...s})),r);return e(i),(l,u)=>(I(),Z(y(hq),{"model-value":y(o),by:l.compareOptions,"onUpdate:modelValue":u[0]||(u[0]=c=>y(a)(c))},{default:K(({open:c})=>[(I(),Z(ns(l.as),Pn(sr(l.$attrs)),{default:K(()=>[Ee(l.$slots,"default",{modelValue:l.modelValue,open:c},()=>[N(yA),N(bA)])]),_:2},1040))]),_:3},8,["model-value","by"]))}}),hw=ue({__name:"HeadlessSelectLabel",props:{asChild:{type:Boolean},as:{}},setup(t){const e=Gt("select","<HeadlessSelectLabel> must be a child of a <HeadlessSelect>"),n=Od(),r=H(()=>!!(e.label||n.default));return(s,i)=>r.value?(I(),Z(y(QE),Te({key:0,for:y(e).id},s.$props),{default:K(()=>[Ee(s.$slots,"default",{},()=>[Ue(fe(y(e).label),1)])]),_:3},16,["for"])):ke("",!0)}}),wA=ue({__name:"SelectLabel",props:{class:{}},setup(t){const e=Gt("select","<SelectLabel> must be a child of a <Select>"),n=H(()=>dt("block text-sm leading-6 font-medium text-gray-900",e.labelClass,t.class));return(r,s)=>r.$slots.default?(I(),Z(hw,{key:0,class:De(n.value)},{default:K(()=>[Ee(r.$slots,"default")]),_:3},8,["class"])):(I(),Z(hw,{key:1,class:De(n.value)},null,8,["class"]))}}),mw=ue({__name:"SelectOption",props:{value:{},class:{},innerClass:{}},setup(t){const e=H(()=>dt("group p-1 outline-none",t.class)),n=H(()=>dt("relative flex max-w-[calc(100vw-2rem)] cursor-pointer items-center truncate rounded-md gap-2 px-2 py-1 text-sm select-none *:truncate group-data-[highlighted]:bg-gray-100 group-data-[state=checked]:font-semibold group-data-[state=unchecked]:opacity-50",t.innerClass));return(r,s)=>(I(),Z(vA,{class:De(e.value),value:r.value},{default:K(()=>[L("div",{class:De(n.value)},[Ee(r.$slots,"default")],2)]),_:3},8,["class","value"]))}}),_A=ue({__name:"SelectOptions",props:{class:{}},setup(t){const e=Gt("select","<SelectOptions> must be a child of a <Select>"),n=H(()=>dt("z-50 overflow-auto rounded-lg bg-white text-base shadow-lg ring-1 ring-black/5 focus:outline-hidden",e.optionsClass,t.class));return(r,s)=>(I(),Z(bA,{class:De(n.value)},{default:K(()=>{var i;return[(i=y(e).options)!=null&&i.length?Ee(r.$slots,"default",{key:0},()=>{var o;return[(I(!0),ae(je,null,at(((o=y(e))==null?void 0:o.options)??[],a=>(I(),Z(mw,{key:a.key,value:a.value},{default:K(()=>[Ue(fe(a.label),1)]),_:2},1032,["value"]))),128))]}):Ee(r.$slots,"default",{key:1},()=>[N(mw,{disabled:"",value:null},{default:K(()=>[Ue(fe(r.$td("ui.selectEmpty","No options available")),1)]),_:1})])]}),_:3},8,["class"]))}}),d4={viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"};function f4(t,e){return I(),ae("svg",d4,e[0]||(e[0]=[L("path",{fill:"currentColor",d:"m9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828L5.757 6.586L4.343 8z"},null,-1)]))}const p4=Qe({name:"zondicons-cheveron-down",render:f4}),h4={viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"};function m4(t,e){return I(),ae("svg",h4,e[0]||(e[0]=[L("path",{fill:"currentColor",d:"M2.93 17.07A10 10 0 1 1 17.07 2.93A10 10 0 0 1 2.93 17.07M9 5v6h2V5zm0 8v2h2v-2z"},null,-1)]))}const nu=Qe({name:"zondicons-exclamation-solid",render:m4}),g4={key:0,class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},xA=ue({__name:"SelectTrigger",props:{class:{}},setup(t){const e=Gt("select","<SelectTrigger> must be a child of a <Select>"),n=H(()=>dt("relative grid w-full cursor-default grid-cols-1 rounded-md bg-white py-1.5 pr-2 pl-3 text-left text-gray-900 outline-1 -outline-offset-1","focus:outline-2 focus:-outline-offset-2 sm:text-sm/6",{"mt-1":e.label,"outline-gray-300 focus:outline-primary-600 data-[state=open]:outline-primary-600":!e.errors,"text-gray-900 shadow-2xs ring-gray-900/10 placeholder:text-gray-400":!e.errors,"outline-red-900/10 pr-10 text-red-900 placeholder:text-red-300":e.errors,"focus:outline-red-500 data-[state=open]:outline-red-500":e.errors},t.class));return(r,s)=>(I(),Z(yA,{class:De(n.value)},{default:K(()=>{var i;return[N(gA,{class:"col-start-1 row-start-1 truncate pr-6"}),N(y(p4),{class:"col-start-1 row-start-1 size-5 self-center justify-self-end text-gray-500 sm:size-4"}),(i=y(e))!=null&&i.errors?(I(),ae("div",g4,[N(y(nu),{class:"size-5 text-red-500"})])):ke("",!0)]}),_:1},8,["class"]))}}),y4=["id"],SA=ue({__name:"HeadlessSelectError",setup(t){const e=Gt("select","<HeadlessSelectError> must be a child of a <HeadlessSelect>"),n=H(()=>e.errors?Fe(`errors.${e.errors[0]}`,`Error: ${e.errors[0]}`):null);return(r,s)=>n.value?(I(),ae("p",{key:0,id:`${y(e).id}-error`},fe(n.value),9,y4)):ke("",!0)}}),ru=ue({__name:"Select",props:{as:{},options:{},placeholder:{},renderOption:{type:Function},compareOptions:{type:Function},labelClass:{},optionsClass:{},align:{},side:{},name:{},label:{},description:{},modelValue:{}},emits:["update:modelValue"],setup(t){const{forwardRef:e}=Ze();return(n,r)=>(I(),Z(c4,Te({ref:y(e)},n.$props,{"onUpdate:modelValue":r[0]||(r[0]=s=>n.$emit("update:modelValue",s))}),{default:K(()=>[N(wA),Ee(n.$slots,"default",{},()=>[N(xA),N(SA,{class:"mt-2 text-sm text-red-600"}),N(_A)])]),_:3},16))}}),v4={class:"grow"},b4=ue({__name:"Language",setup(t){const e=Pi.getBrowserLocale(),n=H(()=>[null,...Pi.locales]);function r(s){return(s&&Br.locales[s])??Fe("settings.localeDefault","{locale} (default)",{locale:Br.locales[e]??e})}return(s,i)=>(I(),Z(ru,{modelValue:s.$lang.locale,"onUpdate:modelValue":i[0]||(i[0]=o=>s.$lang.locale=o),class:"flex flex-col items-start md:flex-row",as:"div",options:n.value,"render-option":r},{default:K(()=>[L("div",v4,[N(wA,{class:"text-base font-semibold"},{default:K(()=>[Ue(fe(s.$td("settings.locale","Language")),1)]),_:1}),N(mt,{"lang-key":"settings.localeDescription","lang-default":"Choose the application's language.",class:"mt-1 text-sm text-gray-500"})]),N(rt,{variant:"ghost",as:xA,class:"grid w-auto outline-none"}),N(_A)]),_:1},8,["modelValue","options"]))}}),w4=[{priority:100,component:b4}],_4={$lang:Pi},x4={async install(t){var e;(e=t.config.globalProperties).$t??(e.$t=qt),t.config.globalProperties.$td=Fe,w4.forEach(n=>gt.addSetting(n)),await _o(t,_4)}},S4=ue({__name:"Markdown",props:{as:{},inline:{type:Boolean},langKey:{},langParams:{},langDefault:{},text:{},actions:{}},setup(t){const e=Wx(),n=Od(),r=H(()=>n.default?n.default().map(rA).join(""):t.text??(t.langKey&&(t.langDefault?Fe(t.langKey,t.langDefault,t.langParams??{}):qt(t.langKey,t.langParams??{})))),s=H(()=>{if(!r.value)return null;let a=WU(r.value);return t.inline&&(a=a.replace("<p>","<span>").replace("</p>","</span>")),a}),i=()=>dr(t.as??(t.inline?"span":"div"),{innerHTML:s.value,onClick:o,...e,class:`${e.class??""} ${t.inline?"":"prose"}`});async function o(a){var l,u;const{target:c}=a;if(er(c,HTMLElement)&&c.dataset.markdownAction){(u=(l=t.actions)==null?void 0:l[c.dataset.markdownAction])==null||u.call(l);return}if(er(c,HTMLAnchorElement)&&c.dataset.markdownRoute){const d=HU();d&&(a.preventDefault(),d.visit(c.dataset.markdownRoute));return}}return(a,l)=>(I(),Z(i))}}),E4=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n},mt=E4(S4,[["__scopeId","data-v-8b211cfb"]]),A4={class:"flex-grow"},C4=["id"],py=ue({__name:"Setting",props:{title:{},titleId:{},description:{},class:{},layout:{default:"horizontal"}},setup(t){const e=H(()=>dt(t.class,"flex flex-col justify-center gap-1"));return(n,r)=>(I(),ae("div",{class:De(["mt-4 flex",{"flex-col":n.layout==="vertical"}])},[L("div",A4,[L("h3",{id:n.titleId,class:"text-base font-semibold"},fe(n.title),9,C4),n.description?(I(),Z(mt,{key:0,text:n.description,class:"mt-1 text-sm text-gray-500"},null,8,["text"])):ke("",!0)]),L("div",{class:De(e.value)},[Ee(n.$slots,"default")],2)],2))}}),$4=["for"],k4=ue({inheritAttrs:!1,__name:"HeadlessSwitch",props:{name:{},label:{},description:{},modelValue:{},class:{},labelClass:{},inputClass:{},thumbClass:{}},emits:["update:modelValue"],setup(t,{expose:e,emit:n}){const r=n,s=Kt("form",null),i=H(()=>!s||!t.name?null:s.errors[t.name]??null),o={id:`switch-${Dl()}`,name:H(()=>t.name),label:H(()=>t.label),description:H(()=>t.description),value:H(()=>s&&t.name?s.getFieldValue(t.name):t.modelValue),errors:vs(i),required:H(()=>{if(!(!t.name||!s))return s.getFieldRules(t.name).includes("required")}),update(a){if(s&&t.name){s.setFieldValue(t.name,a);return}r("update:modelValue",a)}};return e(o),Nt(()=>{!t.description&&!i.value||console.warn("Errors and description not implemented in <HeadlessSwitch>")}),(a,l)=>(I(),ae("div",{class:De(t.class)},[a.label?(I(),ae("label",{key:0,for:o.id,class:De(a.labelClass)},fe(a.label),11,$4)):ke("",!0),N(y(Jq),Te({id:o.id,name:a.name,"model-value":o.value.value},a.$attrs,{class:a.inputClass,"onUpdate:modelValue":l[0]||(l[0]=u=>a.$emit("update:modelValue",u))}),{default:K(()=>[N(y(Xq),{class:De(a.thumbClass)},null,8,["class"])]),_:1},16,["id","name","model-value","class"])],2))}}),I4=ue({__name:"Switch",setup(t){return(e,n)=>(I(),Z(k4,{class:"flex flex-row items-center gap-1","input-class":"disabled:opacity-50 disabled:cursor-not-allowed data-[state=checked]:bg-primary-600 data-[state=unchecked]:bg-gray-200 relative inline-flex h-6 w-11 shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focusdisabled:opacity-50 disabled:cursor-not-allowed :ring-2 focus:ring-primary-600 focus:ring-offset-2 focus:outline-hidden","thumb-class":"data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0 pointer-events-none inline-block size-5 transform rounded-full bg-white shadow-sm ring-0 transition duration-200 ease-in-out"}))}}),R4=ue({__name:"Debug",setup(t){return(e,n)=>(I(),Z(py,{"title-id":"debug-setting",title:e.$td("settings.debug","Debugging"),description:e.$td("settings.debugDescription","Enable debugging with [Eruda](https://eruda.liriliri.io/).")},{default:K(()=>[N(I4,{modelValue:e.$errors.debug,"onUpdate:modelValue":n[0]||(n[0]=r=>e.$errors.debug=r),"aria-labelledby":"debug-setting"},null,8,["modelValue"])]),_:1},8,["title","description"]))}}),O4=[{priority:10,component:R4}];let gw=class extends yo{};const T4={$errors:Mi},D4=t=>(dA(t).includes("ResizeObserver loop completed with undelivered notifications.")||Mi.report(t),!0);function P4(t,e=()=>!1){const n=r=>e(r)||D4(r);t.config.errorHandler=n,globalThis.onerror=(r,s,i,o,a)=>n(a??r),globalThis.onunhandledrejection=r=>n(r.reason)}const M4={async install(t,e){P4(t,e.handleError),O4.forEach(n=>gt.addSetting(n)),await _o(t,T4)}},L4={async install(){Tl()&&(globalThis.testingRuntime={on:(...t)=>He.on(...t),service:t=>gt.service(t)})}},N4={viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"};function F4(t,e){return I(),ae("svg",N4,e[0]||(e[0]=[L("path",{fill:"currentColor",d:"M10 8.586L2.929 1.515L1.515 2.929L8.586 10l-7.071 7.071l1.414 1.414L10 11.414l7.071 7.071l1.414-1.414L11.414 10l7.071-7.071l-1.414-1.414z"},null,-1)]))}const j4=Qe({name:"zondicons-close",render:F4}),q4=ue({__name:"HeadlessModal",props:{persistent:{type:Boolean},fullscreen:{type:Boolean},fullscreenOnMobile:{type:Boolean},title:{},titleHidden:{type:Boolean},description:{},descriptionHidden:{type:Boolean}},setup(t,{expose:e}){const n=we(null),{close:r}=xo();e({$content:n});const{forwardRef:s}=Ze();return cr("$modalContentRef",n),(i,o)=>(I(),Z(y(jN),{ref:y(s),open:"","onUpdate:open":o[0]||(o[0]=a=>i.persistent||a||y(r)())},{default:K(()=>[N(y(wF),null,{default:K(()=>[Ee(i.$slots,"default",{close:y(r)})]),_:3})]),_:3},512))}}),U4=ue({__name:"HeadlessModalContent",setup(t){const{child:e}=xo(),n=TU("$modalContentRef"),r=ri("$contentRef");return Nt(()=>n.value=r.value),(s,i)=>(I(),Z(y(dF),{ref:"$contentRef"},{default:K(()=>[Ee(s.$slots,"default"),y(e)?(I(),Z(y(tm),{key:0,is:y(e)},null,8,["is"])):ke("",!0)]),_:3},512))}}),B4=ue({__name:"HeadlessModalDescription",props:{asChild:{type:Boolean},as:{}},setup(t){return(e,n)=>(I(),Z(y(pF),Pn(sr(e.$props)),{default:K(()=>[Ee(e.$slots,"default")]),_:3},16))}}),z4=ue({__name:"HeadlessModalOverlay",props:{forceMount:{type:Boolean},asChild:{type:Boolean},as:{}},setup(t){return(e,n)=>(I(),Z(y(yF),Pn(sr(e.$props)),{default:K(()=>[Ee(e.$slots,"default")]),_:3},16))}}),V4=ue({__name:"HeadlessModalTitle",props:{asChild:{type:Boolean},as:{}},setup(t){return(e,n)=>(I(),Z(y(xF),Pn(sr(e.$props)),{default:K(()=>[Ee(e.$slots,"default")]),_:3},16))}}),H4=["onClick"],K4={class:"sr-only"},Du=aA(),Jn=ue({__name:"Modal",props:{persistent:{type:Boolean},fullscreen:{type:Boolean},fullscreenOnMobile:{type:Boolean},title:{},titleHidden:{type:Boolean},description:{},descriptionHidden:{type:Boolean},wrapperClass:{default:""},class:{default:""},closeHidden:{type:Boolean}},setup(t,{expose:e}){const n=xs(t,["class","wrapperClass","title","titleHidden","description","persistent","closeHidden","fullscreen","fullscreenOnMobile"]);e({$content:H(()=>{var w;return(w=a.value)==null?void 0:w.$content})});const{forwardRef:r,currentRef:s}=Ze(),{id:i,visible:o}=xo(),a=s,l=Hg(),u=H(()=>{var w;return o.value&&((w=Ht.value.toReversed().find(x=>x.visible.value))==null?void 0:w.id)===i.value}),c=H(()=>Ht.value.find(w=>w.visible.value)),d=H(()=>Ht.value.some(w=>Du.has(w))),f=H(()=>t.description?{}:{"aria-describedby":void 0}),p=H(()=>dt("overflow-auto px-4 pb-4 flex flex-col flex-1",{"pt-4":!t.title||t.titleHidden,"max-h-[90vh]":!h.value},t.class)),h=H(()=>t.fullscreen||t.fullscreenOnMobile&&$t.mobile),g=H(()=>dt("isolate fixed z-50 flex flex-col overflow-hidden bg-white text-left duration-300",h.value?["inset-0 transition-[transform,translate] will-change-[transform,translate]",Du.has(l.value)||"animate-[slide-in_var(--tw-duration)_ease-in-out]",u.value?"translate-y-0":"translate-y-full"]:["top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-full","max-w-[calc(100%-2rem)] rounded-lg shadow-xl sm:max-w-lg","transition-[scale,opacity] will-change-[scale,opacity]",Du.has(l.value)||"animate-[fade-in_var(--tw-duration)_ease-in-out,grow_var(--tw-duration)_ease-in-out]",u.value?"scale-100 opacity-100":"scale-50 opacity-0"],t.wrapperClass));return Dt(()=>pr(500).then(()=>Du.add(l.value))),(w,x)=>(I(),Z(q4,Te(n,{ref:A=>y(r)(A),persistent:w.persistent}),{default:K(({close:A})=>{var E,m;return[N(z4,{class:De(["fixed inset-0 transition-opacity duration-300 will-change-[opacity]",{"animate-[fade-in_var(--tw-duration)_ease-in-out]":!d.value,"bg-black/30":((E=c.value)==null?void 0:E.id)===y(i)||!c.value&&((m=y(Ht)[0])==null?void 0:m.id)===y(i),"opacity-0":!c.value,hidden:h.value}])},null,8,["class"]),N(U4,Te(f.value,{class:g.value}),{default:K(()=>[!w.persistent&&!w.closeHidden?(I(),ae("div",{key:0,class:De(["absolute top-0 right-0 pt-3.5 pr-2.5",{"hidden sm:block":!h.value}])},[L("button",{type:"button",class:"clickable z-10 rounded-full p-2.5 text-gray-400 hover:text-gray-500",onClick:v=>A()},[L("span",K4,fe(w.$td("ui.close","Close")),1),N(y(j4),{class:"size-4"})],8,H4)],2)):ke("",!0),w.title?(I(),Z(V4,{key:1,class:De(["px-4 pt-5 text-base font-semibold text-gray-900",{"sr-only":w.titleHidden,"pb-0":w.description&&!w.descriptionHidden,"pb-2":!w.description||w.descriptionHidden}])},{default:K(()=>[N(mt,{text:w.title,inline:""},null,8,["text"])]),_:1},8,["class"])):ke("",!0),w.description?(I(),Z(B4,{key:2,class:De(["px-4 pt-1 pb-2",{"sr-only":w.descriptionHidden}])},{default:K(()=>[N(mt,{text:w.description,class:"text-sm leading-6 text-gray-500"},null,8,["text"])]),_:1},8,["class"])):ke("",!0),L("div",{class:De(p.value)},[Ee(w.$slots,"default",{close:A})],2)]),_:2},1040,["class"])]}),_:3},16,["persistent"]))}});function W4(t){const e=H(()=>t.title??Fe("ui.alert","Alert")),n=H(()=>!t.title);return{renderedTitle:e,titleHidden:n}}const G4=ue({__name:"AlertModal",props:{title:{},message:{}},setup(t,{expose:e}){const n=t,{renderedTitle:r,titleHidden:s}=W4(n);return e(),(i,o)=>(I(),Z(Jn,{title:y(r),"title-hidden":y(s)},{default:K(()=>[N(mt,{text:i.message},null,8,["text"])]),_:1},8,["title","title-hidden"]))}}),Ui=ue({__name:"Form",props:{form:{}},emits:["submit"],setup(t,{emit:e}){let n;const r=e;return Nt(s=>{var i;n==null||n(),n=(i=t.form)==null?void 0:i.on("submit",()=>r("submit")),s(()=>n==null?void 0:n())}),cr("form",t.form),(s,i)=>(I(),ae("form",{onSubmit:i[0]||(i[0]=nr(o=>s.form?s.form.submit():s.$emit("submit"),["prevent"]))},[Ee(s.$slots,"default")],32))}});function J4(t){const e=qi(Object.entries(t.checkboxes??{}).reduce((o,[a,l])=>({[a]:{type:"boolean",default:l.default,required:l.required?"required":void 0},...o}),{})),n=H(()=>t.title??Fe("ui.confirm","Confirm")),r=H(()=>!t.title),s=H(()=>t.acceptText??Fe("ui.accept","Ok")),i=H(()=>t.cancelText??Fe("ui.cancel","Cancel"));return{form:e,renderedTitle:n,titleHidden:r,renderedAcceptText:s,renderedCancelText:i}}const Y4={key:0,class:"mt-4 flex flex-col text-sm text-gray-600"},X4={class:"flex items-center"},Q4=["onUpdate:modelValue","required"],Z4={class:"ml-1.5"},eB={class:"mt-4 flex flex-row-reverse gap-2"},tB=ue({__name:"ConfirmModal",props:{title:{},message:{},acceptText:{},acceptVariant:{},cancelText:{},cancelVariant:{default:"secondary"},checkboxes:{},actions:{},required:{type:Boolean}},emits:["close"],setup(t,{expose:e}){const n=xs(t,["cancelVariant"]),{form:r,renderedTitle:s,titleHidden:i,renderedAcceptText:o,renderedCancelText:a}=J4(n);return e(),(l,u)=>(I(),Z(Jn,{title:y(s),"title-hidden":y(i),persistent:""},{default:K(({close:c})=>[N(Ui,{form:y(r),onSubmit:d=>c([!0,y(r).data()])},{default:K(()=>[N(mt,{text:l.message,actions:l.actions},null,8,["text","actions"]),l.checkboxes?(I(),ae("ul",Y4,[(I(!0),ae(je,null,at(l.checkboxes,(d,f)=>(I(),ae("li",{key:f},[L("label",X4,[_g(L("input",{"onUpdate:modelValue":p=>y(r)[f]=p,type:"checkbox",required:d.required,class:"border-primary-600 text-primary-600 hover:bg-primary-50 hover:checked:bg-primary-500 focus:ring-primary-600 focus-visible:ring-primary-600 rounded border-2"},null,8,Q4),[[FP,y(r)[f]]]),L("span",Z4,fe(d.label),1)])]))),128))])):ke("",!0),L("div",eB,[N(rt,{variant:l.acceptVariant,submit:""},{default:K(()=>[Ue(fe(y(o)),1)]),_:1},8,["variant"]),l.required?ke("",!0):(I(),Z(rt,{key:0,variant:l.cancelVariant,onClick:d=>c(!1)},{default:K(()=>[Ue(fe(y(a)),1)]),_:2},1032,["variant","onClick"]))])]),_:2},1032,["form","onSubmit"])]),_:1},8,["title","title-hidden"]))}}),nB={viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"};function rB(t,e){return I(),ae("svg",nB,e[0]||(e[0]=[L("path",{fill:"currentColor",d:"M7.05 9.293L6.343 10L12 15.657l1.414-1.414L9.172 10l4.242-4.243L12 4.343z"},null,-1)]))}const sB=Qe({name:"zondicons-cheveron-left",render:rB}),iB={viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"};function oB(t,e){return I(),ae("svg",iB,e[0]||(e[0]=[L("path",{fill:"currentColor",d:"m12.95 10.707l.707-.707L8 4.343L6.586 5.757L10.828 10l-4.242 4.243L8 15.657z"},null,-1)]))}const EA=Qe({name:"zondicons-cheveron-right",render:oB}),aB={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function lB(t,e){return I(),ae("svg",aB,e[0]||(e[0]=[L("path",{fill:"currentColor",d:"M20 19V7H4v12zm0-16a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2zm-7 14v-2h5v2zm-3.42-4L5.57 9H8.4l3.3 3.3c.39.39.39 1.03 0 1.42L8.42 17H5.59z"},null,-1)]))}const uB=Qe({name:"mdi-console",render:lB}),cB={viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"};function dB(t,e){return I(),ae("svg",cB,e[0]||(e[0]=[L("path",{fill:"currentColor",d:"M6 6V2c0-1.1.9-2 2-2h10a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-4v4a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V8c0-1.1.9-2 2-2zm2 0h4a2 2 0 0 1 2 2v4h4V2H8zM2 8v10h10V8z"},null,-1)]))}const fB=Qe({name:"zondicons-copy",render:dB}),pB={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function hB(t,e){return I(),ae("svg",pB,e[0]||(e[0]=[L("path",{fill:"currentColor",d:"M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5c.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34c-.46-1.16-1.11-1.47-1.11-1.47c-.91-.62.07-.6.07-.6c1 .07 1.53 1.03 1.53 1.03c.87 1.52 2.34 1.07 2.91.83c.09-.65.35-1.09.63-1.34c-2.22-.25-4.55-1.11-4.55-4.92c0-1.11.38-2 1.03-2.71c-.1-.25-.45-1.29.1-2.64c0 0 .84-.27 2.75 1.02c.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02c.55 1.35.2 2.39.1 2.64c.65.71 1.03 1.6 1.03 2.71c0 3.82-2.34 4.66-4.57 4.91c.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"},null,-1)]))}const mB=Qe({name:"mdi-github",render:hB}),gB={class:"flex"},yB={class:"sr-only"},vB=ue({__name:"ErrorReportModalButtons",props:{report:{}},setup(t){const e=t,n=H(()=>e.report.description?`${e.report.title}: ${e.report.description}`:e.report.title),r=H(()=>{if(!gt.sourceUrl)return!1;const i=encodeURIComponent(n.value),o=encodeURIComponent(["[Please, explain here what you were trying to do when this error appeared]","","Error details:","```",D2(e.report.details??"Details missing from report",1800-i.length-gt.sourceUrl.length).trim(),"```"].join(`
`));return`${gt.sourceUrl}/issues/new?title=${i}&body=${o}`}),s=H(()=>Hn([{id:"clipboard",description:"Copy to clipboard",iconComponent:fB,async click(){await navigator.clipboard.writeText(`${n.value}

${e.report.details}`),$t.toast(Fe("errors.copiedToClipboard","Debug information copied to clipboard"))}},{id:"console",description:"Log to console",iconComponent:uB,click(){const i=e.report.error??e.report;window.error=i,console.error(i),$t.toast(Fe("errors.addedToConsole","You can now use the **error** variable in the console"))}}],i=>{r.value&&i.push({id:"github",description:"Report in GitHub",iconComponent:mB,url:r.value})}));return(i,o)=>(I(),ae("div",gB,[(I(!0),ae(je,null,at(s.value,a=>Ee(i.$slots,"default",Te({ref_for:!0},a),()=>[N(rt,{size:"icon",variant:"ghost",class:"group whitespace-nowrap",href:a.url,title:i.$td(`errors.report_${a.id}`,a.description),onClick:a.click},{default:K(()=>[L("span",yB,fe(i.$td(`errors.report_${a.id}`,a.description)),1),(I(),Z(ns(a.iconComponent),{class:"size-4","aria-hidden":"true"}))]),_:2},1032,["href","title","onClick"])])),256))]))}}),bB=ue({__name:"ErrorReportModalTitle",props:{report:{},currentReport:{},totalReports:{}},setup(t){const e=H(()=>!t.totalReports||t.totalReports<=1?t.report.title:`${t.report.title} (${t.currentReport}/${t.totalReports})`);return(n,r)=>(I(),Z(mt,{text:e.value,inline:""},null,8,["text"]))}});function wB(t){const e=we(t.reports.includes(t.report)?t.reports.indexOf(t.report):0),n=H(()=>t.reports[e.value]),r=H(()=>{var o;return((o=n.value.details)==null?void 0:o.trim())||Fe("errors.detailsEmpty","This error is missing a stacktrace.")}),s=Fe("errors.previousReport","Show previous report"),i=Fe("errors.nextReport","Show next report");return{activeReportIndex:e,details:r,nextReportText:i,previousReportText:s,activeReport:n}}const _B={class:"px-4 pt-5 pb-4"},xB={class:"flex justify-between gap-4"},SB={class:"flex items-center gap-2"},EB={key:0,class:"flex gap-0.5"},AB={class:"-mt-2 max-h-[75vh] overflow-auto bg-red-800/10"},CB=["textContent"],$B=ue({__name:"ErrorReportModal",props:{report:{},reports:{}},setup(t,{expose:e}){const n=t,{activeReportIndex:r,details:s,nextReportText:i,previousReportText:o,activeReport:a}=wB(n);return e(),(l,u)=>(I(),Z(Jn,{title:l.$td("errors.report","Error report"),"title-hidden":"","close-hidden":"",class:"p-0","wrapper-class":"sm:w-auto sm:min-w-lg sm:max-w-[80vw]"},{default:K(()=>[L("div",_B,[L("h2",xB,[L("div",SB,[N(y(nu),{class:"size-5 text-red-600"}),N(bB,{class:"text-lg leading-6 font-semibold text-gray-900",report:y(a),"current-report":y(r)+1,"total-reports":l.reports.length},null,8,["report","current-report","total-reports"]),l.reports.length>1?(I(),ae("span",EB,[N(rt,{size:"icon",variant:"ghost",disabled:y(r)===0,"aria-label":y(o),title:y(o),onClick:u[0]||(u[0]=c=>r.value--)},{default:K(()=>[N(y(sB),{class:"size-4"})]),_:1},8,["disabled","aria-label","title"]),N(rt,{size:"icon",variant:"ghost",disabled:y(r)===l.reports.length-1,"aria-label":y(i),title:y(i),onClick:u[1]||(u[1]=c=>r.value++)},{default:K(()=>[N(y(EA),{class:"size-4"})]),_:1},8,["disabled","aria-label","title"])])):ke("",!0)]),N(vB,{report:y(a),class:"gap-0.5"},null,8,["report"])]),y(a).description?(I(),Z(mt,{key:0,text:y(a).description,class:"text-gray-600"},null,8,["text"])):ke("",!0)]),L("div",AB,[L("pre",{class:"p-4 text-xs text-red-800",textContent:fe(y(s))},null,8,CB)])]),_:1},8,["title"]))}}),kB={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function IB(t,e){return I(),ae("svg",kB,e[0]||(e[0]=[L("path",{fill:"currentColor",d:"M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,19a8,8,0,1,1,8-8A8,8,0,0,1,12,20Z",opacity:".25"},null,-1),L("path",{fill:"currentColor",d:"M10.14,1.16a11,11,0,0,0-9,8.92A1.59,1.59,0,0,0,2.46,12,1.52,1.52,0,0,0,4.11,10.7a8,8,0,0,1,6.66-6.61A1.42,1.42,0,0,0,12,2.69h0A1.57,1.57,0,0,0,10.14,1.16Z"},[L("animateTransform",{attributeName:"transform",dur:"0.75s",repeatCount:"indefinite",type:"rotate",values:"0 12 12;360 12 12"})],-1)]))}const RB=Qe({name:"svg-spinners-90-ring-with-bg",render:IB}),OB={class:"relative mt-1 h-2 w-full overflow-hidden rounded-full bg-gray-200"},TB={class:"sr-only"},hy=ue({__name:"ProgressBar",props:{filledClass:{},overflowClass:{},progress:{},job:{}},setup(t){let e;const n=we(0),r=H(()=>dt("size-full transition-transform duration-500 rounded-r-full ease-linear bg-primary-600",t.filledClass)),s=H(()=>dt("absolute inset-y-0 right-0 size-full rounded-r-full","bg-primary-900 transition-[width] duration-500 ease-linear",t.overflowClass)),i=H(()=>typeof t.progress=="number"?t.progress:n.value),o=H(()=>i.value>1?100*((i.value-1)/i.value):null);return Ke(()=>t.job,()=>{e&&e(),n.value=t.job?t.job.progress:0,e=t.job&&t.job.listeners.add({onUpdated:a=>n.value=a})},{immediate:!0}),on(()=>e&&e()),(a,l)=>(I(),ae("div",OB,[L("div",{class:De(r.value),style:Xt(`transform:translateX(-${(1-i.value)*100}%)`)},null,6),o.value?(I(),ae("div",{key:0,class:De(s.value),style:Xt({width:`${o.value}%`})},null,6)):ke("",!0),L("span",TB,fe(a.$td("ui.progress","{progress}% complete",{progress:i.value*100})),1)]))}});function DB(t){const e=H(()=>t.title??Fe("ui.loading","Loading")),n=H(()=>t.message??Fe("ui.loadingInProgress","Loading in progress...")),r=H(()=>typeof t.progress=="number"||!!t.job),s=H(()=>!t.title);return{renderedTitle:e,renderedMessage:n,titleHidden:s,showProgress:r}}const PB=ue({__name:"LoadingModal",props:{title:{},message:{},progress:{},job:{}},setup(t,{expose:e}){const n=t,{renderedTitle:r,renderedMessage:s,titleHidden:i,showProgress:o}=DB(n);return e(),(a,l)=>(I(),Z(Jn,{persistent:"","wrapper-class":"w-auto",title:y(r),"title-hidden":y(i),class:De({"flex-col-reverse":y(o),"flex-row items-center justify-center gap-2":!y(o)})},{default:K(()=>[y(o)?(I(),Z(hy,{key:0,progress:a.progress,job:a.job,class:"min-w-[min(400px,80vw)]"},null,8,["progress","job"])):(I(),Z(y(RB),{key:1,class:"text-primary-600 mr-1 size-6"})),N(mt,{text:y(s)},null,8,["text"])]),_:1},8,["title","title-hidden","class"]))}}),my=ue({__name:"HeadlessInput",props:{name:{},label:{},description:{},modelValue:{},as:{default:"div"}},emits:["update:modelValue"],setup(t,{expose:e,emit:n}){const r=n,s=Kt("form",null),i=H(()=>!s||!t.name?null:s.errors[t.name]??null),o={id:`input-${Dl()}`,name:H(()=>t.name),label:H(()=>t.label),description:H(()=>t.description),value:H(()=>s&&t.name?s.getFieldValue(t.name):t.modelValue),errors:vs(i),required:H(()=>{if(!(!t.name||!s))return s.getFieldRules(t.name).includes("required")}),update(a){if(s&&t.name){s.setFieldValue(t.name,a);return}r("update:modelValue",a)}};return cr("input",o),e(o),(a,l)=>(I(),Z(ns(a.as),null,{default:K(()=>[Ee(a.$slots,"default")]),_:3}))}}),MB=["for"],Hc=ue({__name:"HeadlessInputLabel",setup(t){const e=Gt("input","<HeadlessInputLabel> must be a child of a <HeadlessInput>"),n=Od(),r=H(()=>!!(e.label||n.default));return(s,i)=>r.value?(I(),ae("label",{key:0,for:y(e).id},[Ee(s.$slots,"default",{},()=>[Ue(fe(y(e).label),1)])],8,MB)):ke("",!0)}}),LB=["id","name","checked","type","required","aria-invalid","aria-describedby"],AA=ue({__name:"HeadlessInputInput",props:{type:{}},setup(t){const e=ri("$inputRef"),n=Gt("input","<HeadlessInputInput> must be a child of a <HeadlessInput>"),r=Kt("form",null),s=H(()=>n.name??void 0),i=H(()=>n.value),o=H(()=>{if(t.type)return t.type;const c=(s.value&&(r==null?void 0:r.getFieldType(s.value)))??"";return["text","email","number","tel","url"].includes(c)?c:"text"}),a=H(()=>{if(o.value==="checkbox")return!!i.value});function l(){e.value&&n.update(u())}function u(){if(!e.value)return null;switch(o.value){case"checkbox":return e.value.checked;case"date":case"time":case"datetime-local":{const c=new Date(Math.round(e.value.valueAsNumber/6e4)*6e4+dw(e.value.valueAsDate??new Date(e.value.valueAsNumber)));return isNaN(c.getTime())?null:c}case"number":return e.value.valueAsNumber;default:return e.value.value}}return oA(n,()=>{var c;return(c=e.value)==null?void 0:c.focus()}),Nt(()=>{if(e.value){if(["date","time","datetime-local"].includes(o.value)&&i.value instanceof Date){const c=Math.round(i.value.getTime()/6e4)*6e4;e.value.valueAsNumber=c-dw(i.value),i.value.getTime()!==c&&n.update(new Date(c));return}e.value.value=i.value??null}}),(c,d)=>(I(),ae("input",{id:y(n).id,ref:"$inputRef",name:s.value,checked:a.value,type:o.value,required:y(n).required??void 0,"aria-invalid":y(n).errors?"true":"false","aria-describedby":y(n).errors?`${y(n).id}-error`:y(n).description?`${y(n).id}-description`:void 0,onInput:l},null,40,LB))}}),CA=ue({inheritAttrs:!1,__name:"HeadlessInputDescription",setup(t){const e=Gt("input","<HeadlessInputDescription> must be a child of a <HeadlessInput>"),n=H(()=>typeof e.description=="string"?e.description:""),r=H(()=>!!e.description);return(s,i)=>Ee(s.$slots,"default",{id:`${y(e).id}-description`},()=>[r.value?(I(),Z(mt,Te({key:0},s.$attrs,{id:`${y(e).id}-description`,text:n.value}),null,16,["id","text"])):ke("",!0)])}}),NB=["id"],Kc=ue({__name:"HeadlessInputError",setup(t){const e=Gt("input","<HeadlessInputError> must be a child of a <HeadlessInput>"),n=H(()=>e.errors?Fe(`errors.${e.errors[0]}`,`Error: ${e.errors[0]}`):null);return(r,s)=>n.value?(I(),ae("p",{key:0,id:`${y(e).id}-error`},fe(n.value),9,NB)):ke("",!0)}}),FB={key:0,class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},As=ue({inheritAttrs:!1,__name:"Input",props:{name:{},label:{},description:{},modelValue:{},inputClass:{},wrapperClass:{},descriptionClass:{},errorClass:{}},emits:["update:modelValue"],setup(t){const e=xs(t,["label","inputClass","wrapperClass","descriptionClass","errorClass"]),n=ri("$inputRef"),[r,s]=fy(),i=H(()=>dt("relative rounded-md shadow-2xs",{"mt-1":t.label},t.wrapperClass)),o=H(()=>dt("mt-2 text-sm text-gray-600",t.descriptionClass)),a=H(()=>dt("mt-2 text-sm text-red-600",t.errorClass)),l=H(()=>{var u,c,d;return dt("block w-full rounded-md border-0 py-1.5 ring-1 ring-inset focus:ring-2 focus:ring-inset sm:text-sm sm:leading-6",{"focus:ring-primary-600":!((u=n.value)!=null&&u.errors),"text-gray-900 shadow-2xs ring-gray-900/10 placeholder:text-gray-400":!((c=n.value)!=null&&c.errors),"pr-10 text-red-900 ring-red-900/10 placeholder:text-red-300 focus:ring-red-500":(d=n.value)==null?void 0:d.errors},t.inputClass)});return(u,c)=>(I(),Z(my,Te({ref:"$inputRef",label:u.label,class:y(s)},e,{"onUpdate:modelValue":c[0]||(c[0]=d=>u.$emit("update:modelValue",d))}),{default:K(()=>{var d;return[N(Hc,{class:"block text-sm leading-6 font-medium text-gray-900"}),L("div",{class:De(i.value)},[N(AA,Te(y(r),{class:l.value}),null,16,["class"]),(d=n.value)!=null&&d.errors?(I(),ae("div",FB,[N(y(nu),{class:"size-5 text-red-500"})])):ke("",!0)],2),N(CA,{class:De(o.value)},null,8,["class"]),N(Kc,{class:De(a.value)},null,8,["class"])]}),_:1},16,["label","class"]))}});function $A(t,e={}){return{default:t,type:"date",rules:["required",...e.rules??[]]}}function Yp(t,e={}){return{default:t,type:"number",rules:["required",...e.rules??[]]}}function kA(t,e={}){return{default:t,type:"object",rules:["required",...e.rules??[]]}}function ao(t,e={}){return{default:t,type:"string",rules:["required",...e.rules??[]]}}function gn(t,e={}){return{default:t,type:"number",rules:e.rules}}function Wc(t,e={}){return{default:t,type:"string",rules:e.rules}}function jB(t){const e=qi({draft:ao(t.defaultValue??"")}),n=H(()=>t.title??t.message),r=H(()=>t.title?t.message:null),s=H(()=>t.acceptText??Fe("ui.accept","Ok")),i=H(()=>t.cancelText??Fe("ui.cancel","Cancel"));return{form:e,renderedTitle:n,renderedMessage:r,renderedAcceptText:s,renderedCancelText:i}}const qB={class:"mt-4 flex flex-row-reverse gap-2"},UB=ue({__name:"PromptModal",props:{title:{},message:{},label:{},defaultValue:{},placeholder:{},acceptText:{},acceptVariant:{},cancelText:{},cancelVariant:{default:"secondary"}},emits:["close"],setup(t,{expose:e}){const n=xs(t,["cancelVariant"]),{form:r,renderedTitle:s,renderedMessage:i,renderedAcceptText:o,renderedCancelText:a}=jB(n);return e(),(l,u)=>(I(),Z(Jn,{title:y(s),persistent:""},{default:K(({close:c})=>[N(Ui,{form:y(r),onSubmit:d=>c(y(r).draft)},{default:K(()=>[y(i)?(I(),Z(mt,{key:0,text:y(i)},null,8,["text"])):ke("",!0),N(As,{name:"draft",class:"mt-2",placeholder:l.placeholder,label:l.label},null,8,["placeholder","label"]),L("div",qB,[N(rt,{variant:l.acceptVariant,submit:""},{default:K(()=>[Ue(fe(y(o)),1)]),_:1},8,["variant"]),N(rt,{variant:l.cancelVariant,onClick:d=>c()},{default:K(()=>[Ue(fe(y(a)),1)]),_:2},1032,["variant","onClick"])])]),_:2},1032,["form","onSubmit"])]),_:1},8,["title"]))}}),BB={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function zB(t,e){return I(),ae("svg",BB,e[0]||(e[0]=[L("path",{fill:"currentColor",d:"M12 21q-1.625 0-3.012-.8T6.8 18H4v-2h2.1q-.075-.5-.088-1T6 14H4v-2h2q0-.5.012-1t.088-1H4V8h2.8q.35-.575.788-1.075T8.6 6.05L7 4.4L8.4 3l2.15 2.15q.7-.225 1.425-.225t1.425.225L15.6 3L17 4.4l-1.65 1.65q.575.375 1.038.862T17.2 8H20v2h-2.1q.075.5.088 1T18 12h2v2h-2q0 .5-.013 1t-.087 1H20v2h-2.8q-.8 1.4-2.187 2.2T12 21m-2-5h4v-2h-4zm0-4h4v-2h-4z"},null,-1)]))}const VB=Qe({name:"material-symbols-bug-report",render:zB}),HB={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function KB(t,e){return I(),ae("svg",HB,e[0]||(e[0]=[L("path",{fill:"currentColor",d:"M7 21q-.825 0-1.412-.587T5 19V6q-.425 0-.712-.288T4 5t.288-.712T5 4h4q0-.425.288-.712T10 3h4q.425 0 .713.288T15 4h4q.425 0 .713.288T20 5t-.288.713T19 6v13q0 .825-.587 1.413T17 21zm5-7.1l1.9 1.9q.275.275.7.275t.7-.275t.275-.7t-.275-.7l-1.9-1.9l1.9-1.9q.275-.275.275-.7t-.275-.7t-.7-.275t-.7.275L12 11.1l-1.9-1.9q-.275-.275-.7-.275t-.7.275t-.275.7t.275.7l1.9 1.9l-1.9 1.9q-.275.275-.275.7t.275.7t.7.275t.7-.275z"},null,-1)]))}const WB=Qe({name:"material-symbols-delete-forever-rounded",render:KB}),GB={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function JB(t,e){return I(),ae("svg",GB,e[0]||(e[0]=[L("path",{fill:"currentColor",d:"M11.25 13.5q.95 0 1.6-.65t.65-1.6t-.65-1.6t-1.6-.65t-1.6.65t-.65 1.6t.65 1.6t1.6.65m4.825 4l-2.625-2.625q-.5.325-1.062.475t-1.138.15q-1.775 0-3.012-1.237T7 11.25t1.238-3.012T11.25 7t3.013 1.238T15.5 11.25q0 .575-.162 1.138t-.488 1.062l2.65 2.65zM5 21q-.825 0-1.412-.587T3 19v-4h2v4h4v2zm10 0v-2h4v-4h2v4q0 .825-.587 1.413T19 21zM3 9V5q0-.825.588-1.412T5 3h4v2H5v4zm16 0V5h-4V3h4q.825 0 1.413.588T21 5v4z"},null,-1)]))}const YB=Qe({name:"material-symbols-frame-inspect",render:JB}),XB={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function QB(t,e){return I(),ae("svg",XB,e[0]||(e[0]=[L("path",{fill:"currentColor",d:"M12 20q-3.35 0-5.675-2.325T4 12t2.325-5.675T12 4q1.725 0 3.3.712T18 6.75V5q0-.425.288-.712T19 4t.713.288T20 5v5q0 .425-.288.713T19 11h-5q-.425 0-.712-.288T13 10t.288-.712T14 9h3.2q-.8-1.4-2.187-2.2T12 6Q9.5 6 7.75 7.75T6 12t1.75 4.25T12 18q1.7 0 3.113-.862t2.187-2.313q.2-.35.563-.487t.737-.013q.4.125.575.525t-.025.75q-1.025 2-2.925 3.2T12 20"},null,-1)]))}const ZB=Qe({name:"material-symbols-refresh-rounded",render:QB}),e8={class:"grid grow place-items-center"},t8={class:"flex flex-col items-center p-8"},n8={class:"mt-0 mb-0 text-center text-4xl font-medium text-red-600"},r8={class:"mt-4 grid grid-cols-1 gap-2 sm:grid-cols-2 [&_button]:justify-start sm:[&_button]:size-32 sm:[&_button]:flex-col sm:[&_button]:justify-center [&_svg]:size-6 sm:[&_svg]:size-8"},s8=ue({__name:"StartupCrash",setup(t){async function e(){await $t.confirm(Fe("startupCrash.purgeConfirmTitle","Delete everything?"),Fe("startupCrash.purgeConfirmMessage",`If the problem persists, one drastic solution may be to wipe the storage in this device to start from scratch. However, keep in mind that **all the data that you haven't synchronized will be deleted forever**.

Do you still want to proceed?`),{acceptVariant:"danger",acceptText:Fe("startupCrash.purgeConfirmAccept","Purge device")})&&(await ef.purge(),await gt.reload())}return(n,r)=>{const s=Eg("i-majesticons-exclamation");return I(),ae("div",e8,[L("div",t8,[N(s,{class:"size-20 text-red-600"}),L("h1",n8,fe(n.$td("startupCrash.title","Oops, something went wrong!")),1),N(mt,{text:n.$td("startupCrash.message","There was a problem starting the application, but here's some things you can do:"),class:"mt-4 text-center"},null,8,["text"]),L("div",r8,[N(rt,{variant:"danger",onClick:r[0]||(r[0]=i=>n.$app.reload())},{default:K(()=>[N(y(ZB)),Ue(" "+fe(n.$td("startupCrash.reload","Try again")),1)]),_:1}),N(rt,{variant:"danger",onClick:r[1]||(r[1]=i=>n.$errors.inspect(n.$errors.startupErrors))},{default:K(()=>[N(y(VB)),Ue(" "+fe(n.$td("startupCrash.inspect","View error details")),1)]),_:1}),N(rt,{variant:"danger",onClick:r[2]||(r[2]=i=>e())},{default:K(()=>[N(y(WB)),Ue(" "+fe(n.$td("startupCrash.purge","Purge device")),1)]),_:1}),N(rt,{variant:"danger",onClick:r[3]||(r[3]=i=>n.$errors.debug=!n.$errors.debug)},{default:K(()=>[N(y(YB)),Ue(" "+fe(n.$td("startupCrash.debug","Toggle debugging")),1)]),_:1})])])])}}}),IA=ue({__name:"HeadlessToastAction",props:{action:{}},setup(t){return(e,n)=>(I(),Z(ns(e.action.dismiss?y(mU):"button"),{type:"button",onClick:e.action.click},{default:K(()=>[Ue(fe(e.action.label),1)]),_:1},8,["onClick"]))}}),i8={key:0},o8=ue({__name:"HeadlessToast",props:{message:{},actions:{},variant:{}},setup(t){return(e,n)=>(I(),Z(y(yU),null,{default:K(()=>[Ee(e.$slots,"default",{},()=>[e.message?(I(),ae("span",i8,fe(e.message),1)):ke("",!0),(I(!0),ae(je,null,at(e.actions,(r,s)=>(I(),Z(IA,{key:s,action:r},null,8,["action"]))),128))])]),_:3}))}}),a8=ue({__name:"Toast",props:{message:{},actions:{},variant:{default:"secondary"},class:{}},setup(t,{expose:e}){const n=H(()=>sA({baseClasses:t.class,variant:t.variant},{baseClasses:"flex items-center gap-2 rounded-md p-2 ring-1 shadow-lg border-gray-200",variants:{variant:{secondary:"bg-gray-900 text-white ring-black",danger:"bg-red-50 text-red-900 ring-red-100",warning:"bg-yellow-50 text-yellow-900 ring-yellow-100"}},defaultVariants:{variant:"secondary"}}));return e(),(r,s)=>(I(),Z(o8,{class:De(n.value)},{default:K(()=>[r.message?(I(),Z(mt,{key:0,text:r.message,inline:""},null,8,["text"])):ke("",!0),(I(!0),ae(je,null,at(r.actions,(i,o)=>(I(),Z(rt,{key:o,action:i,variant:r.variant,as:IA},null,8,["action","variant"]))),128))]),_:1},8,["class"]))}}),l8={$ui:$t},u8={async install(t,e){const n={"alert-modal":G4,"confirm-modal":tB,"error-report-modal":$B,"loading-modal":PB,"prompt-modal":UB,"startup-crash":s8,toast:a8,...e.components};for(const[r,s]of Object.entries(n))$t.registerComponent(r,s);await _o(t,l8)}},c8={async install(t,{formValidationRules:e}){for(const[n,r]of Object.entries(e??{}))iA(n,r)}};async function d8(t,e={}){var n;const r=[L4,YU,M4,x4,e4,u8,c8,...e.plugins??[]];gt.instance=t,await IU(r,t,e),await((n=e.install)==null?void 0:n.call(e,t)),await He.emit("application-ready")}async function f8(t,e={}){var n;const r=HP(t);Ri()&&(window.$aerogel=r),await d8(r,e),r.mount("#app"),(n=r._container)==null||n.classList.remove("loading"),await He.emit("application-mounted")}const p8=ue({__name:"AppToasts",setup(t){return(e,n)=>(I(),Z(y(nU),null,{default:K(()=>[(I(!0),ae(je,null,at(e.$ui.toasts,r=>(I(),Z(ns(r.component),Te({id:r.id,key:r.id},{ref_for:!0},r.properties),null,16,["id"]))),128)),N(y(wU),{class:"fixed right-0 bottom-0 z-50 flex flex-col items-end space-y-4 px-4 py-6 sm:p-6"})]),_:1}))}}),h8=ue({__name:"AppOverlays",setup(t){return(e,n)=>(I(),ae(je,null,[N(y(dL),{nested:""}),N(p8)],64))}}),m8={class:"text-primary-text flex min-h-full flex-col text-base leading-tight font-normal antialiased"},g8=ue({__name:"AppLayout",setup(t){return(e,n)=>(I(),ae("div",m8,[e.$errors.hasStartupErrors?Ee(e.$slots,"startup-crash",{key:0},()=>[(I(),Z(ns(e.$ui.requireComponent("startup-crash"))))]):Ee(e.$slots,"default",{key:1}),N(h8)]))}}),y8=["id","name","value","required","aria-invalid","aria-describedby"],v8=ue({__name:"HeadlessInputTextArea",setup(t){const e=ri("$textAreaRef"),n=Gt("input","<HeadlessInputTextArea> must be a child of a <HeadlessInput>"),r=H(()=>n.name??void 0),s=H(()=>n.value);function i(){e.value&&n.update(e.value.value)}return oA(n,()=>{var o;return(o=e.value)==null?void 0:o.focus()}),(o,a)=>(I(),ae("textarea",{id:y(n).id,ref:"$textAreaRef",name:r.value,value:s.value,required:y(n).required??void 0,"aria-invalid":y(n).errors?"true":"false","aria-describedby":y(n).errors?`${y(n).id}-error`:y(n).description?`${y(n).id}-description`:void 0,onInput:i},null,40,y8))}}),b8={class:"group"},Ia=ue({__name:"Details",props:{label:{default:()=>{}},contentClass:{},summaryClass:{}},setup(t){const e=H(()=>dt("pt-2 pl-4",t.contentClass)),n=H(()=>dt("-ml-2 flex w-[max-content] items-center rounded-lg py-2 pr-3 pl-1 max-w-full","hover:bg-gray-100 focus-visible:outline focus-visible:outline-gray-700",t.summaryClass));return(r,s)=>(I(),ae("details",b8,[L("summary",{class:De(n.value)},[N(y(EA),{class:"size-6 transition-transform group-open:rotate-90"}),Ee(r.$slots,"label",{},()=>[L("span",null,fe(r.label??r.$td("ui.details","Details")),1)])],2),L("div",{class:De(e.value)},[Ee(r.$slots,"default")],2)]))}}),w8=ue({__name:"AdvancedOptions",setup(t){return(e,n)=>(I(),Z(Ia,{label:e.$td("ui.advancedOptions","Advanced options")},{default:K(()=>[Ee(e.$slots,"default")]),_:3},8,["label"]))}}),_8={class:"flex h-6 items-center"},na=ue({inheritAttrs:!1,__name:"Checkbox",props:{name:{},label:{},description:{},modelValue:{},inputClass:{},labelClass:{}},emits:["update:modelValue"],setup(t){const e=xs(t,["inputClass","labelClass"]),n=ri("$inputRef"),[r,s]=fy(),i=H(()=>dt("relative flex items-start",s.value)),o=H(()=>{var l,u;return dt("size-4 rounded text-primary-600 not-checked:hover:bg-gray-200 checked:hover:text-primary-500 checked:border-0",{"border-gray-300 focus:ring-primary-600":!((l=n.value)!=null&&l.errors),"border-red-400 border-2 focus:ring-red-600":(u=n.value)==null?void 0:u.errors},t.inputClass)}),a=H(()=>dt("ml-2 text-sm leading-6",t.labelClass));return(l,u)=>(I(),Z(my,Te({ref:"$inputRef",class:i.value},e,{"onUpdate:modelValue":u[0]||(u[0]=c=>l.$emit("update:modelValue",c))}),{default:K(()=>[L("div",_8,[N(AA,Te(y(r),{type:"checkbox",class:o.value}),null,16,["class"])]),l.$slots.default?(I(),ae("div",{key:0,class:De(a.value)},[N(Hc,{class:"text-gray-900"},{default:K(()=>[Ee(l.$slots,"default")]),_:3}),N(Kc,{class:"text-red-600"})],2)):l.label?(I(),ae("div",{key:1,class:De(a.value)},[N(Hc,{class:"text-gray-900"}),N(Kc,{class:"text-red-600"})],2)):ke("",!0)]),_:3},16,["class"]))}}),x8=ue({__name:"Provide",props:{name:{},value:{}},setup(t){return cr(t.name,t.value),(e,n)=>Ee(e.$slots,"default")}}),S8={class:"relative flex max-w-[calc(100vw-2rem)] cursor-pointer items-center gap-2 truncate rounded-md px-2 py-1 text-sm select-none *:truncate group-data-[highlighted]:bg-gray-100 group-data-[state=checked]:font-semibold group-data-[state=unchecked]:opacity-50"},yw=ue({__name:"ComboboxOption",props:{textValue:{},value:{},disabled:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["select"],setup(t,{emit:e}){const n=e,r=Gt("select","<ComboboxOption> must be a child of a <Combobox>"),s=Fi(),i=Gt("combobox"),o=H(()=>{var l;const u=(l=r.options)==null?void 0:l.find(c=>c.value===t.value);return u?r.renderOption(u.value):rr(t.value)});function a(l){s.multiple.value||s.disabled.value||(l.preventDefault(),i.preventChange=!0,s.modelValue.value=t.value,n("select"))}return(l,u)=>(I(),Z(y(E3),Te(l.$props,{class:"group p-1 outline-none",onSelect:u[0]||(u[0]=c=>a(c))}),{default:K(()=>[L("div",S8,[Ee(l.$slots,"default",{},()=>[Ue(fe(o.value),1)])])]),_:3},16))}}),E8={class:"relative flex max-w-[calc(100vw-2rem)] items-center gap-2 truncate rounded-md px-2 py-1 text-sm select-none *:truncate"},A8=ue({__name:"ComboboxOptions",props:{newInputValue:{type:Function}},emits:["select"],setup(t){const{contains:e}=kE({sensitivity:"base"}),n=Gt("select","<ComboboxOptions> must be a child of a <Combobox>"),r=Gt("combobox"),s=ri("$group"),i=H(()=>{var l;return((l=n.options)==null?void 0:l.filter(u=>e(u.label,r.input)))??[]}),o=H(()=>r.input&&!i.value.some(l=>l.label===r.input)),a=dt("max-h-(--reka-combobox-content-available-height) min-w-(--reka-combobox-trigger-width)","z-50 overflow-auto rounded-lg bg-white text-base shadow-lg ring-1 ring-black/5 focus:outline-hidden");return Ke(s,()=>{var l;return r.$group=((l=s.value)==null?void 0:l.$el)??null}),(l,u)=>(I(),Z(y(C3),null,{default:K(()=>[N(y(h3),{position:"popper",align:y(n).align,side:y(n).side,"side-offset":4,class:De(y(a))},{default:K(()=>[N(y(k3),null,{default:K(()=>[N(y(g3),{class:"group p-1 outline-none"},{default:K(()=>[L("div",E8,fe(l.$td("ui.comboboxEmpty","No options found")),1)]),_:1}),N(y(w3),{ref_key:"$group",ref:s},{default:K(()=>{var c;return[o.value?(I(),Z(yw,{key:0,value:((c=l.newInputValue)==null?void 0:c.call(l,y(r).input))??y(r).input,onSelect:u[0]||(u[0]=d=>l.$emit("select"))},{default:K(()=>[Ue(fe(y(r).input),1)]),_:1},8,["value"])):ke("",!0),(I(!0),ae(je,null,at(i.value,d=>(I(),Z(yw,{key:d.key,value:d.value,onSelect:u[1]||(u[1]=f=>l.$emit("select"))},null,8,["value"]))),128))]}),_:1},512)]),_:1})]),_:1},8,["align","side","class"])]),_:1}))}}),C8={key:0,class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},$8=ue({__name:"ComboboxTrigger",emits:["focus","change","blur"],setup(t,{emit:e}){const n=e,r=Gt("select","<ComboboxTrigger> must be a child of a <Combobox>"),s=Gt("combobox"),i=H(()=>dt("block w-full rounded-md border-0 py-1.5 ring-1 ring-inset focus:ring-2 focus:ring-inset sm:text-sm sm:leading-6",{"mt-1":r.label,"focus:ring-primary-600":!r.errors,"text-gray-900 shadow-2xs ring-gray-900/10 placeholder:text-gray-400":!r.errors,"pr-10 text-red-900 ring-red-900/10 placeholder:text-red-300 focus:ring-red-500":r.errors}));function o(){Array.from(document.querySelectorAll(":hover")).some(a=>{var l;return(l=s.$group)==null?void 0:l.contains(a)})||n("blur")}return Ke(()=>s.input,()=>{if(s.preventChange){s.preventChange=!1;return}n("change")}),(a,l)=>(I(),Z(y(Hj),{class:"relative"},{default:K(()=>{var u;return[N(y(x3),{id:y(r).id,modelValue:y(s).input,"onUpdate:modelValue":l[0]||(l[0]=c=>y(s).input=c),placeholder:y(r).placeholder,class:De(i.value),"display-value":y(r).renderOption,name:y(r).name,onFocus:l[1]||(l[1]=c=>a.$emit("focus")),onBlur:l[2]||(l[2]=c=>o()),onKeydown:l[3]||(l[3]=Ys(c=>a.$emit("blur"),["esc"]))},null,8,["id","modelValue","placeholder","class","display-value","name"]),(u=y(r))!=null&&u.errors?(I(),ae("div",C8,[N(y(nu),{class:"size-5 text-red-500"})])):ke("",!0)]}),_:1}))}}),k8=ue({__name:"ComboboxLabel",props:{asChild:{type:Boolean},as:{}},setup(t){const e=Gt("select","<ComboboxLabel> must be a child of a <Combobox>"),n=Od(),r=H(()=>!!(e.label||n.default)),s=H(()=>dt("block text-sm leading-6 font-medium text-gray-900",e.labelClass));return(i,o)=>r.value?(I(),Z(y(QE),Te({key:0,for:y(e).id,class:s.value},i.$props),{default:K(()=>[Ee(i.$slots,"default",{},()=>[Ue(fe(y(e).label),1)])]),_:3},16,["for","class"])):ke("",!0)}}),RA=ue({__name:"Combobox",props:{as:{default:"div"},options:{},placeholder:{},renderOption:{type:Function},compareOptions:{type:Function,default:(t,e)=>t===e},labelClass:{},optionsClass:{},align:{},side:{},name:{},label:{},description:{},modelValue:{},newInputValue:{type:Function}},emits:["update:modelValue"],setup(t,{expose:e,emit:n}){const r=n,s=xs(t,["as","compareOptions","newInputValue"]),{expose:i,acceptableValue:o,update:a,renderOption:l}=mA(H(()=>({as:t.as,compareOptions:t.compareOptions,...s})),r),u=we(!1),c=H(()=>{var p;return Object.fromEntries(((p=i.options.value)==null?void 0:p.map(h=>[h.label,h.value]))??[])}),d={input:we(o.value?l(o.value):""),preventChange:we(!1),$group:we(null)};function f(p){d.input.value=l(p),a(p)}return Ke(i.value,p=>{const h=l(p);d.input.value!==h&&(d.preventChange.value=!0,d.input.value=h)}),Ke(d.input,p=>{const h=t.newInputValue?t.newInputValue(p):p,g=l(h);if(g in c.value){f(c.value[g]);return}f(h)}),e(i),(p,h)=>(I(),Z(y(u3),{"ignore-filter":"",open:u.value,"reset-search-term-on-blur":!1,"reset-search-term-on-select":!1,"model-value":y(o),by:p.compareOptions,"onUpdate:modelValue":h[4]||(h[4]=g=>f(g))},{default:K(()=>[N(x8,{name:"combobox",value:d},{default:K(()=>[N(k8),N($8,{onFocus:h[0]||(h[0]=g=>u.value=!0),onChange:h[1]||(h[1]=g=>u.value=!0),onBlur:h[2]||(h[2]=g=>u.value=!1)}),N(SA,{class:"mt-2 text-sm text-red-600"}),N(A8,{"new-input-value":p.newInputValue,onSelect:h[3]||(h[3]=g=>u.value=!1)},null,8,["new-input-value"])]),_:1})]),_:1},8,["open","model-value","by"]))}}),I8=ue({__name:"DropdownMenuOption",props:{class:{},asChild:{type:Boolean},as:{}},emits:["select"],setup(t){const e=xs(t,["class"]),n=H(()=>dt("flex w-full items-center gap-2 rounded-lg px-2 py-2 text-sm text-gray-900 data-[highlighted]:bg-gray-100",t.class));return(r,s)=>(I(),Z(y(rq),Te({class:n.value},e,{onSelect:s[0]||(s[0]=i=>r.$emit("select"))}),{default:K(()=>[Ee(r.$slots,"default")]),_:3},16,["class"]))}}),R8=ue({__name:"DropdownMenuOptions",setup(t){const e=Gt("dropdown-menu","<DropdownMenuOptions> must be a child of a <DropdownMenu>");return(n,r)=>(I(),Z(y(tq),{class:"gap-y-0.5 rounded-lg bg-white p-1.5 shadow-lg ring-1 ring-black/5",align:y(e).align,side:y(e).side},{default:K(()=>[Ee(n.$slots,"default",{},()=>[(I(!0),ae(je,null,at(y(e).options,(s,i)=>(I(),Z(I8,Te({key:i,as:s.route||s.href?hA:void 0,class:s.class},{ref_for:!0},s.route||s.href?{href:s.href,route:s.route,routeParams:s.routeParams,routeQuery:s.routeQuery}:{},{onSelect:o=>{var a;return(a=s.click)==null?void 0:a.call(s)}}),{default:K(()=>[Ue(fe(s.label),1)]),_:2},1040,["as","class","onSelect"]))),128))])]),_:3},8,["align","side"]))}}),O8=ue({__name:"DropdownMenu",props:{align:{},side:{},options:{}},setup(t,{expose:e}){const n={align:t.align,side:t.side,options:H(()=>{var r;return(r=t.options)==null?void 0:r.filter(Boolean)})};return cr("dropdown-menu",n),e(n),(r,s)=>(I(),Z(y(Z3),null,{default:K(()=>[N(y(aq),null,{default:K(()=>[Ee(r.$slots,"default")]),_:3}),N(y(iq),null,{default:K(()=>[Ee(r.$slots,"options",{},()=>[N(R8)])]),_:3})]),_:3}))}}),T8=["aria-hidden"],D8=["tabindex","aria-label","type"],P8=ue({__name:"EditableContent",props:{type:{default:"text"},contentClass:{},ariaLabel:{},formAriaHidden:{type:Boolean},tabindex:{},text:{},disabled:{type:Boolean}},emits:["update","save"],setup(t,{emit:e}){const n=e,r=ri("$inputRef"),s=we(null),i=we(t.text),o=H(()=>dt("inline whitespace-pre",t.contentClass)),a=H(()=>dt("invisible whitespace-pre",t.contentClass)),l=H(()=>dt("absolute inset-0 h-full w-full resize-none border-0 bg-transparent p-0 focus:ring-0",t.contentClass));function u(){s.value=t.text}function c(){s.value&&(t.type!=="number"&&i.value.trim().length===0&&(i.value=s.value,n("update",i.value)),s.value=null,n("save"))}return Nt(()=>i.value=t.text),(d,f)=>(I(),ae("div",{class:De(["relative",{"pointer-events-none!":d.disabled&&!s.value}])},[s.value?(I(),ae("span",{key:1,class:De(a.value)},fe(i.value),3)):(I(),ae("div",{key:0,class:De(o.value)},[Ee(d.$slots,"default")],2)),d.type==="number"?(I(),ae("span",{key:2,class:De(["inline-block transition-[width]",s.value?"w-5":"w-0"])},null,2)):ke("",!0),L("form",{class:"w-full","aria-hidden":d.formAriaHidden,onSubmit:f[4]||(f[4]=nr(p=>{var h;return(h=r.value)==null?void 0:h.blur()},["prevent"]))},[_g(L("input",{ref:"$inputRef","onUpdate:modelValue":f[0]||(f[0]=p=>i.value=p),tabindex:d.tabindex??void 0,"aria-label":d.ariaLabel??void 0,type:d.type,class:De([l.value,{"opacity-0":!s.value,"appearance-textfield":!s.value&&d.type==="number"}]),onKeyup:f[1]||(f[1]=p=>d.$emit("update",i.value)),onFocus:f[2]||(f[2]=p=>u()),onBlur:f[3]||(f[3]=p=>c())},null,42,D8),[[NP,i.value]])],40,T8)],2))}}),M8={viewBox:"0 0 512 512",width:"1.2em",height:"1.2em"};function L8(t,e){return I(),ae("svg",M8,e[0]||(e[0]=[L("path",{fill:"currentColor",d:"M449.07 399.08L278.64 82.58c-12.08-22.44-44.26-22.44-56.35 0L51.87 399.08A32 32 0 0 0 80 446.25h340.89a32 32 0 0 0 28.18-47.17m-198.6-1.83a20 20 0 1 1 20-20a20 20 0 0 1-20 20m21.72-201.15l-5.74 122a16 16 0 0 1-32 0l-5.74-121.95a21.73 21.73 0 0 1 21.5-22.69h.21a21.74 21.74 0 0 1 21.73 22.7Z"},null,-1)]))}const N8=Qe({name:"ion-warning",render:L8}),F8={viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"};function j8(t,e){return I(),ae("svg",F8,e[0]||(e[0]=[L("path",{fill:"currentColor",d:"M.2 10a11 11 0 0 1 19.6 0A11 11 0 0 1 .2 10m9.8 4a4 4 0 1 0 0-8a4 4 0 0 0 0 8m0-2a2 2 0 1 1 0-4a2 2 0 0 1 0 4"},null,-1)]))}const q8=Qe({name:"zondicons-view-show",render:j8}),U8={class:"font-medium"},B8=["datetime"],z8=ue({__name:"ErrorLogsModal",setup(t){return(e,n)=>(I(),Z(Jn,{title:e.$td("errors.report","Errors ({count})",{count:e.$errors.logs.length})},{default:K(()=>[L("ol",null,[(I(!0),ae(je,null,at(e.$errors.logs,(r,s)=>(I(),ae("li",{key:s,class:"mb-2 flex max-w-prose min-w-56 justify-between py-2 last:mb-0"},[L("div",null,[L("h3",U8,fe(r.report.title),1),L("time",{datetime:r.date.toISOString(),class:"text-xs text-gray-700"},fe(r.date.toLocaleTimeString()),9,B8),N(mt,{class:"text-sm text-gray-500",text:r.report.description??y(dA)(r.report)},null,8,["text"])]),N(rt,{size:"icon",variant:"ghost","aria-label":e.$td("errors.viewDetails","View details"),title:e.$td("errors.viewDetails","View details"),class:"self-center",onClick:i=>e.$errors.inspect(r.report,e.$errors.logs.map(({report:o})=>o))},{default:K(()=>[N(y(q8),{class:"size-4","aria-hidden":"true"})]),_:2},1032,["aria-label","title","onClick"])]))),128))])]),_:1},8,["title"]))}}),V8=ue({__name:"ErrorLogs",setup(t){return(e,n)=>e.$errors.logs.length>0?(I(),Z(rt,{key:0,size:"icon",variant:"ghost",title:e.$td("errors.viewLogs","View error logs"),"aria-label":e.$td("errors.viewLogs","View error logs"),onClick:n[0]||(n[0]=r=>e.$ui.modal(z8))},{default:K(()=>[N(y(N8),{class:"size-6 text-red-500"})]),_:1},8,["title","aria-label"])):ke("",!0)}}),go=ue({__name:"Link",props:{class:{},disabled:{type:Boolean},href:{},route:{},routeParams:{},routeQuery:{},size:{},submit:{type:Boolean},asChild:{type:Boolean},as:{}},setup(t){return(e,n)=>(I(),Z(rt,Te({variant:"link"},e.$props),{default:K(()=>[Ee(e.$slots,"default")]),_:3},16))}}),OA=ue({__name:"SettingsModal",setup(t){const e=H(()=>ES(gt.settings,"priority","desc"));return(n,r)=>(I(),Z(Jn,{title:n.$td("settings.title","Settings"),"fullscreen-on-mobile":n.$app.settingsFullscreenOnMobile},{default:K(()=>[(I(!0),ae(je,null,at(e.value,(s,i)=>(I(),Z(ns(s.component),{key:i}))),128))]),_:1},8,["title","fullscreen-on-mobile"]))}}),H8={key:0,class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},TA=ue({inheritAttrs:!1,__name:"TextArea",props:{name:{},label:{},description:{},modelValue:{},inputClass:{},wrapperClass:{}},emits:["update:modelValue"],setup(t){const e=xs(t,["label","inputClass","wrapperClass"]),n=ri("$inputRef"),[r,s]=fy(),i=H(()=>dt("relative rounded-md shadow-2xs",{"mt-1":t.label},t.wrapperClass)),o=H(()=>{var a,l,u;return dt("block w-full rounded-md border-0 py-1.5 ring-1 ring-inset focus:ring-2 focus:ring-inset sm:text-sm sm:leading-6",{"focus:ring-primary-600":!((a=n.value)!=null&&a.errors),"text-gray-900 shadow-2xs ring-gray-900/10 placeholder:text-gray-400":!((l=n.value)!=null&&l.errors),"pr-10 text-red-900 ring-red-900/10 placeholder:text-red-300 focus:ring-red-500":(u=n.value)==null?void 0:u.errors},t.inputClass)});return(a,l)=>(I(),Z(my,Te({ref:"$inputRef",label:a.label,class:y(s)},e,{"onUpdate:modelValue":l[0]||(l[0]=u=>a.$emit("update:modelValue",u))}),{default:K(()=>{var u;return[N(Hc,{class:"block text-sm leading-6 font-medium text-gray-900"}),L("div",{class:De(i.value)},[N(v8,Te(y(r),{class:o.value}),null,16,["class"]),(u=n.value)!=null&&u.errors?(I(),ae("div",H8,[N(y(nu),{class:"size-5 text-red-500"})])):ke("",!0)],2),N(CA,{class:"mt-2 text-sm text-gray-600"}),N(Kc,{class:"mt-2 text-sm text-red-600"})]}),_:1},16,["label","class"]))}});class gy{constructor(){wt(this,"status"),wt(this,"_listeners"),wt(this,"_progress"),wt(this,"_cancelled"),wt(this,"_started"),wt(this,"_completed"),this.status=this.getInitialStatus(),this._listeners=new b2,this._started=new ms,this._completed=new ms}async start(){this.beforeStart(),this._started.resolve();try{await this.updateProgress(),await this.run(),await this.updateProgress(),this._completed.resolve()}catch(e){if(e instanceof gw)return;throw Hn(i2(e),n=>{this._completed.reject(n)})}}async cancel(){this._cancelled=new ms,await this._cancelled}serialize(){return this.serializeStatus(this.status)}get listeners(){return this._listeners}get progress(){return this._progress??0}get cancelled(){var e;return!!((e=this._cancelled)!=null&&e.isResolved())}get started(){return this._started}get completed(){return this._completed}getInitialStatus(){return{completed:!1}}beforeStart(){if(this._started.isResolved()){if(this._cancelled){delete this._progress,delete this._cancelled;return}throw new Error("Job already started!")}}assertNotCancelled(){if(this._cancelled)throw this._cancelled.resolve(),new gw}calculateCurrentProgress(e){return e??(e=this.status),e.completed?1:!e.children||e.children.length===0?0:OS(e.children.reduce((n,r)=>n+this.calculateCurrentProgress(r),0)/e.children.length,2)}async updateProgress(e){await(e==null?void 0:e(this.status));const n=this.calculateCurrentProgress();n!==this._progress&&(this._progress=n,await this._listeners.emit("onUpdated",n))}serializeStatus(e){return{...e}}}async function Xp(t){await t.start()}function K8(t){return en(t)}const W8=Object.freeze(Object.defineProperty({__proto__:null,model:K8},Symbol.toStringTag,{value:"Module"}));let yy=new WeakMap;function G8(t){const e=aA(void 0,{equals:(i,o)=>i.id===o.id}),n=H(()=>e.values()),r=new Set([t.collection]),s={modelsSet:e,modelsArray:n,collectionsSet:r,async refresh(){const i=new Set;for(const o of r)(await t.withCollection(o,()=>t.all())).forEach(a=>i.add(a));e.reset(i)}};return yy.set(t,s),t.on("created",i=>e.add(it(i))),t.on("deleted",i=>e.delete(it(i))),t.on("updated",i=>e.add(it(i))),He.on("purge-storage",()=>e.clear()),He.on("cloud:migration-completed",()=>s.refresh()),He.on("cloud:migration-cancelled",()=>s.refresh()),He.on("cloud:backup-completed",()=>s.refresh()),He.emit("soukai:track-models",t),s}function _l(t){return"isSoftDeleted"in t?t.isSoftDeleted():!1}function su(){return yy}function DA(t){return yy.get(t)??G8(t)}function PA(t,e,n=!0){const r=e??new Map;return Tc(t)?(t.forEach(s=>r.set(s.id,s)),r):Ai(t)?n?(Object.values(t).forEach(s=>PA(s,r,!1)),r):(r.set(t.id,t),r):r}function J8(t,e){return _a((n,r)=>{let s;const i=()=>(s=e(),r()),o=[t.on("deleted",i),t.on("created",i),t.on("updated",i),t.on("modified",i),t.on("relation-loaded",i),He.on("cloud:migration-cancelled",i),He.on("cloud:migration-completed",i)],a=()=>{o.forEach(l=>l()),o.splice(0,o.length)};return wa()&&Kl(a),Nt(i),{get:()=>Hn(s,()=>n()),set:()=>console.warn("Computed models ref was not set (it is immutable).")}})}function Y8(t,e){const n=J8(t,e),r=H(()=>Tc(n.value)?n.value.filter(o=>!_l(o)).map(o=>tr(o)):Ai(n.value)?Object.entries(n.value).reduce((o,[a,l])=>(Tc(l)?o[a]=l.filter(u=>!_l(u)).map(u=>tr(u)):_l(l)||(o[a]=tr(l)),o),{}):n.value),s=H(()=>PA(r.value)),i=t.on("modified",(o,a)=>{Object.assign(s.value.get(o.id)??{},{[a]:o.getAttribute(a)})});return on(i),r}function MA(t){return _a((e,n)=>{let r;const s=[],i=a=>r instanceof to&&a.id===r.id&&n(),o=()=>{s.forEach(a=>a()),s.splice(0,s.length)};return wa()&&Kl(o),Nt(()=>{const a=t();r instanceof to&&(!er(a,to)||a.static()!==r.static())&&o(),r=a,n(),r instanceof to&&!s.length&&(s.push(He.on("cloud:migration-completed",n)),s.push(He.on("cloud:migration-cancelled",n)),s.push(r.static().on("modified",i)),s.push(r.static().on("updated",i)),s.push(r.static().on("relation-loaded",i)))}),{get:()=>Hn(r,()=>e()),set:()=>console.warn("Computed model ref was not set (it is immutable).")}})}function LA(t,e){return Y8(t,e)}function Ra(t,e={}){const n=Mn([]),r=DA(t);return Nt(()=>n.value=r.modelsArray.value),qU(()=>t.on("updated",()=>n.value=n.value.slice(0))),H(()=>e.includeSoftDeleted?n.value:n.value.filter(s=>!_l(s)))}function Oa(t,e={}){var n;const r=((n=su().get(t))==null?void 0:n.modelsArray.value)??[];return e.includeSoftDeleted?r:r.filter(s=>!_l(s))}function X8(t){return su().has(t)}function vw(t,e){On(su().get(t),"Failed ignoring models collection, please track the model first using trackModels()").collectionsSet.delete(e)}async function $i(t,e,n={}){const r=n.refresh??!0,s=On(su().get(t),"Failed tracking models collection, please track the model first using trackModels()");if(!s.collectionsSet.has(e)&&(s.collectionsSet.add(e),r)){const i=await t.withCollection(e,()=>t.all());for(const o of i)s.modelsSet.add(o)}}async function vy(t,e){const{service:n,property:r,transform:s,...i}=e??{},o=s??(u=>u),a=su().has(t),l=DA(t);for(const[u,c]of Object.entries(i))t.on(u,c);n&&r&&Nt(()=>n.setState(r,o(l.modelsArray.value))),a||await l.refresh()}function Q8(){globalThis.testingRuntime&&Object.assign(globalThis.testingRuntime,W8)}function Z8(t){return{install(){const e=new Lk(cy());Q8(),Y_(e),Vk(t.models),He.on("purge-storage",()=>e.purgeDatabase())}}}function Yn(t,e){class n{constructor(s){var i;const o=this;n.init(o,s),(i=o._zod).deferred??(i.deferred=[]);for(const a of o._zod.deferred)a()}static init(s,i){var o;s._zod??(s._zod={}),(o=s._zod).traits??(o.traits=new Set),s._zod.traits.add(t),e(s,i);for(const a in n.prototype)Object.defineProperty(s,a,{value:n.prototype[a].bind(s)});s._zod.constr=n,s._zod.def=i}static[Symbol.hasInstance](s){var i,o;return(o=(i=s==null?void 0:s._zod)==null?void 0:i.traits)==null?void 0:o.has(t)}}return Object.defineProperty(n,"name",{value:t}),n}class Gc extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const e5={};function tf(t){return e5}function t5(t,e){return typeof e=="bigint"?e.toString():e}function NA(t){return{get value(){{const e=t();return Object.defineProperty(this,"value",{value:e}),e}}}}function FA(t){const e=t.startsWith("^")?1:0,n=t.endsWith("$")?t.length-1:t.length;return t.slice(e,n)}function vm(t,e,n){Object.defineProperty(t,e,{get(){{const r=n();return t[e]=r,r}},set(r){Object.defineProperty(t,e,{value:r})},configurable:!0})}function jA(t=10){const e="abcdefghijklmnopqrstuvwxyz";let n="";for(let r=0;r<t;r++)n+=e[Math.floor(Math.random()*e.length)];return n}function Qa(t){return JSON.stringify(t)}function n5(t){return typeof t=="object"&&t!==null}const r5=NA(()=>{try{return new Function(""),!0}catch{return!1}});function s5(t,e){return new t._zod.constr(e)}function Ta(t){return{}}function i5(t){return Object.keys(t).filter(e=>t[e]._zod.qout==="true")}function Qp(t,e=0){for(let n=e;n<t.issues.length;n++)if(t.issues[n].continue!==!0)return!0;return!1}function by(t,e){return e.map(n=>{var r;return(r=n).path??(r.path=[]),n.path.unshift(t),n})}function Pu(t){return typeof t=="string"?t:t==null?void 0:t.message}function nf(t,e,n){var s,i,o,a,l,u;const r={...t,path:t.path??[]};if(!t.message){const c=Pu((o=(i=(s=t.inst)==null?void 0:s._zod.def)==null?void 0:i.error)==null?void 0:o.call(i,t))??Pu((a=e==null?void 0:e.error)==null?void 0:a.call(e,t))??Pu((l=n.customError)==null?void 0:l.call(n,t))??Pu((u=n.localeError)==null?void 0:u.call(n,t))??"Invalid input";r.message=c}return delete r.inst,delete r.continue,e!=null&&e.reportInput||delete r.input,r}const bw=Symbol.for("{{zod.error}}");class Bi{get message(){return JSON.stringify(this.issues,t5,2)}constructor(e){Object.defineProperty(this,"_tag",{value:bw,enumerable:!1}),Object.defineProperty(this,"name",{value:"$ZodError",enumerable:!1}),this.issues=e}static[Symbol.hasInstance](e){return(e==null?void 0:e._tag)===bw}}function o5(t,e,n){const r=n?{...n,async:!1}:{async:!1},s=t._zod.run({value:e,issues:[]},r);if(s instanceof Promise)throw new Gc;if(s.issues.length)throw new((this==null?void 0:this.Error)??Bi)(s.issues.map(i=>nf(i,r,tf())));return s.value}function a5(t,e,n){const r=n?{...n,async:!1}:{async:!1},s=t._zod.run({value:e,issues:[]},r);if(s instanceof Promise)throw new Gc;return s.issues.length?{success:!1,error:new((this==null?void 0:this.Error)??Bi)(s.issues.map(i=>nf(i,r,tf())))}:{success:!0,data:s.value}}async function l5(t,e,n){const r=n?{...n,async:!0}:{async:!0};let s=t._zod.run({value:e,issues:[]},r);if(s instanceof Promise&&(s=await s),s.issues.length)throw new((this==null?void 0:this.Error)??Bi)(s.issues.map(i=>nf(i,r,tf())));return s.value}async function u5(t,e,n){const r=n?{...n,async:!0}:{async:!0};let s=t._zod.run({value:e,issues:[]},r);return s instanceof Promise&&(s=await s),s.issues.length?{success:!1,error:new((this==null?void 0:this.Error)??Bi)(s.issues.map(i=>nf(i,r,tf())))}:{success:!0,data:s.value}}const c5=t=>{const e=t?`[\\s\\S]{${(t==null?void 0:t.minimum)??0},${(t==null?void 0:t.maximum)??""}}`:"[\\s\\S]*";return new RegExp(`^${e}$`)},d5=/^-?\d+(?:\.\d+)?/i;class f5{constructor(e){this.content=[],this.indent=0,this.args=e}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if(typeof e=="function"){e(this,{execution:"sync"}),e(this,{execution:"async"});return}const r=e.split(`
`).filter(o=>o),s=Math.min(...r.map(o=>o.length-o.trimStart().length)),i=r.map(o=>o.slice(s)).map(o=>" ".repeat(this.indent*2)+o);for(const o of i)this.content.push(o)}compile(){const e=[...this.content.map(n=>`  ${n}`)];return new Function(...this.args,e.join(`
`))}}const So=Yn("$ZodType",(t,e)=>{var s,i,o;var n;t??(t={}),t._zod.id=e.type+"_"+jA(10),t._zod.def=e,t._zod.computed=t._zod.computed||{};const r=[...t._zod.def.checks??[]];e.type,t._zod.traits.has("$ZodCheck")&&r.unshift(t);for(const a of r)(i=(s=a._zod).onattach)==null||i.call(s,t);if(r.length===0)(n=t._zod).deferred??(n.deferred=[]),(o=t._zod.deferred)==null||o.push(()=>{t._zod.run=t._zod.parse});else{const a=(l,u,c)=>{let d=Qp(l),f;for(const p of u){if(p._zod.when){if(!p._zod.when(l))continue}else if(d)continue;const h=l.issues.length,g=p._zod.check(l);if(g instanceof Promise&&(c==null?void 0:c.async)===!1)throw new Gc;if(f||g instanceof Promise)f=f??Promise.resolve(),f.then(async()=>{await g,l.issues.length!==h&&(d||(d=Qp(l,h)))});else{if(l.issues.length===h)continue;d||(d=Qp(l,h))}}return f?f.then(()=>l):l};t._zod.run=(l,u)=>{const c=t._zod.parse(l,u);if(c instanceof Promise){if(u.async===!1)throw new Gc;return c.then(d=>a(d,r,u))}return a(c,r,u)}}vm(t,"~standard",()=>({validate:a=>{const l=t._zod.run({value:a,issues:[]},{});return l instanceof Promise?l.then(({issues:u,value:c})=>u.length===0?{value:c}:{issues:u}):l.issues.length===0?{value:l.value}:{issues:l.issues}},vendor:"zod",version:1}))}),p5=Yn("$ZodString",(t,e)=>{var n;So.init(t,e),t._zod.pattern=((n=t==null?void 0:t._zod.computed)==null?void 0:n.pattern)??c5(t._zod.computed),t._zod.parse=(r,s)=>{if(e.coerce)try{r.value=String(r.value)}catch{}return typeof r.value=="string"||r.issues.push({expected:"string",code:"invalid_type",input:r.value,inst:t}),r}}),h5=Yn("$ZodNumber",(t,e)=>{So.init(t,e),t._zod.pattern=t._zod.computed.pattern??d5,t._zod.parse=(n,r)=>{if(e.coerce)try{n.value=Number(n.value)}catch{}const s=n.value;if(typeof s=="number"&&!Number.isNaN(s)&&Number.isFinite(s))return n;const i=typeof s=="number"?Number.isNaN(s)?"NaN":Number.isFinite(s)?void 0:"Infinity":void 0;return n.issues.push({expected:"number",code:"invalid_type",input:s,inst:t,...i?{received:i}:{}}),n}});function ww(t,e,n){t.issues.length&&e.issues.push(...by(n,t.issues)),e.value[n]=t.value}const m5=Yn("$ZodArray",(t,e)=>{So.init(t,e),t._zod.parse=(n,r)=>{const s=n.value;if(!Array.isArray(s))return n.issues.push({expected:"array",code:"invalid_type",input:s,inst:t}),n;n.value=Array(s.length);const i=[];for(let o=0;o<s.length;o++){const a=s[o],l=e.element._zod.run({value:a,issues:[]},r);l instanceof Promise?i.push(l.then(u=>ww(u,n,o))):ww(l,n,o)}return i.length?Promise.all(i).then(()=>n):n}});function Mu(t,e,n){t.issues.length?e.issues.push(...by(n,t.issues)):e.value[n]=t.value}function _w(t,e,n,r){t.issues.length?r[n]===void 0?n in r&&(e.value[n]=void 0):e.issues.push(...by(n,t.issues)):t.value===void 0?n in r&&(e.value[n]=void 0):e.value[n]=t.value}const g5=Yn("$ZodObjectLike",(t,e)=>{So.init(t,e),vm(t._zod,"shape",()=>e.shape);const n=NA(()=>{const l=Object.keys(e.shape);return{shape:e.shape,keys:l,keySet:new Set(l),numKeys:l.length,optionalKeys:new Set(e.optional)}});vm(t._zod,"disc",()=>{const l=e.shape,u=new Map;let c=!1;for(const d in l){const f=l[d]._zod;if(f.values||f.disc){c=!0;const p={values:new Set(f.values??[]),maps:f.disc?[f.disc]:[]};u.set(d,p)}}if(c)return u});const r=l=>{const u=new f5(["shape","payload","ctx"]),{keys:c,optionalKeys:d}=n.value,f=g=>{const w=Qa(g);return`shape[${w}]._zod.run({ value: input[${w}], issues: [] }, ctx)`};u.write("const input = payload.value;");const p={};for(const g of c)p[g]=jA(15);for(const g of c){if(d.has(g))continue;const w=p[g];u.write(`const ${w} = ${f(g)};`),u.write(`
          if (${w}.issues.length) payload.issues = payload.issues.concat(${w}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${Qa(g)}, ...iss.path] : [${Qa(g)}]
          })));`)}u.write("payload.value = {"),u.indented(()=>{for(const g of c){if(d.has(g))continue;const w=p[g];u.write(`  ${Qa(g)}: ${w}.value,`)}}),u.write("}");for(const g of c){if(!d.has(g))continue;const w=p[g];u.write(`const ${w} = ${f(g)};`);const x=Qa(g);u.write(`
        if (${w}.issues.length) {
          if (input[${x}] === undefined) {
            if (${x} in input) {
              payload.value[${x}] = undefined;
            }
          } else {
            payload.issues = payload.issues.concat(
              ${w}.issues.map((iss) => ({
                ...iss,
                path: iss.path ? [${x}, ...iss.path] : [${x}],
              }))
            );
          }
        } else if (${w}.value === undefined) {
          if (${x} in input) payload.value[${x}] = undefined;
        } else {
          payload.value[${x}] = ${w}.value;
        }  
        `)}u.write("return payload;");const h=u.compile();return(g,w)=>h(l,g,w)};let s;const i=r5.value,o=n5,{catchall:a}=e;t._zod.parse=(l,u)=>{const c=l.value;if(!o(c))return l.issues.push({expected:"object",code:"invalid_type",input:c,inst:t}),l;const d=[];if(i&&(u==null?void 0:u.async)===!1&&u.noPrecompilation!==!0)s||(s=r(e.shape)),l=s(l,u);else{l.value={};const{keys:p,shape:h,optionalKeys:g}=n.value;for(const w of p){const A=h[w]._zod.run({value:c[w],issues:[]},u),E=g.has(w);A instanceof Promise?d.push(A.then(m=>E?_w(m,l,w,c):Mu(m,l,w))):E?_w(A,l,w,c):Mu(A,l,w)}}if(!a)return d.length?Promise.all(d).then(()=>l):l;const f=[];for(const p of Object.keys(c)){if(n.value.keySet.has(p))continue;if(a._zod.def.type==="never"){f.push(p);continue}const h=a._zod.run({value:c[p],issues:[]},u);h instanceof Promise?d.push(h.then(g=>Mu(g,l,p))):Mu(h,l,p)}return f.length&&l.issues.push({code:"unrecognized_keys",keys:f,input:c,inst:t}),d.length?Promise.all(d).then(()=>l):l}}),y5=Yn("$ZodObject",(t,e)=>{g5.init(t,e)}),v5=Yn("$ZodOptional",(t,e)=>{So.init(t,e),t._zod.qout="true",e.innerType._zod.values&&(t._zod.values=new Set([...e.innerType._zod.values,void 0]));const n=e.innerType._zod.pattern;n&&(t._zod.pattern=new RegExp(`^(${FA(n.source)})?$`)),t._zod.parse=(r,s)=>r.value===void 0?r:e.innerType._zod.run(r,s)}),b5=Yn("$ZodNullable",(t,e)=>{So.init(t,e),t._zod.qin=e.innerType._zod.qin,t._zod.qout=e.innerType._zod.qout;const n=e.innerType._zod.pattern;n&&(t._zod.pattern=new RegExp(`^(${FA(n.source)}|null)$`)),e.innerType._zod.values&&(t._zod.values=new Set([...e.innerType._zod.values,null])),t._zod.parse=(r,s)=>r.value===null?r:e.innerType._zod.run(r,s)});function w5(t,e){return new t({type:"string",...Ta()})}function _5(t,e){return new t({type:"number",checks:[],...Ta()})}const x5=o5.bind({Error:Bi}),S5=a5.bind({Error:Bi}),E5=l5.bind({Error:Bi}),A5=u5.bind({Error:Bi}),Da=Yn("ZodMiniType",(t,e)=>{if(!t._zod)throw new Error("Uninitialized schema in mixin ZodMiniType.");So.init(t,e),t.def=e,t.parse=(n,r)=>x5(t,n,r),t.safeParse=(n,r)=>S5(t,n,r),t.parseAsync=async(n,r)=>E5(t,n,r),t.safeParseAsync=async(n,r)=>A5(t,n,r),t.check=(...n)=>t.clone({...e,checks:[...e.checks??[],...n.map(r=>typeof r=="function"?{_zod:{check:r,def:{check:"custom"}}}:r)]}),t.clone=n=>s5(t,n??e),t.brand=()=>t,t.register=((n,r)=>(n.add(t,r),t))}),C5=Yn("ZodMiniString",(t,e)=>{p5.init(t,e),Da.init(t,e)});function Zp(t){return w5(C5)}const $5=Yn("ZodMiniNumber",(t,e)=>{h5.init(t,e),Da.init(t,e)});function Rs(t){return _5($5)}const k5=Yn("ZodMiniArray",(t,e)=>{m5.init(t,e),Da.init(t,e)});function qA(t,e){return new k5({type:"array",element:t,...Ta()})}const I5=Yn("ZodMiniObject",(t,e)=>{y5.init(t,e),Da.init(t,e)});function cc(t,e){const n={type:"object",shape:t??{},get optional(){return i5(t??{})},...Ta()};return new I5(n)}const R5=Yn("ZodMiniOptional",(t,e)=>{v5.init(t,e),Da.init(t,e)});function Qn(t,e){return new R5({type:"optional",innerType:t,...Ta()})}const O5=Yn("ZodMiniNullable",(t,e)=>{b5.init(t,e),Da.init(t,e)});function T5(t,e){return new O5({type:"nullable",innerType:t,...Ta()})}const D5=ss({name:"nutritionix",persist:["appId","appKey"],initialState:()=>({appId:null,appKey:null})}),P5=cc({food_name:Zp(),nf_calories:Qn(Rs()),nf_total_fat:Qn(Rs()),nf_protein:Qn(Rs()),nf_total_carbohydrate:Qn(Rs()),serving_qty:Qn(Rs()),serving_weight_grams:Qn(Rs()),alt_measures:Qn(qA(cc({serving_weight:Qn(Rs()),measure:Qn(Zp()),qty:Qn(Rs()),seq:Qn(T5(Rs()))}))),photo:Qn(cc({thumb:Qn(Zp())}))}),M5=cc({foods:Qn(qA(P5))});class L5 extends D5{async getNutrition(e){var n,r,s,i,o,a;try{const l=await this.findIngredient(`100g ${e}`),u=await this.findIngredient(`100ml ${e}`);if(!l)return;const c=(r=(n=l.alt_measures)==null?void 0:n[0])==null?void 0:r.serving_weight,f=((o=(i=ki(((s=l.alt_measures)==null?void 0:s.filter(({seq:p})=>p!==null))??[],"seq","asc"))==null?void 0:i[0])==null?void 0:o.serving_weight)??c??100;return{servingInGrams:f,imageUrl:(a=l.photo)==null?void 0:a.thumb,name:l.food_name,calories:l.nf_calories?l.nf_calories/100*f:0,protein:l.nf_protein?l.nf_protein/100*f:0,carbs:l.nf_total_carbohydrate?l.nf_total_carbohydrate/100*f:0,fat:l.nf_total_fat?l.nf_total_fat/100*f:0,servingInMilliliters:u!=null&&u.serving_weight_grams?100/u.serving_weight_grams*f:0}}catch(l){console.error(l)}}async boot(){He.on("auth:logout",()=>{this.appId=null,this.appKey=null})}async findIngredient(e){var s;if(!this.appId||!this.appKey)throw new Error("Nutritionix app ID and key are not set");const n=await fetch("https://trackapi.nutritionix.com/v2/natural/nutrients",{method:"POST",headers:{"Content-Type":"application/json","x-app-id":this.appId,"x-app-key":this.appKey},body:JSON.stringify({query:e})});return(s=M5.parse(await n.json()).foods)==null?void 0:s[0]}}const wy=gd(L5),fa={Grams:"grams",Milliliters:"milliliters"},_y={"½":.5,"¼":.25},N5=Object.entries(_y).reduce((t,[e,n])=>(t[n.toString()]=e,t),{}),xw={[fa.Grams]:{g:1,grams:1,kg:1e3,kilograms:1e3,cups:200,lb:453.5924,pounds:453.5924,oz:28.34952,ounces:28.34952,tsp:5,tbsp:15,tbl:15},[fa.Milliliters]:{ml:1,milliliters:1,l:1e3,liters:1e3,pt:473,pint:473}},F5={cups:" cups",grams:" grams",kilograms:" kilograms",liters:" liters",milliliters:" milliliters",ounces:" ounces",pint:" pint",pounds:" pounds",tbl:" tbl",tbsp:" tbsp",tsp:" tsp"},eh="{quantity}",[j5,q5,Sw,th]=U5();function U5(){const t=`(?:(?:\\d+[.,\\d]*)|${Object.keys(_y).join("|")})`,e="to|-|~",r=`(?<quantityValue>(?:${`${t}\\s*(?:${e})\\s*${t}`})|(?:${t}))`,s=Object.values(xw).reduce((i,o)=>[...i,Object.keys(o).join("|")],[]).join("|");return[new RegExp(`.*?(?<quantity>${r}\\s*(?:(?<quantityUnit>${s})(?:\\s+|$))).*?`,"i"),new RegExp(`.*?(?<quantity>${r}\\s*).*?`,"i"),new RegExp(e,"i"),Object.entries(xw).reduce((i,[o,a])=>(Object.entries(a).forEach(([l,u])=>{i[l]=(c,d)=>[Array.isArray(c)?[c[0]*u,c[1]*u]:c*u,o,u,F5[d??""]??d??""]}),i),{})]}function Ew(t){return _y[t]??parseFloat(t.replace(",","."))}function Aw(t){const e=t.toString();return N5[e]??e}function B5(t,e){var r;if(!t)return[];const n=t.match(Sw)?t.split(Sw).map(Ew):Ew(t);return((r=th[(e==null?void 0:e.trim().toLowerCase())??""])==null?void 0:r.call(th,n,e))??[n]}function xy(t){const e=new Set,n=s=>{const i=la(s).replace(/s$/,""),o=`${i}s`;return[i,o]},r=s=>{const[i,o]=n(s);e.add(i),e.add(o)};r(t.name);for(const s of t.aliases)r(s);return e}function Jc(t,e={}){return t.getIngredientsBreakdown(e.servings).map(({template:n,quantity:r,unit:s})=>({name:n.replace("{quantity}","").trim().replace(/\s*\(optional\)/,""),quantity:(typeof r=="number"?r:1)*(e.multiplier??1),unit:s??"servings"}))??[]}function bm(t){return(typeof t=="string"?rf(t):t).template.replace("{quantity}","").trim().replace(/\s*\(optional\)/,"").replace(/\[([^\]]+)\]\([^)]+\)/g,"$1").replace(/<a[^>]*>(.*?)<\/a>/gi,"$1")}function rf(t){var u,c,d;const e=t,n=t.match(j5)??t.match(q5),r=(u=n==null?void 0:n.groups)!=null&&u.quantity?t.replace(n.groups.quantity.trim(),eh):t,s=(c=n==null?void 0:n.groups)==null?void 0:c.quantityUnit,[i,o,a,l]=B5((d=n==null?void 0:n.groups)==null?void 0:d.quantityValue,s);return HO({template:r,original:e,quantity:i,unit:o,unitMultiplier:a,renderQuantity:typeof i<"u"?Array.isArray(i)?f=>r.replace(eh,f.map(Aw).join(" - ")):f=>r.replace(eh,`${Aw(f)}${l??""}`):()=>e})}const z5=ss({name:"pantry",initialState:()=>({ingredients:Cd([])}),computed:{ingredientsBySlug:({ingredients:t})=>{const e=new Map;for(const n of t){const r=xy(n);for(const s of r)e.set(s,n)}return e}}});class V5 extends z5{async boot(){await vy(pa,{service:this,property:"ingredients",transform:e=>e.filter(n=>!n.isSoftDeleted())})}ingredient(e){return this.ingredientsBySlug.get(la(bm(e)))}async resolveIngredient(e){const n=bm(e),r=la(n);if(this.ingredientsBySlug.has(r))return rx(this.ingredientsBySlug.get(r));const s=await wy.getNutrition(n),i=new pa({name:n});return s&&i.setNutritionAttributes(s),await i.save(),i}}const Wr=gd(V5),UA=fn({history:!0,tombstone:!1,rdfContext:"https://schema.org/",fields:{name:{type:$e.String,required:!0},description:$e.String,servings:{type:$e.String,rdfProperty:"recipeYield"},ingredients:{type:$e.Array,items:$e.String,rdfProperty:"schema:recipeIngredient"},nutritionUrl:{type:$e.Key,rdfProperty:"nutrition"},externalUrls:{type:$e.Array,items:$e.Key,rdfProperty:"sameAs"}}}),H5=Object.freeze(Object.defineProperty({__proto__:null,default:UA},Symbol.toStringTag,{value:"Module"}));class ar extends UA{get servingsBreakdown(){const e=this.servings,[n]=(e==null?void 0:e.match(/[\d.,]+/))??[];return!e||!n?null:{original:e,quantity:parseFloat(n),renderQuantity:r=>e.replace(n,r.toString())}}hasIncompleteIngredients(){return this.getIngredientsBreakdown().some(e=>{var n,r;return typeof((r=(n=Wr.ingredient(e))==null?void 0:n.nutrition)==null?void 0:r.calories)>"u"})}getIngredientsBreakdown(e){var r,s;const n=(e??((r=this.servingsBreakdown)==null?void 0:r.quantity)??1)/(((s=this.servingsBreakdown)==null?void 0:s.quantity)??1);return this.ingredients.map(rf).map(i=>({...i,quantity:Array.isArray(i.quantity)?[i.quantity[0]*n,i.quantity[1]*n]:(i.quantity??1)*n}))}getCaloriesBreakdown(e){const n=e??1;return aa(this.getIngredientsBreakdown().map(r=>{var i;const s=(i=Wr.ingredient(r))==null?void 0:i.nutrition;return{name:typeof r.quantity=="number"?r.renderQuantity(r.quantity*n):r.original,macroClass:s==null?void 0:s.macroClass,...s==null?void 0:s.getIngredientMacrosAndCalories(n,r)}}))}nutritionRelationship(){return this.belongsToOne(ii,"nutritionUrl").usingSameDocument().onDelete("cascade")}mealRelationship(){return this.hasOne(rn,"recipeUrl").usingSameDocument(!0).onDelete("cascade")}}ht(ar,"cloud",!0);const K5=Object.freeze(Object.defineProperty({__proto__:null,default:ar},Symbol.toStringTag,{value:"Module"})),W5=ss({name:"cookbook",initialState:()=>({recipes:Cd([])}),computed:{recipesByUrl:({recipes:t})=>ST(t,"url")}});class G5 extends W5{async boot(){await vy(ar,{service:this,property:"recipes",transform:e=>e.filter(n=>!n.isSoftDeleted())})}}const qr=gd(G5),BA=fn({history:!0,tombstone:!1,rdfContext:"https://schema.org/",rdfsClass:"ConsumeAction",fields:{consumedAt:{type:$e.Date,rdfProperty:"endTime"},recipeUrl:{type:$e.Key,rdfProperty:"object"}}}),J5=Object.freeze(Object.defineProperty({__proto__:null,default:BA},Symbol.toStringTag,{value:"Module"}));class rn extends BA{static boot(e){super.boot(e),ar.on("updated",async n=>{n.meal&&await mc(n.meal,"updated")}),ii.on("updated",async n=>{var r;(r=n.recipe)!=null&&r.meal&&await mc(n.recipe.meal,"updated")})}get nutrition(){var n;const e=(n=this.recipe)==null?void 0:n.nutrition;return e?{calories:e.calories,protein:e.protein,carbs:e.carbs,fat:e.fat}:null}get incomplete(){var s,i,o;if(!((s=this.nutrition)!=null&&s.calories))return!0;if((i=this.recipe)!=null&&i.ingredients.length)return this.recipe.hasIncompleteIngredients();const e=(o=this.recipe)==null?void 0:o.externalUrls.find(a=>qr.recipesByUrl.get(a)),r=(e?qr.recipesByUrl.require(e):null)??this.recipe;return!!(r!=null&&r.hasIncompleteIngredients())}getIngredientsBreakdown(e){var o,a,l,u;if((o=this.recipe)!=null&&o.ingredients.length)return this.recipe.getIngredientsBreakdown(e);const n=(a=this.recipe)==null?void 0:a.externalUrls.find(c=>qr.recipesByUrl.get(c)),s=(n?qr.recipesByUrl.require(n):null)??this.recipe,i=e??((u=(l=this.recipe)==null?void 0:l.servingsBreakdown)==null?void 0:u.quantity)??1;return(s==null?void 0:s.getIngredientsBreakdown(i))??[]}getCaloriesBreakdown(e){var a,l,u,c,d;if((a=this.recipe)!=null&&a.ingredients.length)return this.recipe.getCaloriesBreakdown(e);const n=(l=this.recipe)==null?void 0:l.externalUrls.find(f=>qr.recipesByUrl.get(f)),s=(n?qr.recipesByUrl.require(n):null)??this.recipe,i=((u=s==null?void 0:s.servingsBreakdown)==null?void 0:u.quantity)??1,o=e??((d=(c=this.recipe)==null?void 0:c.servingsBreakdown)==null?void 0:d.quantity)??1;return s==null?void 0:s.getCaloriesBreakdown(o/i)}recipeRelationship(){return this.belongsToOne(ar).usingSameDocument().onDelete("cascade")}}ht(rn,"cloud",!0);const Y5=Object.freeze(Object.defineProperty({__proto__:null,default:rn},Symbol.toStringTag,{value:"Module"}));function sf(t){const e=(t.protein??0)*4,n=(t.carbs??0)*4,r=(t.fat??0)*9,s=e+n+r;return{proteinPercentage:e/s,carbsPercentage:n/s,fatPercentage:r/s}}const zA=fn({history:!0,tombstone:!1,rdfContext:"https://schema.org/",fields:{serving:{type:$e.String,rdfProperty:"servingSize"},rawCalories:{type:$e.String,rdfProperty:"calories"},rawProtein:{type:$e.String,rdfProperty:"proteinContent"},rawCarbs:{type:$e.String,rdfProperty:"carbohydrateContent"},rawFat:{type:$e.String,rdfProperty:"fatContent"},alternateServingUrls:{type:$e.Array,items:$e.Key,rdfProperty:"sameAs"}}}),X5=Object.freeze(Object.defineProperty({__proto__:null,default:zA},Symbol.toStringTag,{value:"Module"}));class ii extends zA{constructor(){super(...arguments);ht(this,"computedValues",null)}static boot(n){super.boot(n),pa.on("updated",r=>{r.nutrition&&(r.nutrition.computedValues=null)}),rn.on("updated",r=>{var s;(s=r.recipe)!=null&&s.nutrition&&(r.recipe.nutrition.computedValues=null)}),ar.on("updated",r=>{r.nutrition&&(r.nutrition.computedValues=null)})}get calories(){return this.value("calories")}get protein(){return this.value("protein")}get carbs(){return this.value("carbs")}get fat(){return this.value("fat")}get servingInGrams(){return this.value("servingInGrams")}get servingInMilliliters(){return this.value("servingInMilliliters")}get macroClass(){return this.value("macroClass")}getIngredientMacrosAndCalories(n,r){let s;const i=typeof r.quantity=="number"?r.quantity:1;if(r.unit==="grams"){if(!this.servingInGrams)return null;s=n*(i/this.servingInGrams)}else if(r.unit==="milliliters"){if(!this.servingInMilliliters)return null;s=n*(i/this.servingInMilliliters)}else if(!r.unit)s=i*n;else return null;return{calories:typeof this.calories=="number"?this.calories*s:null,protein:typeof this.protein=="number"?this.protein*s:null,carbs:typeof this.carbs=="number"?this.carbs*s:null,fat:typeof this.fat=="number"?this.fat*s:null}}recipeRelationship(){return this.hasOne(ar,"nutritionUrl").usingSameDocument(!0).onDelete("cascade")}alternateServingsRelationship(){return this.belongsToMany(ii,"alternateServingUrls").usingSameDocument(!0).onDelete("cascade")}async afterSave(){await super.afterSave(),this.computedValues=null}value(n){return this.computedValues||(this.computedValues=this.parseValues()),this.computedValues[n]}parseValues(){var f,p;const n=this.rawCalories?ft(parseFloat(this.rawCalories.replace("calories","").trim()),2):void 0,r=this.rawProtein?ft(parseFloat(this.rawProtein.replace("grams","").trim()),2):void 0,s=this.rawCarbs?ft(parseFloat(this.rawCarbs.replace("grams","").trim()),2):void 0,i=this.rawFat?ft(parseFloat(this.rawFat.replace("grams","").trim()),2):void 0,o=this.serving&&this.serving.includes("grams")?parseFloat(this.serving.replace("grams","").trim()):void 0,a=(p=(f=this.alternateServings)==null?void 0:f.find(h=>{var g;return(g=h.serving)==null?void 0:g.includes("milliliters")}))==null?void 0:p.serving,l=a?parseFloat(a.replace("milliliters","").trim()):void 0,u=sf({protein:r,carbs:s,fat:i}),c=Math.max(u.proteinPercentage,u.carbsPercentage,u.fatPercentage),d=typeof r!="number"&&typeof s!="number"&&typeof i!="number"?"bg-gray-400":{[u.proteinPercentage]:"bg-protein-500",[u.carbsPercentage]:"bg-carbs-500",[u.fatPercentage]:"bg-fat-500"}[c];return{calories:n,protein:r,carbs:s,fat:i,servingInGrams:o,servingInMilliliters:l,macroClass:d}}}const Q5=Object.freeze(Object.defineProperty({__proto__:null,default:ii},Symbol.toStringTag,{value:"Module"}));class pa extends H1{nutritionRelationship(){return this.belongsToOne(ii,"nutritionUrl").usingSameDocument().onDelete("cascade")}setNutritionAttributes(e){this.imageUrl=(e==null?void 0:e.imageUrl)??void 0,this.externalUrls=[`https://www.nutritionix.com/food/${la(e.name)}`];const n=this.nutrition??this.relatedNutrition.attach();n.setAttributes({serving:`${ft(e.servingInGrams,2)} grams`,rawCalories:typeof e.calories=="number"?`${ft(e.calories)} calories`:void 0,rawProtein:typeof e.protein=="number"?`${ft(e.protein,2)} grams`:void 0,rawCarbs:typeof e.carbs=="number"?`${ft(e.carbs,2)} grams`:void 0,rawFat:typeof e.fat=="number"?`${ft(e.fat,2)} grams`:void 0}),e.servingInMilliliters&&n.relatedAlternateServings.attach({serving:`${ft(e.servingInMilliliters,2)} milliliters`})}}ht(pa,"cloud",!0);const Z5=Object.freeze(Object.defineProperty({__proto__:null,default:pa},Symbol.toStringTag,{value:"Module"}));/*!
  * shared v11.1.3
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */const Yc=typeof window<"u",zi=(t,e=!1)=>e?Symbol.for(t):Symbol(t),e6=(t,e,n)=>t6({l:t,k:e,s:n}),t6=t=>JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),tn=t=>typeof t=="number"&&isFinite(t),n6=t=>Ey(t)==="[object Date]",Xc=t=>Ey(t)==="[object RegExp]",of=t=>ut(t)&&Object.keys(t).length===0,dn=Object.assign,r6=Object.create,kt=(t=null)=>r6(t);let Cw;const Sy=()=>Cw||(Cw=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:kt());function $w(t){return t.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}const s6=Object.prototype.hasOwnProperty;function Vr(t,e){return s6.call(t,e)}const sn=Array.isArray,Bt=t=>typeof t=="function",Ne=t=>typeof t=="string",zt=t=>typeof t=="boolean",yt=t=>t!==null&&typeof t=="object",i6=t=>yt(t)&&Bt(t.then)&&Bt(t.catch),VA=Object.prototype.toString,Ey=t=>VA.call(t),ut=t=>Ey(t)==="[object Object]",o6=t=>t==null?"":sn(t)||ut(t)&&t.toString===VA?JSON.stringify(t,null,2):String(t);function Ay(t,e=""){return t.reduce((n,r,s)=>s===0?n+r:n+e+r,"")}function a6(t,e){typeof console<"u"&&(console.warn("[intlify] "+t),e&&console.warn(e.stack))}const Lu=t=>!yt(t)||sn(t);function dc(t,e){if(Lu(t)||Lu(e))throw new Error("Invalid value");const n=[{src:t,des:e}];for(;n.length;){const{src:r,des:s}=n.pop();Object.keys(r).forEach(i=>{i!=="__proto__"&&(yt(r[i])&&!yt(s[i])&&(s[i]=Array.isArray(r[i])?[]:kt()),Lu(s[i])||Lu(r[i])?s[i]=r[i]:n.push({src:r[i],des:s[i]}))})}}/*!
  * message-compiler v11.1.3
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */function l6(t,e,n){return{line:t,column:e,offset:n}}function wm(t,e,n){return{start:t,end:e}}const Et={EXPECTED_TOKEN:1,INVALID_TOKEN_IN_PLACEHOLDER:2,UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER:3,UNKNOWN_ESCAPE_SEQUENCE:4,INVALID_UNICODE_ESCAPE_SEQUENCE:5,UNBALANCED_CLOSING_BRACE:6,UNTERMINATED_CLOSING_BRACE:7,EMPTY_PLACEHOLDER:8,NOT_ALLOW_NEST_PLACEHOLDER:9,INVALID_LINKED_FORMAT:10,MUST_HAVE_MESSAGES_IN_PLURAL:11,UNEXPECTED_EMPTY_LINKED_MODIFIER:12,UNEXPECTED_EMPTY_LINKED_KEY:13,UNEXPECTED_LEXICAL_ANALYSIS:14},u6=17;function af(t,e,n={}){const{domain:r,messages:s,args:i}=n,o=t,a=new SyntaxError(String(o));return a.code=t,e&&(a.location=e),a.domain=r,a}function c6(t){throw t}const Os=" ",d6="\r",Fn=`
`,f6="\u2028",p6="\u2029";function h6(t){const e=t;let n=0,r=1,s=1,i=0;const o=C=>e[C]===d6&&e[C+1]===Fn,a=C=>e[C]===Fn,l=C=>e[C]===p6,u=C=>e[C]===f6,c=C=>o(C)||a(C)||l(C)||u(C),d=()=>n,f=()=>r,p=()=>s,h=()=>i,g=C=>o(C)||l(C)||u(C)?Fn:e[C],w=()=>g(n),x=()=>g(n+i);function A(){return i=0,c(n)&&(r++,s=0),o(n)&&n++,n++,s++,e[n]}function E(){return o(n+i)&&i++,i++,e[n+i]}function m(){n=0,r=1,s=1,i=0}function v(C=0){i=C}function _(){const C=n+i;for(;C!==n;)A();i=0}return{index:d,line:f,column:p,peekOffset:h,charAt:g,currentChar:w,currentPeek:x,next:A,peek:E,reset:m,resetPeek:v,skipToPeek:_}}const ai=void 0,m6=".",kw="'",g6="tokenizer";function y6(t,e={}){const n=e.location!==!1,r=h6(t),s=()=>r.index(),i=()=>l6(r.line(),r.column(),r.index()),o=i(),a=s(),l={currentType:13,offset:a,startLoc:o,endLoc:o,lastType:13,lastOffset:a,lastStartLoc:o,lastEndLoc:o,braceNest:0,inLinked:!1,text:""},u=()=>l,{onError:c}=e;function d(U,B,ce,...me){const Ie=u();if(B.column+=ce,B.offset+=ce,c){const Ce=n?wm(Ie.startLoc,B):null,de=af(U,Ce,{domain:g6,args:me});c(de)}}function f(U,B,ce){U.endLoc=i(),U.currentType=B;const me={type:B};return n&&(me.loc=wm(U.startLoc,U.endLoc)),ce!=null&&(me.value=ce),me}const p=U=>f(U,13);function h(U,B){return U.currentChar()===B?(U.next(),B):(d(Et.EXPECTED_TOKEN,i(),0,B),"")}function g(U){let B="";for(;U.currentPeek()===Os||U.currentPeek()===Fn;)B+=U.currentPeek(),U.peek();return B}function w(U){const B=g(U);return U.skipToPeek(),B}function x(U){if(U===ai)return!1;const B=U.charCodeAt(0);return B>=97&&B<=122||B>=65&&B<=90||B===95}function A(U){if(U===ai)return!1;const B=U.charCodeAt(0);return B>=48&&B<=57}function E(U,B){const{currentType:ce}=B;if(ce!==2)return!1;g(U);const me=x(U.currentPeek());return U.resetPeek(),me}function m(U,B){const{currentType:ce}=B;if(ce!==2)return!1;g(U);const me=U.currentPeek()==="-"?U.peek():U.currentPeek(),Ie=A(me);return U.resetPeek(),Ie}function v(U,B){const{currentType:ce}=B;if(ce!==2)return!1;g(U);const me=U.currentPeek()===kw;return U.resetPeek(),me}function _(U,B){const{currentType:ce}=B;if(ce!==7)return!1;g(U);const me=U.currentPeek()===".";return U.resetPeek(),me}function C(U,B){const{currentType:ce}=B;if(ce!==8)return!1;g(U);const me=x(U.currentPeek());return U.resetPeek(),me}function $(U,B){const{currentType:ce}=B;if(!(ce===7||ce===11))return!1;g(U);const me=U.currentPeek()===":";return U.resetPeek(),me}function k(U,B){const{currentType:ce}=B;if(ce!==9)return!1;const me=()=>{const Ce=U.currentPeek();return Ce==="{"?x(U.peek()):Ce==="@"||Ce==="|"||Ce===":"||Ce==="."||Ce===Os||!Ce?!1:Ce===Fn?(U.peek(),me()):G(U,!1)},Ie=me();return U.resetPeek(),Ie}function D(U){g(U);const B=U.currentPeek()==="|";return U.resetPeek(),B}function G(U,B=!0){const ce=(Ie=!1,Ce="")=>{const de=U.currentPeek();return de==="{"||de==="@"||!de?Ie:de==="|"?!(Ce===Os||Ce===Fn):de===Os?(U.peek(),ce(!0,Os)):de===Fn?(U.peek(),ce(!0,Fn)):!0},me=ce();return B&&U.resetPeek(),me}function J(U,B){const ce=U.currentChar();return ce===ai?ai:B(ce)?(U.next(),ce):null}function W(U){const B=U.charCodeAt(0);return B>=97&&B<=122||B>=65&&B<=90||B>=48&&B<=57||B===95||B===36}function j(U){return J(U,W)}function se(U){const B=U.charCodeAt(0);return B>=97&&B<=122||B>=65&&B<=90||B>=48&&B<=57||B===95||B===36||B===45}function R(U){return J(U,se)}function V(U){const B=U.charCodeAt(0);return B>=48&&B<=57}function F(U){return J(U,V)}function ee(U){const B=U.charCodeAt(0);return B>=48&&B<=57||B>=65&&B<=70||B>=97&&B<=102}function z(U){return J(U,ee)}function ie(U){let B="",ce="";for(;B=F(U);)ce+=B;return ce}function pe(U){let B="";for(;;){const ce=U.currentChar();if(ce==="{"||ce==="}"||ce==="@"||ce==="|"||!ce)break;if(ce===Os||ce===Fn)if(G(U))B+=ce,U.next();else{if(D(U))break;B+=ce,U.next()}else B+=ce,U.next()}return B}function he(U){w(U);let B="",ce="";for(;B=R(U);)ce+=B;return U.currentChar()===ai&&d(Et.UNTERMINATED_CLOSING_BRACE,i(),0),ce}function Ae(U){w(U);let B="";return U.currentChar()==="-"?(U.next(),B+=`-${ie(U)}`):B+=ie(U),U.currentChar()===ai&&d(Et.UNTERMINATED_CLOSING_BRACE,i(),0),B}function X(U){return U!==kw&&U!==Fn}function te(U){w(U),h(U,"'");let B="",ce="";for(;B=J(U,X);)B==="\\"?ce+=T(U):ce+=B;const me=U.currentChar();return me===Fn||me===ai?(d(Et.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER,i(),0),me===Fn&&(U.next(),h(U,"'")),ce):(h(U,"'"),ce)}function T(U){const B=U.currentChar();switch(B){case"\\":case"'":return U.next(),`\\${B}`;case"u":return Y(U,B,4);case"U":return Y(U,B,6);default:return d(Et.UNKNOWN_ESCAPE_SEQUENCE,i(),0,B),""}}function Y(U,B,ce){h(U,B);let me="";for(let Ie=0;Ie<ce;Ie++){const Ce=z(U);if(!Ce){d(Et.INVALID_UNICODE_ESCAPE_SEQUENCE,i(),0,`\\${B}${me}${U.currentChar()}`);break}me+=Ce}return`\\${B}${me}`}function re(U){return U!=="{"&&U!=="}"&&U!==Os&&U!==Fn}function ne(U){w(U);let B="",ce="";for(;B=J(U,re);)ce+=B;return ce}function xe(U){let B="",ce="";for(;B=j(U);)ce+=B;return ce}function M(U){const B=ce=>{const me=U.currentChar();return me==="{"||me==="@"||me==="|"||me==="("||me===")"||!me||me===Os?ce:(ce+=me,U.next(),B(ce))};return B("")}function P(U){w(U);const B=h(U,"|");return w(U),B}function Q(U,B){let ce=null;switch(U.currentChar()){case"{":return B.braceNest>=1&&d(Et.NOT_ALLOW_NEST_PLACEHOLDER,i(),0),U.next(),ce=f(B,2,"{"),w(U),B.braceNest++,ce;case"}":return B.braceNest>0&&B.currentType===2&&d(Et.EMPTY_PLACEHOLDER,i(),0),U.next(),ce=f(B,3,"}"),B.braceNest--,B.braceNest>0&&w(U),B.inLinked&&B.braceNest===0&&(B.inLinked=!1),ce;case"@":return B.braceNest>0&&d(Et.UNTERMINATED_CLOSING_BRACE,i(),0),ce=ye(U,B)||p(B),B.braceNest=0,ce;default:{let Ie=!0,Ce=!0,de=!0;if(D(U))return B.braceNest>0&&d(Et.UNTERMINATED_CLOSING_BRACE,i(),0),ce=f(B,1,P(U)),B.braceNest=0,B.inLinked=!1,ce;if(B.braceNest>0&&(B.currentType===4||B.currentType===5||B.currentType===6))return d(Et.UNTERMINATED_CLOSING_BRACE,i(),0),B.braceNest=0,_e(U,B);if(Ie=E(U,B))return ce=f(B,4,he(U)),w(U),ce;if(Ce=m(U,B))return ce=f(B,5,Ae(U)),w(U),ce;if(de=v(U,B))return ce=f(B,6,te(U)),w(U),ce;if(!Ie&&!Ce&&!de)return ce=f(B,12,ne(U)),d(Et.INVALID_TOKEN_IN_PLACEHOLDER,i(),0,ce.value),w(U),ce;break}}return ce}function ye(U,B){const{currentType:ce}=B;let me=null;const Ie=U.currentChar();switch((ce===7||ce===8||ce===11||ce===9)&&(Ie===Fn||Ie===Os)&&d(Et.INVALID_LINKED_FORMAT,i(),0),Ie){case"@":return U.next(),me=f(B,7,"@"),B.inLinked=!0,me;case".":return w(U),U.next(),f(B,8,".");case":":return w(U),U.next(),f(B,9,":");default:return D(U)?(me=f(B,1,P(U)),B.braceNest=0,B.inLinked=!1,me):_(U,B)||$(U,B)?(w(U),ye(U,B)):C(U,B)?(w(U),f(B,11,xe(U))):k(U,B)?(w(U),Ie==="{"?Q(U,B)||me:f(B,10,M(U))):(ce===7&&d(Et.INVALID_LINKED_FORMAT,i(),0),B.braceNest=0,B.inLinked=!1,_e(U,B))}}function _e(U,B){let ce={type:13};if(B.braceNest>0)return Q(U,B)||p(B);if(B.inLinked)return ye(U,B)||p(B);switch(U.currentChar()){case"{":return Q(U,B)||p(B);case"}":return d(Et.UNBALANCED_CLOSING_BRACE,i(),0),U.next(),f(B,3,"}");case"@":return ye(U,B)||p(B);default:{if(D(U))return ce=f(B,1,P(U)),B.braceNest=0,B.inLinked=!1,ce;if(G(U))return f(B,0,pe(U));break}}return ce}function be(){const{currentType:U,offset:B,startLoc:ce,endLoc:me}=l;return l.lastType=U,l.lastOffset=B,l.lastStartLoc=ce,l.lastEndLoc=me,l.offset=s(),l.startLoc=i(),r.currentChar()===ai?f(l,13):_e(r,l)}return{nextToken:be,currentOffset:s,currentPosition:i,context:u}}const v6="parser",b6=/(?:\\\\|\\'|\\u([0-9a-fA-F]{4})|\\U([0-9a-fA-F]{6}))/g;function w6(t,e,n){switch(t){case"\\\\":return"\\";case"\\'":return"'";default:{const r=parseInt(e||n,16);return r<=55295||r>=57344?String.fromCodePoint(r):"�"}}}function _6(t={}){const e=t.location!==!1,{onError:n}=t;function r(x,A,E,m,...v){const _=x.currentPosition();if(_.offset+=m,_.column+=m,n){const C=e?wm(E,_):null,$=af(A,C,{domain:v6,args:v});n($)}}function s(x,A,E){const m={type:x};return e&&(m.start=A,m.end=A,m.loc={start:E,end:E}),m}function i(x,A,E,m){e&&(x.end=A,x.loc&&(x.loc.end=E))}function o(x,A){const E=x.context(),m=s(3,E.offset,E.startLoc);return m.value=A,i(m,x.currentOffset(),x.currentPosition()),m}function a(x,A){const E=x.context(),{lastOffset:m,lastStartLoc:v}=E,_=s(5,m,v);return _.index=parseInt(A,10),x.nextToken(),i(_,x.currentOffset(),x.currentPosition()),_}function l(x,A){const E=x.context(),{lastOffset:m,lastStartLoc:v}=E,_=s(4,m,v);return _.key=A,x.nextToken(),i(_,x.currentOffset(),x.currentPosition()),_}function u(x,A){const E=x.context(),{lastOffset:m,lastStartLoc:v}=E,_=s(9,m,v);return _.value=A.replace(b6,w6),x.nextToken(),i(_,x.currentOffset(),x.currentPosition()),_}function c(x){const A=x.nextToken(),E=x.context(),{lastOffset:m,lastStartLoc:v}=E,_=s(8,m,v);return A.type!==11?(r(x,Et.UNEXPECTED_EMPTY_LINKED_MODIFIER,E.lastStartLoc,0),_.value="",i(_,m,v),{nextConsumeToken:A,node:_}):(A.value==null&&r(x,Et.UNEXPECTED_LEXICAL_ANALYSIS,E.lastStartLoc,0,as(A)),_.value=A.value||"",i(_,x.currentOffset(),x.currentPosition()),{node:_})}function d(x,A){const E=x.context(),m=s(7,E.offset,E.startLoc);return m.value=A,i(m,x.currentOffset(),x.currentPosition()),m}function f(x){const A=x.context(),E=s(6,A.offset,A.startLoc);let m=x.nextToken();if(m.type===8){const v=c(x);E.modifier=v.node,m=v.nextConsumeToken||x.nextToken()}switch(m.type!==9&&r(x,Et.UNEXPECTED_LEXICAL_ANALYSIS,A.lastStartLoc,0,as(m)),m=x.nextToken(),m.type===2&&(m=x.nextToken()),m.type){case 10:m.value==null&&r(x,Et.UNEXPECTED_LEXICAL_ANALYSIS,A.lastStartLoc,0,as(m)),E.key=d(x,m.value||"");break;case 4:m.value==null&&r(x,Et.UNEXPECTED_LEXICAL_ANALYSIS,A.lastStartLoc,0,as(m)),E.key=l(x,m.value||"");break;case 5:m.value==null&&r(x,Et.UNEXPECTED_LEXICAL_ANALYSIS,A.lastStartLoc,0,as(m)),E.key=a(x,m.value||"");break;case 6:m.value==null&&r(x,Et.UNEXPECTED_LEXICAL_ANALYSIS,A.lastStartLoc,0,as(m)),E.key=u(x,m.value||"");break;default:{r(x,Et.UNEXPECTED_EMPTY_LINKED_KEY,A.lastStartLoc,0);const v=x.context(),_=s(7,v.offset,v.startLoc);return _.value="",i(_,v.offset,v.startLoc),E.key=_,i(E,v.offset,v.startLoc),{nextConsumeToken:m,node:E}}}return i(E,x.currentOffset(),x.currentPosition()),{node:E}}function p(x){const A=x.context(),E=A.currentType===1?x.currentOffset():A.offset,m=A.currentType===1?A.endLoc:A.startLoc,v=s(2,E,m);v.items=[];let _=null;do{const k=_||x.nextToken();switch(_=null,k.type){case 0:k.value==null&&r(x,Et.UNEXPECTED_LEXICAL_ANALYSIS,A.lastStartLoc,0,as(k)),v.items.push(o(x,k.value||""));break;case 5:k.value==null&&r(x,Et.UNEXPECTED_LEXICAL_ANALYSIS,A.lastStartLoc,0,as(k)),v.items.push(a(x,k.value||""));break;case 4:k.value==null&&r(x,Et.UNEXPECTED_LEXICAL_ANALYSIS,A.lastStartLoc,0,as(k)),v.items.push(l(x,k.value||""));break;case 6:k.value==null&&r(x,Et.UNEXPECTED_LEXICAL_ANALYSIS,A.lastStartLoc,0,as(k)),v.items.push(u(x,k.value||""));break;case 7:{const D=f(x);v.items.push(D.node),_=D.nextConsumeToken||null;break}}}while(A.currentType!==13&&A.currentType!==1);const C=A.currentType===1?A.lastOffset:x.currentOffset(),$=A.currentType===1?A.lastEndLoc:x.currentPosition();return i(v,C,$),v}function h(x,A,E,m){const v=x.context();let _=m.items.length===0;const C=s(1,A,E);C.cases=[],C.cases.push(m);do{const $=p(x);_||(_=$.items.length===0),C.cases.push($)}while(v.currentType!==13);return _&&r(x,Et.MUST_HAVE_MESSAGES_IN_PLURAL,E,0),i(C,x.currentOffset(),x.currentPosition()),C}function g(x){const A=x.context(),{offset:E,startLoc:m}=A,v=p(x);return A.currentType===13?v:h(x,E,m,v)}function w(x){const A=y6(x,dn({},t)),E=A.context(),m=s(0,E.offset,E.startLoc);return e&&m.loc&&(m.loc.source=x),m.body=g(A),t.onCacheKey&&(m.cacheKey=t.onCacheKey(x)),E.currentType!==13&&r(A,Et.UNEXPECTED_LEXICAL_ANALYSIS,E.lastStartLoc,0,x[E.offset]||""),i(m,A.currentOffset(),A.currentPosition()),m}return{parse:w}}function as(t){if(t.type===13)return"EOF";const e=(t.value||"").replace(/\r?\n/gu,"\\n");return e.length>10?e.slice(0,9)+"…":e}function x6(t,e={}){const n={ast:t,helpers:new Set};return{context:()=>n,helper:i=>(n.helpers.add(i),i)}}function Iw(t,e){for(let n=0;n<t.length;n++)Cy(t[n],e)}function Cy(t,e){switch(t.type){case 1:Iw(t.cases,e),e.helper("plural");break;case 2:Iw(t.items,e);break;case 6:{Cy(t.key,e),e.helper("linked"),e.helper("type");break}case 5:e.helper("interpolate"),e.helper("list");break;case 4:e.helper("interpolate"),e.helper("named");break}}function S6(t,e={}){const n=x6(t);n.helper("normalize"),t.body&&Cy(t.body,n);const r=n.context();t.helpers=Array.from(r.helpers)}function E6(t){const e=t.body;return e.type===2?Rw(e):e.cases.forEach(n=>Rw(n)),t}function Rw(t){if(t.items.length===1){const e=t.items[0];(e.type===3||e.type===9)&&(t.static=e.value,delete e.value)}else{const e=[];for(let n=0;n<t.items.length;n++){const r=t.items[n];if(!(r.type===3||r.type===9)||r.value==null)break;e.push(r.value)}if(e.length===t.items.length){t.static=Ay(e);for(let n=0;n<t.items.length;n++){const r=t.items[n];(r.type===3||r.type===9)&&delete r.value}}}}function Fo(t){switch(t.t=t.type,t.type){case 0:{const e=t;Fo(e.body),e.b=e.body,delete e.body;break}case 1:{const e=t,n=e.cases;for(let r=0;r<n.length;r++)Fo(n[r]);e.c=n,delete e.cases;break}case 2:{const e=t,n=e.items;for(let r=0;r<n.length;r++)Fo(n[r]);e.i=n,delete e.items,e.static&&(e.s=e.static,delete e.static);break}case 3:case 9:case 8:case 7:{const e=t;e.value&&(e.v=e.value,delete e.value);break}case 6:{const e=t;Fo(e.key),e.k=e.key,delete e.key,e.modifier&&(Fo(e.modifier),e.m=e.modifier,delete e.modifier);break}case 5:{const e=t;e.i=e.index,delete e.index;break}case 4:{const e=t;e.k=e.key,delete e.key;break}}delete t.type}function A6(t,e){const{filename:n,breakLineCode:r,needIndent:s}=e,i=e.location!==!1,o={filename:n,code:"",column:1,line:1,offset:0,map:void 0,breakLineCode:r,needIndent:s,indentLevel:0};i&&t.loc&&(o.source=t.loc.source);const a=()=>o;function l(g,w){o.code+=g}function u(g,w=!0){const x=w?r:"";l(s?x+"  ".repeat(g):x)}function c(g=!0){const w=++o.indentLevel;g&&u(w)}function d(g=!0){const w=--o.indentLevel;g&&u(w)}function f(){u(o.indentLevel)}return{context:a,push:l,indent:c,deindent:d,newline:f,helper:g=>`_${g}`,needIndent:()=>o.needIndent}}function C6(t,e){const{helper:n}=t;t.push(`${n("linked")}(`),ha(t,e.key),e.modifier?(t.push(", "),ha(t,e.modifier),t.push(", _type")):t.push(", undefined, _type"),t.push(")")}function $6(t,e){const{helper:n,needIndent:r}=t;t.push(`${n("normalize")}([`),t.indent(r());const s=e.items.length;for(let i=0;i<s&&(ha(t,e.items[i]),i!==s-1);i++)t.push(", ");t.deindent(r()),t.push("])")}function k6(t,e){const{helper:n,needIndent:r}=t;if(e.cases.length>1){t.push(`${n("plural")}([`),t.indent(r());const s=e.cases.length;for(let i=0;i<s&&(ha(t,e.cases[i]),i!==s-1);i++)t.push(", ");t.deindent(r()),t.push("])")}}function I6(t,e){e.body?ha(t,e.body):t.push("null")}function ha(t,e){const{helper:n}=t;switch(e.type){case 0:I6(t,e);break;case 1:k6(t,e);break;case 2:$6(t,e);break;case 6:C6(t,e);break;case 8:t.push(JSON.stringify(e.value),e);break;case 7:t.push(JSON.stringify(e.value),e);break;case 5:t.push(`${n("interpolate")}(${n("list")}(${e.index}))`,e);break;case 4:t.push(`${n("interpolate")}(${n("named")}(${JSON.stringify(e.key)}))`,e);break;case 9:t.push(JSON.stringify(e.value),e);break;case 3:t.push(JSON.stringify(e.value),e);break}}const R6=(t,e={})=>{const n=Ne(e.mode)?e.mode:"normal",r=Ne(e.filename)?e.filename:"message.intl";e.sourceMap;const s=e.breakLineCode!=null?e.breakLineCode:n==="arrow"?";":`
`,i=e.needIndent?e.needIndent:n!=="arrow",o=t.helpers||[],a=A6(t,{filename:r,breakLineCode:s,needIndent:i});a.push(n==="normal"?"function __msg__ (ctx) {":"(ctx) => {"),a.indent(i),o.length>0&&(a.push(`const { ${Ay(o.map(c=>`${c}: _${c}`),", ")} } = ctx`),a.newline()),a.push("return "),ha(a,t),a.deindent(i),a.push("}"),delete t.helpers;const{code:l,map:u}=a.context();return{ast:t,code:l,map:u?u.toJSON():void 0}};function O6(t,e={}){const n=dn({},e),r=!!n.jit,s=!!n.minify,i=n.optimize==null?!0:n.optimize,a=_6(n).parse(t);return r?(i&&E6(a),s&&Fo(a),{ast:a,code:""}):(S6(a,n),R6(a,n))}/*!
  * core-base v11.1.3
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */function T6(){typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(Sy().__INTLIFY_PROD_DEVTOOLS__=!1)}function ys(t){return yt(t)&&$y(t)===0&&(Vr(t,"b")||Vr(t,"body"))}const HA=["b","body"];function D6(t){return Vi(t,HA)}const KA=["c","cases"];function P6(t){return Vi(t,KA,[])}const WA=["s","static"];function M6(t){return Vi(t,WA)}const GA=["i","items"];function L6(t){return Vi(t,GA,[])}const JA=["t","type"];function $y(t){return Vi(t,JA)}const YA=["v","value"];function Nu(t,e){const n=Vi(t,YA);if(n!=null)return n;throw Nl(e)}const XA=["m","modifier"];function N6(t){return Vi(t,XA)}const QA=["k","key"];function F6(t){const e=Vi(t,QA);if(e)return e;throw Nl(6)}function Vi(t,e,n){for(let r=0;r<e.length;r++){const s=e[r];if(Vr(t,s)&&t[s]!=null)return t[s]}return n}const ZA=[...HA,...KA,...WA,...GA,...QA,...XA,...YA,...JA];function Nl(t){return new Error(`unhandled node type: ${t}`)}function nh(t){return n=>j6(n,t)}function j6(t,e){const n=D6(e);if(n==null)throw Nl(0);if($y(n)===1){const i=P6(n);return t.plural(i.reduce((o,a)=>[...o,Ow(t,a)],[]))}else return Ow(t,n)}function Ow(t,e){const n=M6(e);if(n!=null)return t.type==="text"?n:t.normalize([n]);{const r=L6(e).reduce((s,i)=>[...s,_m(t,i)],[]);return t.normalize(r)}}function _m(t,e){const n=$y(e);switch(n){case 3:return Nu(e,n);case 9:return Nu(e,n);case 4:{const r=e;if(Vr(r,"k")&&r.k)return t.interpolate(t.named(r.k));if(Vr(r,"key")&&r.key)return t.interpolate(t.named(r.key));throw Nl(n)}case 5:{const r=e;if(Vr(r,"i")&&tn(r.i))return t.interpolate(t.list(r.i));if(Vr(r,"index")&&tn(r.index))return t.interpolate(t.list(r.index));throw Nl(n)}case 6:{const r=e,s=N6(r),i=F6(r);return t.linked(_m(t,i),s?_m(t,s):void 0,t.type)}case 7:return Nu(e,n);case 8:return Nu(e,n);default:throw new Error(`unhandled node on format message part: ${n}`)}}const q6=t=>t;let Fu=kt();function U6(t,e={}){let n=!1;const r=e.onError||c6;return e.onError=s=>{n=!0,r(s)},{...O6(t,e),detectError:n}}function B6(t,e){if(Ne(t)){zt(e.warnHtmlMessage)&&e.warnHtmlMessage;const r=(e.onCacheKey||q6)(t),s=Fu[r];if(s)return s;const{ast:i,detectError:o}=U6(t,{...e,location:!1,jit:!0}),a=nh(i);return o?a:Fu[r]=a}else{const n=t.cacheKey;if(n){const r=Fu[n];return r||(Fu[n]=nh(t))}else return nh(t)}}let Fl=null;function z6(t){Fl=t}function V6(t,e,n){Fl&&Fl.emit("i18n:init",{timestamp:Date.now(),i18n:t,version:e,meta:n})}const H6=K6("function:translate");function K6(t){return e=>Fl&&Fl.emit(t,e)}const Bs={INVALID_ARGUMENT:u6,INVALID_DATE_ARGUMENT:18,INVALID_ISO_DATE_ARGUMENT:19,NOT_SUPPORT_LOCALE_PROMISE_VALUE:21,NOT_SUPPORT_LOCALE_ASYNC_FUNCTION:22,NOT_SUPPORT_LOCALE_TYPE:23},W6=24;function zs(t){return af(t,null,void 0)}function ky(t,e){return e.locale!=null?Tw(e.locale):Tw(t.locale)}let rh;function Tw(t){if(Ne(t))return t;if(Bt(t)){if(t.resolvedOnce&&rh!=null)return rh;if(t.constructor.name==="Function"){const e=t();if(i6(e))throw zs(Bs.NOT_SUPPORT_LOCALE_PROMISE_VALUE);return rh=e}else throw zs(Bs.NOT_SUPPORT_LOCALE_ASYNC_FUNCTION)}else throw zs(Bs.NOT_SUPPORT_LOCALE_TYPE)}function G6(t,e,n){return[...new Set([n,...sn(e)?e:yt(e)?Object.keys(e):Ne(e)?[e]:[n]])]}function eC(t,e,n){const r=Ne(n)?n:Qc,s=t;s.__localeChainCache||(s.__localeChainCache=new Map);let i=s.__localeChainCache.get(r);if(!i){i=[];let o=[n];for(;sn(o);)o=Dw(i,o,e);const a=sn(e)||!ut(e)?e:e.default?e.default:null;o=Ne(a)?[a]:a,sn(o)&&Dw(i,o,!1),s.__localeChainCache.set(r,i)}return i}function Dw(t,e,n){let r=!0;for(let s=0;s<e.length&&zt(r);s++){const i=e[s];Ne(i)&&(r=J6(t,e[s],n))}return r}function J6(t,e,n){let r;const s=e.split("-");do{const i=s.join("-");r=Y6(t,i,n),s.splice(-1,1)}while(s.length&&r===!0);return r}function Y6(t,e,n){let r=!1;if(!t.includes(e)&&(r=!0,e)){r=e[e.length-1]!=="!";const s=e.replace(/!/g,"");t.push(s),(sn(n)||ut(n))&&n[s]&&(r=n[s])}return r}const Hi=[];Hi[0]={w:[0],i:[3,0],"[":[4],o:[7]};Hi[1]={w:[1],".":[2],"[":[4],o:[7]};Hi[2]={w:[2],i:[3,0],0:[3,0]};Hi[3]={i:[3,0],0:[3,0],w:[1,1],".":[2,1],"[":[4,1],o:[7,1]};Hi[4]={"'":[5,0],'"':[6,0],"[":[4,2],"]":[1,3],o:8,l:[4,0]};Hi[5]={"'":[4,0],o:8,l:[5,0]};Hi[6]={'"':[4,0],o:8,l:[6,0]};const X6=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function Q6(t){return X6.test(t)}function Z6(t){const e=t.charCodeAt(0),n=t.charCodeAt(t.length-1);return e===n&&(e===34||e===39)?t.slice(1,-1):t}function ez(t){if(t==null)return"o";switch(t.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return t;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function tz(t){const e=t.trim();return t.charAt(0)==="0"&&isNaN(parseInt(t))?!1:Q6(e)?Z6(e):"*"+e}function nz(t){const e=[];let n=-1,r=0,s=0,i,o,a,l,u,c,d;const f=[];f[0]=()=>{o===void 0?o=a:o+=a},f[1]=()=>{o!==void 0&&(e.push(o),o=void 0)},f[2]=()=>{f[0](),s++},f[3]=()=>{if(s>0)s--,r=4,f[0]();else{if(s=0,o===void 0||(o=tz(o),o===!1))return!1;f[1]()}};function p(){const h=t[n+1];if(r===5&&h==="'"||r===6&&h==='"')return n++,a="\\"+h,f[0](),!0}for(;r!==null;)if(n++,i=t[n],!(i==="\\"&&p())){if(l=ez(i),d=Hi[r],u=d[l]||d.l||8,u===8||(r=u[0],u[1]!==void 0&&(c=f[u[1]],c&&(a=i,c()===!1))))return;if(r===7)return e}}const Pw=new Map;function rz(t,e){return yt(t)?t[e]:null}function sz(t,e){if(!yt(t))return null;let n=Pw.get(e);if(n||(n=nz(e),n&&Pw.set(e,n)),!n)return null;const r=n.length;let s=t,i=0;for(;i<r;){const o=n[i];if(ZA.includes(o)&&ys(s))return null;const a=s[o];if(a===void 0||Bt(s))return null;s=a,i++}return s}const iz="11.1.3",lf=-1,Qc="en-US",Mw="",Lw=t=>`${t.charAt(0).toLocaleUpperCase()}${t.substr(1)}`;function oz(){return{upper:(t,e)=>e==="text"&&Ne(t)?t.toUpperCase():e==="vnode"&&yt(t)&&"__v_isVNode"in t?t.children.toUpperCase():t,lower:(t,e)=>e==="text"&&Ne(t)?t.toLowerCase():e==="vnode"&&yt(t)&&"__v_isVNode"in t?t.children.toLowerCase():t,capitalize:(t,e)=>e==="text"&&Ne(t)?Lw(t):e==="vnode"&&yt(t)&&"__v_isVNode"in t?Lw(t.children):t}}let tC;function az(t){tC=t}let nC;function lz(t){nC=t}let rC;function uz(t){rC=t}let sC=null;const cz=t=>{sC=t},dz=()=>sC;let iC=null;const Nw=t=>{iC=t},fz=()=>iC;let Fw=0;function pz(t={}){const e=Bt(t.onWarn)?t.onWarn:a6,n=Ne(t.version)?t.version:iz,r=Ne(t.locale)||Bt(t.locale)?t.locale:Qc,s=Bt(r)?Qc:r,i=sn(t.fallbackLocale)||ut(t.fallbackLocale)||Ne(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:s,o=ut(t.messages)?t.messages:sh(s),a=ut(t.datetimeFormats)?t.datetimeFormats:sh(s),l=ut(t.numberFormats)?t.numberFormats:sh(s),u=dn(kt(),t.modifiers,oz()),c=t.pluralRules||kt(),d=Bt(t.missing)?t.missing:null,f=zt(t.missingWarn)||Xc(t.missingWarn)?t.missingWarn:!0,p=zt(t.fallbackWarn)||Xc(t.fallbackWarn)?t.fallbackWarn:!0,h=!!t.fallbackFormat,g=!!t.unresolving,w=Bt(t.postTranslation)?t.postTranslation:null,x=ut(t.processor)?t.processor:null,A=zt(t.warnHtmlMessage)?t.warnHtmlMessage:!0,E=!!t.escapeParameter,m=Bt(t.messageCompiler)?t.messageCompiler:tC,v=Bt(t.messageResolver)?t.messageResolver:nC||rz,_=Bt(t.localeFallbacker)?t.localeFallbacker:rC||G6,C=yt(t.fallbackContext)?t.fallbackContext:void 0,$=t,k=yt($.__datetimeFormatters)?$.__datetimeFormatters:new Map,D=yt($.__numberFormatters)?$.__numberFormatters:new Map,G=yt($.__meta)?$.__meta:{};Fw++;const J={version:n,cid:Fw,locale:r,fallbackLocale:i,messages:o,modifiers:u,pluralRules:c,missing:d,missingWarn:f,fallbackWarn:p,fallbackFormat:h,unresolving:g,postTranslation:w,processor:x,warnHtmlMessage:A,escapeParameter:E,messageCompiler:m,messageResolver:v,localeFallbacker:_,fallbackContext:C,onWarn:e,__meta:G};return J.datetimeFormats=a,J.numberFormats=l,J.__datetimeFormatters=k,J.__numberFormatters=D,__INTLIFY_PROD_DEVTOOLS__&&V6(J,n,G),J}const sh=t=>({[t]:kt()});function Iy(t,e,n,r,s){const{missing:i,onWarn:o}=t;if(i!==null){const a=i(t,n,e,s);return Ne(a)?a:e}else return e}function Za(t,e,n){const r=t;r.__localeChainCache=new Map,t.localeFallbacker(t,n,e)}function hz(t,e){return t===e?!1:t.split("-")[0]===e.split("-")[0]}function mz(t,e){const n=e.indexOf(t);if(n===-1)return!1;for(let r=n+1;r<e.length;r++)if(hz(t,e[r]))return!0;return!1}function jw(t,...e){const{datetimeFormats:n,unresolving:r,fallbackLocale:s,onWarn:i,localeFallbacker:o}=t,{__datetimeFormatters:a}=t,[l,u,c,d]=xm(...e),f=zt(c.missingWarn)?c.missingWarn:t.missingWarn;zt(c.fallbackWarn)?c.fallbackWarn:t.fallbackWarn;const p=!!c.part,h=ky(t,c),g=o(t,s,h);if(!Ne(l)||l==="")return new Intl.DateTimeFormat(h,d).format(u);let w={},x,A=null;const E="datetime format";for(let _=0;_<g.length&&(x=g[_],w=n[x]||{},A=w[l],!ut(A));_++)Iy(t,l,x,f,E);if(!ut(A)||!Ne(x))return r?lf:l;let m=`${x}__${l}`;of(d)||(m=`${m}__${JSON.stringify(d)}`);let v=a.get(m);return v||(v=new Intl.DateTimeFormat(x,dn({},A,d)),a.set(m,v)),p?v.formatToParts(u):v.format(u)}const oC=["localeMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName","formatMatcher","hour12","timeZone","dateStyle","timeStyle","calendar","dayPeriod","numberingSystem","hourCycle","fractionalSecondDigits"];function xm(...t){const[e,n,r,s]=t,i=kt();let o=kt(),a;if(Ne(e)){const l=e.match(/(\d{4}-\d{2}-\d{2})(T|\s)?(.*)/);if(!l)throw zs(Bs.INVALID_ISO_DATE_ARGUMENT);const u=l[3]?l[3].trim().startsWith("T")?`${l[1].trim()}${l[3].trim()}`:`${l[1].trim()}T${l[3].trim()}`:l[1].trim();a=new Date(u);try{a.toISOString()}catch{throw zs(Bs.INVALID_ISO_DATE_ARGUMENT)}}else if(n6(e)){if(isNaN(e.getTime()))throw zs(Bs.INVALID_DATE_ARGUMENT);a=e}else if(tn(e))a=e;else throw zs(Bs.INVALID_ARGUMENT);return Ne(n)?i.key=n:ut(n)&&Object.keys(n).forEach(l=>{oC.includes(l)?o[l]=n[l]:i[l]=n[l]}),Ne(r)?i.locale=r:ut(r)&&(o=r),ut(s)&&(o=s),[i.key||"",a,i,o]}function qw(t,e,n){const r=t;for(const s in n){const i=`${e}__${s}`;r.__datetimeFormatters.has(i)&&r.__datetimeFormatters.delete(i)}}function Uw(t,...e){const{numberFormats:n,unresolving:r,fallbackLocale:s,onWarn:i,localeFallbacker:o}=t,{__numberFormatters:a}=t,[l,u,c,d]=Sm(...e),f=zt(c.missingWarn)?c.missingWarn:t.missingWarn;zt(c.fallbackWarn)?c.fallbackWarn:t.fallbackWarn;const p=!!c.part,h=ky(t,c),g=o(t,s,h);if(!Ne(l)||l==="")return new Intl.NumberFormat(h,d).format(u);let w={},x,A=null;const E="number format";for(let _=0;_<g.length&&(x=g[_],w=n[x]||{},A=w[l],!ut(A));_++)Iy(t,l,x,f,E);if(!ut(A)||!Ne(x))return r?lf:l;let m=`${x}__${l}`;of(d)||(m=`${m}__${JSON.stringify(d)}`);let v=a.get(m);return v||(v=new Intl.NumberFormat(x,dn({},A,d)),a.set(m,v)),p?v.formatToParts(u):v.format(u)}const aC=["localeMatcher","style","currency","currencyDisplay","currencySign","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","notation","signDisplay","unit","unitDisplay","roundingMode","roundingPriority","roundingIncrement","trailingZeroDisplay"];function Sm(...t){const[e,n,r,s]=t,i=kt();let o=kt();if(!tn(e))throw zs(Bs.INVALID_ARGUMENT);const a=e;return Ne(n)?i.key=n:ut(n)&&Object.keys(n).forEach(l=>{aC.includes(l)?o[l]=n[l]:i[l]=n[l]}),Ne(r)?i.locale=r:ut(r)&&(o=r),ut(s)&&(o=s),[i.key||"",a,i,o]}function Bw(t,e,n){const r=t;for(const s in n){const i=`${e}__${s}`;r.__numberFormatters.has(i)&&r.__numberFormatters.delete(i)}}const gz=t=>t,yz=t=>"",vz="text",bz=t=>t.length===0?"":Ay(t),wz=o6;function zw(t,e){return t=Math.abs(t),e===2?t?t>1?1:0:1:t?Math.min(t,2):0}function _z(t){const e=tn(t.pluralIndex)?t.pluralIndex:-1;return t.named&&(tn(t.named.count)||tn(t.named.n))?tn(t.named.count)?t.named.count:tn(t.named.n)?t.named.n:e:e}function xz(t,e){e.count||(e.count=t),e.n||(e.n=t)}function Sz(t={}){const e=t.locale,n=_z(t),r=yt(t.pluralRules)&&Ne(e)&&Bt(t.pluralRules[e])?t.pluralRules[e]:zw,s=yt(t.pluralRules)&&Ne(e)&&Bt(t.pluralRules[e])?zw:void 0,i=x=>x[r(n,x.length,s)],o=t.list||[],a=x=>o[x],l=t.named||kt();tn(t.pluralIndex)&&xz(n,l);const u=x=>l[x];function c(x,A){const E=Bt(t.messages)?t.messages(x,!!A):yt(t.messages)?t.messages[x]:!1;return E||(t.parent?t.parent.message(x):yz)}const d=x=>t.modifiers?t.modifiers[x]:gz,f=ut(t.processor)&&Bt(t.processor.normalize)?t.processor.normalize:bz,p=ut(t.processor)&&Bt(t.processor.interpolate)?t.processor.interpolate:wz,h=ut(t.processor)&&Ne(t.processor.type)?t.processor.type:vz,w={list:a,named:u,plural:i,linked:(x,...A)=>{const[E,m]=A;let v="text",_="";A.length===1?yt(E)?(_=E.modifier||_,v=E.type||v):Ne(E)&&(_=E||_):A.length===2&&(Ne(E)&&(_=E||_),Ne(m)&&(v=m||v));const C=c(x,!0)(w),$=v==="vnode"&&sn(C)&&_?C[0]:C;return _?d(_)($,v):$},message:c,type:h,interpolate:p,normalize:f,values:dn(kt(),o,l)};return w}const Vw=()=>"",xr=t=>Bt(t);function Hw(t,...e){const{fallbackFormat:n,postTranslation:r,unresolving:s,messageCompiler:i,fallbackLocale:o,messages:a}=t,[l,u]=Em(...e),c=zt(u.missingWarn)?u.missingWarn:t.missingWarn,d=zt(u.fallbackWarn)?u.fallbackWarn:t.fallbackWarn,f=zt(u.escapeParameter)?u.escapeParameter:t.escapeParameter,p=!!u.resolvedMessage,h=Ne(u.default)||zt(u.default)?zt(u.default)?i?l:()=>l:u.default:n?i?l:()=>l:null,g=n||h!=null&&(Ne(h)||Bt(h)),w=ky(t,u);f&&Ez(u);let[x,A,E]=p?[l,w,a[w]||kt()]:lC(t,l,w,o,d,c),m=x,v=l;if(!p&&!(Ne(m)||ys(m)||xr(m))&&g&&(m=h,v=m),!p&&(!(Ne(m)||ys(m)||xr(m))||!Ne(A)))return s?lf:l;let _=!1;const C=()=>{_=!0},$=xr(m)?m:uC(t,l,A,m,v,C);if(_)return m;const k=$z(t,A,E,u),D=Sz(k),G=Az(t,$,D),J=r?r(G,l):G;if(__INTLIFY_PROD_DEVTOOLS__){const W={timestamp:Date.now(),key:Ne(l)?l:xr(m)?m.key:"",locale:A||(xr(m)?m.locale:""),format:Ne(m)?m:xr(m)?m.source:"",message:J};W.meta=dn({},t.__meta,dz()||{}),H6(W)}return J}function Ez(t){sn(t.list)?t.list=t.list.map(e=>Ne(e)?$w(e):e):yt(t.named)&&Object.keys(t.named).forEach(e=>{Ne(t.named[e])&&(t.named[e]=$w(t.named[e]))})}function lC(t,e,n,r,s,i){const{messages:o,onWarn:a,messageResolver:l,localeFallbacker:u}=t,c=u(t,r,n);let d=kt(),f,p=null;const h="translate";for(let g=0;g<c.length&&(f=c[g],d=o[f]||kt(),(p=l(d,e))===null&&(p=d[e]),!(Ne(p)||ys(p)||xr(p)));g++)if(!mz(f,c)){const w=Iy(t,e,f,i,h);w!==e&&(p=w)}return[p,f,d]}function uC(t,e,n,r,s,i){const{messageCompiler:o,warnHtmlMessage:a}=t;if(xr(r)){const u=r;return u.locale=u.locale||n,u.key=u.key||e,u}if(o==null){const u=(()=>r);return u.locale=n,u.key=e,u}const l=o(r,Cz(t,n,s,r,a,i));return l.locale=n,l.key=e,l.source=r,l}function Az(t,e,n){return e(n)}function Em(...t){const[e,n,r]=t,s=kt();if(!Ne(e)&&!tn(e)&&!xr(e)&&!ys(e))throw zs(Bs.INVALID_ARGUMENT);const i=tn(e)?String(e):(xr(e),e);return tn(n)?s.plural=n:Ne(n)?s.default=n:ut(n)&&!of(n)?s.named=n:sn(n)&&(s.list=n),tn(r)?s.plural=r:Ne(r)?s.default=r:ut(r)&&dn(s,r),[i,s]}function Cz(t,e,n,r,s,i){return{locale:e,key:n,warnHtmlMessage:s,onError:o=>{throw i&&i(o),o},onCacheKey:o=>e6(e,n,o)}}function $z(t,e,n,r){const{modifiers:s,pluralRules:i,messageResolver:o,fallbackLocale:a,fallbackWarn:l,missingWarn:u,fallbackContext:c}=t,f={locale:e,modifiers:s,pluralRules:i,messages:(p,h)=>{let g=o(n,p);if(g==null&&(c||h)){const[,,w]=lC(c||t,p,e,a,l,u);g=o(w,p)}if(Ne(g)||ys(g)){let w=!1;const A=uC(t,p,e,g,p,()=>{w=!0});return w?Vw:A}else return xr(g)?g:Vw}};return t.processor&&(f.processor=t.processor),r.list&&(f.list=r.list),r.named&&(f.named=r.named),tn(r.plural)&&(f.pluralIndex=r.plural),f}T6();/*!
  * vue-i18n v11.1.3
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */const kz="11.1.3";function Iz(){typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(Sy().__INTLIFY_PROD_DEVTOOLS__=!1)}const Mr={UNEXPECTED_RETURN_TYPE:W6,INVALID_ARGUMENT:25,MUST_BE_CALL_SETUP_TOP:26,NOT_INSTALLED:27,REQUIRED_VALUE:28,INVALID_VALUE:29,NOT_INSTALLED_WITH_PROVIDE:31,UNEXPECTED_ERROR:32};function es(t,...e){return af(t,null,void 0)}const Am=zi("__translateVNode"),Cm=zi("__datetimeParts"),$m=zi("__numberParts"),Rz=zi("__setPluralRules"),Oz=zi("__injectWithOption"),km=zi("__dispose");function jl(t){if(!yt(t)||ys(t))return t;for(const e in t)if(Vr(t,e))if(!e.includes("."))yt(t[e])&&jl(t[e]);else{const n=e.split("."),r=n.length-1;let s=t,i=!1;for(let o=0;o<r;o++){if(n[o]==="__proto__")throw new Error(`unsafe key: ${n[o]}`);if(n[o]in s||(s[n[o]]=kt()),!yt(s[n[o]])){i=!0;break}s=s[n[o]]}if(i||(ys(s)?ZA.includes(n[r])||delete t[e]:(s[n[r]]=t[e],delete t[e])),!ys(s)){const o=s[n[r]];yt(o)&&jl(o)}}return t}function cC(t,e){const{messages:n,__i18n:r,messageResolver:s,flatJson:i}=e,o=ut(n)?n:sn(r)?kt():{[t]:kt()};if(sn(r)&&r.forEach(a=>{if("locale"in a&&"resource"in a){const{locale:l,resource:u}=a;l?(o[l]=o[l]||kt(),dc(u,o[l])):dc(u,o)}else Ne(a)&&dc(JSON.parse(a),o)}),s==null&&i)for(const a in o)Vr(o,a)&&jl(o[a]);return o}function dC(t){return t.type}function Tz(t,e,n){let r=yt(e.messages)?e.messages:kt();"__i18nGlobal"in n&&(r=cC(t.locale.value,{messages:r,__i18n:n.__i18nGlobal}));const s=Object.keys(r);s.length&&s.forEach(i=>{t.mergeLocaleMessage(i,r[i])});{if(yt(e.datetimeFormats)){const i=Object.keys(e.datetimeFormats);i.length&&i.forEach(o=>{t.mergeDateTimeFormat(o,e.datetimeFormats[o])})}if(yt(e.numberFormats)){const i=Object.keys(e.numberFormats);i.length&&i.forEach(o=>{t.mergeNumberFormat(o,e.numberFormats[o])})}}}function Kw(t){return N(xa,null,t,0)}const Ww="__INTLIFY_META__",Gw=()=>[],Dz=()=>!1;let Jw=0;function Yw(t){return((e,n,r,s)=>t(n,r,wn()||void 0,s))}const Pz=()=>{const t=wn();let e=null;return t&&(e=dC(t)[Ww])?{[Ww]:e}:null};function fC(t={}){const{__root:e,__injectWithOption:n}=t,r=e===void 0,s=t.flatJson,i=Yc?we:Mn;let o=zt(t.inheritLocale)?t.inheritLocale:!0;const a=i(e&&o?e.locale.value:Ne(t.locale)?t.locale:Qc),l=i(e&&o?e.fallbackLocale.value:Ne(t.fallbackLocale)||sn(t.fallbackLocale)||ut(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:a.value),u=i(cC(a.value,t)),c=i(ut(t.datetimeFormats)?t.datetimeFormats:{[a.value]:{}}),d=i(ut(t.numberFormats)?t.numberFormats:{[a.value]:{}});let f=e?e.missingWarn:zt(t.missingWarn)||Xc(t.missingWarn)?t.missingWarn:!0,p=e?e.fallbackWarn:zt(t.fallbackWarn)||Xc(t.fallbackWarn)?t.fallbackWarn:!0,h=e?e.fallbackRoot:zt(t.fallbackRoot)?t.fallbackRoot:!0,g=!!t.fallbackFormat,w=Bt(t.missing)?t.missing:null,x=Bt(t.missing)?Yw(t.missing):null,A=Bt(t.postTranslation)?t.postTranslation:null,E=e?e.warnHtmlMessage:zt(t.warnHtmlMessage)?t.warnHtmlMessage:!0,m=!!t.escapeParameter;const v=e?e.modifiers:ut(t.modifiers)?t.modifiers:{};let _=t.pluralRules||e&&e.pluralRules,C;C=(()=>{r&&Nw(null);const de={version:kz,locale:a.value,fallbackLocale:l.value,messages:u.value,modifiers:v,pluralRules:_,missing:x===null?void 0:x,missingWarn:f,fallbackWarn:p,fallbackFormat:g,unresolving:!0,postTranslation:A===null?void 0:A,warnHtmlMessage:E,escapeParameter:m,messageResolver:t.messageResolver,messageCompiler:t.messageCompiler,__meta:{framework:"vue"}};de.datetimeFormats=c.value,de.numberFormats=d.value,de.__datetimeFormatters=ut(C)?C.__datetimeFormatters:void 0,de.__numberFormatters=ut(C)?C.__numberFormatters:void 0;const ve=pz(de);return r&&Nw(ve),ve})(),Za(C,a.value,l.value);function k(){return[a.value,l.value,u.value,c.value,d.value]}const D=H({get:()=>a.value,set:de=>{C.locale=de,a.value=de}}),G=H({get:()=>l.value,set:de=>{C.fallbackLocale=de,l.value=de,Za(C,a.value,de)}}),J=H(()=>u.value),W=H(()=>c.value),j=H(()=>d.value);function se(){return Bt(A)?A:null}function R(de){A=de,C.postTranslation=de}function V(){return w}function F(de){de!==null&&(x=Yw(de)),w=de,C.missing=x}const ee=(de,ve,Oe,O,b,S)=>{k();let q;try{__INTLIFY_PROD_DEVTOOLS__,r||(C.fallbackContext=e?fz():void 0),q=de(C)}finally{__INTLIFY_PROD_DEVTOOLS__,r||(C.fallbackContext=void 0)}if(Oe!=="translate exists"&&tn(q)&&q===lf||Oe==="translate exists"&&!q){const[oe,ge]=ve();return e&&h?O(e):b(oe)}else{if(S(q))return q;throw es(Mr.UNEXPECTED_RETURN_TYPE)}};function z(...de){return ee(ve=>Reflect.apply(Hw,null,[ve,...de]),()=>Em(...de),"translate",ve=>Reflect.apply(ve.t,ve,[...de]),ve=>ve,ve=>Ne(ve))}function ie(...de){const[ve,Oe,O]=de;if(O&&!yt(O))throw es(Mr.INVALID_ARGUMENT);return z(ve,Oe,dn({resolvedMessage:!0},O||{}))}function pe(...de){return ee(ve=>Reflect.apply(jw,null,[ve,...de]),()=>xm(...de),"datetime format",ve=>Reflect.apply(ve.d,ve,[...de]),()=>Mw,ve=>Ne(ve))}function he(...de){return ee(ve=>Reflect.apply(Uw,null,[ve,...de]),()=>Sm(...de),"number format",ve=>Reflect.apply(ve.n,ve,[...de]),()=>Mw,ve=>Ne(ve))}function Ae(de){return de.map(ve=>Ne(ve)||tn(ve)||zt(ve)?Kw(String(ve)):ve)}const te={normalize:Ae,interpolate:de=>de,type:"vnode"};function T(...de){return ee(ve=>{let Oe;const O=ve;try{O.processor=te,Oe=Reflect.apply(Hw,null,[O,...de])}finally{O.processor=null}return Oe},()=>Em(...de),"translate",ve=>ve[Am](...de),ve=>[Kw(ve)],ve=>sn(ve))}function Y(...de){return ee(ve=>Reflect.apply(Uw,null,[ve,...de]),()=>Sm(...de),"number format",ve=>ve[$m](...de),Gw,ve=>Ne(ve)||sn(ve))}function re(...de){return ee(ve=>Reflect.apply(jw,null,[ve,...de]),()=>xm(...de),"datetime format",ve=>ve[Cm](...de),Gw,ve=>Ne(ve)||sn(ve))}function ne(de){_=de,C.pluralRules=_}function xe(de,ve){return ee(()=>{if(!de)return!1;const Oe=Ne(ve)?ve:a.value,O=Q(Oe),b=C.messageResolver(O,de);return ys(b)||xr(b)||Ne(b)},()=>[de],"translate exists",Oe=>Reflect.apply(Oe.te,Oe,[de,ve]),Dz,Oe=>zt(Oe))}function M(de){let ve=null;const Oe=eC(C,l.value,a.value);for(let O=0;O<Oe.length;O++){const b=u.value[Oe[O]]||{},S=C.messageResolver(b,de);if(S!=null){ve=S;break}}return ve}function P(de){const ve=M(de);return ve??(e?e.tm(de)||{}:{})}function Q(de){return u.value[de]||{}}function ye(de,ve){if(s){const Oe={[de]:ve};for(const O in Oe)Vr(Oe,O)&&jl(Oe[O]);ve=Oe[de]}u.value[de]=ve,C.messages=u.value}function _e(de,ve){u.value[de]=u.value[de]||{};const Oe={[de]:ve};if(s)for(const O in Oe)Vr(Oe,O)&&jl(Oe[O]);ve=Oe[de],dc(ve,u.value[de]),C.messages=u.value}function be(de){return c.value[de]||{}}function U(de,ve){c.value[de]=ve,C.datetimeFormats=c.value,qw(C,de,ve)}function B(de,ve){c.value[de]=dn(c.value[de]||{},ve),C.datetimeFormats=c.value,qw(C,de,ve)}function ce(de){return d.value[de]||{}}function me(de,ve){d.value[de]=ve,C.numberFormats=d.value,Bw(C,de,ve)}function Ie(de,ve){d.value[de]=dn(d.value[de]||{},ve),C.numberFormats=d.value,Bw(C,de,ve)}Jw++,e&&Yc&&(Ke(e.locale,de=>{o&&(a.value=de,C.locale=de,Za(C,a.value,l.value))}),Ke(e.fallbackLocale,de=>{o&&(l.value=de,C.fallbackLocale=de,Za(C,a.value,l.value))}));const Ce={id:Jw,locale:D,fallbackLocale:G,get inheritLocale(){return o},set inheritLocale(de){o=de,de&&e&&(a.value=e.locale.value,l.value=e.fallbackLocale.value,Za(C,a.value,l.value))},get availableLocales(){return Object.keys(u.value).sort()},messages:J,get modifiers(){return v},get pluralRules(){return _||{}},get isGlobal(){return r},get missingWarn(){return f},set missingWarn(de){f=de,C.missingWarn=f},get fallbackWarn(){return p},set fallbackWarn(de){p=de,C.fallbackWarn=p},get fallbackRoot(){return h},set fallbackRoot(de){h=de},get fallbackFormat(){return g},set fallbackFormat(de){g=de,C.fallbackFormat=g},get warnHtmlMessage(){return E},set warnHtmlMessage(de){E=de,C.warnHtmlMessage=de},get escapeParameter(){return m},set escapeParameter(de){m=de,C.escapeParameter=de},t:z,getLocaleMessage:Q,setLocaleMessage:ye,mergeLocaleMessage:_e,getPostTranslationHandler:se,setPostTranslationHandler:R,getMissingHandler:V,setMissingHandler:F,[Rz]:ne};return Ce.datetimeFormats=W,Ce.numberFormats=j,Ce.rt=ie,Ce.te=xe,Ce.tm=P,Ce.d=pe,Ce.n=he,Ce.getDateTimeFormat=be,Ce.setDateTimeFormat=U,Ce.mergeDateTimeFormat=B,Ce.getNumberFormat=ce,Ce.setNumberFormat=me,Ce.mergeNumberFormat=Ie,Ce[Oz]=n,Ce[Am]=T,Ce[Cm]=re,Ce[$m]=Y,Ce}const Ry={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:t=>t==="parent"||t==="global",default:"parent"},i18n:{type:Object}};function Mz({slots:t},e){return e.length===1&&e[0]==="default"?(t.default?t.default():[]).reduce((r,s)=>[...r,...s.type===je?s.children:[s]],[]):e.reduce((n,r)=>{const s=t[r];return s&&(n[r]=s()),n},kt())}function pC(){return je}const Lz=ue({name:"i18n-t",props:dn({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:t=>tn(t)||!isNaN(t)}},Ry),setup(t,e){const{slots:n,attrs:r}=e,s=t.i18n||Oy({useScope:t.scope,__useComponent:!0});return()=>{const i=Object.keys(n).filter(d=>d!=="_"),o=kt();t.locale&&(o.locale=t.locale),t.plural!==void 0&&(o.plural=Ne(t.plural)?+t.plural:t.plural);const a=Mz(e,i),l=s[Am](t.keypath,a,o),u=dn(kt(),r),c=Ne(t.tag)||yt(t.tag)?t.tag:pC();return dr(c,u,l)}}}),Xw=Lz;function Nz(t){return sn(t)&&!Ne(t[0])}function hC(t,e,n,r){const{slots:s,attrs:i}=e;return()=>{const o={part:!0};let a=kt();t.locale&&(o.locale=t.locale),Ne(t.format)?o.key=t.format:yt(t.format)&&(Ne(t.format.key)&&(o.key=t.format.key),a=Object.keys(t.format).reduce((f,p)=>n.includes(p)?dn(kt(),f,{[p]:t.format[p]}):f,kt()));const l=r(t.value,o,a);let u=[o.key];sn(l)?u=l.map((f,p)=>{const h=s[f.type],g=h?h({[f.type]:f.value,index:p,parts:l}):[f.value];return Nz(g)&&(g[0].key=`${f.type}-${p}`),g}):Ne(l)&&(u=[l]);const c=dn(kt(),i),d=Ne(t.tag)||yt(t.tag)?t.tag:pC();return dr(d,c,u)}}const Fz=ue({name:"i18n-n",props:dn({value:{type:Number,required:!0},format:{type:[String,Object]}},Ry),setup(t,e){const n=t.i18n||Oy({useScope:t.scope,__useComponent:!0});return hC(t,e,aC,(...r)=>n[$m](...r))}}),Qw=Fz;function jz(t,e){const n=t;if(t.mode==="composition")return n.__getInstance(e)||t.global;{const r=n.__getInstance(e);return r!=null?r.__composer:t.global.__composer}}function qz(t){const e=o=>{const{instance:a,value:l}=o;if(!a||!a.$)throw es(Mr.UNEXPECTED_ERROR);const u=jz(t,a.$),c=Zw(l);return[Reflect.apply(u.t,u,[...e_(c)]),u]};return{created:(o,a)=>{const[l,u]=e(a);Yc&&t.global===u&&(o.__i18nWatcher=Ke(u.locale,()=>{a.instance&&a.instance.$forceUpdate()})),o.__composer=u,o.textContent=l},unmounted:o=>{Yc&&o.__i18nWatcher&&(o.__i18nWatcher(),o.__i18nWatcher=void 0,delete o.__i18nWatcher),o.__composer&&(o.__composer=void 0,delete o.__composer)},beforeUpdate:(o,{value:a})=>{if(o.__composer){const l=o.__composer,u=Zw(a);o.textContent=Reflect.apply(l.t,l,[...e_(u)])}},getSSRProps:o=>{const[a]=e(o);return{textContent:a}}}}function Zw(t){if(Ne(t))return{path:t};if(ut(t)){if(!("path"in t))throw es(Mr.REQUIRED_VALUE,"path");return t}else throw es(Mr.INVALID_VALUE)}function e_(t){const{path:e,locale:n,args:r,choice:s,plural:i}=t,o={},a=r||{};return Ne(n)&&(o.locale=n),tn(s)&&(o.plural=s),tn(i)&&(o.plural=i),[e,a,o]}function Uz(t,e,...n){const r=ut(n[0])?n[0]:{};(zt(r.globalInstall)?r.globalInstall:!0)&&([Xw.name,"I18nT"].forEach(i=>t.component(i,Xw)),[Qw.name,"I18nN"].forEach(i=>t.component(i,Qw)),[n_.name,"I18nD"].forEach(i=>t.component(i,n_))),t.directive("t",qz(e))}const Bz=zi("global-vue-i18n");function zz(t={}){const e=zt(t.globalInjection)?t.globalInjection:!0,n=new Map,[r,s]=Vz(t),i=zi("");function o(c){return n.get(c)||null}function a(c,d){n.set(c,d)}function l(c){n.delete(c)}const u={get mode(){return"composition"},async install(c,...d){if(c.__VUE_I18N_SYMBOL__=i,c.provide(c.__VUE_I18N_SYMBOL__,u),ut(d[0])){const h=d[0];u.__composerExtend=h.__composerExtend,u.__vueI18nExtend=h.__vueI18nExtend}let f=null;e&&(f=Qz(c,u.global)),Uz(c,u,...d);const p=c.unmount;c.unmount=()=>{f&&f(),u.dispose(),p()}},get global(){return s},dispose(){r.stop()},__instances:n,__getInstance:o,__setInstance:a,__deleteInstance:l};return u}function Oy(t={}){const e=wn();if(e==null)throw es(Mr.MUST_BE_CALL_SETUP_TOP);if(!e.isCE&&e.appContext.app!=null&&!e.appContext.app.__VUE_I18N_SYMBOL__)throw es(Mr.NOT_INSTALLED);const n=Hz(e),r=Wz(n),s=dC(e),i=Kz(t,s);if(i==="global")return Tz(r,t,s),r;if(i==="parent"){let l=Gz(n,e,t.__useComponent);return l==null&&(l=r),l}const o=n;let a=o.__getInstance(e);if(a==null){const l=dn({},t);"__i18n"in s&&(l.__i18n=s.__i18n),r&&(l.__root=r),a=fC(l),o.__composerExtend&&(a[km]=o.__composerExtend(a)),Yz(o,e,a),o.__setInstance(e,a)}return a}function Vz(t,e){const n=Hl(),r=n.run(()=>fC(t));if(r==null)throw es(Mr.UNEXPECTED_ERROR);return[n,r]}function Hz(t){const e=Kt(t.isCE?Bz:t.appContext.app.__VUE_I18N_SYMBOL__);if(!e)throw es(t.isCE?Mr.NOT_INSTALLED_WITH_PROVIDE:Mr.UNEXPECTED_ERROR);return e}function Kz(t,e){return of(t)?"__i18n"in e?"local":"global":t.useScope?t.useScope:"local"}function Wz(t){return t.mode==="composition"?t.global:t.global.__composer}function Gz(t,e,n=!1){let r=null;const s=e.root;let i=Jz(e,n);for(;i!=null;){const o=t;if(t.mode==="composition"&&(r=o.__getInstance(i)),r!=null||s===i)break;i=i.parent}return r}function Jz(t,e=!1){return t==null?null:e&&t.vnode.ctx||t.parent}function Yz(t,e,n){Dt(()=>{},e),on(()=>{const r=n;t.__deleteInstance(e);const s=r[km];s&&(s(),delete r[km])},e)}const Xz=["locale","fallbackLocale","availableLocales"],t_=["t","rt","d","n","tm","te"];function Qz(t,e){const n=Object.create(null);return Xz.forEach(s=>{const i=Object.getOwnPropertyDescriptor(e,s);if(!i)throw es(Mr.UNEXPECTED_ERROR);const o=Mt(i.value)?{get(){return i.value.value},set(a){i.value.value=a}}:{get(){return i.get&&i.get()}};Object.defineProperty(n,s,o)}),t.config.globalProperties.$i18n=n,t_.forEach(s=>{const i=Object.getOwnPropertyDescriptor(e,s);if(!i||!i.value)throw es(Mr.UNEXPECTED_ERROR);Object.defineProperty(t.config.globalProperties,`$${s}`,i)}),()=>{delete t.config.globalProperties.$i18n,t_.forEach(s=>{delete t.config.globalProperties[`$${s}`]})}}const Zz=ue({name:"i18n-d",props:dn({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},Ry),setup(t,e){const n=t.i18n||Oy({useScope:t.scope,__useComponent:!0});return hC(t,e,oC,(...r)=>n[Cm](...r))}}),n_=Zz;Iz();az(B6);lz(sz);uz(eC);if(__INTLIFY_PROD_DEVTOOLS__){const t=Sy();t.__INTLIFY__=!0,z6(t.__INTLIFY_DEVTOOLS_GLOBAL_HOOK__)}var eV=Object.defineProperty,tV=(t,e,n)=>e in t?eV(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ih=(t,e,n)=>tV(t,typeof e!="symbol"?e+"":e,n);class nV{constructor(e,n){this.i18n=e,this.messages=n,this.messages.addListener((r,s)=>this.i18n.setLocaleMessage(r,s))}getLocale(){return this.i18n.locale.value}async setLocale(e){await this.messages.loadLocale(e),this.i18n.locale.value=e}getFallbackLocale(){const e=this.i18n.fallbackLocale.value;return typeof e!="string"?"":e}async setFallbackLocale(e){await this.messages.loadLocale(e),this.i18n.fallbackLocale.value=e}getLocales(){return this.messages.getLocales()}translate(e,n){return this.i18n.t(e,n??{})}translateWithDefault(e,n,r){const s=this.i18n.t(e,r??{},{missingWarn:!1});return s===e?this.replaceParameters(n,r):s}replaceParameters(e,n={}){if(typeof n=="number"){const r=e.split("|").map(i=>i.trim()),s=r[n]??r[2]??e;return this.replaceParameters(s,{n})}return Object.entries(n).reduce((r,[s,i])=>r.replace(new RegExp(`\\{.*${s}[^}]*\\}`),rr(i)),e)}}class rV{constructor(e){ih(this,"listeners",[]),ih(this,"messages",{}),ih(this,"loaders"),this.loaders=Object.entries(e).reduce((n,[r,s])=>{var i;const o=(i=P2(r,/.*\/lang\/(.+)\.yaml/))==null?void 0:i[1];return o&&(n[o]=()=>s().then(({default:a})=>a)),n},{})}getMessages(){return Object.assign({},this.messages)}getLocales(){return Object.keys(this.loaders)}addListener(e){this.listeners.push(e)}async loadLocale(e){if(e in this.messages)return this.messages[e];const n=await(this.loaders[e]??Wt(`Couldn't load messages for '${e}' locale`))();return this.messages[e]=n,this.listeners.forEach(r=>r(e,n)),n}}async function sV(t){const e=t.defaultLocale??"en",n=t.fallbackLocale??"en";return await t.messages.loadLocale(e),await t.messages.loadLocale(n),zz({warnHtmlMessage:!1,locale:e,fallbackLocale:n,messages:t.messages.getMessages()})}function iV(t){return{async install(e){const n=new rV(t.messages),r=await sV({...t,messages:n});e.use(r),Pi.setProvider(new nV(r.global,n))}}}const ju={clientID:{client_id:"https://calories.noeldemartin.com/clientid.jsonld",client_name:"Calories Tracker",redirect_uris:["https://calories.noeldemartin.com/"]}};var oV=Object.defineProperty,aV=(t,e,n)=>e in t?oV(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Er=(t,e,n)=>aV(t,typeof e!="symbol"?e+"":e,n);class lV extends yo{}function uV(t,e){return t}class Zc extends yo{constructor(e,n,r){super(uV(e),r),Er(this,"description"),this.description=n}}let cV=class extends yo{constructor(e,n){super(`Container at ${e.url} is already in use`,n)}},mC=class{constructor(){Er(this,"name"),Er(this,"authenticatedFetch"),Er(this,"booted"),Er(this,"listeners",Y2([])),Er(this,"_engine")}get engine(){return this._engine=this._engine??new sg(this.requireAuthenticatedFetch()),this._engine}getAuthenticatedFetch(){return this.authenticatedFetch??null}requireAuthenticatedFetch(){return this.authenticatedFetch??Wt("Authenticated fetch is not ready")}addListener(e){return this.listeners.includes(e)||this.listeners.push(e),()=>{this.removeListener(e)}}removeListener(e){this.listeners.includes(e)&&this.listeners.remove(e)}async boot(){if(this.booted)return this.booted;this.booted=new ms,await this.restoreSession(),this.booted.resolve()}async initAuthenticatedFetch(e){this.authenticatedFetch=e,await this.notifyListeners("onAuthenticatedFetchReady",e)}async startSession(e){const n={authenticator:this,...e};return await this.notifyListeners("onSessionStarted",n),n}async failSession(e,n){await this.notifyListeners("onSessionFailed",e,n)}async endSession(){await this.notifyListeners("onSessionEnded")}async notifyListeners(e,...n){await Promise.all(this.listeners.toArray().map(async r=>{const s=r[e];await(s==null?void 0:s(...n))}))}};const oh="inrupt-authenticator";let dV=class extends mC{constructor(){super(...arguments),Er(this,"_events"),Er(this,"_fetch"),Er(this,"_login"),Er(this,"_logout"),Er(this,"_handleIncomingRedirect")}async login(e){_r.set(oh,e);const n={oidcIssuer:e};return ju.clientID&&(n.clientId=ju.clientID.client_id,n.clientName=ju.clientID.client_name,n.redirectUrl=ju.clientID.redirect_uris[0]),await this._login(n),await pr({seconds:60}),Wt("Browser should have redirected, but it didn't")}async logout(){await this._logout(),await this.endSession()}async restoreSession(){const{events:e,fetch:n,handleIncomingRedirect:r,login:s,logout:i}=await no(async()=>{const{events:o,fetch:a,handleIncomingRedirect:l,login:u,logout:c}=await import("./InruptAuthenticator.lazy-BvpQLGoj-DSxx2LCb.js");return{events:o,fetch:a,handleIncomingRedirect:l,login:u,logout:c}},[]);this._fetch=n,this._login=s,this._logout=i,this._events=e,this._handleIncomingRedirect=r,await this.loginFromRedirect()}async loginFromRedirect(){const e=_r.get(oh);if(!e)return;this._events().on("error",(r,s)=>{r??(r="Error using Inrupt Authenticator method"),typeof s=="object"?this.failSession(e,new Zc(r,null,{cause:s})):this.failSession(e,new Zc(r,s))});const n=await this._handleIncomingRedirect(globalThis.location.href);_r.remove(oh),n!=null&&n.isLoggedIn&&n.webId&&await this.initSession(n.webId)}async initSession(e){await this.initAuthenticatedFetch(this._fetch);try{const n=await ct.requireUserProfile(e);await this.startSession({user:n,loginUrl:e})}catch(n){await this.failSession(e,n)}}};class fV extends mC{constructor(){super(),Er(this,"store"),this.store=UU("legacy-authenticator",{})}async login(e,n){const{SolidAuthClient:r}=await no(async()=>{const{SolidAuthClient:s}=await import("./LegacyAuthenticator.lazy-ChFFqP14-DYrrCfQe.js");return{SolidAuthClient:s}},[]);throw this.store.webId=n==null?void 0:n.webId,this.store.loginUrl=(n==null?void 0:n.oidcIssuerUrl)??e,await r.login(this.store.loginUrl)===null?(delete this.store.webId,delete this.store.loginUrl,new Zc("Could not log in with Solid using the legacy authenticator")):(await pr({seconds:60}),new Error("Browser should have redirected, but it didn't"))}async logout(){const{SolidAuthClient:e}=await no(async()=>{const{SolidAuthClient:n}=await import("./LegacyAuthenticator.lazy-ChFFqP14-DYrrCfQe.js");return{SolidAuthClient:n}},[]);delete this.store.webId,delete this.store.loginUrl,await e.logout(),await this.endSession()}async restoreSession(){if(!this.store.loginUrl)return;const{SolidAuthClient:e}=await no(async()=>{const{SolidAuthClient:s}=await import("./LegacyAuthenticator.lazy-ChFFqP14-DYrrCfQe.js");return{SolidAuthClient:s}},[]),n=await e.currentSession(),r=On(this.store.loginUrl);await this.initAuthenticatedFetch((s,i)=>e.fetch(s,i));try{const s=await ct.requireUserProfile(On((n==null?void 0:n.webId)??this.store.webId));await this.startSession({user:s,loginUrl:r})}catch(s){await this.failSession(r,s)}}}const Ty={},pV={inrupt:new dV,legacy:new fV};function hV(t){Ty.default=t}function gC(t){return Ty[t]}function mV(t){Object.entries(t).forEach(([e,n])=>gV(e,n))}function gV(t,e){Ty[t]=e,e.name=e.name??t}const Dy={autoReconnect:!0},yV=ss({name:"solid",persist:["autoReconnect","dismissed","previousSession","profiles","staleProfiles","collections"],initialState:{autoReconnect:Dy.autoReconnect,dismissed:!1,ignorePreviousSessionError:!1,loginStartupError:null,loginOngoing:!1,preferredAuthenticator:null,previousSession:null,profiles:{},session:null,loginStale:!1,staleProfiles:[],collections:{}},serialize(t){var e;return((e=t.previousSession)==null?void 0:e.error)instanceof Error&&(t.previousSession.error=t.previousSession.error.message),t},computed:{user:t=>{var e,n;return((e=t.session)==null?void 0:e.user)??((n=t.previousSession)==null?void 0:n.profile)??null},authenticator:t=>{var e;return((e=t.session)==null?void 0:e.authenticator)??null},fetch(){var t;return((t=this.authenticator)==null?void 0:t.getAuthenticatedFetch())??globalThis.fetch.bind(globalThis)},error(t){var e;return t.loginStartupError?t.loginStartupError??null:t.ignorePreviousSessionError?null:((e=t.previousSession)==null?void 0:e.error)??null}}});let vV=class extends yV{isLoggedIn(){return!!this.session}wasLoggedIn(){return!!this.previousSession}hasLoggedIn(){return!!(this.session||this.previousSession)}requireAuthenticator(){return this.authenticator??Wt("Could not get authenticator")}requireUser(){return this.user??Wt("Could not get user profile (are you logged in?)")}requireUserProfile(e){return this.getUserProfile(e,{required:!0})}async getUserProfile(e,n={}){var r;let s=null;const i=n.markStale??!((r=this.authenticator)!=null&&r.getAuthenticatedFetch()),o=this.profiles[e]??await Hn(await uR(e,{fetch:this.fetch,required:n.required??!1,onLoaded(a){s=a}}),async a=>{a&&(s&&await He.emit("solid:user-profile-loaded",[a,s]),this.rememberProfile(a))});return o&&i&&this.setState({staleProfiles:Kh(this.staleProfiles.concat([o.webId]))}),o}async refreshUserProfile(){if(!this.isLoggedIn())return;this.setState({profiles:po(this.profiles,[this.user.webId])});const e=await this.requireUserProfile(this.user.webId);this.setState({session:{...this.session,user:e}})}async login(e,n={}){if(Ri()&&e==="dev"&&(e="http://localhost:3000"),/^https?:\/\//.test(e)||(n.fallbackUrl??(n.fallbackUrl=`http://${e}`),e=`https://${e}`),this.isLoggedIn())return!0;if(this.loginOngoing)throw new Error("Authentication already in progress");return n.loading?$t.loading(Fe("solid.loginOngoing","Logging in..."),()=>this.attemptLogin(e,n)):this.attemptLogin(e,n)}async reconnect(e={}){const{force:n,...r}=e;this.isLoggedIn()||!this.previousSession||this.previousSession.error!==null&&!n||await this.login(this.previousSession.loginUrl,{authenticator:this.previousSession.authenticator,...r,loading:r.loading??!1})}async logout(e=!1){var n,r;const s=!gt.plugin("@aerogel/local-first")||!!((n=gt.service("$cloud"))!=null&&n.ready),i=!gt.plugin("@aerogel/local-first")||!!((r=gt.service("$cloud"))!=null&&r.dirty),[o,a]=e?[!0,{wipeLocalData:s}]:await $t.confirm(s?Fe("solid.logoutConfirmTitle","Log out from this device?"):Fe("solid.disconnectConfirmTitle","Disconnect account?"),s?i?Fe("solid.logoutConfirmMessageWithLocalChanges","There are some changes that haven't been synchronized and will be lost, but the rest of the data will remain in your Solid POD."):Fe("solid.logoutConfirmMessage","Logging out will remove all the data from this device, but you'll still have it in your Solid POD."):Fe("solid.disconnectConfirmMessage","You'll need to introduce your credentials again to connect to your Solid POD."),{acceptText:Fe("solid.logoutConfirmAccept","Log out"),acceptVariant:"danger",cancelText:Fe("solid.logoutConfirmCancel",Fe("ui.cancel","Cancel")),checkboxes:s?i?{wipeLocalData:{label:Fe("solid.logoutConfirmWipeNotice","I understand that changes that haven't been synchronized will be lost."),default:!1,required:!0}}:void 0:{wipeLocalData:{label:Fe("solid.logoutConfirmWipe","Also remove all existing data"),default:!1}}});o&&this.previousSession&&await $t.loading(Fe("solid.logoutOngoing","Logging out..."),async()=>{this.setState({dismissed:!1,ignorePreviousSessionError:!1,loginStartupError:null,previousSession:null,...Dy}),this.isLoggedIn()&&await this.authenticator.logout(),(a.wipeLocalData??!0)&&await ef.purge(),await He.emit("auth:logout"),await He.emit("auth:after-logout")})}async whenLoggedIn(e){return this.isLoggedIn()?e(this.session):new Promise(n=>{const r=s=>n(e(s));He.once("auth:login",r)})}dismiss(){this.setState({dismissed:!0})}async findOrCreatePrivateTypeIndex(){return await this.findPrivateTypeIndex()??await this.createPrivateTypeIndex()}async findPrivateTypeIndex(e={}){const{webId:n,privateTypeIndexUrl:r}=this.requireUser(),s=this.requireAuthenticator().engine;return r?(e.fresh&&h0(`${n}-privateTypeIndex`),p0(`${n}-privateTypeIndex`,()=>rl.withEngine(s).find(r))):null}async findOrCreatePublicTypeIndex(){return await this.findPublicTypeIndex()??await this.createPublicTypeIndex()}async findPublicTypeIndex(e={}){const{webId:n,publicTypeIndexUrl:r}=this.requireUser(),s=this.requireAuthenticator().engine;return r?(e.fresh&&h0(`${n}-publicTypeIndex`),p0(`${n}-publicTypeIndex`,()=>rl.withEngine(s).find(r))):null}async createPrivateContainer(e){const n=this.requireAuthenticator().engine;return Ir.withEngine(n,async()=>{const r=await Ir.find(e.url);if(r&&!e.reuseExisting)throw new cV(r);const s=r??new Ir({url:e.url,name:e.name});if(await s.save(),e.registerFor){const i=await this.findOrCreatePrivateTypeIndex();await s.register(i,e.registerFor)}return s})}async boot(){var e,n;await Mi.booted,zo("authenticator")&&this.setState({preferredAuthenticator:yl("authenticator")}),zo("refreshProfile")&&this.setState({staleProfiles:Kh(this.staleProfiles.concat(Pd([(e=this.session)==null?void 0:e.user.webId,(n=this.previousSession)==null?void 0:n.loginUrl])))}),await this.restorePreviousSession(),await this.startupReconnect(),await this.trackSolidModels()}async createPrivateTypeIndex(){const e=this.requireUser(),n=this.requireAuthenticator(),r=await rl.withEngine(n.engine).createPrivate(e);return Hn(r,()=>{e.privateTypeIndexUrl=r.url,m0(`${e.webId}-privateTypeIndex`,r),this.rememberProfile(e)})}async createPublicTypeIndex(){const e=this.requireUser(),n=this.requireAuthenticator(),r=await rl.withEngine(n.engine).createPublic(e);return Hn(r,()=>{e.privateTypeIndexUrl=r.url,m0(`${e.webId}-publicTypeIndex`,r),this.rememberProfile(e)})}async attemptLogin(e,n){const r=n.authenticator??this.preferredAuthenticator??"default",s=n.onError??(a=>gt.isMounted()?Mi.report(a):this.setState({loginStartupError:a})),i=setTimeout(()=>this.loginStale=!0,1e4),o={dismissed:this.dismissed,ignorePreviousSessionError:this.ignorePreviousSessionError,previousSession:this.previousSession};this.loginOngoing=!0;try{const a=await this.getUserProfile(e,{markStale:!0}),l=(a==null?void 0:a.oidcIssuerUrl)??Pg((a==null?void 0:a.webId)??e),u=await this.bootAuthenticator(r),{domain:c}=j2(e);return this.setState({dismissed:!1,ignorePreviousSessionError:!0,previousSession:Rg({profile:a,loginUrl:e,authenticator:r,error:Fe("solid.stuckConnecting","We didn't hear back from the identity provider at `{domain}`, maybe try reconnecting?",{domain:c})})}),await He.emit("auth:before-login"),await u.login(l,a),!0}catch(a){return this.setState(o),a instanceof lV?!1:n.fallbackUrl?pr().then(()=>this.login(n.fallbackUrl??"",po(n,"fallbackUrl"))):(s(a),!1)}finally{clearTimeout(i),this.setState({loginOngoing:!1,loginStale:!1})}}async restorePreviousSession(){this.previousSession&&await this.bootAuthenticator(this.previousSession.authenticator)}async startupReconnect(){this.reconnectOnStartup()&&await this.reconnect({force:this.forcingReconnect()})}reconnectOnStartup(){return zo("autoReconnect")?Pc(yl("autoReconnect")):this.autoReconnect}forcingReconnect(){return zo("autoReconnect")&&Pc(yl("autoReconnect"))}async bootAuthenticator(e){const n=gC(e);return n.addListener({onSessionStarted:async r=>{this.setState({session:r,previousSession:{authenticator:n.name,loginUrl:r.loginUrl,profile:r.user,error:null}}),this.staleProfiles.includes(r.user.webId)&&await this.refreshUserProfile(),gt.plugin("@aerogel/local-first")||Y_(r.authenticator.engine),LO.forEach(s=>s.setEngine(r.authenticator.engine)),await He.emit("auth:login",r)},onSessionFailed:async(r,s)=>{var i;this.setState({session:null,previousSession:{profile:(i=this.previousSession)==null?void 0:i.profile,authenticator:n.name,loginUrl:r,error:s}})},onSessionEnded:()=>this.setState({session:null}),onAuthenticatedFetchReady:r=>He.emit("auth:fetch-ready",r)}),await n.boot(),n}rememberProfile(e){this.setState({profiles:{...this.profiles,[e.webId]:e},staleProfiles:Og(this.staleProfiles,e.webId)})}async trackSolidModels(){He.on("purge-storage",()=>this.collections={}),He.on("soukai:track-models",async e=>{var n;z1(e)&&(e.on("created",async r=>{var s;const i=r.getContainerUrl();if(!i||r.getDefaultCollection()===i||(s=this.collections[r.static().modelName])!=null&&s.includes(i))return;const o=this.collections[r.static().modelName]??[];o.push(i),this.collections={...this.collections,[r.static().modelName]:o},await $i(e,i,{refresh:!1})}),await Promise.all(((n=this.collections[e.modelName])==null?void 0:n.map(r=>$i(e,r),{refresh:!1}))??[]))});for(const[e,n]of Object.entries(this.collections)){const r=e1().get(e);if(!(!r||!X8(r)))for(const s of n)await $i(r,s)}}};const ct=rs(vV);function bV(){iA("container_url",t=>{if(!t.endsWith("/"))return"containerEndingSlashMissing"})}const wV={viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"};function _V(t,e){return I(),ae("svg",wV,e[0]||(e[0]=[L("path",{fill:"currentColor",d:"M15 2H5L4 8h12zM0 10s2 1 10 1s10-1 10-1l-4-2H4zm8 4h4v1H8z"},null,-1),L("circle",{cx:"6",cy:"15",r:"3",fill:"currentColor"},null,-1),L("circle",{cx:"14",cy:"15",r:"3",fill:"currentColor"},null,-1)]))}const xV=Qe({name:"ooui-user-anonymous",render:_V}),SV=["src"],yC=ue({__name:"SolidImage",props:{src:{}},setup(t){const e=lA(async()=>{const r=await Jp.get(t.src)??await n(t.src),s=await(r==null?void 0:r.blob());return s&&URL.createObjectURL(s)||t.src});async function n(r){try{const s=await ct.fetch(r);return s.status!==200?null:(await Jp.store(r,s),Jp.get(r))}catch{return null}}return(r,s)=>(I(),ae("img",{src:y(e)},null,8,SV))}}),EV={class:"relative flex items-center justify-center rounded-full bg-gray-200"},AV={key:1,class:"text-sm font-semibold tracking-wider text-gray-500","aria-hidden":"true"},vC=ue({__name:"SolidAvatar",setup(t){const e=H(()=>{var n;return(((n=ct.user)==null?void 0:n.name)??"").trim().split(" ").map(r=>{var s;return(s=r[0])==null?void 0:s.toUpperCase()}).join("").slice(0,3)});return(n,r)=>{var s,i;return I(),ae("div",EV,[(s=n.$solid.user)!=null&&s.avatarUrl?(I(),Z(yC,{key:0,src:(i=n.$solid.user)==null?void 0:i.avatarUrl,alt:"",class:"absolute inset-0 size-full rounded-full"},null,8,["src"])):e.value?(I(),ae("span",AV,fe(e.value),1)):(I(),Z(y(xV),{key:2,class:"size-6 text-gray-500"}))])}}}),CV={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function $V(t,e){return I(),ae("svg",CV,e[0]||(e[0]=[L("path",{fill:"currentColor",d:"M9 2h9c1.1 0 2 .9 2 2v16c0 1.1-.9 2-2 2H9c-1.1 0-2-.9-2-2v-2h2v2h9V4H9v2H7V4c0-1.1.9-2 2-2"},null,-1),L("path",{fill:"currentColor",d:"M10.09 15.59L11.5 17l5-5l-5-5l-1.41 1.41L12.67 11H3v2h9.67z"},null,-1)]))}const kV=Qe({name:"ic-baseline-log-in",render:$V}),IV={key:2,class:"flex w-full justify-center gap-2"},bC=ue({__name:"SolidLogin",props:{class:{default:""},buttonClass:{},layout:{default:"horizontal"},noLoading:{type:Boolean},allowLegacyAuthenticator:{type:Boolean}},setup(t){const e={inrupt:"Log in using Inrupt's authentication library",legacy:"Log in using the legacy authentication library"},n=qi({url:ao(),authenticator:Wc()}),r=Object.keys(e),s=we(!1),i=we(!1),o=H(()=>!a.value||i.value),a=H(()=>gt.development&&(!n.url||n.url==="dev"||n.url.trim().length===0)),l=H(()=>dt("flex flex-col items-center gap-2 w-full md:w-auto",t.class)),u=H(()=>dt("w-full whitespace-nowrap",{"md:w-auto":t.layout==="horizontal"&&!n.authenticator},t.buttonClass));function c(f){return Fe(`solid.logIn.switchAuthenticator${f.charAt(0).toUpperCase()+f.slice(1)}`,e[f])}async function d(){if(t.noLoading){await ct.login(n.url,{authenticator:n.authenticator});return}await $t.loading(Fe("solid.loginOngoing","Logging in..."),ct.login(n.url))}return(f,p)=>{const h=$D("measure");return I(),Z(y(Ui),{form:y(n),class:De(l.value),onSubmit:d},{default:K(()=>[L("div",{class:De(["flex w-full flex-col items-center gap-2",{"md:flex-row":f.layout==="horizontal"&&!y(n).authenticator}])},[o.value?(I(),Z(y(As),{key:0,name:"url","aria-label":f.$td("solid.logIn.label","Login url"),placeholder:f.$td("solid.logIn.placeholder","https://me.solidcommunity.net"),class:"w-full md:min-w-96"},null,8,["aria-label","placeholder"])):ke("",!0),y(n).authenticator?(I(),Z(y(ru),{key:1,name:"authenticator",class:"w-full max-w-full md:min-w-96","label-class":"sr-only","options-class":"md:w-96 w-full max-w-[calc(100vw-4rem)]",label:f.$td("solid.logIn.switchAuthenticatorLabel","Authentication method"),options:y(r),"render-option":c},null,8,["label","options"])):ke("",!0),a.value&&!i.value?(I(),ae("div",IV,[N(y(rt),{variant:"secondary",class:"group gap-0",title:f.$td("solid.logIn.manualUrl","Enter url"),onClick:p[0]||(p[0]=g=>i.value=!0)},{default:K(()=>[N(y(kV),{class:"size-4"}),_g((I(),ae("span",{class:De(["overflow-hidden pl-1 whitespace-nowrap",{"opacity-0":!s.value,"w-0 transition-[width] md:group-hover:w-(--width)":s.value}])},[Ue(fe(f.$td("solid.logIn.manualUrl","Enter url")),1)],2)),[[h,()=>s.value=!0,void 0,{css:!0}]])]),_:1},8,["title"]),N(y(rt),{disabled:f.noLoading&&f.$solid.loginOngoing,submit:"",class:"whitespace-nowrap",onClick:p[1]||(p[1]=g=>y(n).url="dev")},{default:K(()=>[Ue(fe(f.$td("solid.logIn.dev","Log in to dev server")),1)]),_:1},8,["disabled"])])):(I(),Z(y(rt),{key:3,disabled:f.noLoading&&f.$solid.loginOngoing,submit:"",class:De(u.value)},{default:K(()=>[Ue(fe(f.$td("solid.logIn.submit","Log in")),1)]),_:1},8,["disabled","class"]))],2),f.allowLegacyAuthenticator&&o.value&&!y(n).authenticator?(I(),Z(y(go),{key:0,class:"text-sm font-normal text-gray-700",onClick:p[2]||(p[2]=g=>y(n).authenticator="inrupt")},{default:K(()=>[Ue(fe(f.$td("solid.logIn.switchAuthenticator","Can't log in? Try using a different authentication method")),1)]),_:1})):ke("",!0)]),_:1},8,["form","class"])}}}),RV={$solid:ct};function OV(t={}){return{async install(e){NO(),mV({...pV,...t.authenticators??{}}),bV(),hV(gC(t.defaultAuthenticator??"inrupt")),s4(n=>{if(n instanceof Zc)return n.description?`${n.message} (${n.description})`:n.message}),typeof t.autoReconnect=="boolean"&&(Dy.autoReconnect=t.autoReconnect,ct.hasPersistedState()||(ct.autoReconnect=t.autoReconnect)),t.onUserProfileLoaded&&He.on("solid:user-profile-loaded",([n,r])=>{var s;(s=t.onUserProfileLoaded)==null||s.call(t,n,r)}),await _o(e,RV)}}}var TV=Object.defineProperty,DV=(t,e,n)=>e in t?TV(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Zt=(t,e,n)=>DV(t,typeof e!="symbol"?e+"":e,n);const ah=new WeakMap;function Im(t){return Pd(Zs(t).map(e=>{const n=t.instance().requireRelation(e).relatedClass;return oa(n)?!1:n}))}function Zs(t){return ah.has(t)||ah.set(t,t.relations.filter(e=>jt.reservedRelations.includes(e)?!1:t.instance().requireRelation(e)instanceof B1)),ah.get(t)??[]}function wC(t){return Zs(t.static()).reduce((e,n)=>e.concat(t.getRelationModels(n)??[]),[])}function r_(t){const e=new Set,n=t.instance();e.add(t);for(const r of t.relations)t.reservedRelations.includes(r)||e.add(n.requireRelation(r).relatedClass);return[...e.values()]}function lo(t){return t.getRelatedModels().filter(e=>!er(e,U1)&&!er(e,Uo)&&!er(e,Bo)&&!er(e,cg)&&!er(e,pd)&&e.static()!==Ir)}function _C(t){if(t.isDirty())return!0;if(!(t instanceof Ir))return!1;const e=n=>{var r;return(r=t.getRelationModels(n))==null?void 0:r.some(s=>_C(s))};return Zs(t.static()).some(e)}async function Rm(t,e){const n=["authorizations","metadata","operations","tombstone"];let r;do{r=!1;const s=lo(t);for(const i of s)for(const o of i.static("relations"))if(!(n.includes(o)||i.isRelationLoaded(o)||i.getRelation(o)instanceof F1))try{await i.loadRelation(o),r=!0}catch(a){if(!e)throw a;e(a)}}while(r)}const PV=On(()=>gt.service("$cloud"));class MV{constructor(){Zt(this,"models",new Set),Zt(this,"promises",[])}push(e){this.models.add(e),this.syncAfter(pr({seconds:1}))}clear(e){if(!e){this.models=new Set;return}for(const n of e)this.models.delete(n)}async syncAfter(e){const n=typeof e=="function"?e():e;return this.promises.push(n),n.then(()=>Hs(this.promises,n)),this.promises.length===1&&this.schedule(),n}schedule(){Promise.all(this.promises).then(()=>pr()).then(()=>{if(this.promises.length!==0){this.schedule();return}const e=this.consume();e.length!==0&&PV.syncIfOnline(e)})}consume(){const e=[],n=new Set;for(const r of this.models)Ms(r)&&(this.models.delete(r),wC(r).forEach(s=>n.add(s)),e.push(r));for(const r of this.models)this.models.delete(r),!n.has(r)&&e.push(r);return e}}const ed=rs(MV),Ot=On(()=>gt.service("$cloud")),xC=new WeakMap,Py=new WeakMap,lh=new WeakMap;function SC(t,e){if(e??(e=new Set),!e.has(t)){e.add(t);for(const n of t.relations)SC(t.instance().requireRelation(n).relatedClass,e)}return e}function LV(t){const e=t.getRelatedModels().concat([t]);for(const n of e)n.cleanDirty(!0)}function NV(t){const e=lo(t).concat([t]);for(const n of e){if(!n.operations||n.operations.length===0)continue;const r=(n.operations??[]).filter(s=>!(s instanceof Ws)||!n.ignoreRdfPropertyHistory(s.property,!0));if(!r.some(s=>!s.isInception(n))){n.setRelationModels("operations",[]);continue}n.setRelationModels("operations",r)}}async function s_(t){Ot.setState({localModelUpdates:{...Ot.localModelUpdates,[t.url]:1}}),HV(t.static())&&await Om(t.static(),Zn(t.url)),Ot.autoPush&&Ot.ready&&!Ot.syncing&&ed.push(t)}function FV(t,e){var n;const r=Or(Ir),s=(n=Ot.registeredModels.find(({modelClass:i})=>i===t.static()))==null?void 0:n.path;return new r({url:fc(CC(t,e).static(),s)})}async function Om(t,e){var n;(n=Ot.modelCollections[t.modelName])!=null&&n.includes(e)||(Ot.setState("modelCollections",{...Ot.modelCollections,[t.modelName]:(Ot.modelCollections[t.modelName]??[]).concat(e)}),await $i(t,e))}async function i_(t){if(jV(t))return;const e=Ot.localModelUpdates[t.url]??0;Ot.setState({localModelUpdates:{...Ot.localModelUpdates,[t.url]:t.isSoftDeleted()?1:e+1}}),await Ot.getDocumentsCache().forget(Zn(t.requireDocumentUrl()),t.requireDocumentUrl()),Ot.autoPush&&Ot.ready&&!Ot.syncing&&ed.push(t)}function Tm(t,e){const n={},r=Array.from(t);for(const[s,i]of Object.entries(Ot.localModelUpdates)){const o=LS(s);(t.has(s)||r.some(a=>a.endsWith("/")&&s.startsWith(a)))&&!(e!=null&&e.has(o))||(n[s]=i)}Ot.setState({localModelUpdates:n})}function EC(t,e={}){const n=Array.from(new Set(lo(t).map(r=>r.static()))).map(r=>[r,Or(r)]);return Hn(t.clone({constructors:n}),r=>{NV(r),e.clean&&LV(r)})}function AC(t){return t.clone({constructors:il(t)})}async function o_(t,e,n){const r=Or(Fs),s=e.map(a=>a.url),i=t.filter(a=>!s.includes(a.url)).map(a=>a.requireDocumentUrl()).filter(a=>!n.has(a)),o=await r.all({$in:i});return e.concat(o)}function jV(t){return!t.getDocumentModels().flatMap(e=>{var n;return((n=e.operations)==null?void 0:n.map(r=>[e,r]))??[]}).some(([e,n])=>{var r,s;return n.date.getTime()!==((s=(r=e.metadata)==null?void 0:r.updatedAt)==null?void 0:s.getTime())?!1:n instanceof Ws?!e.ignoreRdfPropertyHistory(n.property,!0):!0})}function il(t){const e=t.static();if(!lh.has(e)){const n=Array.from(SC(e)).map(r=>$C(r)?[r,WV(r)]:[r,Or(r)]).map(([r,s])=>[[r,s],[s,r]]).flat();for(const r of n)lh.set(r[0],n)}return On(lh.get(e))}function CC(t,e){return e.get(t.url)??AC(t)}function Dm(){return[...Ot.registeredModels].map(({modelClass:t})=>Oa(t,{includeSoftDeleted:!0})).flat()}function qV(){return Ot.schemaMigrations}function UV(){Ot.schemaMigrations.clear()}function a_(t){return Ot.schemaMigrations.get(t)}function Or(t){return xC.get(t)??KV(t)}function fc(t,e){const n=ct.requireUser().storageUrls[0],r=oa(t)&&Zs(t).map(s=>{const i=t.instance().requireRelation(s).relatedClass;return oa(i)?null:i}).filter(Boolean)[0];return e??(e=`/${(r||t).modelName.toLowerCase()}s/`),U2((e.startsWith("/")?n.slice(0,-1):n)+e)}function BV(t,e){return e.get(t.url)??EC(t)}function zV(t){for(const{modelClass:e}of Ot.registeredModels)if(Oa(e).some(n=>n.url===t.url))return!0;return!1}function xl(t){return $C(t.static())}function $C(t){return Py.has(t)}function VV(t){return!xl(t)}function HV(t){return Ot.registeredModels.some(({modelClass:e})=>e===t)}function KV(t){var e;const n=t,r=(i,o)=>{i.timestamps=n.timestamps,i.history=n.history,o(),i.timestamps=[],i.history=!1},s=(e=class extends n{initialize(i,o){r(this._proxy.static(),()=>super.initialize(i,o))}initializeRelations(){super.initializeRelations();for(const i of Object.values(this._relations))i.relatedClass=Or(i.relatedClass)}fixMalformedAttributes(){r(this.static(),()=>super.fixMalformedAttributes())}},Zt(e,"timestamps",!1),Zt(e,"history",!1),e);return n.on("schema-updated",async i=>{await s.updateSchema({...i,timestamps:!1,history:!1})}),t.ensureBooted(),Wm({[`Remote${t.modelName}`]:s}),gt.service("$cloud")&&Ot.getEngine()&&s.setEngine(Ot.requireEngine()),xC.set(n,s),Py.set(s,n),s}function WV(t){return Py.get(t)??Wt(`Couldn't find local class for ${t.modelName}`)}class GV extends gy{constructor(){super(...arguments),Zt(this,"urlMigrations",[]),Zt(this,"collectionMigrations",[])}migrateUrl(e,n,r){this.urlMigrations.push({modelClass:e,local:n,remote:r})}migrateCollection(e,n,r){this.collectionMigrations.push({modelClass:e,local:n,remote:r})}async run(){const e=ad(),n=await e.getCollections(),r=new Set;for(const s of n){const i=await e.readMany(s);for(const[o,a]of Object.entries(i)){const l=this.replaceUrl(o);await e.create(Zn(l),this.replaceDocumentUrls(a),l),await e.delete(s,o)}}for(const{modelClass:s,remote:i}of this.urlMigrations)$i(s,Zn(i));for(const{modelClass:s,local:i,remote:o}of this.collectionMigrations){const a=Object.assign({},ct.collections),l=(ct.collections[s.modelName]??[]).filter(u=>!i.startsWith(u));vw(s,i),$i(s,o);for(const u of ct.collections[s.modelName]??[]){const c=this.replaceUrl(u);c!==u&&(vw(s,u),$i(s,c))}ct.collections=a,n.filter(u=>i.startsWith(u)).forEach(u=>r.add(u)),l.length>0?a[s.modelName]=l:delete a[s.modelName]}await e.dropCollections(Array.from(r))}replaceDocumentUrls(e){for(const[n,r]of Object.entries(e)){if(n==="@id"&&typeof r=="string"){e[n]=this.replaceUrl(r);continue}typeof r!="object"||r===null||(e[n]=this.replaceDocumentUrls(r))}return e}replaceUrl(e){for(const{local:n,remote:r}of this.urlMigrations)if(e.startsWith(n))return e.replace(n,r);for(const{local:n,remote:r}of this.collectionMigrations)if(e.startsWith(n))return e.replace(n,r);return e}}function JV(t){const e={};return async()=>("value"in e||(e.value=await t()),e.value)}class kC{async loadContainedModels(e,n={}){if(VV(e)){const c=[];for(const d of Zs(e.static())){const f=await e.loadRelationIfUnloaded(d)??[];c.push(...Yl(f))}return c}const r={},s=[],i=d0(e.resourceUrls,10),o=i.flat().map(c=>({documentUrl:c,completed:!1})),a=wr(o,"documentUrl"),l=n.updateProgress??(c=>Promise.resolve(c==null?void 0:c()));n.status&&(n.status.children=o);for(const c of i)await Promise.all(c.map(async d=>{var f;if(e.resources.some(g=>g.url===d&&g.types.some(w=>w.startsWith("http://www.w3.org/ns/iana/media-types/image/"))))return;const{children:p,tombstones:h}=await this.loadDocumentChildren(e,d,n);s.push(...h);for(const[g,w]of Object.entries(p))(r[g]??(r[g]=[])).push(...w);d.endsWith("/")||(await l(()=>{On(a.get(d)).completed=!0}),await((f=n.onDocumentLoaded)==null?void 0:f.call(n)))}));for(const[c,d]of Object.entries(r))e.setRelationModels(c,d);const u=n.ignoreTombstones?Object.values(r).flat():Object.values(r).flat().concat(s);return await l(()=>{n.status&&(n.status.children=u.map(c=>On(a.get(c.requireDocumentUrl()))))}),u}async loadContainedDocuments(e,n={}){if(!xl(e))throw Error("Cannot get contained models from local model");const r={},s=e.requireEngine(),i=d0(e.resourceUrls,10),o=i.flat().map(u=>({documentUrl:u,completed:!1})),a=wr(o,"documentUrl"),l=n.updateProgress??(u=>Promise.resolve(u==null?void 0:u()));n.status&&(n.status.children=o);for(const u of i)await Promise.all(u.map(async c=>{var d,f,p;if(!c||c.endsWith("/")||e.resources.some(g=>g.url===c&&g.types.some(w=>w.startsWith("http://www.w3.org/ns/iana/media-types/image/")))){await l(()=>{On(a.get(c)).completed=!0});return}const h=e.documents.find(({url:g})=>g===c);try{r[c]=await s.readOne(e.url,c)}catch(g){if(!n.onDocumentError)throw g;await((d=n.onDocumentError)==null?void 0:d.call(n,g))}h&&await((f=n.onDocumentRead)==null?void 0:f.call(n,h)),await l(()=>{On(a.get(c)).completed=!0}),await((p=n.onDocumentLoaded)==null?void 0:p.call(n))}));return r}async loadDocumentChildren(e,n,r={}){return this.loadDocumentChildrenFromRemote(e,n,r)}async loadDocumentChildrenFromRemote(e,n,r={}){const s={},i=[],o=JV(async()=>{var l;try{const u=e.documents.find(f=>f.url===n),c=await e.requireEngine().readOne(Zn(n),n),d=await Fs.createManyFromEngineDocuments({[n]:c});return i.push(...d),u&&((l=r.onDocumentRead)==null||l.call(r,u)),c}catch(u){if(er(u,zr))return null;if(!r.onDocumentError)throw u;return r.onDocumentError(u),null}});let a=!1;for(const l of Zs(e.static())){const u=e.requireRelation(l);if(u.loaded){s[l]=u.getLoadedModels();continue}const c=await o();if(c)try{const d=await u.relatedClass.createManyFromEngineDocuments({[n]:c});s[l]=d,a||(a=d.length>0)}catch(d){if(!r.onDocumentError)throw d;r.onDocumentError(d)}}if(!a&&r.onDocumentIgnored){const l=e.documents.find(u=>u.url===n);l&&await r.onDocumentIgnored(l)}return{children:s,tombstones:i}}}const el=new WeakMap;class IC{async loadTypeIndex(e={}){const n=ct.requireUser();return(e.fresh||!el.has(n))&&el.set(n,await ct.findPrivateTypeIndex({fresh:e.fresh})),e.create&&!el.get(n)&&el.set(n,await ct.findOrCreatePrivateTypeIndex()),el.get(n)??null}}class RC{async indexLocalModels(e){for(const n of e)await this.addLocalModel(n)}async addLocalModel(e){if(!this.localModels.hasKey(e.url)){this.localModels.add(e),await Rm(e);for(const n of lo(e))await this.addLocalModel(n)}}}const YV=gy;let OC=class TC extends TS(YV,[kC,IC,RC]){constructor(){super(),Zt(this,"_models"),this.localModels=wr([],"url")}static restore(e){return Hn(new TC,n=>{n.status=e})}get models(){return this._models}set models(e){if(!e){delete this._models,this.localModels=wr([],"url");return}const n=r2(this.status.children??[],"modelUrl");this._models=e,this.localModels=wr([],"url"),this.status.children=e.map(r=>n[r.url]??{modelUrl:r.url,completed:!1})}async run(){if(!this.models)throw new Error("Cant start migration without models");await this.indexLocalModels(this.models);const e=this.status.children??[],n=await this.loadTypeIndex();for(const r of e){const s=this.models.find(({url:i})=>r.modelUrl===i);!s||r.completed||(await this.migrateRegisteredModel(s,r,n),await this.updateProgress(()=>r.completed=!0))}for(const[r,s]of qV())await r.updateSchema(s);UV()}async migrateRegisteredModel(e,n,r){if(await this.migrate(e,n),!Ms(e))return;const s=Im(e.static()),i=r==null?void 0:r.registrations.find(({instanceContainer:o})=>o===e.url);!r||!i||s.length===0||(i.setAttribute("forClass",s.map(o=>{var a;return((a=a_(o))==null?void 0:a.rdfsClasses)??o.rdfsClass}).flat()),await r.save())}async migrate(e,n){this.assertNotCancelled(),await this.migrateChildren(e,n);const r=a_(e.static());if(!r)return;const s=await Or(e.static()).find(e.url),i=await(s==null?void 0:s.migrateSchema(r));await e.migrateSchema(r,{mintOperationUrl:o=>{var a,l;return(l=(a=i==null?void 0:i.operations)==null?void 0:a.find(u=>!er(o,Ws)||!er(u,Ws)?!1:o.property===u.property&&o.date.getTime()===u.date.getTime()))==null?void 0:l.url}})}async migrateChildren(e,n){if(!Ms(e))return;const r=await this.loadContainedModels(e,{ignoreTombstones:!0});n.children??(n.children=r.map(s=>({modelUrl:s.url,completed:!1})));for(const s of n.children){const i=r.find(({url:o})=>s.modelUrl===o);!i||s.completed||(await this.migrate(i,s),await this.updateProgress(()=>s.completed=!0))}}};const li=On(()=>gt.service("$cloud")),XV=gy;function QV(t){return!!t&&"root"in t}class ZV extends TS(XV,[kC,IC,RC]){constructor(e){super(),Zt(this,"documentsWithErrors"),Zt(this,"models"),Zt(this,"dirtyRemoteModels"),Zt(this,"rootLocalModels"),Zt(this,"tombstones"),Zt(this,"syncedModelUrls"),Zt(this,"documentsModifiedAt"),Zt(this,"screenLock",null),Zt(this,"localModels"),this.documentsWithErrors=new Set,this.models=e,this.rootLocalModels=[],this.localModels=wr([],"url"),this.tombstones=wr([],"resourceUrl"),this.syncedModelUrls=new Set,this.documentsModifiedAt={}}async run(){const e=ct.requireAuthenticator().engine,n=(s,{headers:i},o)=>{const a=(i==null?void 0:i.get("last-modified"))??o;!a||s.endsWith("/")||(this.documentsModifiedAt[s]=new Date(a))},r=e.listeners.add({onDocumentRead:(s,i)=>n(s,i),onDocumentUpdated:(s,i)=>n(s,i,new Date)});try{this.lockScreen(),this.rootLocalModels=this.models??Dm(),e.setConfig({cachesDocuments:!0,persistentCache:li.getDocumentsCache()}),await this.indexLocalModels(this.rootLocalModels),await this.pullChanges(),await this.pushChanges()}finally{e.clearCache(),e.setConfig({cachesDocuments:!1,persistentCache:void 0}),this.releaseScreen(),r()}}lockScreen(){const e=navigator;if(e.wakeLock)try{this.screenLock=e.wakeLock.request("screen").catch(n=>{Mi.reportDevelopmentError(n,"Could not request screen wake lock")})}catch(n){Mi.reportDevelopmentError(n,"Could not request screen wake lock")}}releaseScreen(){this.screenLock&&(this.screenLock.then(e=>e==null?void 0:e.release()),this.screenLock=null)}getInitialStatus(){return{root:!0,completed:!1,children:[{completed:!1},{completed:!1}]}}calculateCurrentProgress(e){return e??(e=this.status),QV(e)?OS(this.calculateCurrentProgress(e.children[0])*.9+this.calculateCurrentProgress(e.children[1])*.1,2):super.calculateCurrentProgress(e)}async pullChanges(){const e=this.models?await this.fetchRemoteModelsForLocal(this.models):await this.fetchRemoteModels(),n=wr(e,r=>r instanceof Fs?r.resourceUrl:r.url);this.dirtyRemoteModels=await this.synchronizeModels(n),await this.updateProgress(r=>r.children[0].completed=!0)}async pushChanges(){const e=new Set(this.localModels.getItems().map(o=>o.getDocumentUrl())),n=this.dirtyRemoteModels??[],r=this.status.children[1].children=n.map(()=>({completed:!1}));for(let o=0;o<n.length;o++){const a=n[o],l=r[o];if(a.isSoftDeleted()){a.enableHistory(),a.enableTombstone(),await a.forceDelete(),await this.updateProgress(()=>l.completed=!0),this.syncedModelUrls.add(a.url??a.getDeletedPrimaryKey());continue}await this.saveModelAndRelated(a,l),await this.updateTypeRegistrations(a),await this.updateProgress(()=>l.completed=!0)}const s=li.getDocumentsCache(),i=wr(this.tombstones.getItems(),o=>o.requireDocumentUrl());for(const[o,a]of Object.entries(this.documentsModifiedAt)){if(i.hasKey(o)){const l=i.require(o);await s.remember(Zn(o),o,a,{tombstone:{url:l.url,resourceUrl:l.resourceUrl}});continue}if(e.has(o)){await s.remember(Zn(o),o,a);continue}}Tm(this.syncedModelUrls,this.documentsWithErrors),await this.updateProgress(o=>o.children[1].completed=!0)}async fetchRemoteModels(){var e,n,r;const s=this.status.children[0],i=await this.loadTypeIndex({fresh:!0});if(!i)return[];const o=[],a=this.getTypeRegistrations(i);s.children=a.map(()=>({completed:!1}));for(let l=0;l<a.length;l++){const u=On((e=s.children)==null?void 0:e[l]),{registration:c,registeredModel:d}=On(a[l]),f=Or(d.modelClass);if(!c.instanceContainer)continue;if((n=li.rootModelCollections)[r=d.modelClass.modelName]??(n[r]=c.instanceContainer),oa(f)){await Om(d.modelClass,Zn(c.instanceContainer));const h=await f.find(c.instanceContainer);h&&(await this.loadChildren(h,u),o.push(h)),await this.updateProgress(()=>u.completed=!0);continue}const p=await this.fetchRemoteModelsFromContainer(u,d.modelClass,f,c.instanceContainer);o.push(...p),await this.updateProgress(()=>u.completed=!0)}for(const l of o)await Rm(l,u=>this.handleDocumentError(u));return o_(this.rootLocalModels,o,this.documentsWithErrors)}async fetchRemoteModelsFromContainer(e,n,r,s){var i;const o=await Or(Ir).find(s);if(!o)return[];e.children=o.resourceUrls.map(()=>({completed:!1}));const a=await this.loadContainedDocuments(o,{status:e,updateProgress:f=>this.updateProgress(f),onDocumentError:f=>this.handleDocumentError(f),onDocumentRead:f=>{f.url.endsWith("/")||!f.updatedAt||f.url in this.documentsModifiedAt||(this.documentsModifiedAt[f.url]=f.updatedAt)},onDocumentLoaded:async()=>{this.assertNotCancelled(),await this.updateProgress()}}),l=await r.createManyFromEngineDocuments(a),u=await Fs.createManyFromEngineDocuments(a),c=li.getDocumentsCache(),d=new Set(l.map(f=>f.requireDocumentUrl()));for(const f of u)this.tombstones.add(f),d.add(f.requireDocumentUrl());for(const f of o.documents){if(!f.updatedAt||d.has(f.url))continue;await c.remember(Zn(f.url),f.url,f.updatedAt);const p=ad();try{await p.readOne(Zn(f.url),f.url)}catch(h){if(!er(h,zr))throw h;await p.create(Zn(f.url),{},f.url)}}l.length>0&&await Om(n,s);for(let f=0;f<o.resourceUrls.length;f++){const p=o.resourceUrls[f];if(!(p!=null&&p.endsWith("/")))continue;const h=await this.fetchRemoteModelsFromContainer(On((i=e.children)==null?void 0:i[f]),n,r,p);l.push(...h),await this.updateProgress()}return await this.updateProgress(()=>e.completed=!0),l}async fetchRemoteModelsForLocal(e){const n=[],r=this.status.children[0].children=e.map(()=>({completed:!1}));for(let s=0;s<e.length;s++)await this.ignoringDocumentErrors(async()=>{const i=e[s],o=r[s],a=await Or(i.static()).find(i.url);if(!a){await this.updateProgress(()=>o.completed=!0);return}Ms(a)&&await this.loadChildren(a,o),n.push(a),await this.updateProgress(()=>o.completed=!0)});for(const s of n)await Rm(s,i=>this.handleDocumentError(i));return o_(e,n,this.documentsWithErrors)}getTypeRegistrations(e){const n=new Set,r=[...li.registeredModels].map(({modelClass:o})=>{const a=oa(o)?Im(o):[];return{modelClass:o,rdfsClasses:a.length>0?a.map(l=>l.rdfsClasses).flat():o.rdfsClasses}}),s=e.registrations.map(o=>{const a=r.find(({rdfsClasses:l})=>!!o.instanceContainer&&l.some(u=>o.forClass.includes(u)));return!a||!o.instanceContainer||n.has(o.instanceContainer)?null:(n.add(o.instanceContainer),{registration:o,registeredModel:a})}).filter(o=>!!o),i=s.map(({registration:o})=>o.instanceContainer);return s.filter(({registration:o})=>!i.some(a=>{var l;return a&&a!==o.instanceContainer&&((l=o.instanceContainer)==null?void 0:l.startsWith(a))}))}async updateTypeRegistrations(e){if(!zV(e))return;const n=Ms(e)?e:FV(e,this.localModels),r=Ms(e)?Im(e.static()):[e.static()];if(r.length===0)return;const s=await this.loadTypeIndex({create:!0});s.registrations.some(i=>i.instanceContainer&&e.url.startsWith(i.instanceContainer))||await n.register(s,r)}async loadChildren(e,n){var r,s;if(this.assertNotCancelled(),!Ms(e))return;const i=await this.loadContainedModels(e,{status:n,updateProgress:o=>this.updateProgress(o),onDocumentError:o=>this.handleDocumentError(o),onDocumentRead:o=>{o.url.endsWith("/")||!o.updatedAt||o.url in this.documentsModifiedAt||(this.documentsModifiedAt[o.url]=o.updatedAt)},onDocumentLoaded:async()=>{this.assertNotCancelled(),await this.updateProgress()},onDocumentIgnored:async o=>{o.updatedAt&&await li.getDocumentsCache().remember(Zn(o.url),o.url,o.updatedAt)}});for(let o=0;o<i.length;o++){const a=i[o];if(a instanceof Fs){this.tombstones.add(a);continue}if(this.tombstones.hasKey(a.url)){await this.deleteChild(e,a);continue}await this.loadChildren(a,(r=n==null?void 0:n.children)==null?void 0:r[o]),(s=n==null?void 0:n.children)!=null&&s[o]&&await this.updateProgress(()=>{var l;return On((l=n.children)==null?void 0:l[o]).completed=!0})}}async deleteChild(e,n){for(const r of e.static("relations")){const s=e.requireRelation(r);if(s.related){if(Array.isArray(s.related)){s.related=s.related.filter(i=>i!==n);continue}if(s.related===n){s.related=null;continue}}}await n.forceDelete()}async saveModelAndRelated(e,n,r){if(this.assertNotCancelled(),r??(r=new Set),r.has(e))return;if(r.add(e),xl(e)&&e.isSoftDeleted()){e.enableHistory(),e.enableTombstone(),await e.forceDelete();return}if(e.getDocumentUrl()&&this.documentsWithErrors.has(e.requireDocumentUrl()))return;const s=e.isDirty();if(await e.save(),(s||xl(e))&&this.syncedModelUrls.add(e.url),xl(e)){const a=e.requireDocumentUrl(),l=this.documentsModifiedAt[a];l&&(await li.getDocumentsCache().remember(Zn(a),a,l),delete this.documentsModifiedAt[a])}const i=Og(lo(e),e),o=n?i.map(()=>({completed:!1})):[];n&&(n.children=o);for(let a=0;a<i.length;a++){const l=i[a],u=o[a];await this.saveModelAndRelated(l,u,r),u&&await this.updateProgress(()=>u.completed=!0)}}async synchronizeModels(e){const n=new Set,r=new Set;for(const i of e.items()){if(i instanceof Fs){const a=this.localModels.get(i.resourceUrl);a&&(await a.forceDelete(),r.add(a));continue}const o=CC(i,this.localModels);o.exists()||this.syncedModelUrls.add(o.url),await this.loadChildren(o),await jt.synchronize(o,i,{constructors:il(o)}),await this.reconcileInconsistencies(o,i),await this.saveModelAndRelated(o),await this.addLocalModel(o),this.rootLocalModels.includes(o)||this.rootLocalModels.push(o),n.add(o.url)}for(const i of this.rootLocalModels){if(r.has(i)||n.has(i.url))continue;await this.loadChildren(i);const o=BV(i,e);await jt.synchronize(i,o,{constructors:il(i)}),e.add(o)}const s=[];for(const i of e.getItems()){if(_C(i)){s.push(i);continue}await this.rememberModelDocuments(i)}return s}async reconcileInconsistencies(e,n,r){e.rebuildAttributesFromHistory(),e.setAttributes(n.getAttributes(!0)),r??(r=new Set),r.add(e);for(const i of Zs(e.static()))await this.synchronizeContainerDocuments(e.requireRelation(i),n.requireRelation(i));const s=wr(lo(n),"url");for(const i of lo(e))r.has(i)||!i.isRelationLoaded("operations")||!s.hasKey(i.url)||await this.reconcileInconsistencies(i,s.require(i.url),r);e.isDirty()&&await jt.synchronize(e,n,{constructors:il(e)})}async synchronizeContainerDocuments(e,n){const r=wr(e.related??[],"url"),s=wr(n.related??[],"url"),i=r.getKeys().filter(a=>!s.hasKey(a)&&!s.hasKey(encodeURI(a))),o=s.getKeys().filter(a=>!r.hasKey(a)&&!r.hasKey(encodeURI(a)));for(const a of i){const l=r.require(a),u=EC(l);n.addRelated(u),s.add(u)}for(const a of o){const l=s.require(a),u=AC(l);e.addRelated(u),r.add(u),this.syncedModelUrls.add(u.url)}for(const a of r.items()){const l=s.require(a.url);await jt.synchronize(a,l,{constructors:il(a)}),await this.saveModelAndRelated(a)}}async rememberModelDocuments(e){if(this.syncedModelUrls.add(e.url),!Ms(e)){const r=e.requireDocumentUrl(),s=this.documentsModifiedAt[r];s&&(await li.getDocumentsCache().remember(Zn(r),r,s),delete this.documentsModifiedAt[r]);return}const n=Zs(e.static()).map(r=>e.getRelationModels(r)??[]).flat();for(const r of n)await this.rememberModelDocuments(r)}async ignoringDocumentErrors(e){try{await e()}catch(n){this.handleDocumentError(n)}}handleDocumentError(e){if(er(e,v1)){console.warn(e.message),e.documentUrl&&this.documentsWithErrors.add(e.documentUrl);return}if(er(e,X_)){console.warn(e.message);const n=e.attributes[en(e.modelName).primaryKey],r=n&&LS(rr(n));r&&this.documentsWithErrors.add(r);return}throw e}}const Ut={Disconnected:"disconnected",Offline:"offline",Online:"online",Syncing:"syncing",Migrating:"migrating"},DC={manualSetup:!1},e7=ss({name:"cloud",persist:["localModelUpdates","migrationDismissed","migrationJob","modelCollections","rootModelCollections","pollingEnabled","pollingMinutes","ready","startupSync"],initialState:()=>({autoPush:!0,localModelUpdates:{},migrationDismissed:!1,migrationJob:null,migrationPostponed:!1,modelCollections:{},rootModelCollections:{},pollingEnabled:!0,pollingMinutes:10,ready:!1,manualSetup:DC.manualSetup,registeredModels:[],schemaMigrations:new Map,setupDismissed:!1,setupOngoing:!1,startupSync:!0,status:Ut.Disconnected,syncError:null,syncJob:null}),serialize:t=>{var e;return fw(t,{migrationJob:(e=t.migrationJob)==null?void 0:e.serialize()})},restore:t=>fw(t,{migrationJob:t.migrationJob&&OC.restore(t.migrationJob)}),watch:{migrationJob(t){t==null||t.listeners.add({onUpdated:()=>this.updatePersistedState("migrationJob")})}},computed:{disconnected:({status:t})=>t===Ut.Disconnected,online:({status:t})=>t===Ut.Online,offline:({status:t})=>t===Ut.Offline,syncing:({status:t})=>t===Ut.Syncing,migrating:({status:t})=>t===Ut.Migrating,localChanges({localModelUpdates:t}){return Object.values(t).reduce((e,n)=>e+n,0)},dirty(){return this.localChanges>0},migrationStarted({migrationJob:t}){return!!t},migrationDisabledReason({status:t,ready:e}){return ct.isLoggedIn()?e?t===Ut.Syncing||t===Ut.Migrating?Fe("cloud.migrationNotSyncing","Wait for syncing to finish before starting the migration"):this.online?null:Fe("cloud.migrationNotOnline","You need to be online in order to start the migration"):Fe("cloud.migrationNotReady","You need to backup your data before starting the migration"):Fe("cloud.migrationNotLoggedIn","You need to reconnect before starting the migration")}}});class t7 extends e7{constructor(){super(...arguments),Zt(this,"asyncLock",new _2),Zt(this,"engine",null),Zt(this,"pollingInterval",null),Zt(this,"documentsCache",null)}async whenReady(e){return this.ready?e():new Promise(n=>{const r=()=>n(e());He.once("cloud:ready",r)})}async setup(e){this.setupOngoing=!0;try{await this.backup(e),await this.setReady(!0),await this.sync()}finally{this.setupOngoing=!1}}getEngine(){return this.engine}requireEngine(){return this.engine??Wt("Could not get required Engine")}dismissSetup(){this.setupDismissed=!0}dismissMigration(){this.migrationDismissed=!0}postponeMigration(){this.migrationPostponed=!0}async syncIfOnline(e={}){this.online&&await this.sync(e)}async sync(e={}){const n=Tc(e)?{models:e}:e instanceof jt?{model:e}:e;!ct.isLoggedIn()||!this.ready||!this.online||await this.asyncLock.run(async()=>{let r=n.model?[n.model]:n.models;const s=Date.now();this.syncError=null,this.status=Ut.Syncing,ed.clear(r);try{await He.emit("cloud:sync-started",r),n.refreshUserProfile&&await ct.refreshUserProfile();const i=n.syncDirty??!0;let o=0;do{if(this.syncJob=new ZV(r),this.syncJob.listeners.add(n),await Xp(this.syncJob),this.syncJob.cancelled)return;o++,r=this.getDirtyLocalModels().filter(a=>{var l;return!((l=this.syncJob)!=null&&l.documentsWithErrors.has(a.requireDocumentUrl()))})}while(i&&r.length>0&&o<3);Tl("unit")||await pr({milliseconds:Math.max(500,1e3-(Date.now()-s))}),this.syncJob=null}catch(i){if(Tl())throw i;this.syncJob=null,this.syncError=i,await Mi.report(i,Fe("cloud.syncFailed","Sync failed"))}finally{this.status=Ut.Online,await He.emit("cloud:sync-completed",r)}})}shouldMigrate(){return this.schemaMigrations.size>0}async migrate(e){if(!this.online||!ct.isLoggedIn()||!this.ready)throw new Error("Data cannot be migrated at the moment");this.shouldMigrate()&&await this.asyncLock.run(async()=>{var n;this.status=Ut.Migrating,this.migrationJob??(this.migrationJob=new OC);const r=Date.now(),s=[],i=(n=this.migrationJob).models??(n.models=Dm());ed.clear(i);try{if(e&&s.push(this.migrationJob.listeners.add(e)),await He.emit("cloud:migration-started",i),await Xp(this.migrationJob),this.migrationJob.cancelled){await He.emit("cloud:migration-cancelled",i);return}this.migrationJob=null,this.migrationDismissed=!1,this.migrationPostponed=!1,await pr({milliseconds:Math.max(0,1e3-(Date.now()-r))}),await He.emit("cloud:migration-completed",i)}catch(o){await Mi.report(o,Fe("cloud.migrationFailed","Migration failed"))}finally{this.status=Ut.Online,s.forEach(o=>o==null?void 0:o())}})}async register(e,n={}){if(this.registeredModels.find(s=>e===s.modelClass))return;const r=this.engine;r&&r_(e).forEach(s=>Or(s).setEngine(r)),this.whenReady(async()=>{const s=this.rootModelCollections[e.modelName];e.useSoftDeletes(!0),await e.exclusive(async()=>e.collection=s??fc(e,n.path))}),await vy(e,{created:s=>this.ready&&s_(s),updated:s=>this.ready&&i_(s),deleted:s=>this.ready&&Tm(new Set([s.url??s.getDeletedPrimaryKey()]))}),oa(e)&&Zs(e).forEach(s=>{const i=e.instance().requireRelation(s).relatedClass;i.on("created",o=>this.ready&&s_(o)),i.on("updated",o=>this.ready&&i_(o)),i.on("deleted",o=>this.ready&&Tm(new Set([o.url??o.getDeletedPrimaryKey()])))}),this.registeredModels.push({modelClass:e,path:n.path});for(const s of this.modelCollections[e.modelName]??[])await $i(e,s)}registerSchemaMigration(e,n){this.schemaMigrations.set(e,n)}requireRemoteCollection(e){for(const n of this.registeredModels)if(e===n.modelClass)return fc(n.modelClass,n.path);throw new Error(`Failed resolving remote collection for '${e.modelName}' model`)}getDocumentsCache(){return this.documentsCache||(this.documentsCache=new FO(cy(),ad())),this.documentsCache}async boot(){await ct.booted,ct.isLoggedIn()&&this.login(ct.authenticator),He.on("auth:login",({authenticator:e})=>this.login(e)),He.on("auth:logout",()=>this.logout()),He.on("purge-storage",()=>this.getDocumentsCache().clear()),He.once("application-ready",()=>this.onApplicationReady()),He.once("application-mounted",()=>this.onApplicationMounted()),Nt(()=>{if(this.pollingInterval&&clearInterval(this.pollingInterval),!this.pollingEnabled||this.migrationJob){this.pollingInterval=null;return}this.pollingInterval=setInterval(()=>this.sync(),this.pollingMinutes*60*1e3)}),this.watchNetworkStatus(),await this.bustDocumentsCache(),await this.registerModels()}getDirtyLocalModels(){const e=Object.keys(this.localModelUpdates),n=[];for(const{modelClass:r}of this.registeredModels)for(const s of Oa(r,{includeSoftDeleted:!0}))n.push(...this.getModelsIn(e,s));return n}getModelsIn(e,n){const r=[];return e.includes(n.url)&&r.push(n),Ms(n)&&r.push(...wC(n).map(s=>this.getModelsIn(e,s)).flat()),r}async setReady(e){this.ready||!e||(await He.emit("cloud:ready"),this.ready=!0)}async backup(e){await He.emit("cloud:backup-started"),e??(e=new WeakMap);const n=new GV;for(const{modelClass:r,path:s}of this.registeredModels){for(const[a,l]of Object.entries(e.get(r)??{}))n.migrateUrl(r,a,l);const i=r.instance().getDefaultCollection(),o=fc(r,s);await r.exclusive(async()=>r.collection=o),n.migrateCollection(r,i,o)}await Xp(n),await He.emit("cloud:backup-completed")}async onApplicationReady(){this.ready||!ct.isLoggedIn()||await this.setReady(!Dm().some(e=>e.url.startsWith("solid://")))}async onApplicationMounted(){if(ct.isLoggedIn()&&!this.ready&&!this.manualSetup){await this.setup();return}this.syncOnStartup()&&await this.sync()}login(e){const n=[...this.registeredModels].map(({modelClass:r})=>r_(r)).flat().concat([Fs]);this.status=Ut.Online,this.engine=e.engine,Or(Ir).setEngine(this.engine);for(const r of n)Or(r).setEngine(this.engine)}async logout(){this.setState({autoPush:!0,localModelUpdates:{},migrationDismissed:!1,migrationJob:null,migrationPostponed:!1,modelCollections:{},rootModelCollections:{},pollingEnabled:!0,pollingMinutes:10,ready:!1,schemaMigrations:new Map,setupDismissed:!1,setupOngoing:!1,startupSync:!0,status:Ut.Disconnected,syncError:null,syncJob:null}),await this.getDocumentsCache().clear()}watchNetworkStatus(){globalThis.addEventListener("online",()=>{this.status===Ut.Offline&&(this.status=Ut.Online)}),globalThis.addEventListener("offline",()=>{this.status===Ut.Online&&(this.status=Ut.Offline)})}syncOnStartup(){return zo("startupSync")?Pc(yl("startupSync")):this.migrationJob?!1:this.startupSync}async bustDocumentsCache(){!zo("bustDocumentsCache")||!Pc(yl("bustDocumentsCache"))||await this.getDocumentsCache().clear()}async registerModels(){const e=e1();for(const n of e.values())!z1(n)||!n.cloud||await this.register(n,typeof n.cloud=="boolean"?{}:n.cloud)}}const Sr=rs(t7),n7={viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"};function r7(t,e){return I(),ae("svg",n7,e[0]||(e[0]=[L("path",{fill:"currentColor",d:"m6 2l2-2h4l2 2h4v2H2V2zM3 6h14l-1 14H4zm5 2v10h1V8zm3 0v10h1V8z"},null,-1)]))}const s7=Qe({name:"zondicons-trash",render:r7}),PC=ue({__name:"AccountLoginModal",setup(t){return(e,n)=>(I(),Z(y(Jn),{title:e.$td("cloud.logIn.title","Connect account")},{default:K(()=>[N(y(mt),{"lang-key":"cloud.logIn.info","lang-default":"Log in to your [Solid account](https://solidproject.org) to keep data safe across devices."}),N(y(go),{class:"text-sm",onClick:n[0]||(n[0]=r=>e.$ui.alert(e.$td("cloud.logIn.learnMore","What is Solid?"),e.$td("cloud.logIn.learnMoreMessage",`Solid is a decentralized storage protocol built on top of web standards. If you want to use this app across devices, you can use Solid to keep changes in sync. Even if you use it in a single device, this will also keep your data secure in case your device is lost.

In any case, Focus works 100% offline and you can connect your Solid POD later on. If you've never heard of Solid and you're just trying things out, you can keep using it without an account.

[Learn more](https://solidproject.org)`)))},{default:K(()=>[Ue(fe(e.$td("cloud.logIn.learnMore","What is Solid?")),1)]),_:1}),N(y(bC),{"no-loading":"",class:"mt-4"})]),_:1},8,["title"]))}}),i7={key:0,class:"mt-4"},o7={class:"text-base font-semibold"},a7={class:"ml-1"},l7=ue({__name:"PurgeData",setup(t){async function e(){await $t.confirm(Fe("settings.purgeConfirmTitle","Delete everything?"),Fe("settings.purgeConfirmMessage","If you proceed, all your data will be deleted forever. If you want to save it before wiping this device, you can [connect to your Solid account](#action:connect) first."),{acceptVariant:"danger",acceptText:Fe("settings.purgeConfirmAccept","Purge data"),actions:{connect:()=>$t.modal(PC)}})&&(await $t.closeAllModals(),await ef.purge())}return(n,r)=>n.$solid.hasLoggedIn()?ke("",!0):(I(),ae("details",i7,[L("summary",null,[L("span",o7,fe(n.$td("settings.dangerZone","Danger zone")),1)]),N(y(rt),{variant:"danger",class:"mt-4",onClick:r[0]||(r[0]=s=>e())},{default:K(()=>[N(y(s7),{class:"size-4"}),L("span",a7,fe(n.$td("settings.purge","Purge data")),1)]),_:1})]))}}),u7=[{priority:0,component:l7}],c7={viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"};function d7(t,e){return I(),ae("svg",c7,e[0]||(e[0]=[L("path",{fill:"currentColor",d:"M2.93 17.07A10 10 0 1 1 17.07 2.93A10 10 0 0 1 2.93 17.07m12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32M6.7 9.29L9 11.6l4.3-4.3l1.4 1.42L9 14.4l-3.7-3.7l1.4-1.42z"},null,-1)]))}const f7=Qe({name:"zondicons-checkmark-outline",render:d7}),p7={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function h7(t,e){return I(),ae("svg",p7,e[0]||(e[0]=[L("path",{fill:"currentColor",d:"M19.35 10.04A7.49 7.49 0 0 0 12 4C9.11 4 6.6 5.64 5.35 8.04A5.994 5.994 0 0 0 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5c0-2.64-2.05-4.78-4.65-4.96M14 13v4h-4v-4H7l5-5l5 5z"},null,-1)]))}const m7=Qe({name:"ic-sharp-cloud-upload",render:h7}),g7={viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"};function y7(t,e){return I(),ae("svg",g7,e[0]||(e[0]=[L("path",{fill:"currentColor",d:"M3.94 6.5L2.22 3.64l1.42-1.42L6.5 3.94c.52-.3 1.1-.54 1.7-.7L9 0h2l.8 3.24c.6.16 1.18.4 1.7.7l2.86-1.72l1.42 1.42l-1.72 2.86c.3.52.54 1.1.7 1.7L20 9v2l-3.24.8c-.16.6-.4 1.18-.7 1.7l1.72 2.86l-1.42 1.42l-2.86-1.72c-.52.3-1.1.54-1.7.7L11 20H9l-.8-3.24c-.6-.16-1.18-.4-1.7-.7l-2.86 1.72l-1.42-1.42l1.72-2.86c-.3-.52-.54-1.1-.7-1.7L0 11V9l3.24-.8c.16-.6.4-1.18.7-1.7M10 13a3 3 0 1 0 0-6a3 3 0 0 0 0 6"},null,-1)]))}const MC=Qe({name:"zondicons-cog",render:y7}),v7={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function b7(t,e){return I(),ae("svg",v7,e[0]||(e[0]=[L("path",{fill:"currentColor",d:"M5 21q-.825 0-1.412-.587T3 19V5q0-.825.588-1.412T5 3h6q.425 0 .713.288T12 4t-.288.713T11 5H5v14h6q.425 0 .713.288T12 20t-.288.713T11 21zm12.175-8H10q-.425 0-.712-.288T9 12t.288-.712T10 11h7.175L15.3 9.125q-.275-.275-.275-.675t.275-.7t.7-.313t.725.288L20.3 11.3q.3.3.3.7t-.3.7l-3.575 3.575q-.3.3-.712.288t-.713-.313q-.275-.3-.262-.712t.287-.688z"},null,-1)]))}const w7=Qe({name:"material-symbols-logout-rounded",render:b7}),_7={viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"};function x7(t,e){return I(),ae("svg",_7,e[0]||(e[0]=[L("path",{fill:"currentColor",d:"M10 3v2a5 5 0 0 0-3.54 8.54l-1.41 1.41A7 7 0 0 1 10 3m4.95 2.05A7 7 0 0 1 10 17v-2a5 5 0 0 0 3.54-8.54zM10 20l-4-4l4-4zm0-12V0l4 4z"},null,-1)]))}const qu=Qe({name:"zondicons-refresh",render:x7}),S7={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function E7(t,e){return I(),ae("svg",S7,e[0]||(e[0]=[L("path",{fill:"currentColor",d:"M6 6h12v12H6z"},null,-1)]))}const A7=Qe({name:"ic-baseline-stop",render:E7}),C7={viewBox:"0 0 512 512",width:"1.2em",height:"1.2em"};function $7(t,e){return I(),ae("svg",C7,e[0]||(e[0]=[L("path",{fill:"currentColor",d:"M449.07 399.08L278.64 82.58c-12.08-22.44-44.26-22.44-56.35 0L51.87 399.08A32 32 0 0 0 80 446.25h340.89a32 32 0 0 0 28.18-47.17m-198.6-1.83a20 20 0 1 1 20-20a20 20 0 0 1-20 20m21.72-201.15l-5.74 122a16 16 0 0 1-32 0l-5.74-121.95a21.73 21.73 0 0 1 21.5-22.69h.21a21.74 21.74 0 0 1 21.73 22.7Z"},null,-1)]))}const Uu=Qe({name:"ion-warning",render:$7}),k7={class:"relative flex items-center rounded-md bg-gray-100 p-4 pr-12"},I7={class:"flex flex-col overflow-hidden"},R7={class:"font-semibold"},O7={class:"px-2"},T7={key:0,class:"mt-4 flex items-center gap-2"},D7={class:"flex w-full flex-col"},P7={key:1,class:"mt-4 flex items-center gap-2"},M7={key:2,class:"mt-4 flex items-center gap-2"},L7={key:3,class:"mt-4 flex items-center gap-2"},N7={key:4,class:"mt-4 flex items-center gap-2"},F7={key:5,class:"mt-4 flex items-center gap-2"},j7={key:6,class:"mt-4 flex items-center gap-2"},q7={class:"flex flex-col gap-2"},U7={class:"flex items-center"},B7={"aria-hidden":"true"},z7={key:0,"aria-hidden":"true"},V7={key:0,class:"mt-4 flex flex-row-reverse justify-start gap-2"},H7=ue({__name:"AccountModal",setup(t){const{close:e}=xo(),n=we(!1),r=Fe("cloud.advanced.polling","Synchronize every {minutes} minutes",{minutes:"%%separator%%"}).split("%%separator%%"),s=H(()=>ct.error??Sr.syncError),i=H(()=>{if(s.value)return typeof s.value=="string"?s.value:Fe("cloud.info.error","There has been an error connecting.")}),o=H(()=>s.value&&typeof s.value!="string");async function a(){Sr.syncJob&&(n.value=!0,await Promise.race([Sr.syncJob.cancel(),Sr.syncJob.completed]),n.value=!1)}return PU("auth:logout",e),(l,u)=>(I(),Z(y(Jn),{"title-hidden":"","close-hidden":"",title:l.$td("account.title","Account")},{default:K(()=>{var c,d;return[L("div",k7,[N(y(vC),{class:"mr-2 size-16 shrink-0"}),L("div",I7,[L("span",R7,fe(((c=l.$solid.user)==null?void 0:c.name)??l.$td("user.anonymous","Anonymous")),1),N(y(go),{href:(d=l.$solid.user)==null?void 0:d.webId,class:"mt-0.5 truncate text-sm font-light text-gray-500"},{default:K(()=>{var f;return[Ue(fe((f=l.$solid.user)==null?void 0:f.webId),1)]}),_:1},8,["href"])]),N(y(rt),{size:"icon",variant:"ghost",class:"absolute top-1 right-1 hover:bg-gray-200","aria-label":l.$td("user.settings","Settings"),title:l.$td("user.settings","Settings"),onClick:u[0]||(u[0]=f=>l.$ui.modal(y(OA)))},{default:K(()=>[N(y(MC),{class:"size-5"})]),_:1},8,["aria-label","title"])]),L("div",O7,[l.$cloud.syncing?(I(),ae("div",T7,[N(y(qu),{class:"mt-0.5 size-6 shrink-0 animate-spin self-start text-green-500"}),L("div",D7,[N(y(mt),{"lang-key":"cloud.info.syncing","lang-default":"Synchronizing..."}),l.$cloud.syncJob?(I(),Z(y(hy),{key:0,job:l.$cloud.syncJob,"filled-class":"bg-green-500"},null,8,["job"])):ke("",!0)])])):l.$solid.loginOngoing?(I(),ae("div",P7,[N(y(qu),{class:"mt-0.5 size-6 shrink-0 animate-spin self-start text-green-500"}),N(y(mt),{"lang-key":"cloud.info.reconnecting","lang-default":"Reconnecting..."})])):s.value?(I(),ae("div",M7,[N(y(Uu),{class:"mt-0.5 size-6 shrink-0 self-start text-red-500"}),L("div",null,[N(y(mt),{text:i.value},null,8,["text"]),o.value?(I(),Z(y(go),{key:0,class:"text-sm text-red-700 opacity-50 hover:opacity-75 focus-visible:opacity-75",onClick:u[1]||(u[1]=f=>l.$errors.inspect(s.value))},{default:K(()=>[Ue(fe(l.$td("errors.viewDetails","View details")),1)]),_:1})):ke("",!0)])])):l.$cloud.ready?l.$cloud.dirty?(I(),ae("div",N7,[N(y(Uu),{class:"mt-0.5 size-6 shrink-0 self-start text-yellow-500"}),N(y(mt),{"lang-key":"cloud.info.changes","lang-default":"Everything is up to date. | There is one local change. | There are {n} local changes.","lang-params":l.$cloud.localChanges},null,8,["lang-params"])])):l.$cloud.online||l.$cloud.offline?(I(),ae("div",F7,[N(y(f7),{class:De(["mt-0.5 size-6 shrink-0 self-start",{"text-green-500":l.$cloud.online,"text-gray-700":l.$cloud.offline}])},null,8,["class"]),l.$cloud.online?(I(),Z(y(mt),{key:0,"lang-key":"cloud.info.changes","lang-default":"Everything is up to date.","lang-params":0})):(I(),Z(y(mt),{key:1,"lang-key":"cloud.info.offline","lang-default":"Everything is up to date, but you're currently offline."}))])):(I(),ae("div",j7,[N(y(Uu),{class:"mt-0.5 size-6 shrink-0 self-start text-yellow-500"}),N(y(mt),{"lang-key":"cloud.info.disconnected","lang-default":"You are disconnected from your Solid account, all the changes you make will remain in your device."})])):(I(),ae("div",L7,[N(y(Uu),{class:"mt-0.5 size-6 shrink-0 self-start text-yellow-500"}),N(y(mt),{"lang-key":"cloud.info.setup","lang-default":"Your data is not backed up yet."})])),N(y(w8),{class:"mt-2"},{default:K(()=>[L("ul",q7,[L("li",null,[N(y(na),{modelValue:l.$solid.autoReconnect,"onUpdate:modelValue":u[2]||(u[2]=f=>l.$solid.autoReconnect=f),"label-class":"text-base",label:l.$td("cloud.advanced.reconnect","Reconnect on startup")},null,8,["modelValue","label"])]),L("li",null,[N(y(na),{modelValue:l.$cloud.startupSync,"onUpdate:modelValue":u[3]||(u[3]=f=>l.$cloud.startupSync=f),"label-class":"text-base",label:l.$td("cloud.advanced.startupSync","Synchronize on startup")},null,8,["modelValue","label"])]),L("li",null,[N(y(na),{modelValue:l.$cloud.pollingEnabled,"onUpdate:modelValue":u[5]||(u[5]=f=>l.$cloud.pollingEnabled=f),"label-class":"text-base"},{default:K(()=>[L("div",U7,[L("span",B7,fe(y(r)[0]),1),N(y(P8),{type:"number",text:`${l.$cloud.pollingMinutes}`,"aria-label":l.$td("cloud.advanced.pollingMinutes","Synchronization interval (in minutes)"),class:"focus-within:border-primary-600 mx-1 -mb-px border-b",onUpdate:u[4]||(u[4]=f=>l.$cloud.pollingMinutes=f)},{default:K(()=>[Ue(fe(l.$cloud.pollingMinutes),1)]),_:1},8,["text","aria-label"]),y(r).length>1?(I(),ae("span",z7,fe(y(r)[1]),1)):ke("",!0)])]),_:1},8,["modelValue"])])])]),_:1})]),l.$solid.loginOngoing?ke("",!0):(I(),ae("div",V7,[l.$cloud.syncing?(I(),Z(y(rt),{key:0,variant:"secondary",disabled:n.value,onClick:u[6]||(u[6]=f=>a())},{default:K(()=>[N(y(A7),{class:"size-5"}),L("span",null,fe(n.value?l.$td("cloud.stopping","Stopping..."):l.$td("cloud.stop","Stop synchronization")),1)]),_:1},8,["disabled"])):l.$solid.isLoggedIn()?l.$cloud.ready?(I(),Z(y(rt),{key:2,disabled:l.$cloud.offline,onClick:u[8]||(u[8]=f=>l.$cloud.sync({refreshUserProfile:!0}))},{default:K(()=>[N(y(qu),{class:"size-5"}),L("span",null,fe(l.$td("cloud.sync","Synchronize")),1)]),_:1},8,["disabled"])):(I(),Z(y(rt),{key:3,onClick:u[9]||(u[9]=f=>(l.$cloud.setupDismissed=!1,y(e)(),l.$cloud.manualSetup||l.$cloud.setup()))},{default:K(()=>[N(y(m7),{class:"size-5"}),L("span",null,fe(l.$td("cloud.setup.submit","Back up now")),1)]),_:1})):(I(),Z(y(rt),{key:1,onClick:u[7]||(u[7]=f=>l.$solid.reconnect({force:!0}))},{default:K(()=>[N(y(qu),{class:"size-5"}),L("span",null,fe(l.$td("cloud.reconnect","Reconnect")),1)]),_:1})),l.$cloud.syncing?ke("",!0):(I(),Z(y(rt),{key:4,variant:"secondary",onClick:u[10]||(u[10]=f=>l.$solid.logout())},{default:K(()=>[N(y(w7),{class:"size-5"}),L("span",null,fe(l.$cloud.ready?l.$td("cloud.logOut","Log out"):l.$td("cloud.disconnect","Disconnect")),1)]),_:1}))]))]}),_:1},8,["title"]))}}),K7={class:"relative size-12"},W7=["aria-label","title"],G7={key:0,class:"absolute -inset-1 animate-spin rounded-full border-2 border-[currentColor_transparent] text-green-500"},J7={class:"sr-only"},Y7=ue({__name:"AccountLoggedIn",setup(t){const e=H(()=>Sr.syncing||ct.loginOngoing?{loading:!0,classes:"bg-green-500 sr-only",message:n()??""}:ct.error||Sr.syncError?{classes:"bg-red-500",message:Fe("account.error","There has been an error connecting with your account.")}:!ct.isLoggedIn()||Sr.dirty||!Sr.ready?{classes:"bg-yellow-500",message:Fe("account.dirty","There are local changes that haven't been synchronized yet.")}:{classes:Sr.status===Ut.Online?"bg-green-500":"bg-gray-500",message:n()??""});function n(){switch(Sr.status){case Ut.Syncing:return Fe("cloud.status.syncing","Synchronization in progress");case Ut.Migrating:return Fe("cloud.status.migrating","Migration in progress");case Ut.Online:return Fe("cloud.status.online","Online");case Ut.Offline:return Fe("cloud.status.offline","Offline");case Ut.Disconnected:return Fe("cloud.status.disconnected","Disconnected")}}return(r,s)=>(I(),ae("div",K7,[L("button",{class:"clickable focus-visible:outline-primary-600 flex size-full rounded-full focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2",type:"button","aria-label":r.$td("account.open","Open account"),title:r.$td("account.open","Open account"),onClick:s[0]||(s[0]=i=>r.$ui.modal(H7))},[N(y(vC),{class:"size-full"}),e.value.loading?(I(),ae("div",G7)):ke("",!0)],8,W7),L("div",{class:De(["pointer-events-none absolute right-0 bottom-0 size-3 rounded-full border-2 border-white",e.value.classes])},[L("span",J7,fe(e.value.message),1)],2)]))}}),X7=ue({__name:"AccountLoggedOut",setup(t){return(e,n)=>(I(),Z(y(O8),{align:"start",options:[{label:e.$td("user.logIn","Connect account"),click:()=>e.$ui.modal(PC)},{label:e.$td("user.settings","Settings"),click:()=>e.$ui.modal(y(OA))}]},{default:K(()=>[N(y(rt),{size:"icon",variant:"ghost","aria-label":e.$td("user.menu","Configuration"),title:e.$td("user.menu","Configuration")},{default:K(()=>[N(y(MC),{class:"size-5"})]),_:1},8,["aria-label","title"])]),_:1},8,["options"]))}}),Q7=ue({__name:"Account",setup(t){return(e,n)=>e.$solid.hasLoggedIn()?(I(),Z(Y7,{key:0})):(I(),Z(X7,{key:1}))}}),Z7={$cloud:Sr};function eH(t={}){return{name:"@aerogel/local-first",async install(e){u7.forEach(n=>gt.addSetting(n)),typeof t.manualSetup=="boolean"&&(DC.manualSetup=t.manualSetup,Sr.manualSetup=t.manualSetup),await _o(e,Z7)}}}/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const jo=typeof document<"u";function LC(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function tH(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&LC(t.default)}const vt=Object.assign;function uh(t,e){const n={};for(const r in e){const s=e[r];n[r]=ts(s)?s.map(t):t(s)}return n}const Sl=()=>{},ts=Array.isArray,NC=/#/g,nH=/&/g,rH=/\//g,sH=/=/g,iH=/\?/g,FC=/\+/g,oH=/%5B/g,aH=/%5D/g,jC=/%5E/g,lH=/%60/g,qC=/%7B/g,uH=/%7C/g,UC=/%7D/g,cH=/%20/g;function My(t){return encodeURI(""+t).replace(uH,"|").replace(oH,"[").replace(aH,"]")}function dH(t){return My(t).replace(qC,"{").replace(UC,"}").replace(jC,"^")}function Pm(t){return My(t).replace(FC,"%2B").replace(cH,"+").replace(NC,"%23").replace(nH,"%26").replace(lH,"`").replace(qC,"{").replace(UC,"}").replace(jC,"^")}function fH(t){return Pm(t).replace(sH,"%3D")}function pH(t){return My(t).replace(NC,"%23").replace(iH,"%3F")}function hH(t){return t==null?"":pH(t).replace(rH,"%2F")}function ql(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const mH=/\/$/,gH=t=>t.replace(mH,"");function ch(t,e,n="/"){let r,s={},i="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(r=e.slice(0,l),i=e.slice(l+1,a>-1?a:e.length),s=t(i)),a>-1&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=wH(r??e,n),{fullPath:r+(i&&"?")+i+o,path:r,query:s,hash:ql(o)}}function yH(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function l_(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function vH(t,e,n){const r=e.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&ma(e.matched[r],n.matched[s])&&BC(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function ma(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function BC(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!bH(t[n],e[n]))return!1;return!0}function bH(t,e){return ts(t)?u_(t,e):ts(e)?u_(e,t):t===e}function u_(t,e){return ts(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function wH(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let i=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(o).join("/")}const ui={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Ul;(function(t){t.pop="pop",t.push="push"})(Ul||(Ul={}));var El;(function(t){t.back="back",t.forward="forward",t.unknown=""})(El||(El={}));function _H(t){if(!t)if(jo){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),gH(t)}const xH=/^[^#]+#/;function SH(t,e){return t.replace(xH,"#")+e}function EH(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const uf=()=>({left:window.scrollX,top:window.scrollY});function AH(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;e=EH(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function c_(t,e){return(history.state?history.state.position-e:-1)+t}const Mm=new Map;function CH(t,e){Mm.set(t,e)}function $H(t){const e=Mm.get(t);return Mm.delete(t),e}let kH=()=>location.protocol+"//"+location.host;function zC(t,e){const{pathname:n,search:r,hash:s}=e,i=t.indexOf("#");if(i>-1){let a=s.includes(t.slice(i))?t.slice(i).length:1,l=s.slice(a);return l[0]!=="/"&&(l="/"+l),l_(l,"")}return l_(n,t)+r+s}function IH(t,e,n,r){let s=[],i=[],o=null;const a=({state:f})=>{const p=zC(t,location),h=n.value,g=e.value;let w=0;if(f){if(n.value=p,e.value=f,o&&o===h){o=null;return}w=g?f.position-g.position:0}else r(p);s.forEach(x=>{x(n.value,h,{delta:w,type:Ul.pop,direction:w?w>0?El.forward:El.back:El.unknown})})};function l(){o=n.value}function u(f){s.push(f);const p=()=>{const h=s.indexOf(f);h>-1&&s.splice(h,1)};return i.push(p),p}function c(){const{history:f}=window;f.state&&f.replaceState(vt({},f.state,{scroll:uf()}),"")}function d(){for(const f of i)f();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",c)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",c,{passive:!0}),{pauseListeners:l,listen:u,destroy:d}}function d_(t,e,n,r=!1,s=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:s?uf():null}}function RH(t){const{history:e,location:n}=window,r={value:zC(t,n)},s={value:e.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(l,u,c){const d=t.indexOf("#"),f=d>-1?(n.host&&document.querySelector("base")?t:t.slice(d))+l:kH()+t+l;try{e[c?"replaceState":"pushState"](u,"",f),s.value=u}catch(p){console.error(p),n[c?"replace":"assign"](f)}}function o(l,u){const c=vt({},e.state,d_(s.value.back,l,s.value.forward,!0),u,{position:s.value.position});i(l,c,!0),r.value=l}function a(l,u){const c=vt({},s.value,e.state,{forward:l,scroll:uf()});i(c.current,c,!0);const d=vt({},d_(r.value,l,null),{position:c.position+1},u);i(l,d,!1),r.value=l}return{location:r,state:s,push:a,replace:o}}function OH(t){t=_H(t);const e=RH(t),n=IH(t,e.state,e.location,e.replace);function r(i,o=!0){o||n.pauseListeners(),history.go(i)}const s=vt({location:"",base:t,go:r,createHref:SH.bind(null,t)},e,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function TH(t){return typeof t=="string"||t&&typeof t=="object"}function VC(t){return typeof t=="string"||typeof t=="symbol"}const HC=Symbol("");var f_;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(f_||(f_={}));function ga(t,e){return vt(new Error,{type:t,[HC]:!0},e)}function Ts(t,e){return t instanceof Error&&HC in t&&(e==null||!!(t.type&e))}const p_="[^/]+?",DH={sensitive:!1,strict:!1,start:!0,end:!0},PH=/[.+*?^${}()[\]/\\]/g;function MH(t,e){const n=vt({},DH,e),r=[];let s=n.start?"^":"";const i=[];for(const u of t){const c=u.length?[]:[90];n.strict&&!u.length&&(s+="/");for(let d=0;d<u.length;d++){const f=u[d];let p=40+(n.sensitive?.25:0);if(f.type===0)d||(s+="/"),s+=f.value.replace(PH,"\\$&"),p+=40;else if(f.type===1){const{value:h,repeatable:g,optional:w,regexp:x}=f;i.push({name:h,repeatable:g,optional:w});const A=x||p_;if(A!==p_){p+=10;try{new RegExp(`(${A})`)}catch(m){throw new Error(`Invalid custom RegExp for param "${h}" (${A}): `+m.message)}}let E=g?`((?:${A})(?:/(?:${A}))*)`:`(${A})`;d||(E=w&&u.length<2?`(?:/${E})`:"/"+E),w&&(E+="?"),s+=E,p+=20,w&&(p+=-8),g&&(p+=-20),A===".*"&&(p+=-50)}c.push(p)}r.push(c)}if(n.strict&&n.end){const u=r.length-1;r[u][r[u].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const o=new RegExp(s,n.sensitive?"":"i");function a(u){const c=u.match(o),d={};if(!c)return null;for(let f=1;f<c.length;f++){const p=c[f]||"",h=i[f-1];d[h.name]=p&&h.repeatable?p.split("/"):p}return d}function l(u){let c="",d=!1;for(const f of t){(!d||!c.endsWith("/"))&&(c+="/"),d=!1;for(const p of f)if(p.type===0)c+=p.value;else if(p.type===1){const{value:h,repeatable:g,optional:w}=p,x=h in u?u[h]:"";if(ts(x)&&!g)throw new Error(`Provided param "${h}" is an array but it is not repeatable (* or + modifiers)`);const A=ts(x)?x.join("/"):x;if(!A)if(w)f.length<2&&(c.endsWith("/")?c=c.slice(0,-1):d=!0);else throw new Error(`Missing required param "${h}"`);c+=A}}return c||"/"}return{re:o,score:r,keys:i,parse:a,stringify:l}}function LH(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function KC(t,e){let n=0;const r=t.score,s=e.score;for(;n<r.length&&n<s.length;){const i=LH(r[n],s[n]);if(i)return i;n++}if(Math.abs(s.length-r.length)===1){if(h_(r))return 1;if(h_(s))return-1}return s.length-r.length}function h_(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const NH={type:0,value:""},FH=/[a-zA-Z0-9_]/;function jH(t){if(!t)return[[]];if(t==="/")return[[NH]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(p){throw new Error(`ERR (${n})/"${u}": ${p}`)}let n=0,r=n;const s=[];let i;function o(){i&&s.push(i),i=[]}let a=0,l,u="",c="";function d(){u&&(n===0?i.push({type:0,value:u}):n===1||n===2||n===3?(i.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:u,regexp:c,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),u="")}function f(){u+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:l==="/"?(u&&d(),o()):l===":"?(d(),n=1):f();break;case 4:f(),n=r;break;case 1:l==="("?n=2:FH.test(l)?f():(d(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?c[c.length-1]=="\\"?c=c.slice(0,-1)+l:n=3:c+=l;break;case 3:d(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,c="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${u}"`),d(),o(),s}function qH(t,e,n){const r=MH(jH(t.path),n),s=vt(r,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function UH(t,e){const n=[],r=new Map;e=v_({strict:!1,end:!0,sensitive:!1},e);function s(d){return r.get(d)}function i(d,f,p){const h=!p,g=g_(d);g.aliasOf=p&&p.record;const w=v_(e,d),x=[g];if("alias"in d){const m=typeof d.alias=="string"?[d.alias]:d.alias;for(const v of m)x.push(g_(vt({},g,{components:p?p.record.components:g.components,path:v,aliasOf:p?p.record:g})))}let A,E;for(const m of x){const{path:v}=m;if(f&&v[0]!=="/"){const _=f.record.path,C=_[_.length-1]==="/"?"":"/";m.path=f.record.path+(v&&C+v)}if(A=qH(m,f,w),p?p.alias.push(A):(E=E||A,E!==A&&E.alias.push(A),h&&d.name&&!y_(A)&&o(d.name)),WC(A)&&l(A),g.children){const _=g.children;for(let C=0;C<_.length;C++)i(_[C],A,p&&p.children[C])}p=p||A}return E?()=>{o(E)}:Sl}function o(d){if(VC(d)){const f=r.get(d);f&&(r.delete(d),n.splice(n.indexOf(f),1),f.children.forEach(o),f.alias.forEach(o))}else{const f=n.indexOf(d);f>-1&&(n.splice(f,1),d.record.name&&r.delete(d.record.name),d.children.forEach(o),d.alias.forEach(o))}}function a(){return n}function l(d){const f=VH(d,n);n.splice(f,0,d),d.record.name&&!y_(d)&&r.set(d.record.name,d)}function u(d,f){let p,h={},g,w;if("name"in d&&d.name){if(p=r.get(d.name),!p)throw ga(1,{location:d});w=p.record.name,h=vt(m_(f.params,p.keys.filter(E=>!E.optional).concat(p.parent?p.parent.keys.filter(E=>E.optional):[]).map(E=>E.name)),d.params&&m_(d.params,p.keys.map(E=>E.name))),g=p.stringify(h)}else if(d.path!=null)g=d.path,p=n.find(E=>E.re.test(g)),p&&(h=p.parse(g),w=p.record.name);else{if(p=f.name?r.get(f.name):n.find(E=>E.re.test(f.path)),!p)throw ga(1,{location:d,currentLocation:f});w=p.record.name,h=vt({},f.params,d.params),g=p.stringify(h)}const x=[];let A=p;for(;A;)x.unshift(A.record),A=A.parent;return{name:w,path:g,params:h,matched:x,meta:zH(x)}}t.forEach(d=>i(d));function c(){n.length=0,r.clear()}return{addRoute:i,resolve:u,removeRoute:o,clearRoutes:c,getRoutes:a,getRecordMatcher:s}}function m_(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function g_(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:BH(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function BH(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function y_(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function zH(t){return t.reduce((e,n)=>vt(e,n.meta),{})}function v_(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function VH(t,e){let n=0,r=e.length;for(;n!==r;){const i=n+r>>1;KC(t,e[i])<0?r=i:n=i+1}const s=HH(t);return s&&(r=e.lastIndexOf(s,r-1)),r}function HH(t){let e=t;for(;e=e.parent;)if(WC(e)&&KC(t,e)===0)return e}function WC({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function KH(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<r.length;++s){const i=r[s].replace(FC," "),o=i.indexOf("="),a=ql(o<0?i:i.slice(0,o)),l=o<0?null:ql(i.slice(o+1));if(a in e){let u=e[a];ts(u)||(u=e[a]=[u]),u.push(l)}else e[a]=l}return e}function b_(t){let e="";for(let n in t){const r=t[n];if(n=fH(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(ts(r)?r.map(i=>i&&Pm(i)):[r&&Pm(r)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+n,i!=null&&(e+="="+i))})}return e}function WH(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=ts(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return e}const GH=Symbol(""),w_=Symbol(""),Ly=Symbol(""),Ny=Symbol(""),Lm=Symbol("");function tl(){let t=[];function e(r){return t.push(r),()=>{const s=t.indexOf(r);s>-1&&t.splice(s,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function hi(t,e,n,r,s,i=o=>o()){const o=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((a,l)=>{const u=f=>{f===!1?l(ga(4,{from:n,to:e})):f instanceof Error?l(f):TH(f)?l(ga(2,{from:e,to:f})):(o&&r.enterCallbacks[s]===o&&typeof f=="function"&&o.push(f),a())},c=i(()=>t.call(r&&r.instances[s],e,n,u));let d=Promise.resolve(c);t.length<3&&(d=d.then(u)),d.catch(f=>l(f))})}function dh(t,e,n,r,s=i=>i()){const i=[];for(const o of t)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(LC(l)){const c=(l.__vccOpts||l)[e];c&&i.push(hi(c,n,r,o,a,s))}else{let u=l();i.push(()=>u.then(c=>{if(!c)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const d=tH(c)?c.default:c;o.mods[a]=c,o.components[a]=d;const p=(d.__vccOpts||d)[e];return p&&hi(p,n,r,o,a,s)()}))}}return i}function __(t){const e=Kt(Ly),n=Kt(Ny),r=H(()=>{const l=y(t.to);return e.resolve(l)}),s=H(()=>{const{matched:l}=r.value,{length:u}=l,c=l[u-1],d=n.matched;if(!c||!d.length)return-1;const f=d.findIndex(ma.bind(null,c));if(f>-1)return f;const p=x_(l[u-2]);return u>1&&x_(c)===p&&d[d.length-1].path!==p?d.findIndex(ma.bind(null,l[u-2])):f}),i=H(()=>s.value>-1&&QH(n.params,r.value.params)),o=H(()=>s.value>-1&&s.value===n.matched.length-1&&BC(n.params,r.value.params));function a(l={}){if(XH(l)){const u=e[y(t.replace)?"replace":"push"](y(t.to)).catch(Sl);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:r,href:H(()=>r.value.href),isActive:i,isExactActive:o,navigate:a}}function JH(t){return t.length===1?t[0]:t}const YH=ue({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:__,setup(t,{slots:e}){const n=tr(__(t)),{options:r}=Kt(Ly),s=H(()=>({[S_(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[S_(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&JH(e.default(n));return t.custom?i:dr("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),GC=YH;function XH(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function QH(t,e){for(const n in e){const r=e[n],s=t[n];if(typeof r=="string"){if(r!==s)return!1}else if(!ts(s)||s.length!==r.length||r.some((i,o)=>i!==s[o]))return!1}return!0}function x_(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const S_=(t,e,n)=>t??e??n,ZH=ue({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=Kt(Lm),s=H(()=>t.route||r.value),i=Kt(w_,0),o=H(()=>{let u=y(i);const{matched:c}=s.value;let d;for(;(d=c[u])&&!d.components;)u++;return u}),a=H(()=>s.value.matched[o.value]);cr(w_,H(()=>o.value+1)),cr(GH,a),cr(Lm,s);const l=we();return Ke(()=>[l.value,a.value,t.name],([u,c,d],[f,p,h])=>{c&&(c.instances[d]=u,p&&p!==c&&u&&u===f&&(c.leaveGuards.size||(c.leaveGuards=p.leaveGuards),c.updateGuards.size||(c.updateGuards=p.updateGuards))),u&&c&&(!p||!ma(c,p)||!f)&&(c.enterCallbacks[d]||[]).forEach(g=>g(u))},{flush:"post"}),()=>{const u=s.value,c=t.name,d=a.value,f=d&&d.components[c];if(!f)return E_(n.default,{Component:f,route:u});const p=d.props[c],h=p?p===!0?u.params:typeof p=="function"?p(u):p:null,w=dr(f,vt({},h,e,{onVnodeUnmounted:x=>{x.component.isUnmounted&&(d.instances[c]=null)},ref:l}));return E_(n.default,{Component:w,route:u})||w}}});function E_(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const eK=ZH;function tK(t){const e=UH(t.routes,t),n=t.parseQuery||KH,r=t.stringifyQuery||b_,s=t.history,i=tl(),o=tl(),a=tl(),l=Mn(ui);let u=ui;jo&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=uh.bind(null,T=>""+T),d=uh.bind(null,hH),f=uh.bind(null,ql);function p(T,Y){let re,ne;return VC(T)?(re=e.getRecordMatcher(T),ne=Y):ne=T,e.addRoute(ne,re)}function h(T){const Y=e.getRecordMatcher(T);Y&&e.removeRoute(Y)}function g(){return e.getRoutes().map(T=>T.record)}function w(T){return!!e.getRecordMatcher(T)}function x(T,Y){if(Y=vt({},Y||l.value),typeof T=="string"){const Q=ch(n,T,Y.path),ye=e.resolve({path:Q.path},Y),_e=s.createHref(Q.fullPath);return vt(Q,ye,{params:f(ye.params),hash:ql(Q.hash),redirectedFrom:void 0,href:_e})}let re;if(T.path!=null)re=vt({},T,{path:ch(n,T.path,Y.path).path});else{const Q=vt({},T.params);for(const ye in Q)Q[ye]==null&&delete Q[ye];re=vt({},T,{params:d(Q)}),Y.params=d(Y.params)}const ne=e.resolve(re,Y),xe=T.hash||"";ne.params=c(f(ne.params));const M=yH(r,vt({},T,{hash:dH(xe),path:ne.path})),P=s.createHref(M);return vt({fullPath:M,hash:xe,query:r===b_?WH(T.query):T.query||{}},ne,{redirectedFrom:void 0,href:P})}function A(T){return typeof T=="string"?ch(n,T,l.value.path):vt({},T)}function E(T,Y){if(u!==T)return ga(8,{from:Y,to:T})}function m(T){return C(T)}function v(T){return m(vt(A(T),{replace:!0}))}function _(T){const Y=T.matched[T.matched.length-1];if(Y&&Y.redirect){const{redirect:re}=Y;let ne=typeof re=="function"?re(T):re;return typeof ne=="string"&&(ne=ne.includes("?")||ne.includes("#")?ne=A(ne):{path:ne},ne.params={}),vt({query:T.query,hash:T.hash,params:ne.path!=null?{}:T.params},ne)}}function C(T,Y){const re=u=x(T),ne=l.value,xe=T.state,M=T.force,P=T.replace===!0,Q=_(re);if(Q)return C(vt(A(Q),{state:typeof Q=="object"?vt({},xe,Q.state):xe,force:M,replace:P}),Y||re);const ye=re;ye.redirectedFrom=Y;let _e;return!M&&vH(r,ne,re)&&(_e=ga(16,{to:ye,from:ne}),ie(ne,ne,!0,!1)),(_e?Promise.resolve(_e):D(ye,ne)).catch(be=>Ts(be)?Ts(be,2)?be:z(be):F(be,ye,ne)).then(be=>{if(be){if(Ts(be,2))return C(vt({replace:P},A(be.to),{state:typeof be.to=="object"?vt({},xe,be.to.state):xe,force:M}),Y||ye)}else be=J(ye,ne,!0,P,xe);return G(ye,ne,be),be})}function $(T,Y){const re=E(T,Y);return re?Promise.reject(re):Promise.resolve()}function k(T){const Y=Ae.values().next().value;return Y&&typeof Y.runWithContext=="function"?Y.runWithContext(T):T()}function D(T,Y){let re;const[ne,xe,M]=nK(T,Y);re=dh(ne.reverse(),"beforeRouteLeave",T,Y);for(const Q of ne)Q.leaveGuards.forEach(ye=>{re.push(hi(ye,T,Y))});const P=$.bind(null,T,Y);return re.push(P),te(re).then(()=>{re=[];for(const Q of i.list())re.push(hi(Q,T,Y));return re.push(P),te(re)}).then(()=>{re=dh(xe,"beforeRouteUpdate",T,Y);for(const Q of xe)Q.updateGuards.forEach(ye=>{re.push(hi(ye,T,Y))});return re.push(P),te(re)}).then(()=>{re=[];for(const Q of M)if(Q.beforeEnter)if(ts(Q.beforeEnter))for(const ye of Q.beforeEnter)re.push(hi(ye,T,Y));else re.push(hi(Q.beforeEnter,T,Y));return re.push(P),te(re)}).then(()=>(T.matched.forEach(Q=>Q.enterCallbacks={}),re=dh(M,"beforeRouteEnter",T,Y,k),re.push(P),te(re))).then(()=>{re=[];for(const Q of o.list())re.push(hi(Q,T,Y));return re.push(P),te(re)}).catch(Q=>Ts(Q,8)?Q:Promise.reject(Q))}function G(T,Y,re){a.list().forEach(ne=>k(()=>ne(T,Y,re)))}function J(T,Y,re,ne,xe){const M=E(T,Y);if(M)return M;const P=Y===ui,Q=jo?history.state:{};re&&(ne||P?s.replace(T.fullPath,vt({scroll:P&&Q&&Q.scroll},xe)):s.push(T.fullPath,xe)),l.value=T,ie(T,Y,re,P),z()}let W;function j(){W||(W=s.listen((T,Y,re)=>{if(!X.listening)return;const ne=x(T),xe=_(ne);if(xe){C(vt(xe,{replace:!0,force:!0}),ne).catch(Sl);return}u=ne;const M=l.value;jo&&CH(c_(M.fullPath,re.delta),uf()),D(ne,M).catch(P=>Ts(P,12)?P:Ts(P,2)?(C(vt(A(P.to),{force:!0}),ne).then(Q=>{Ts(Q,20)&&!re.delta&&re.type===Ul.pop&&s.go(-1,!1)}).catch(Sl),Promise.reject()):(re.delta&&s.go(-re.delta,!1),F(P,ne,M))).then(P=>{P=P||J(ne,M,!1),P&&(re.delta&&!Ts(P,8)?s.go(-re.delta,!1):re.type===Ul.pop&&Ts(P,20)&&s.go(-1,!1)),G(ne,M,P)}).catch(Sl)}))}let se=tl(),R=tl(),V;function F(T,Y,re){z(T);const ne=R.list();return ne.length?ne.forEach(xe=>xe(T,Y,re)):console.error(T),Promise.reject(T)}function ee(){return V&&l.value!==ui?Promise.resolve():new Promise((T,Y)=>{se.add([T,Y])})}function z(T){return V||(V=!T,j(),se.list().forEach(([Y,re])=>T?re(T):Y()),se.reset()),T}function ie(T,Y,re,ne){const{scrollBehavior:xe}=t;if(!jo||!xe)return Promise.resolve();const M=!re&&$H(c_(T.fullPath,0))||(ne||!re)&&history.state&&history.state.scroll||null;return _t().then(()=>xe(T,Y,M)).then(P=>P&&AH(P)).catch(P=>F(P,T,Y))}const pe=T=>s.go(T);let he;const Ae=new Set,X={currentRoute:l,listening:!0,addRoute:p,removeRoute:h,clearRoutes:e.clearRoutes,hasRoute:w,getRoutes:g,resolve:x,options:t,push:m,replace:v,go:pe,back:()=>pe(-1),forward:()=>pe(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:R.add,isReady:ee,install(T){const Y=this;T.component("RouterLink",GC),T.component("RouterView",eK),T.config.globalProperties.$router=Y,Object.defineProperty(T.config.globalProperties,"$route",{enumerable:!0,get:()=>y(l)}),jo&&!he&&l.value===ui&&(he=!0,m(s.location).catch(xe=>{}));const re={};for(const xe in ui)Object.defineProperty(re,xe,{get:()=>l.value[xe],enumerable:!0});T.provide(Ly,Y),T.provide(Ny,Cd(re)),T.provide(Lm,l);const ne=T.unmount;Ae.add(T),T.unmount=function(){Ae.delete(T),Ae.size<1&&(u=ui,W&&W(),W=null,l.value=ui,he=!1,V=!1),ne()}}};function te(T){return T.reduce((Y,re)=>Y.then(()=>k(re)),Promise.resolve())}return X}function nK(t,e){const n=[],r=[],s=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(t.matched.find(u=>ma(u,a))?r.push(a):n.push(a));const l=t.matched[o];l&&(e.matched.find(u=>ma(u,l))||s.push(l))}return[n,r,s]}function rK(t){return Kt(Ny)}var sK=Object.defineProperty,iK=(t,e,n)=>e in t?sK(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Do=(t,e,n)=>iK(t,typeof e!="symbol"?e+"":e,n);function oK(t,e){return _a((n,r)=>{let s=po(uo.routesParams.value[t]??{},e);return Ke(uo.routesParams,()=>{const i=po(uo.routesParams.value[t]??{},e);for(const[o,a]of Object.entries(i))if(a===s[o]){s=i,r();return}}),{get:()=>Hn(s,()=>n()),set:()=>console.warn("Computed models ref was not set (it is immutable).")}})}const aK=ss({name:"router",initialState:{flashRoute:null},persist:["flashRoute"]});class lK extends aK{constructor(){super(),Do(this,"currentRoute"),Do(this,"routesParams"),Do(this,"router"),Do(this,"bindings"),Do(this,"history"),Do(this,"routesStopWatchers"),this.router=Mn(null),this.bindings={},this.history=[],this.routesStopWatchers={},this.routesParams=Mn({}),this.currentRoute=H(()=>{const e=this.router.value,n=this.routesParams.value;if(!e)return null;const r=y(e.currentRoute);return{...r,params:n==null?void 0:n[r.path],rawParams:r.params}})}use(e,n={}){this.router.value=e,this.bindings=n.bindings??{},e.beforeEach(S2(()=>this.handleStatic404Redirect())),e.beforeEach(r=>this.onEnterRoute(r.path,r.params))}async boot(){He.on("auth:before-login",()=>this.storeFlashRoute()),He.on("auth:login",()=>this.restoreFlashRoute()),He.on("purge-storage",()=>this.push({name:"home"}))}__get(e){return this.router.value?super.__get(e)??Reflect.get(this.router.value,e):super.__get(e)}async onEnterRoute(e,n){var r;if(e in this.routesParams.value)return;const s={...n};for(const[o,a]of Object.entries(n)){const l=await this.resolveBinding(e,o,a);Ke(l,u=>{this.routesParams.value={...this.routesParams.value,[e]:{...this.routesParams.value[e],[o]:u}}}),s[o]=l.value}this.history=this.history.slice(0,3),this.history.unshift(e);const i={...this.routesParams.value,[e]:{...s,...this.routesParams.value[e]??{}}};for(const o in i)this.history.includes(o)||(r=this.routesStopWatchers[o])==null||r.forEach(a=>a());this.routesParams.value=bi(i,this.history),this.routesStopWatchers=bi(this.routesStopWatchers,this.history)}handleStatic404Redirect(){const e=_r.pull("static-404-redirect");e&&this.replace(e)}storeFlashRoute(){this.flashRoute=bi(this.currentRoute.value,["path","query","hash"])}async restoreFlashRoute(){if(!this.flashRoute)return;const e=this.flashRoute;gt.whenReady(()=>this.replace(e)),this.flashRoute=null}async resolveBinding(e,n,r){const s=this.bindings[n];if(Array.isArray(r)||!s)return we(r);await gt.ready;const i=oK(e,n),o=lA(()=>Promise.resolve(s(r,i.value)));return MA(()=>o.value)}}const uo=rs(lK);class uK{constructor(e){this.value=e}}const Fy=ue({__name:"Page",props:{class:{}},setup(t){const e=H(()=>dt("mx-auto flex w-full max-w-screen-content grow flex-col px-edge py-8",t.class));return(n,r)=>(I(),ae("main",{class:De(e.value)},[Ee(n.$slots,"default")],2))}}),cK={class:"text-2xl font-bold"},JC=ue({__name:"NotFound",setup(t){return(e,n)=>(I(),Z(Fy,{class:"items-center justify-center"},{default:K(()=>[L("h2",cK,fe(e.$td("notFound.title","404: Not Found")),1),N(y(go),{route:"home"},{default:K(()=>[Ue(fe(e.$td("notFound.home","Go home")),1)]),_:1})]),_:1}))}});function dK(t,e){const n=rK(),r=H(()=>{var i;return(i=uo.routesParams)==null?void 0:i.value[n.path]}),s=H(()=>!(e!=null&&e.title)||!r.value?null:typeof e.title=="string"?e.title:e.title(r.value));return Nt(()=>hK(s.value)),()=>Object.values(r.value??{}).some(i=>i instanceof uK)?dr(JC):dr(t,r.value)}function A_(t,e){return ue({setup:()=>dK(t,e)})}function fK(t){if(t.component){if(typeof t.component=="function"){const e=t.component;t.component=async()=>{const{default:n}=await e();return A_(n,t)};return}t.component=A_(t.component,t)}}function C_(t){return async function(...e){return await gt.ready,t.call(this,...e)}}function pK(t){if(t.beforeEnter){if(Array.isArray(t.beforeEnter)){t.beforeEnter=t.beforeEnter.map(C_);return}t.beforeEnter=C_(t.beforeEnter)}}function hK(t){if(globalThis.document){if(!t){globalThis.document.title=gt.name;return}globalThis.document.title=`${t} | ${gt.name}`}}function $_(t){return fK(t),pK(t),t}function mK(t){const e=t.map($_);return e.some(n=>n.name==="not-found"||n.name==="404")||e.push($_({name:"not-found",path:"/:path(.*)*",component:JC})),e}const gK={$router:uo};function yK(t){return{async install(e){const n=tK({routes:t.routes,history:OH(t.basePath??Br.basePath)});$t.registerComponent("router-link",GC),uo.use(n,t),e.use(n),KU({resolve:r=>n.resolve({name:r}).href,visit:async r=>void await n.push({name:r})}),await _o(e,gK)}}}const vK={class:"m-0 flex p-0"},bK=["src"],wK={class:"sr-only"},YC=ue({__name:"AppNav",setup(t){const e=["home","history","ingredients","insights"],n=H(()=>{var s;const r=(s=uo.currentRoute.value)==null?void 0:s.name;return r?e.map(i=>({route:i,label:qt(`${i}.title`),current:i===r,imageUrl:`/img/nav/${i}.png`})):[]});return(r,s)=>{const i=Eg("RouterLink");return I(),ae("nav",null,[L("ul",vK,[(I(!0),ae(je,null,at(n.value,o=>(I(),ae("li",{key:o.route},[N(i,{class:De(["block p-2 opacity-50 transition-opacity duration-200 hover:opacity-100",{"rounded-full bg-amber-100 opacity-100":o.current}]),to:{name:o.route}},{default:K(()=>[L("img",{src:o.imageUrl,alt:"",class:"size-10"},null,8,bK),L("span",wK,fe(o.label),1)]),_:2},1032,["to","class"])]))),128))])])}}}),jy=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n},_K={},xK={key:0,class:"bg-primary-200 h-mobile-footer-height fixed inset-x-0 bottom-0 flex items-center justify-center"},SK={key:1,class:"prose prose-sm mx-auto w-full max-w-screen-md py-4 text-center text-sm opacity-50"};function EK(t,e){const n=YC,r=mt;return t.$ui.mobile?(I(),ae("footer",xK,[N(n)])):(I(),ae("footer",SK,[N(r,{"lang-key":"app.footer",inline:""})]))}const AK=jy(_K,[["render",EK]]);function fh(){return Oa(rn).length>0||ct.hasLoggedIn()}function XC(){const t=Ra(rn);return H(()=>t.value.length>0||ct.hasLoggedIn())}const QC=we(null),CK=ue({__name:"AppHeader",setup(t){const e=XC();return(n,r)=>{const s=YC,i=V8,o=Q7;return y(e)?(I(),ae("header",{key:0,class:"px-edge max-w-screen-content mx-auto flex w-full items-center justify-between gap-2 pt-8",style:Xt(n.$route.name==="ingredients"&&"--breakpoint-content: 1400px")},[n.$ui.mobile?(I(),ae("div",{key:1,ref:a=>QC.value=a},null,512)):(I(),Z(s,{key:0})),r[0]||(r[0]=L("div",{class:"grow"},null,-1)),N(i),N(o)],4)):ke("",!0)}}}),$K={};function kK(t,e){const n=CK,r=Eg("router-view"),s=AK,i=g8;return I(),Z(i,{class:De({"pb-mobile-footer-height":t.$ui.mobile})},{default:K(()=>[N(n),N(r),N(s)]),_:1},8,["class"])}const IK=jy($K,[["render",kK]]),RK={key:1,class:"text-2xl font-bold"},OK={key:1,class:"mb-4"},TK={key:1,class:"text-2xl font-bold"},cf=ue({__name:"AppPage",props:{header:{default:()=>{}}},setup(t){return(e,n)=>{const r=Fy;return I(),Z(r,null,{default:K(()=>[e.$ui.mobile?(I(),Z(Id,{key:0,to:y(QC)},[e.$slots.header?Ee(e.$slots,"header",{key:0}):t.header?(I(),ae("h1",RK,fe(t.header),1)):ke("",!0)],8,["to"])):(I(),ae("div",OK,[e.$slots.header?Ee(e.$slots,"header",{key:0}):t.header?(I(),ae("h1",TK,fe(t.header),1)):ke("",!0)])),Ee(e.$slots,"default")]),_:3})}}}),DK={viewBox:"0 0 24 24","aria-hidden":"true",width:"1.2em",height:"1.2em"};function PK(t,e){return I(),ae("svg",DK,[...e[0]||(e[0]=[L("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 6h18m-2 0v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6m3 0V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2m-6 5v6m4-6v6"},null,-1)])])}const iu=Qe({name:"lucide-trash2",render:PK}),MK={viewBox:"0 0 20 20","aria-hidden":"true",width:"1.2em",height:"1.2em"};function LK(t,e){return I(),ae("svg",MK,[...e[0]||(e[0]=[L("path",{fill:"currentColor",d:"m12.3 3.7l4 4L4 20H0v-4zm1.4-1.4L16 0l4 4l-2.3 2.3z"},null,-1)])])}const ZC=Qe({name:"zondicons-edit-pencil",render:LK}),NK={viewBox:"0 0 24 24","aria-hidden":"true",width:"1.2em",height:"1.2em"};function FK(t,e){return I(),ae("svg",NK,[...e[0]||(e[0]=[L("g",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"},[L("path",{d:"M2.062 12.348a1 1 0 0 1 0-.696a10.75 10.75 0 0 1 19.876 0a1 1 0 0 1 0 .696a10.75 10.75 0 0 1-19.876 0"}),L("circle",{cx:"12",cy:"12",r:"3"})],-1)])])}const e$=Qe({name:"lucide-eye",render:FK});function jK(t,e=[]){if(e.length===0)return t;const n=e.map(o=>Math.floor(o)),r=e.map((o,a)=>({index:a,remainder:o-n[a]})),i=100-n.reduce((o,a)=>o+a,0);r.sort((o,a)=>a.remainder-o.remainder);for(let o=0;o<i;o++)n[r[o].index]++;return n[e.indexOf(t)]}function ph(t,e=[]){return ot(jK(t*100,e.map(n=>n*100))/100,"percentage")}function ot(t,e){const n=md(e)?e:{unit:e};if(typeof t!="number"||isNaN(t))return n.fallback??(n.unit?qt(`units.${n.unit}`,{n:"?"}):"?");switch(n.unit){case"percentage":return new Intl.NumberFormat(void 0,{style:"percent",maximumFractionDigits:0}).format(t);case"grams":case"calories":case"milliliters":case"hours":return qt(`units.${n.unit}`,{n:Math.round(t).toLocaleString()});default:return t.toLocaleString()}}const qK={class:"w-full"},UK={class:"flex items-center space-x-3 py-2"},BK={class:"text-right text-sm text-gray-600"},zK={key:0},VK={class:"py-2 text-right text-sm font-medium text-gray-900"},qy=ue({__name:"CaloriesBreakdown",props:{breakdown:{},showTotal:{type:Boolean}},setup(t){const e=H(()=>ki(t.breakdown,(r,s)=>(s.calories??0)-(r.calories??0))),n=H(()=>t.breakdown.reduce((r,s)=>r+(s.calories??0),0));return(r,s)=>{const i=mt;return I(),ae("table",qK,[(I(!0),ae(je,null,at(e.value,(o,a)=>(I(),ae("tr",{key:a,class:"border-b border-gray-200"},[L("td",UK,[L("div",{class:De([o.macroClass??"bg-gray-400","h-3 w-3 rounded-full"])},null,2),N(i,{class:"text-sm",text:o.name,inline:""},null,8,["text"])]),L("td",BK,[L("span",null,fe(y(ot)(o.calories,"calories")),1)])]))),128)),t.showTotal?(I(),ae("tfoot",zK,[L("tr",null,[s[0]||(s[0]=L("td",null,null,-1)),L("td",VK,fe(y(ot)(n.value,"calories")),1)])])):ke("",!0)])}}}),HK={class:"@container rounded-lg border bg-white p-6 shadow-sm"},KK={class:"flex flex-col items-center justify-center gap-8 @sm:flex-row"},WK={class:"relative h-36 w-36"},GK={class:"absolute inset-6 flex items-center justify-center rounded-full bg-white"},JK={class:"flex flex-col items-center text-center"},YK={class:"text-lg font-bold"},XK={key:0,class:"text-xs font-normal text-gray-500"},QK={key:1,class:"text-xs font-normal text-gray-500"},ZK={class:"flex flex-col gap-3 self-stretch"},eW={class:"flex items-center gap-3"},tW={class:"flex flex-1 items-center justify-between @sm:flex-col @sm:items-start @sm:justify-start"},nW={class:"text-sm font-medium"},rW={class:"flex flex-row-reverse gap-1 text-xs text-gray-600 @sm:flex-row"},sW={class:"flex items-center gap-3"},iW={class:"flex flex-1 items-center justify-between @sm:flex-col @sm:items-start @sm:justify-start"},oW={class:"text-sm font-medium"},aW={class:"flex flex-row-reverse gap-1 text-xs text-gray-600 @sm:flex-row"},lW={class:"flex items-center gap-3"},uW={class:"flex flex-1 items-center justify-between @sm:flex-col @sm:items-start @sm:justify-start"},cW={class:"text-sm font-medium"},dW={class:"flex flex-row-reverse gap-1 text-xs text-gray-600 @sm:flex-row"},ou=ue({__name:"NutritionChart",props:{nutrition:{}},setup(t){const e=H(()=>sf(t.nutrition)),n=H(()=>e.value.proteinPercentage),r=H(()=>e.value.carbsPercentage),s=H(()=>e.value.fatPercentage);return(i,o)=>(I(),ae("div",HK,[L("div",KK,[L("div",WK,[L("div",{class:"absolute inset-2 rounded-full transition-[--protein-deg,--carbs-deg] duration-300 ease-in-out",style:Xt({background:`conic-gradient(
                        from 0deg,
                        var(--color-protein-500) 0deg var(--protein-deg),
                        var(--color-carbs-500) var(--protein-deg) calc(var(--protein-deg) + var(--carbs-deg)),
                        var(--color-fat-500) calc(var(--protein-deg) + var(--carbs-deg)) 360deg
                    )`,"--carbs-deg":`${r.value*360}deg`,"--protein-deg":`${n.value*360}deg`})},null,4),L("div",GK,[L("div",JK,[L("div",YK,fe(y(ot)(t.nutrition.calories,"calories")),1),t.nutrition.servingInGrams?(I(),ae("span",XK,fe(y(ot)(t.nutrition.servingInGrams,"grams")),1)):t.nutrition.servingInMilliliters?(I(),ae("span",QK,fe(y(ot)(t.nutrition.servingInMilliliters,"milliliters")),1)):ke("",!0)])])]),L("div",ZK,[L("div",eW,[o[1]||(o[1]=L("div",{class:"bg-protein-500 h-5 w-5 rounded-full"},null,-1)),L("div",tW,[L("span",nW,fe(i.$t("history.protein")),1),L("div",rW,[L("span",null,fe(y(ph)(n.value,[r.value,n.value,s.value])),1),o[0]||(o[0]=L("span",null,"•",-1)),L("span",null,fe(y(ot)(t.nutrition.protein,"grams")),1)])])]),L("div",sW,[o[3]||(o[3]=L("div",{class:"bg-carbs-500 h-5 w-5 rounded-full"},null,-1)),L("div",iW,[L("span",oW,fe(i.$t("history.carbs")),1),L("div",aW,[L("span",null,fe(y(ph)(r.value,[r.value,n.value,s.value])),1),o[2]||(o[2]=L("span",null,"•",-1)),L("span",null,fe(y(ot)(t.nutrition.carbs,"grams")),1)])])]),L("div",lW,[o[5]||(o[5]=L("div",{class:"bg-fat-500 h-5 w-5 rounded-full"},null,-1)),L("div",uW,[L("span",cW,fe(i.$t("history.fat")),1),L("div",dW,[L("span",null,fe(y(ph)(s.value,[r.value,n.value,s.value])),1),o[4]||(o[4]=L("span",null,"•",-1)),L("span",null,fe(y(ot)(t.nutrition.fat,"grams")),1)])])])])])]))}}),fW={class:"flex flex-col"},pW={class:"text-2xl font-bold text-gray-900"},hW={key:0,class:"text-gray-500"},mW={key:0,class:"space-y-1"},gW={key:2,class:"rounded-lg bg-gray-50"},yW={class:"border-b border-gray-200 bg-gray-100 px-4 py-2"},vW={class:"text-sm font-medium text-gray-900"},bW={class:"p-4"},wW=ue({__name:"ViewMealModal",props:{meal:{}},setup(t){const e=H(()=>t.meal.getCaloriesBreakdown());return(n,r)=>{const s=go,i=mt,o=ou,a=qy,l=Jn;return I(),Z(l,{class:"space-y-4"},{default:K(()=>{var u,c,d,f,p,h,g,w,x;return[L("div",fW,[L("h1",pW,[Ue(fe(((u=t.meal.recipe)==null?void 0:u.name)??n.$t("logs.meal"))+" ",1),(d=(c=t.meal.recipe)==null?void 0:c.servingsBreakdown)!=null&&d.quantity?(I(),ae("span",hW," ("+fe((p=(f=t.meal.recipe)==null?void 0:f.servingsBreakdown)==null?void 0:p.quantity)+") ",1)):ke("",!0)]),(h=t.meal.recipe)!=null&&h.externalUrls.length?(I(),ae("div",mW,[(I(!0),ae(je,null,at(t.meal.recipe.externalUrls,A=>(I(),Z(s,{key:A,href:A,class:"block text-xs text-blue-600 hover:text-blue-800 hover:underline"},{default:K(()=>[Ue(fe(A),1)]),_:2},1032,["href"]))),128))])):ke("",!0)]),(g=t.meal.recipe)!=null&&g.description?(I(),Z(i,{key:0,class:"rounded-lg bg-gray-50 p-4 text-sm",text:t.meal.recipe.description},null,8,["text"])):ke("",!0),(w=t.meal.recipe)!=null&&w.nutrition?(I(),Z(o,{key:1,nutrition:t.meal.recipe.nutrition},null,8,["nutrition"])):ke("",!0),(x=e.value)!=null&&x.length?(I(),ae("div",gW,[L("div",yW,[L("h2",vW,fe(n.$t("logs.mealIngredients")),1)]),L("div",bW,[N(a,{breakdown:e.value,"show-total":""},null,8,["breakdown"])])])):ke("",!0)]}),_:1})}}}),_W=[fa.Grams,fa.Milliliters,"servings"];function df(t){return ki(t,(e,n)=>(e.consumedAt??e.createdAt).getTime()-(n.consumedAt??n.createdAt).getTime())}function t$(t,e){const n=t instanceof Set?t:xy(t);return e??(e=Oa(rn)),e.filter(r=>{var i,o;const s=r.recipe&&r.recipe.ingredients.length>0?(i=r.recipe)==null?void 0:i.getIngredientsBreakdown():(o=qr.recipes.find(a=>{var l;return(l=r.recipe)==null?void 0:l.externalUrls.includes(a.url)}))==null?void 0:o.getIngredientsBreakdown();return s==null?void 0:s.some(a=>n.has(la(bm(a))))})}function Nm(t){return aa(t.map(e=>{const n=Wr.ingredient(e.name),r=n==null?void 0:n.nutrition,s=(function(){if(r)switch(e.unit){case"grams":return r.servingInGrams?e.quantity/r.servingInGrams:void 0;case"milliliters":return r.servingInMilliliters?e.quantity/r.servingInMilliliters:void 0;case"servings":return typeof e.quantity=="number"?e.quantity:1}})(),i=(function(){switch(e.unit){case"grams":return`${e.quantity}g ${e.name}`;case"milliliters":return`${e.quantity}ml ${e.name}`;case"servings":return`${e.quantity} ${e.name}`}})();return!r||!s?{name:i,macroClass:"bg-gray-400"}:{name:i,macroClass:r.macroClass,calories:typeof r.calories=="number"?r.calories*s:null,protein:typeof r.protein=="number"?r.protein*s:null,carbs:typeof r.carbs=="number"?r.carbs*s:null,fat:typeof r.fat=="number"?r.fat*s:null}}))}const xW={class:"text-sm font-medium"},SW={class:"grid grid-cols-1 gap-2"},EW={class:"self-end text-sm text-gray-600"},AW={class:"text-sm"},CW={class:"text-sm"},$W={class:"mt-4 flex justify-end space-x-2"},kW=ue({__name:"EditMealModal",props:{meal:{}},setup(t){var E,m,v,_,C,$,k,D,G,J,W,j,se;const{close:e}=xo(),n=we(!1),r=we(!1),s=qr.recipes.find(R=>{var V;return(V=t.meal.recipe)==null?void 0:V.externalUrls.includes(R.url)}),i=H(()=>qr.recipes.concat({id:"none"})),o=H(()=>Wr.ingredients.map(R=>R.name)),a=qi({name:ao((E=t.meal.recipe)==null?void 0:E.name),description:Wc((m=t.meal.recipe)==null?void 0:m.description),recipe:kA(s??{id:"none"}),servings:gn((_=(v=t.meal.recipe)==null?void 0:v.servingsBreakdown)==null?void 0:_.quantity),calories:gn((($=(C=t.meal.recipe)==null?void 0:C.nutrition)==null?void 0:$.calories)??0),protein:gn(((D=(k=t.meal.recipe)==null?void 0:k.nutrition)==null?void 0:D.protein)??0),carbs:gn(((J=(G=t.meal.recipe)==null?void 0:G.nutrition)==null?void 0:J.carbs)??0),fat:gn(((j=(W=t.meal.recipe)==null?void 0:W.nutrition)==null?void 0:j.fat)??0),consumedAt:$A(t.meal.consumedAt??t.meal.createdAt)}),l=H(()=>[fa.Grams,fa.Milliliters,"servings"]),u=we((se=t.meal.recipe)!=null&&se.ingredients.length?Jc(t.meal):[]),c=we(u.value.length||p(a.recipe)),d=H(()=>Nm(u.value)),f=H(()=>d.value.reduce((R,V)=>R+(V.calories??0),0));function p(R){return R.id==="none"}function h(R){return p(R)?qt("logs.noRecipe"):R.name}function g(){c.value=!0,u.value=Jc(t.meal)}function w(R,V){V!=="servings"||u.value[R].quantity!==100||(u.value[R].quantity=1)}async function x(R,V,F){var he;const ee=[...((he=R.recipe)==null?void 0:he.externalUrls)??[]],z=R.recipe??R.relatedRecipe.attach(),ie=z.nutrition??z.relatedNutrition.attach(),pe=F.reduce((Ae,X)=>Ae+(X.calories??0),0);s!=null&&s.url&&ll(ee,s.url),p(a.recipe)||ee.push(a.recipe.url),z.setAttributes({name:a.name,ingredients:V.slice(0),externalUrls:ee}),n.value?ie.setAttributes({rawCalories:`${ft(pe)} calories`,rawProtein:`${ft(F.reduce((Ae,X)=>Ae+(X.protein??0),0),2)} grams`,rawCarbs:`${ft(F.reduce((Ae,X)=>Ae+(X.carbs??0),0),2)} grams`,rawFat:`${ft(F.reduce((Ae,X)=>Ae+(X.fat??0),0),2)} grams`}):ie.setAttributes({rawCalories:`${ft(a.calories??0)} calories`,rawProtein:`${ft(a.protein??0,2)} grams`,rawCarbs:`${ft(a.carbs??0,2)} grams`,rawFat:`${ft(a.fat??0,2)} grams`}),await R.save()}async function A(){await e(),await $t.loading({delay:300,message:qt("logs.updating")},async()=>{var ee,z;const R=u.value.map(ie=>{switch(ie.unit){case"grams":return`${ie.quantity}g ${ie.name}`;case"milliliters":return`${ie.quantity}ml ${ie.name}`;case"servings":return`${ie.quantity} ${ie.name}`}});if(n.value)for(const ie of R)await Wr.resolveIngredient(rf(ie));const V=a.servings??1,F=r.value?Oa(rn).filter(ie=>{var pe,he,Ae;return((pe=ie.recipe)==null?void 0:pe.name)&&((he=ie.recipe)==null?void 0:he.name)===((Ae=t.meal.recipe)==null?void 0:Ae.name)}):[];t.meal.setAttributes({consumedAt:a.consumedAt,servings:a.servings}),(t.meal.recipe??t.meal.relatedRecipe.attach()).setAttributes({description:a.description}),await x(t.meal,R,d.value);for(const ie of F){const pe=(((z=(ee=ie.recipe)==null?void 0:ee.servingsBreakdown)==null?void 0:z.quantity)??1)/V,he=u.value.map(X=>{switch(X.unit){case"grams":return`${X.quantity*pe}g ${X.name}`;case"milliliters":return`${X.quantity*pe}ml ${X.name}`;case"servings":return`${X.quantity*pe} ${X.name}`}}),Ae=Nm(u.value.map(X=>({...X,quantity:X.quantity*pe})));await x(ie,he,Ae)}})}return(R,V)=>{var re;const F=As,ee=ru,z=TA,ie=RA,pe=iu,he=rt,Ae=qy,X=Ia,te=na,T=Ui,Y=Jn;return I(),Z(Y,{title:R.$t("logs.editTitle",{name:((re=t.meal.recipe)==null?void 0:re.name)||R.$t("logs.meal")}),"fullscreen-on-mobile":""},{default:K(()=>[N(T,{form:y(a),class:"flex flex-1 flex-col space-y-2",onSubmit:V[4]||(V[4]=ne=>A())},{default:K(()=>{var ne;return[N(F,{name:"name",label:R.$t("logs.mealName")},null,8,["label"]),N(ee,{name:"recipe",label:R.$t("logs.mealRecipe"),options:i.value,"render-option":h,"compare-options":(xe,M)=>xe.id===M.id},null,8,["label","options","compare-options"]),N(F,{name:"servings",step:"0.1",label:R.$t("logs.mealServings")},null,8,["label"]),N(z,{name:"description",label:R.$t("logs.mealDescription")},null,8,["label"]),n.value?ke("",!0):(I(),ae(je,{key:0},[N(F,{name:"calories",label:R.$t("logs.mealCalories"),step:"0.01"},null,8,["label"]),N(F,{name:"protein",label:R.$t("logs.mealProtein"),step:"0.01"},null,8,["label"]),N(F,{name:"carbs",label:R.$t("logs.mealCarbs"),step:"0.01"},null,8,["label"]),N(F,{name:"fat",label:R.$t("logs.mealFat"),step:"0.01"},null,8,["label"])],64)),N(F,{name:"consumedAt",label:R.$t("logs.mealConsumedAt"),type:"datetime-local"},null,8,["label"]),L("h2",xW,fe(R.$t("logs.mealIngredients")),1),L("ul",{class:De(["space-y-2 overflow-y-auto",{hidden:u.value.length===0}])},[L("li",SW,[(I(!0),ae(je,null,at(u.value,(xe,M)=>(I(),ae("div",{key:M,class:"flex space-x-2"},[N(ie,{modelValue:xe.name,"onUpdate:modelValue":P=>xe.name=P,class:"flex-1",placeholder:R.$t("logs.mealIngredientName"),options:o.value},null,8,["modelValue","onUpdate:modelValue","placeholder","options"]),N(F,{id:`ingredients-${M}-quantity`,modelValue:xe.quantity,"onUpdate:modelValue":P=>xe.quantity=P,type:"number",step:"0.01",class:"w-20"},null,8,["id","modelValue","onUpdate:modelValue"]),N(ee,{modelValue:xe.unit,"onUpdate:modelValue":[P=>xe.unit=P,P=>w(M,P)],"label-class":"sr-only",label:R.$t("logs.mealIngredientUnit"),options:l.value,"render-option":P=>R.$t(`logs.mealIngredientUnits.${P}`)},null,8,["modelValue","onUpdate:modelValue","label","options","render-option"]),N(he,{id:`ingredients-${M}-delete`,variant:"ghost",class:"text-red-500",onClick:P=>u.value.splice(M,1)},{default:K(()=>[N(pe,{class:"size-4"})]),_:1},8,["id","onClick"])]))),128))])],2),c.value?(I(),Z(he,{key:1,variant:"secondary",class:"w-full",onClick:V[0]||(V[0]=xe=>u.value.push({name:"",quantity:100,unit:"grams"}))},{default:K(()=>[Ue(fe(R.$t("logs.addIngredient")),1)]),_:1})):(I(),Z(he,{key:2,variant:"secondary",class:"w-full",onClick:V[1]||(V[1]=xe=>g())},{default:K(()=>[Ue(fe(R.$t("logs.mealIngredientsCustom")),1)]),_:1})),f.value&&n.value?(I(),ae(je,{key:3},[L("span",EW,fe(R.$t("logs.totalCalories"))+": "+fe(y(ot)(f.value,"calories")),1),(ne=d.value)!=null&&ne.length?(I(),Z(X,{key:0,label:R.$t("logs.viewBreakdown"),class:"overflow-y-auto"},{default:K(()=>[N(Ae,{breakdown:d.value},null,8,["breakdown"])]),_:1},8,["label"])):ke("",!0)],64)):ke("",!0),N(te,{modelValue:n.value,"onUpdate:modelValue":V[2]||(V[2]=xe=>n.value=xe)},{default:K(()=>[L("span",AW,fe(R.$t("logs.editRecalculate")),1)]),_:1},8,["modelValue"]),N(te,{modelValue:r.value,"onUpdate:modelValue":V[3]||(V[3]=xe=>r.value=xe)},{default:K(()=>[L("span",CW,fe(R.$t("logs.editUpdateAll")),1)]),_:1},8,["modelValue"]),V[6]||(V[6]=L("div",{class:"grow"},null,-1)),L("div",$W,[V[5]||(V[5]=L("span",{class:"flex-grow"},null,-1)),N(he,{variant:"secondary",onClick:y(e)},{default:K(()=>[Ue(fe(R.$t("ui.cancel")),1)]),_:1},8,["onClick"]),N(he,{submit:""},{default:K(()=>[Ue(fe(R.$t("ui.save")),1)]),_:1})])]}),_:1},8,["form"])]),_:1},8,["title"])}}}),IW={key:0,class:"font-medium"},RW={key:0,class:"text-xs text-gray-500"},OW={key:1,class:"text-sm text-gray-500"},TW={class:"text-xs text-gray-400"},DW={class:"flex space-x-1"},ff=ue({__name:"MealLog",props:{meal:{}},setup(t){const e=MA(()=>t.meal),n=H(()=>(t.meal.consumedAt??t.meal.createdAt).toLocaleString());async function r(){var s;confirm(qt("logs.deleteConfirm",{name:(s=t.meal.recipe)==null?void 0:s.name}))&&await t.meal.delete()}return(s,i)=>{var c,d,f;const o=e$,a=rt,l=ZC,u=iu;return I(),ae("div",{key:y(e).id,class:De(["flex w-full items-center justify-between rounded-lg p-4",y(e).incomplete?"bg-red-100":"bg-primary-100"])},[L("div",null,[(c=y(e).recipe)!=null&&c.name?(I(),ae("h3",IW,[Ue(fe(y(e).recipe.name)+" ",1),y(e).recipe.servings?(I(),ae("span",RW,"("+fe(y(e).recipe.servings)+")",1)):ke("",!0)])):ke("",!0),y(e).nutrition?(I(),ae("p",OW,fe(y(ot)(y(e).nutrition.calories,"calories"))+" · "+fe(s.$t("units.protein",{protein:y(ot)(y(e).nutrition.protein,"grams")}))+" · "+fe(s.$t("units.carbs",{carbs:y(ot)(y(e).nutrition.carbs,"grams")}))+" · "+fe(s.$t("units.fat",{fat:y(ot)(y(e).nutrition.fat,"grams")})),1)):ke("",!0),L("p",TW,fe(n.value),1)]),L("div",DW,[N(a,{size:"icon",variant:"ghost",class:"text-gray-400 transition-colors hover:text-green-500","aria-label":s.$t("logs.view",{name:(d=y(e).recipe)==null?void 0:d.name}),title:s.$t("logs.view",{name:(f=y(e).recipe)==null?void 0:f.name}),onClick:i[0]||(i[0]=p=>s.$ui.modal(wW,{meal:t.meal}))},{default:K(()=>[N(o,{class:"size-4"})]),_:1},8,["aria-label","title"]),N(a,{size:"icon",variant:"ghost",class:"text-gray-400 transition-colors hover:text-blue-500",title:s.$t("ingredients.edit"),"aria-label":s.$t("ingredients.edit"),onClick:i[1]||(i[1]=p=>s.$ui.modal(kW,{meal:t.meal}))},{default:K(()=>[N(l,{class:"size-4"})]),_:1},8,["title","aria-label"]),N(a,{size:"icon",variant:"ghost",class:"text-gray-400 transition-colors hover:text-red-500",title:s.$t("logs.delete"),"aria-label":s.$t("logs.delete"),onClick:i[2]||(i[2]=p=>r())},{default:K(()=>[N(u,{class:"size-5"})]),_:1},8,["title","aria-label"])])],2)}}}),PW={class:"month-picker relative"},MW={key:0,class:"absolute top-full left-0 z-10 mt-1 w-64 rounded-lg border border-gray-300 bg-white shadow-lg"},LW={class:"flex items-center justify-between border-b border-gray-200 p-3"},NW={class:"font-semibold"},FW={class:"p-3"},jW={class:"grid grid-cols-3 gap-1"},qW=["onClick"],UW=ue({__name:"MonthPicker",props:{modelValue:{default:()=>({month:new Date().getMonth(),year:new Date().getFullYear()})},modelModifiers:{}},emits:["update:modelValue"],setup(t){const e=YD(t,"modelValue"),n={month:new Date().getMonth(),year:new Date().getFullYear()},r=we(!1),s=we(e.value.year),i=js(12).map(u=>Intl.DateTimeFormat("en-US",{month:"short"}).format(new Date(0,u))),o=H(()=>Intl.DateTimeFormat("en-US",{year:"numeric",month:"long"}).format(new Date(e.value.year,e.value.month)));Ke(()=>e.value.year,u=>{s.value=u});function a(u){e.value={month:u,year:s.value},r.value=!1}function l(u){u.target.closest(".month-picker")||(r.value=!1)}return Dt(()=>{document.addEventListener("click",l)}),on(()=>{document.removeEventListener("click",l)}),(u,c)=>(I(),ae("div",PW,[L("button",{class:"flex items-center gap-2 rounded-lg bg-white px-3 py-2 text-xl font-semibold text-gray-900 hover:bg-gray-100 focus:border-transparent focus:ring-2 focus:ring-blue-500 focus:outline-none",onClick:c[0]||(c[0]=d=>r.value=!r.value)},[L("span",null,fe(o.value),1),c[3]||(c[3]=L("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[L("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1))]),r.value?(I(),ae("div",MW,[L("div",LW,[L("button",{class:"rounded p-1 hover:bg-gray-100",onClick:c[1]||(c[1]=d=>s.value--)},[...c[4]||(c[4]=[L("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[L("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])]),L("span",NW,fe(s.value),1),L("button",{class:"rounded p-1 hover:bg-gray-100",onClick:c[2]||(c[2]=d=>s.value++)},[...c[5]||(c[5]=[L("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[L("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])])]),L("div",FW,[L("div",jW,[(I(!0),ae(je,null,at(y(i),(d,f)=>(I(),ae("button",{key:f,class:De(["rounded px-3 py-2 text-sm transition-colors hover:bg-blue-50",{"bg-blue-500 text-white hover:bg-blue-600":e.value.month===f&&e.value.year===s.value,"text-gray-900":e.value.month!==f||e.value.year!==s.value,"border border-blue-500":f===n.month&&s.value===n.year}]),onClick:p=>a(f)},fe(d),11,qW))),128))])])])):ke("",!0)]))}}),BW=ss({name:"goals",persist:["calories","protein","carbs","fat"],initialState:()=>({calories:null,protein:null,carbs:null,fat:null})});class zW extends BW{}const Uy=gd(zW),VW={key:0,class:"relative [--bars-height:theme(spacing.44)]"},HW={class:"pointer-events-none absolute inset-x-0 top-2 flex h-(--bars-height) flex-col justify-between select-none"},KW={class:"absolute -top-2 right-0 flex h-[calc(var(--bars-height)+theme(spacing.4))] flex-col items-end justify-between"},WW={class:"relative mr-20 flex overflow-x-auto overflow-y-hidden"},GW=["onClick"],JW={class:"flex h-(--bars-height) items-end"},YW={class:"text-sm"},XW={class:"text-xs"},QW={key:1,class:"w-7 shrink-0"},ZW={key:1,class:"mt-4"},e9={class:"text-center text-gray-500"},t9={key:2,class:"mt-4"},n9={class:"text-center text-2xl font-medium"},r9={class:"mt-6 w-full space-y-4"},s9=ue({__name:"History",setup(t){var h;const e=Ra(rn),n=we({month:new Date().getMonth(),year:new Date().getFullYear()}),r=H(()=>new Date(n.value.year,n.value.month+1,0).getDate()),s=H(()=>js(r.value).map(g=>g+1)),i=H(()=>{var w;const g=Object.fromEntries(s.value.map(x=>[x,[]]));for(const x of e.value){const A=x.consumedAt??x.createdAt;A.getFullYear()!==n.value.year||A.getMonth()!==n.value.month||(w=g[A.getDate()])==null||w.push(x)}return g}),o=H(()=>Object.fromEntries(s.value.map(g=>{const w=i.value[g],x=w.reduce((v,_)=>{var C,$;return v+((($=(C=_.recipe)==null?void 0:C.nutrition)==null?void 0:$.calories)??0)},0),A=w.reduce((v,_)=>{var C,$;return v+((($=(C=_.recipe)==null?void 0:C.nutrition)==null?void 0:$.carbs)??0)},0),E=w.reduce((v,_)=>{var C,$;return v+((($=(C=_.recipe)==null?void 0:C.nutrition)==null?void 0:$.protein)??0)},0),m=w.reduce((v,_)=>{var C,$;return v+((($=(C=_.recipe)==null?void 0:C.nutrition)==null?void 0:$.fat)??0)},0);return[g,{calories:x,carbs:A,protein:E,fat:m}]}))),a=H(()=>Math.ceil(Math.max(Uy.calories??0,...Object.values(o.value).map(g=>g.calories))/1e3)*1e3),l=H(()=>js((a.value+1e3)/1e3).map(g=>1e3*g).reverse()),u=H(()=>Object.fromEntries(s.value.map(g=>{const w=df(i.value[g]),x=o.value[g],A=new Date(n.value.year,n.value.month,g).toLocaleDateString(void 0,{weekday:"short"}),E=sf(x);return[g,w.length===0?null:{meals:w,weekday:A,nutrition:new ii({rawCalories:`${x.calories} calories`,rawCarbs:`${x.carbs} grams`,rawProtein:`${x.protein} grams`,rawFat:`${x.fat} grams`}),scalePercentage:x.calories/a.value,proteinPercentage:E.proteinPercentage,carbsPercentage:E.carbsPercentage,fatPercentage:E.fatPercentage}]}))),c=H(()=>Object.values(u.value).every(g=>!g)),d=we(Number((h=Object.entries(u.value).reverse().find(([,g])=>!!g))==null?void 0:h[0])),f=H(()=>new Date(n.value.year,n.value.month,d.value).toLocaleDateString(void 0,{weekday:"long",day:"numeric",month:"long",year:"numeric"})),p=H(()=>d.value&&u.value[d.value]);return Ke(u,()=>{var g;d.value&&u.value[d.value]||(d.value=Number((g=Object.entries(u.value).reverse().find(([,w])=>!!w))==null?void 0:g[0]))}),(g,w)=>{const x=UW,A=ou,E=ff,m=cf;return I(),Z(m,null,{header:K(()=>[N(x,{modelValue:n.value,"onUpdate:modelValue":w[0]||(w[0]=v=>n.value=v)},null,8,["modelValue"])]),default:K(()=>[c.value?(I(),ae("div",ZW,[L("p",e9,fe(g.$t("history.emptyMonth")),1)])):(I(),ae("div",VW,[L("div",HW,[g.$goals.calories?(I(),ae("span",{key:0,class:"absolute inset-x-0 border-b border-dashed border-red-500",style:Xt({top:`${(1-g.$goals.calories/a.value)*100}%`})},null,4)):ke("",!0),g.$goals.calories?(I(),ae("span",{key:1,class:"absolute right-0 -translate-y-full text-xs text-red-500",style:Xt({top:`${(1-g.$goals.calories/a.value)*100}%`})},fe(y(ot)(g.$goals.calories,"calories")),5)):ke("",!0),(I(!0),ae(je,null,at(l.value,v=>(I(),ae("span",{key:v,class:"w-full border-b border-dashed border-gray-300"}))),128))]),L("div",KW,[(I(!0),ae(je,null,at(l.value,v=>(I(),ae("span",{key:v,class:"text-xs text-gray-500"},fe(y(ot)(v,"calories")),1))),128))]),L("div",WW,[(I(!0),ae(je,null,at(s.value,v=>(I(),ae(je,{key:v},[u.value[v]?(I(),ae("button",{key:0,type:"button",class:De(["flex flex-col items-center justify-end rounded px-1 py-2 transition-all duration-200 hover:scale-105",{"bg-blue-700/15":d.value===v}]),onClick:_=>d.value=v},[L("div",JW,[L("div",{class:"relative w-5",style:Xt(`height: ${u.value[v].scalePercentage*100}%`)},[w[1]||(w[1]=L("div",{class:"bg-protein-500 absolute inset-x-0 bottom-0 h-full rounded"},null,-1)),L("div",{class:"bg-carbs-500 absolute inset-x-0 bottom-0",style:Xt({height:`${(u.value[v].carbsPercentage+u.value[v].fatPercentage)*100}%`})},null,4),L("div",{class:"bg-fat-500 absolute inset-x-0 bottom-0",style:Xt({height:`${u.value[v].fatPercentage*100}%`})},null,4)],4)]),L("div",{class:De(["mt-1 flex h-8 flex-col",{"font-semibold":v===d.value}])},[L("span",YW,fe(v),1),L("span",XW,fe(u.value[v].weekday),1)],2)],10,GW)):(I(),ae("div",QW))],64))),128))])])),p.value?(I(),ae("div",t9,[L("h3",n9,fe(g.$t("history.meals",{n:p.value.meals.length,day:f.value})),1),N(A,{class:"mt-4",nutrition:p.value.nutrition},null,8,["nutrition"]),L("div",r9,[(I(!0),ae(je,null,at(p.value.meals,v=>(I(),Z(E,{key:v.url,meal:v},null,8,["meal"]))),128))])])):ke("",!0)]),_:1})}}}),i9={viewBox:"0 0 36 36","aria-hidden":"true",width:"1.2em",height:"1.2em"};function o9(t,e){return I(),ae("svg",i9,[...e[0]||(e[0]=[gS('<path fill="#66757F" d="M3.923 22.923a1 1 0 1 1-1.847-.769L6.693 9.616a1 1 0 1 1 1.846.769z"></path><path fill="#66757F" d="M13.923 22.154a1 1 0 0 1-1.847.769L7.461 10.385a1 1 0 0 1 1.847-.769zm10.001.769a1.001 1.001 0 0 1-1.847-.769l4.616-12.539a1 1 0 0 1 1.846.77z"></path><path fill="#66757F" d="M33.923 22.154a1 1 0 1 1-1.847.769l-4.615-12.538a1 1 0 1 1 1.846-.769z"></path><path fill="#FFAC33" d="M14.857 22H1.143C.512 22 0 22.511 0 23.143c0 2.524 3.582 4.571 8 4.571s8-2.047 8-4.571c0-.632-.512-1.143-1.143-1.143M24 34H12a1 1 0 0 1-1-1c0-2.209 3.134-4 7-4s7 1.791 7 4a1 1 0 0 1-1 1m10.857-12H21.143c-.632 0-1.143.511-1.143 1.143c0 2.524 3.581 4.571 8 4.571s8-2.047 8-4.571c0-.632-.511-1.143-1.143-1.143"></path><path fill="#FFAC33" d="M19 3a1 1 0 1 0-2 0v27a1 1 0 1 0 2 0z"></path><circle cx="18" cy="4" r="2" fill="#FFAC33"></circle><circle cx="8" cy="10" r="2" fill="#FFAC33"></circle><circle cx="28" cy="10" r="2" fill="#FFAC33"></circle><path fill="#FFAC33" d="M28 10c0 1.104 0 0-10 0S8 11.104 8 10s3-4 10-4s10 2.896 10 4"></path>',9)])])}const a9=Qe({name:"twemoji-balance-scale",render:o9});function qo(t){return md(t)&&t.id==="new-meal"}const l9={class:"grid grid-cols-1 gap-2"},u9={key:3,class:"rounded-md bg-red-50 p-2 text-sm text-red-500"},c9={class:"self-end text-sm text-gray-600"},n$=ue({__name:"CreateMealModal",setup(t){const{close:e}=xo(),n=we(""),r=Ra(rn),s=we(!1),i=H(()=>Wr.ingredients.map(_=>_.name)),o=H(()=>{var $;const _=new Set,C=[];for(const k of r.value)!(($=k.recipe)!=null&&$.name)||_.has(k.recipe.name)||(_.add(k.recipe.name),C.push(k));for(const k of qr.recipes)_.has(k.name)||(_.add(k.name),C.push(k));return ki(C,(k,D)=>ec(w(k),w(D)))}),a=qi({meal:kA({id:"new-meal",name:""},{rules:["required-meal"]}),servings:gn(),mealServings:gn(1),consumedAt:$A(new Date)}),l=we([]),u=H(()=>_=>{var $;return _===-1?qt("logs.mealServingsCustom"):(a.meal instanceof ar?(($=a.meal.servingsBreakdown)==null?void 0:$.renderQuantity)??_c:_c)(_)}),c=H(()=>{if(!gu(a.meal,ar))return[];const _=a.meal.servingsBreakdown,C=(_==null?void 0:_.quantity)??1;return _?ki(K1([...js(10).map($=>$+1).map($=>$*10**Math.floor(Math.log10(C))),C]),($,k)=>$>k?1:-1).concat(-1):js(10).map($=>$+1).concat(-1)}),d=H(()=>{var _;if(qo(a.meal)||s.value)return Nm(l.value);if(a.meal instanceof ar){const C=a.meal,$=a.servings===-1?a.mealServings:a.servings,k=((_=C==null?void 0:C.servingsBreakdown)==null?void 0:_.quantity)??1,D=$?$/(k??1):1;return C==null?void 0:C.getCaloriesBreakdown(D)}return a.meal.getCaloriesBreakdown(a.mealServings)}),f=H(()=>{var _;return(_=d.value)==null?void 0:_.reduce((C,$)=>C+($.calories??0),0)});function p(_,C){C!=="servings"||l.value[_].quantity!==100||(l.value[_].quantity=1)}function h(){var $,k;if(l.value.length&&s.value)return;if(!gu(a.meal,ar)){l.value=s.value&&!qo(a.meal)?Jc(a.meal,{servings:a.mealServings}):[];return}const _=a.servings??(($=a.meal.servingsBreakdown)==null?void 0:$.quantity)??1,C=(k=a.meal.servingsBreakdown)!=null&&k.quantity&&a.servings?a.servings/a.meal.servingsBreakdown.quantity:1;a.servings=c.value.find(D=>D===_)??c.value[0],l.value=s.value?Jc(a.meal,{multiplier:C}):[]}async function g(){if(n.value="",a.meal instanceof ar){await m(a.meal);return}if(a.meal instanceof rn){await E(a.meal);return}await A(a.meal.name.trim())}function w(_){var C;return _ instanceof rn?((C=_.recipe)==null?void 0:C.name)??"":_.name}async function x(){const _=l.value.map(C=>{switch(C.unit){case"grams":return`${C.quantity}g ${C.name}`;case"milliliters":return`${C.quantity}ml ${C.name}`;case"servings":return`${C.quantity} ${C.name}`}});for(const C of _)await Wr.resolveIngredient(rf(C));return _}async function A(_){await e(),await $t.loading({delay:300,message:qt("logs.adding")},async()=>{const C=await x();await v(_,{ingredients:C})})}async function E(_){await e(),await $t.loading({delay:300,message:qt("logs.adding")},async()=>{var k,D;const C=a.mealServings??1,$=s.value?await x():(k=d.value)==null?void 0:k.map(G=>G.name);await v(rx((D=_.recipe)==null?void 0:D.name),{servings:C!==1?ot(C):void 0,ingredients:$})})}async function m(_){await e(),await $t.loading({delay:300,message:qt("logs.adding")},async()=>{var $;if(!s.value)for(const k of _.getIngredientsBreakdown())await Wr.resolveIngredient(k);const C=s.value?await x():void 0;await v(_.name,{servings:a.servings&&_.servingsBreakdown?a.servings===-1?_.servingsBreakdown.renderQuantity(a.mealServings??1):_.servingsBreakdown.renderQuantity(a.servings):a.servings!==1?($=a.servings??_.servings)==null?void 0:$.toString():void 0,externalUrls:[_.url],ingredients:C})})}async function v(_,C={}){var G,J,W;const $=new rn({consumedAt:a.consumedAt}),k={calories:f.value??0,fat:((G=d.value)==null?void 0:G.reduce((j,se)=>j+(se.fat??0),0))??0,protein:((J=d.value)==null?void 0:J.reduce((j,se)=>j+(se.protein??0),0))??0,carbs:((W=d.value)==null?void 0:W.reduce((j,se)=>j+(se.carbs??0),0))??0},D=$.relatedRecipe.attach({name:_,servings:C.servings,externalUrls:C.externalUrls,ingredients:C.ingredients});(k.calories||k.protein||k.carbs||k.fat)&&D.relatedNutrition.attach({rawCalories:typeof k.calories=="number"?`${ft(k.calories)} calories`:void 0,rawProtein:typeof k.protein=="number"?`${ft(k.protein,2)} grams`:void 0,rawCarbs:typeof k.carbs=="number"?`${ft(k.carbs,2)} grams`:void 0,rawFat:typeof k.fat=="number"?`${ft(k.fat,2)} grams`:void 0}),await $.save()}return Ke(()=>a.meal,h,{immediate:!0}),Ke(s,h),(_,C)=>{const $=RA,k=ru,D=As,G=iu,J=rt,W=na,j=qy,se=Ia,R=Ui,V=Jn;return I(),Z(V,{title:_.$t("logs.add"),"fullscreen-on-mobile":""},{default:K(()=>[N(R,{form:y(a),class:"flex flex-1 flex-col space-y-2 overflow-y-auto",onSubmit:C[2]||(C[2]=F=>g())},{default:K(()=>{var F;return[N($,{name:"meal","label-class":"sr-only",label:_.$t("logs.meal"),options:o.value,"render-option":w,"compare-options":(ee,z)=>ee.id===z.id,placeholder:_.$t("logs.mealPlaceholder"),"new-input-value":ee=>({id:"new-meal",name:ee})},null,8,["label","options","compare-options","placeholder","new-input-value"]),y(gu)(y(a).meal,y(ar))?(I(),Z(k,{key:0,name:"servings",options:c.value,"render-option":u.value},null,8,["options","render-option"])):ke("",!0),y(a).servings===-1||y(gu)(y(a).meal,y(rn))?(I(),Z(D,{key:1,name:"mealServings",step:"0.1",placeholder:_.$t("logs.mealServings")},null,8,["placeholder"])):ke("",!0),y(qo)(y(a).meal)||s.value?(I(),ae("ul",{key:2,class:De(["space-y-2 overflow-y-auto",{hidden:l.value.length===0}])},[L("li",l9,[(I(!0),ae(je,null,at(l.value,(ee,z)=>(I(),ae("div",{key:z,class:"flex space-x-2"},[N($,{modelValue:ee.name,"onUpdate:modelValue":ie=>ee.name=ie,class:"flex-1",placeholder:_.$t("logs.mealIngredientName"),options:i.value},null,8,["modelValue","onUpdate:modelValue","placeholder","options"]),N(D,{id:`ingredients-${z}-quantity`,modelValue:ee.quantity,"onUpdate:modelValue":ie=>ee.quantity=ie,type:"number",step:"0.01",class:"w-20"},null,8,["id","modelValue","onUpdate:modelValue"]),N(k,{modelValue:ee.unit,"onUpdate:modelValue":[ie=>ee.unit=ie,ie=>p(z,ie)],"label-class":"sr-only",label:_.$t("logs.mealIngredientUnit"),options:y(_W),"render-option":ie=>_.$t(`logs.mealIngredientUnits.${ie}`)},null,8,["modelValue","onUpdate:modelValue","label","options","render-option"]),N(J,{id:`ingredients-${z}-delete`,variant:"ghost",class:"text-red-500",onClick:ie=>l.value.splice(z,1)},{default:K(()=>[N(G,{class:"size-4"})]),_:1},8,["id","onClick"])]))),128))])],2)):ke("",!0),N(D,{name:"consumedAt",type:"datetime-local"}),n.value?(I(),ae("div",u9,fe(n.value),1)):ke("",!0),y(qo)(y(a).meal)||s.value?(I(),Z(J,{key:4,variant:"secondary",class:"w-full",onClick:C[0]||(C[0]=ee=>l.value.push({name:"",quantity:100,unit:"grams"}))},{default:K(()=>[Ue(fe(_.$t("logs.addIngredient")),1)]),_:1})):ke("",!0),y(qo)(y(a).meal)?ke("",!0):(I(),Z(W,{key:5,modelValue:s.value,"onUpdate:modelValue":C[1]||(C[1]=ee=>s.value=ee),label:_.$t("logs.mealIngredientsCustom")},null,8,["modelValue","label"])),f.value?(I(),ae(je,{key:6},[L("span",c9,fe(_.$t("logs.totalCalories"))+": "+fe(y(ot)(f.value,"calories")),1),(F=d.value)!=null&&F.length?(I(),Z(se,{key:0,label:_.$t("logs.viewBreakdown"),class:"overflow-y-auto"},{default:K(()=>[N(j,{breakdown:d.value},null,8,["breakdown"])]),_:1},8,["label"])):ke("",!0)],64)):ke("",!0),C[3]||(C[3]=L("div",{class:"grow"},null,-1)),N(J,{submit:"",class:"w-full"},{default:K(()=>[Ue(fe(_.$t("logs.log")),1)]),_:1})]}),_:1},8,["form"])]),_:1},8,["title"])}}}),d9={class:"text-center text-5xl font-semibold tracking-tight"},f9={class:"mt-2 text-center text-sm text-gray-500"},p9=ue({__name:"Welcome",setup(t){return(e,n)=>{const r=a9,s=mt,i=bC,o=rt,a=Fy;return I(),Z(a,{class:"items-center justify-center"},{default:K(()=>[N(r,{class:"size-20"}),L("h1",d9,fe(e.$t("app.title")),1),N(s,{class:"mt-4 text-center","lang-key":"home.welcome"}),N(i,{class:"mt-2"}),L("span",f9,fe(e.$t("home.orGetStarted")),1),N(o,{class:"mt-2",onClick:n[0]||(n[0]=l=>e.$ui.modal(n$))},{default:K(()=>[Ue(fe(e.$t("logs.add")),1)]),_:1})]),_:1})}}}),h9={viewBox:"0 0 20 20","aria-hidden":"true",width:"1.2em",height:"1.2em"};function m9(t,e){return I(),ae("svg",h9,[...e[0]||(e[0]=[L("path",{fill:"currentColor",d:"M11 9h4v2h-4v4H9v-4H5V9h4V5h2zm-1 11a10 10 0 1 1 0-20a10 10 0 0 1 0 20m0-2a8 8 0 1 0 0-16a8 8 0 0 0 0 16"},null,-1)])])}const g9=Qe({name:"zondicons-add-outline",render:m9}),y9={class:"flex justify-between text-sm font-medium"},v9={class:"mt-1 h-2 rounded-full bg-gray-200"},r$=ue({__name:"GoalProgress",props:{goal:{},current:{},unit:{},label:{},min:{type:Boolean},barFilledClass:{},barOverflowClass:{}},setup(t){return(e,n)=>{const r=hy;return I(),ae("div",null,[L("div",y9,[L("span",null,fe(t.label),1),L("span",{class:De({"text-red-700":t.min?t.current<t.goal:t.current>t.goal})},fe(t.current)+" / "+fe(y(ot)(t.goal,t.unit)),3)]),L("div",v9,[N(r,{"filled-class":`${t.barFilledClass} duration-200`,"overflow-class":`${t.barOverflowClass} duration-200`,progress:t.current/t.goal},null,8,["filled-class","overflow-class","progress"])])])}}}),b9={key:0,class:"mt-4 w-full space-y-4"},w9=ue({__name:"DailyGoals",props:{totalCalories:{},totalProtein:{},totalCarbs:{},totalFat:{}},setup(t){return(e,n)=>{const r=r$;return e.$goals.calories||e.$goals.protein||e.$goals.carbs||e.$goals.fat?(I(),ae("div",b9,[e.$goals.calories?(I(),Z(r,{key:0,label:"Calories",unit:"calories",current:t.totalCalories,goal:e.$goals.calories,"bar-filled-class":"bg-calories-500","bar-overflow-class":"bg-[color-mix(in_srgb,var(--color-calories-500),black_40%)]"},null,8,["current","goal"])):ke("",!0),e.$goals.protein?(I(),Z(r,{key:1,min:"",label:"Protein",unit:"grams",current:t.totalProtein,goal:e.$goals.protein,"bar-filled-class":"bg-protein-500","bar-overflow-class":"bg-[color-mix(in_srgb,var(--color-protein-500),black_40%)]"},null,8,["current","goal"])):ke("",!0),e.$goals.carbs?(I(),Z(r,{key:2,min:"",label:"Carbs",unit:"grams",current:t.totalCarbs,goal:e.$goals.carbs,"bar-filled-class":"bg-carbs-500","bar-overflow-class":"bg-[color-mix(in_srgb,var(--color-carbs-500),black_40%)]"},null,8,["current","goal"])):ke("",!0),e.$goals.fat?(I(),Z(r,{key:3,min:"",label:"Fat",unit:"grams",current:t.totalFat,goal:e.$goals.fat,"bar-filled-class":"bg-fat-500","bar-overflow-class":"bg-[color-mix(in_srgb,var(--color-fat-500),black_40%)]"},null,8,["current","goal"])):ke("",!0)])):ke("",!0)}}}),_9={class:"mt-6 w-full space-y-4"},x9=ue({__name:"DailyLogs",setup(t){const e=Ra(rn),n=new Date,r=LA(rn,()=>df(e.value.filter(u=>{const c=u.consumedAt??u.createdAt;return c.getFullYear()===n.getFullYear()&&c.getMonth()===n.getMonth()&&c.getDate()===n.getDate()}))),s=H(()=>Math.floor(r.value.reduce((u,c)=>{var d,f;return u+(((f=(d=c.recipe)==null?void 0:d.nutrition)==null?void 0:f.calories)??0)},0))),i=H(()=>Math.floor(r.value.reduce((u,c)=>{var d,f;return u+(((f=(d=c.recipe)==null?void 0:d.nutrition)==null?void 0:f.protein)??0)},0))),o=H(()=>Math.floor(r.value.reduce((u,c)=>{var d,f;return u+(((f=(d=c.recipe)==null?void 0:d.nutrition)==null?void 0:f.carbs)??0)},0))),a=H(()=>Math.floor(r.value.reduce((u,c)=>{var d,f;return u+(((f=(d=c.recipe)==null?void 0:d.nutrition)==null?void 0:f.fat)??0)},0))),l=H(()=>new ii({rawCalories:`${s.value} calories`,rawProtein:`${i.value} grams`,rawCarbs:`${o.value} grams`,rawFat:`${a.value} grams`}));return(u,c)=>{const d=ou,f=mt,p=w9,h=ff,g=g9,w=rt,x=cf;return I(),Z(x,{header:u.$t("home.title")},{default:K(()=>[l.value.calories?(I(),Z(d,{key:0,nutrition:l.value},null,8,["nutrition"])):(I(),Z(f,{key:1,"lang-key":"logs.empty",class:"mx-auto text-center"})),N(p,{"total-calories":s.value,"total-protein":i.value,"total-carbs":o.value,"total-fat":a.value},null,8,["total-calories","total-protein","total-carbs","total-fat"]),L("div",_9,[(I(!0),ae(je,null,at(y(r),A=>(I(),Z(h,{key:A.url,meal:A},null,8,["meal"]))),128))]),N(w,{class:"mt-4",onClick:c[0]||(c[0]=A=>u.$ui.modal(n$))},{default:K(()=>[N(g,{class:"size-4"}),L("span",null,fe(u.$t("logs.add")),1)]),_:1})]),_:1},8,["header"])}}}),S9=ue({__name:"Home",setup(t){const e=XC();return(n,r)=>{const s=x9,i=p9;return y(e)?(I(),Z(s,{key:0})):(I(),Z(i,{key:1}))}}}),E9={viewBox:"0 0 24 24","aria-hidden":"true",width:"1.2em",height:"1.2em"};function A9(t,e){return I(),ae("svg",E9,[...e[0]||(e[0]=[L("g",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"},[L("path",{d:"M21 12a9 9 0 0 0-9-9a9.75 9.75 0 0 0-6.74 2.74L3 8"}),L("path",{d:"M3 3v5h5m-5 4a9 9 0 0 0 9 9a9.75 9.75 0 0 0 6.74-2.74L21 16"}),L("path",{d:"M16 16h5v5"})],-1)])])}const C9=Qe({name:"lucide-refresh-ccw",render:A9}),$9={class:"space-y-2"},k9={class:"text-sm font-medium text-gray-700"},I9={class:"space-y-2"},R9={class:"text-sm font-medium text-gray-700"},O9={class:"mt-4 flex justify-end space-x-2"},k_=ue({__name:"IngredientFormModal",props:{ingredient:{}},setup(t){var a,l,u,c,d,f,p,h,g,w,x,A,E,m,v,_,C;const{close:e}=xo(),n=qi({name:ao((a=t.ingredient)==null?void 0:a.name),imageUrl:Wc((l=t.ingredient)==null?void 0:l.imageUrl),description:Wc((u=t.ingredient)==null?void 0:u.description),servingInGrams:gn((d=(c=t.ingredient)==null?void 0:c.nutrition)==null?void 0:d.servingInGrams),servingInMilliliters:gn((p=(f=t.ingredient)==null?void 0:f.nutrition)==null?void 0:p.servingInMilliliters),calories:gn((g=(h=t.ingredient)==null?void 0:h.nutrition)==null?void 0:g.calories),protein:gn((x=(w=t.ingredient)==null?void 0:w.nutrition)==null?void 0:x.protein),carbs:gn((E=(A=t.ingredient)==null?void 0:A.nutrition)==null?void 0:E.carbs),fat:gn((v=(m=t.ingredient)==null?void 0:m.nutrition)==null?void 0:v.fat)}),r=we(!1),s=we(((_=t.ingredient)==null?void 0:_.aliases.slice(0))??[]),i=we(((C=t.ingredient)==null?void 0:C.externalUrls.slice(0))??[]);async function o(){var D,G,J,W,j,se;e();const $=t.ingredient??new pa,k=$.nutrition??$.relatedNutrition.attach();if(k.setAttributes({serving:typeof n.servingInGrams=="number"?`${ft(n.servingInGrams,2)} grams`:void 0,rawCalories:typeof n.calories=="number"?`${ft(n.calories)} calories`:void 0,rawProtein:typeof n.protein=="number"?`${ft(n.protein,2)} grams`:void 0,rawCarbs:typeof n.carbs=="number"?`${ft(n.carbs,2)} grams`:void 0,rawFat:typeof n.fat=="number"?`${ft(n.fat,2)} grams`:void 0}),typeof n.servingInMilliliters=="number"?(((D=k.alternateServings)==null?void 0:D[0])??k.relatedAlternateServings.attach()).setAttributes({serving:`${ft(n.servingInMilliliters,2)} milliliters`}):(G=k.alternateServings)==null||G.forEach(R=>{k.relatedAlternateServings.removeRelated(R)}),await $.update({name:n.name,imageUrl:((J=n.imageUrl)==null?void 0:J.trim())||null,description:((W=n.description)==null?void 0:W.trim())||null,aliases:aa(s.value.map(R=>R.trim())),externalUrls:aa(i.value.map(R=>gT(R)))}),r.value){const R=t$($);for(const V of R){const F=V.getCaloriesBreakdown()??[];await((se=(j=V.recipe)==null?void 0:j.nutrition)==null?void 0:se.update({rawCalories:`${ft(F.reduce((ee,z)=>ee+(z.calories??0),0))} calories`,rawProtein:`${ft(F.reduce((ee,z)=>ee+(z.protein??0),0),2)} grams`,rawCarbs:`${ft(F.reduce((ee,z)=>ee+(z.carbs??0),0),2)} grams`,rawFat:`${ft(F.reduce((ee,z)=>ee+(z.fat??0),0),2)} grams`}))}}}return($,k)=>{const D=As,G=TA,J=iu,W=rt,j=na,se=Ui,R=Jn;return I(),Z(R,{title:t.ingredient?$.$t("ingredients.editTitle",{name:t.ingredient.name}):$.$t("ingredients.createTitle"),"fullscreen-on-mobile":""},{default:K(()=>[N(se,{form:y(n),class:"flex flex-1 flex-col space-y-2",onSubmit:k[3]||(k[3]=V=>o())},{default:K(()=>[N(D,{name:"name",label:$.$t("ingredients.formName")},null,8,["label"]),N(D,{name:"imageUrl",label:$.$t("ingredients.imageUrl")},null,8,["label"]),N(G,{name:"description",label:$.$t("ingredients.description")},null,8,["label"]),N(D,{name:"servingInGrams",label:$.$t("ingredients.formServingInGrams"),step:"0.01"},null,8,["label"]),N(D,{name:"servingInMilliliters",label:$.$t("ingredients.formServingInMilliliters"),step:"0.01"},null,8,["label"]),N(D,{name:"calories",label:$.$t("ingredients.formCalories"),step:"0.01"},null,8,["label"]),N(D,{name:"protein",label:$.$t("ingredients.protein"),step:"0.01"},null,8,["label"]),N(D,{name:"carbs",label:$.$t("ingredients.carbs"),step:"0.01"},null,8,["label"]),N(D,{name:"fat",label:$.$t("ingredients.fat"),step:"0.01"},null,8,["label"]),L("div",$9,[L("label",k9,fe($.$t("ingredients.aliases")),1),L("ul",{class:De(["mt-2 space-y-2",{hidden:s.value.length===0}])},[(I(!0),ae(je,null,at(s.value,(V,F)=>(I(),ae("li",{key:F,class:"flex space-x-2"},[N(D,{id:`aliases-${F}`,modelValue:s.value[F],"onUpdate:modelValue":ee=>s.value[F]=ee,class:"flex-1"},null,8,["id","modelValue","onUpdate:modelValue"]),N(W,{variant:"ghost",class:"text-red-500",onClick:ee=>s.value.splice(F,1)},{default:K(()=>[N(J,{class:"size-4"})]),_:1},8,["onClick"])]))),128))],2),N(W,{variant:"secondary",class:"mt-2 w-full",onClick:k[0]||(k[0]=V=>s.value.push(""))},{default:K(()=>[Ue(fe($.$t("ingredients.addAlias")),1)]),_:1})]),L("div",I9,[L("label",R9,fe($.$t("ingredients.externalUrls")),1),L("ul",{class:De(["mt-2 space-y-2",{hidden:i.value.length===0}])},[(I(!0),ae(je,null,at(i.value,(V,F)=>(I(),ae("li",{key:F,class:"flex space-x-2"},[N(D,{modelValue:i.value[F],"onUpdate:modelValue":ee=>i.value[F]=ee,class:"flex-1"},null,8,["modelValue","onUpdate:modelValue"]),N(W,{variant:"ghost",class:"text-red-500",onClick:ee=>i.value.splice(F,1)},{default:K(()=>[N(J,{class:"size-4"})]),_:1},8,["onClick"])]))),128))],2),N(W,{variant:"secondary",class:"mt-2 w-full",onClick:k[1]||(k[1]=V=>i.value.push(""))},{default:K(()=>[Ue(fe($.$t("ingredients.addExternalUrl")),1)]),_:1})]),N(j,{modelValue:r.value,"onUpdate:modelValue":k[2]||(k[2]=V=>r.value=V),label:$.$t("ingredients.recalculateMealsNutrition")},null,8,["modelValue","label"]),k[4]||(k[4]=L("div",{class:"grow"},null,-1)),L("div",O9,[N(W,{variant:"secondary",onClick:y(e)},{default:K(()=>[Ue(fe($.$t("ui.cancel")),1)]),_:1},8,["onClick"]),N(W,{submit:""},{default:K(()=>[Ue(fe($.$t("ui.save")),1)]),_:1})])]),_:1},8,["form"])]),_:1},8,["title"])}}}),T9={class:"flex items-start gap-4"},D9={key:0,class:"flex-shrink-0"},P9={class:"flex flex-col"},M9={class:"text-2xl font-bold text-gray-900"},L9={key:0,class:"text-xs text-gray-600"},N9={key:1,class:"space-y-1"},F9={key:0,class:"rounded-lg bg-gray-50 p-4"},j9={key:1,class:"space-y-3"},q9={class:"rounded-lg bg-gray-50"},U9={class:"border-b border-gray-200 bg-gray-100 px-4 py-2"},B9={class:"text-sm font-medium text-gray-900"},z9={class:"divide-y divide-gray-200"},V9={key:0,class:"flex items-center justify-between px-4 py-2"},H9={class:"text-sm font-medium text-gray-600"},K9={class:"text-sm font-semibold text-gray-900"},W9={key:1,class:"flex items-center justify-between px-4 py-2"},G9={class:"text-sm font-medium text-gray-600"},J9={class:"text-sm font-semibold text-gray-900"},Y9={key:2,class:"flex items-center justify-between px-4 py-2"},X9={class:"text-sm font-medium text-gray-600"},Q9={class:"text-sm font-semibold text-gray-900"},Z9={key:3,class:"flex items-center justify-between px-4 py-2"},eG={class:"text-sm font-medium text-gray-600"},tG={class:"text-sm font-semibold text-gray-900"},nG=ue({__name:"IngredientModal",props:{ingredient:{}},setup(t){const e=Ra(rn),n=H(()=>xy(t.ingredient)),r=LA(rn,()=>t$(n.value,e.value)),s=H(()=>df(r.value));return(i,o)=>{const a=yC,l=mt,u=go,c=ou,d=ff,f=Ia,p=Jn;return I(),Z(p,{class:"space-y-4"},{default:K(()=>{var h,g;return[L("div",T9,[t.ingredient.imageUrl?(I(),ae("div",D9,[N(a,{src:t.ingredient.imageUrl,class:"size-20 rounded-lg border border-gray-200 object-cover"},null,8,["src"])])):ke("",!0),L("div",P9,[L("h1",M9,[N(l,{text:t.ingredient.name,inline:""},null,8,["text"])]),(h=t.ingredient.aliases)!=null&&h.length?(I(),ae("div",L9,fe(i.$t("ingredients.aliases"))+": "+fe(t.ingredient.aliases.join(", ")),1)):ke("",!0),(g=t.ingredient.externalUrls)!=null&&g.length?(I(),ae("div",N9,[(I(!0),ae(je,null,at(t.ingredient.externalUrls,w=>(I(),Z(u,{key:w,href:w,class:"block text-xs text-blue-600 hover:text-blue-800 hover:underline"},{default:K(()=>[Ue(fe(w),1)]),_:2},1032,["href"]))),128))])):ke("",!0)])]),t.ingredient.description?(I(),ae("div",F9,[N(l,{text:t.ingredient.description,class:"text-gray-700"},null,8,["text"])])):ke("",!0),t.ingredient.nutrition?(I(),ae("div",j9,[N(c,{nutrition:t.ingredient.nutrition},null,8,["nutrition"]),L("div",q9,[L("div",U9,[L("h2",B9,fe(i.$t("ingredients.nutrition")),1)]),L("div",z9,[t.ingredient.nutrition.servingInGrams?(I(),ae("div",V9,[L("span",H9,fe(i.$t("ingredients.servingGrams")),1),L("span",K9,fe(y(ot)(t.ingredient.nutrition.servingInGrams,"grams")),1)])):ke("",!0),t.ingredient.nutrition.servingInMilliliters?(I(),ae("div",W9,[L("span",G9,fe(i.$t("ingredients.servingMilliliters")),1),L("span",J9,fe(Math.round(t.ingredient.nutrition.servingInMilliliters*100)/100)+" ml ",1)])):ke("",!0),typeof t.ingredient.nutrition.calories=="number"&&t.ingredient.nutrition.servingInGrams?(I(),ae("div",Y9,[L("span",X9,fe(i.$t("ingredients.calories")),1),L("span",Q9,fe(y(ot)(t.ingredient.nutrition.calories*100/t.ingredient.nutrition.servingInGrams,"calories")),1)])):ke("",!0),typeof t.ingredient.nutrition.calories=="number"?(I(),ae("div",Z9,[L("span",eG,fe(i.$t("ingredients.caloriesPerServing")),1),L("span",tG,fe(y(ot)(t.ingredient.nutrition.calories,"calories")),1)])):ke("",!0)])])])):ke("",!0),s.value.length?(I(),Z(f,{key:2,label:i.$t("ingredients.meals"),"content-class":"pl-0 w-full space-y-4"},{default:K(()=>[(I(!0),ae(je,null,at(s.value,w=>(I(),Z(d,{key:w.url,meal:w},null,8,["meal"]))),128))]),_:1},8,["label"])):ke("",!0)]}),_:1})}}}),rG={class:"flex items-center gap-2"},sG={key:1,class:"mt-4 w-full overflow-x-auto rounded-lg border border-green-200 bg-green-50"},iG={class:"min-w-full divide-y divide-green-200"},oG={class:"bg-green-100"},aG=["onClick"],lG={key:0,class:"ml-1"},uG={class:"divide-y divide-green-200 bg-green-50"},cG={class:"flex items-center space-x-2 px-6 py-4 font-medium whitespace-nowrap text-gray-900"},dG={class:"px-6 py-4 whitespace-nowrap text-gray-500"},fG={class:"px-6 py-4 whitespace-nowrap text-gray-500"},pG={class:"px-6 py-4 whitespace-nowrap text-gray-500"},hG={class:"px-6 py-4 whitespace-nowrap text-gray-500"},mG={class:"px-6 py-4 whitespace-nowrap text-gray-500"},gG={class:"px-6 py-4 whitespace-nowrap text-gray-500"},yG={class:"px-6 py-4 whitespace-nowrap text-gray-500"},vG={class:"px-6 py-4 whitespace-nowrap text-gray-500"},bG={class:"px-6 py-4 text-right whitespace-nowrap"},wG={class:"flex space-x-1"},_G=ue({__name:"Ingredients",setup(t){const e=[{label:qt("ingredients.name"),field:"ingredient.name"},{label:qt("ingredients.serving"),field:"serving"},{label:qt("ingredients.calories"),field:"calories"},{label:qt("ingredients.protein"),field:"protein"},{label:qt("ingredients.proteinDensity"),field:"proteinDensity"},{label:qt("ingredients.carbs"),field:"carbs"},{label:qt("ingredients.carbsDensity"),field:"carbsDensity"},{label:qt("ingredients.fat"),field:"fat"},{label:qt("ingredients.fatDensity"),field:"fatDensity"},{label:""}],n=we(""),r=we("ingredient.name"),s=we("asc"),i=Mn(new Set),o=H(()=>{if(!n.value)return Wr.ingredients;const f=n.value.toLowerCase();return Wr.ingredients.filter(p=>p.name.toLowerCase().includes(f))}),a=H(()=>o.value.map(f=>{var g;if(!((g=f.nutrition)!=null&&g.servingInGrams))return{ingredient:f};const p=100/f.nutrition.servingInGrams,h=typeof f.nutrition.calories=="number"?f.nutrition.calories*p:void 0;return{ingredient:f,calories:h,serving:f.nutrition.servingInGrams,protein:typeof f.nutrition.protein=="number"?f.nutrition.protein*p:void 0,proteinDensity:typeof f.nutrition.protein=="number"&&typeof h=="number"?h===0?0:f.nutrition.protein*p/(h/100):void 0,carbs:typeof f.nutrition.carbs=="number"?f.nutrition.carbs*p:void 0,carbsDensity:typeof f.nutrition.carbs=="number"&&typeof h=="number"?h===0?0:f.nutrition.carbs*p/(h/100):void 0,fat:typeof f.nutrition.fat=="number"?f.nutrition.fat*p:void 0,fatDensity:typeof f.nutrition.fat=="number"&&typeof h=="number"?h===0?0:f.nutrition.fat*p/(h/100):void 0}})),l=H(()=>ki(a.value,r.value,s.value));function u(f){if(r.value===f){s.value=s.value==="asc"?"desc":"asc";return}r.value=f,s.value="asc"}async function c(f){confirm(qt("ingredients.deleteConfirm",{name:f.name}))&&await f.delete()}async function d(f){i.value=new Set(i.value).add(f.name);try{const p=await wy.getNutrition(f.name);if(!p){$t.toast(qt("ingredients.nutritionNotFound",{name:f.name}),{variant:"warning"});return}f.setNutritionAttributes(p),await f.save()}finally{i.value=_T(new Set(i.value),p=>p.delete(f.name))}}return(f,p)=>{const h=As,g=rt,w=mt,x=C9,A=e$,E=ZC,m=iu,v=cf;return I(),Z(v,{style:{"--breakpoint-content":"1400px"},header:`${f.$t("ingredients.title")} (${o.value.length})`},{default:K(()=>[L("div",rG,[N(h,{modelValue:n.value,"onUpdate:modelValue":p[0]||(p[0]=_=>n.value=_),placeholder:f.$t("ingredients.search"),class:"w-full"},null,8,["modelValue","placeholder"]),N(g,{onClick:p[1]||(p[1]=_=>f.$ui.modal(k_))},{default:K(()=>[Ue(fe(f.$t("ingredients.add")),1)]),_:1})]),o.value.length===0?(I(),Z(w,{key:0,class:"mx-auto py-8 text-center text-gray-500","lang-key":n.value?"ingredients.noSearchResults":"ingredients.noIngredients"},null,8,["lang-key"])):(I(),ae("div",sG,[L("table",iG,[L("thead",oG,[L("tr",null,[(I(),ae(je,null,at(e,_=>L("th",{key:_.field,class:"cursor-pointer px-6 py-3 text-left text-xs font-medium tracking-wider text-gray-500 uppercase",onClick:C=>_.field&&u(_.field)},[Ue(fe(_.label)+" ",1),r.value===_.field?(I(),ae("span",lG,fe(s.value==="asc"?"↑":"↓"),1)):ke("",!0)],8,aG)),64))])]),L("tbody",uG,[(I(!0),ae(je,null,at(l.value,({ingredient:_,serving:C,calories:$,protein:k,proteinDensity:D,carbs:G,carbsDensity:J,fat:W,fatDensity:j})=>{var se,R;return I(),ae("tr",{key:_.name},[L("td",cG,[L("div",{class:De([((se=_.nutrition)==null?void 0:se.macroClass)??"bg-gray-400","h-3 w-3 rounded-full"])},null,2),N(w,{text:_.name,inline:""},null,8,["text"])]),L("td",dG,fe(y(ot)(C,{unit:"grams",fallback:"-"})),1),L("td",fG,fe(y(ot)($,{unit:"calories",fallback:"-"})),1),L("td",pG,fe(y(ot)(k,{unit:"grams",fallback:"-"})),1),L("td",hG,fe(y(ot)(D,{unit:"grams",fallback:"-"})),1),L("td",mG,fe(y(ot)(G,{unit:"grams",fallback:"-"})),1),L("td",gG,fe(y(ot)(J,{unit:"grams",fallback:"-"})),1),L("td",yG,fe(y(ot)(W,{unit:"grams",fallback:"-"})),1),L("td",vG,fe(y(ot)(j,{unit:"grams",fallback:"-"})),1),L("td",bG,[L("div",wG,[typeof((R=_.nutrition)==null?void 0:R.calories)>"u"?(I(),Z(g,{key:0,size:"icon",variant:"ghost",class:"text-gray-400 transition-colors hover:text-orange-500",title:f.$t("ingredients.updateNutrition"),"aria-label":f.$t("ingredients.updateNutrition"),disabled:i.value.has(_.name),onClick:V=>d(_)},{default:K(()=>[N(x,{class:De(["size-4",{"animate-spin":i.value.has(_.name)}])},null,8,["class"])]),_:2},1032,["title","aria-label","disabled","onClick"])):ke("",!0),N(g,{size:"icon",variant:"ghost",class:"text-gray-400 transition-colors hover:text-green-500",title:f.$t("ingredients.view",{name:_.name}),"aria-label":f.$t("ingredients.view",{name:_.name}),onClick:V=>f.$ui.modal(nG,{ingredient:_})},{default:K(()=>[N(A,{class:"size-4"})]),_:1},8,["title","aria-label","onClick"]),N(g,{size:"icon",variant:"ghost",class:"text-gray-400 transition-colors hover:text-blue-500",title:f.$t("ingredients.edit"),"aria-label":f.$t("ingredients.edit"),onClick:V=>f.$ui.modal(k_,{ingredient:_})},{default:K(()=>[N(E,{class:"size-4"})]),_:1},8,["title","aria-label","onClick"]),N(g,{size:"icon",variant:"ghost",class:"text-gray-400 transition-colors hover:text-red-500",title:f.$t("ingredients.delete",{name:_.name}),"aria-label":f.$t("ingredients.delete",{name:_.name}),onClick:V=>c(_)},{default:K(()=>[N(m,{class:"size-4"})]),_:1},8,["title","aria-label","onClick"])])])])}),128))])])]))]),_:1},8,["header"])}}}),xG=ue({__name:"InsightsMacroNutrition",props:{week:{}},setup(t){const e=H(()=>new ii({rawCalories:`${t.week.totalCalories} calories`,rawProtein:`${t.week.proteinAverage} grams`,rawCarbs:`${t.week.carbsAverage} grams`,rawFat:`${t.week.fatAverage} grams`}));return(n,r)=>{const s=ou;return I(),Z(s,{nutrition:e.value,class:"w-full"},null,8,["nutrition"])}}}),SG={class:"flex flex-col justify-between rounded-lg border bg-white p-6 shadow-sm"},EG={class:"flex items-center justify-between"},AG={class:"text-end text-sm font-medium text-gray-600"},CG={class:"text-end text-2xl font-bold text-gray-900"},$G=ue({__name:"InsightsMacro",props:{name:{},value:{},unit:{},icon:{},min:{type:Boolean},iconClass:{},iconBackgroundClass:{},goal:{},barFilledClass:{},barOverflowClass:{}},setup(t){return(e,n)=>{const r=r$;return I(),ae("div",SG,[L("div",EG,[L("div",{class:De([t.iconBackgroundClass,"rounded-full p-3"])},[(I(),Z(ns(t.icon),{class:De([t.iconClass,"size-6"])},null,8,["class"]))],2),L("div",null,[L("p",AG,fe(t.name),1),L("p",CG,fe(y(ot)(t.value,t.unit)),1)])]),t.goal?(I(),Z(r,{key:0,class:"mt-2",goal:t.goal,unit:t.unit,min:t.min,current:t.value,"bar-filled-class":t.barFilledClass,"bar-overflow-class":t.barOverflowClass},null,8,["goal","unit","min","current","bar-filled-class","bar-overflow-class"])):ke("",!0)])}}}),kG={viewBox:"0 0 24 24","aria-hidden":"true",width:"1.2em",height:"1.2em"};function IG(t,e){return I(),ae("svg",kG,[...e[0]||(e[0]=[L("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3c-1.072-2.143-.224-4.054 2-6c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5"},null,-1)])])}const RG=Qe({name:"lucide-flame",render:IG}),OG={viewBox:"0 0 24 24","aria-hidden":"true",width:"1.2em",height:"1.2em"};function TG(t,e){return I(),ae("svg",OG,[...e[0]||(e[0]=[L("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M14.4 14.4L9.6 9.6m9.057 11.885a2 2 0 1 1-2.829-2.828l-1.767 1.768a2 2 0 1 1-2.829-2.829l6.364-6.364a2 2 0 1 1 2.829 2.829l-1.768 1.767a2 2 0 1 1 2.828 2.829zm2.843.015l-1.4-1.4M3.9 3.9L2.5 2.5m3.904 10.268a2 2 0 1 1-2.829-2.829l1.768-1.767a2 2 0 1 1-2.828-2.829l2.828-2.828a2 2 0 1 1 2.829 2.828l1.767-1.768a2 2 0 1 1 2.829 2.829z"},null,-1)])])}const DG=Qe({name:"lucide-dumbbell",render:TG}),PG={viewBox:"0 0 24 24","aria-hidden":"true",width:"1.2em",height:"1.2em"};function MG(t,e){return I(),ae("svg",PG,[...e[0]||(e[0]=[L("g",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"},[L("path",{d:"M2 22L16 8M3.47 12.53L5 11l1.53 1.53a3.5 3.5 0 0 1 0 4.94L5 19l-1.53-1.53a3.5 3.5 0 0 1 0-4.94m4-4L9 7l1.53 1.53a3.5 3.5 0 0 1 0 4.94L9 15l-1.53-1.53a3.5 3.5 0 0 1 0-4.94m4-4L13 3l1.53 1.53a3.5 3.5 0 0 1 0 4.94L13 11l-1.53-1.53a3.5 3.5 0 0 1 0-4.94M20 2h2v2a4 4 0 0 1-4 4h-2V6a4 4 0 0 1 4-4"}),L("path",{d:"M11.47 17.47L13 19l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L5 19l1.53-1.53a3.5 3.5 0 0 1 4.94 0m4-4L17 15l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L9 15l1.53-1.53a3.5 3.5 0 0 1 4.94 0m4-4L21 11l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L13 11l1.53-1.53a3.5 3.5 0 0 1 4.94 0"})],-1)])])}const LG=Qe({name:"lucide-wheat",render:MG}),NG={viewBox:"0 0 24 24","aria-hidden":"true",width:"1.2em",height:"1.2em"};function FG(t,e){return I(),ae("svg",NG,[...e[0]||(e[0]=[L("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5S5 13 5 15a7 7 0 0 0 7 7"},null,-1)])])}const jG=Qe({name:"lucide-droplet",render:FG}),qG={class:"grid grid-cols-1 gap-6 lg:grid-cols-3"},UG={class:"grid grid-cols-2 gap-4 lg:col-span-2"},BG=ue({__name:"InsightsMacros",props:{week:{}},setup(t){return(e,n)=>{const r=$G,s=xG;return I(),ae("div",qG,[L("div",UG,[N(r,{name:e.$t("insights.macrosCalories"),value:t.week.caloriesAverage,goal:e.$goals.calories,icon:y(RG),unit:"calories","icon-class":"text-[color-mix(in_srgb,var(--color-calories-500),black_40%)]","icon-background-class":"bg-calories-500/30","bar-filled-class":"bg-calories-500","bar-overflow-class":"bg-[color-mix(in_srgb,var(--color-calories-500),black_40%)]"},null,8,["name","value","goal","icon"]),N(r,{min:"",name:e.$t("insights.macrosProtein"),value:t.week.proteinAverage,goal:e.$goals.protein,icon:y(DG),unit:"grams","icon-class":"text-[color-mix(in_srgb,var(--color-protein-500),black_40%)]","icon-background-class":"bg-protein-500/30","bar-filled-class":"bg-protein-500","bar-overflow-class":"bg-[color-mix(in_srgb,var(--color-protein-500),black_40%)]"},null,8,["name","value","goal","icon"]),N(r,{min:"",name:e.$t("insights.macrosCarbs"),value:t.week.carbsAverage,goal:e.$goals.carbs,icon:y(LG),unit:"grams","icon-class":"text-[color-mix(in_srgb,var(--color-carbs-500),black_40%)]","icon-background-class":"bg-carbs-500/30","bar-filled-class":"bg-carbs-500","bar-overflow-class":"bg-[color-mix(in_srgb,var(--color-carbs-500),black_40%)]"},null,8,["name","value","goal","icon"]),N(r,{min:"",name:e.$t("insights.macrosFat"),value:t.week.fatAverage,goal:e.$goals.fat,icon:y(jG),unit:"grams","icon-class":"text-[color-mix(in_srgb,var(--color-fat-500),black_40%)]","icon-background-class":"bg-fat-500/30","bar-filled-class":"bg-fat-500","bar-overflow-class":"bg-[color-mix(in_srgb,var(--color-fat-500),black_40%)]"},null,8,["name","value","goal","icon"])]),N(s,{week:t.week},null,8,["week"])])}}});function By(t){return t.flatMap(e=>Array.isArray(e)?e:[e])}function zG(...t){const e=By(t);return VG(e)/e.length}function VG(...t){return By(t).reduce((e,n)=>e+n,0)}function HG(...t){return Math.max(...By(t))}const KG={class:"overflow-x-auto overflow-y-hidden rounded-lg border bg-white p-2 shadow-sm md:p-6"},WG={class:"grid min-w-[400px] grid-cols-[auto_repeat(24,minmax(0,1fr))] gap-0.5 md:gap-1"},GG={class:"mr-1 text-xs font-medium text-gray-700 md:text-sm"},JG={class:"hidden sm:inline"},YG={class:"inline sm:hidden"},XG=["title"],QG={class:"mt-6 flex justify-between sm:items-center"},ZG={class:"flex flex-col gap-2 sm:flex-row sm:items-center"},eJ={class:"text-sm text-gray-500"},tJ={class:"flex items-center space-x-2"},nJ={class:"text-xs text-gray-500"},rJ={class:"flex flex-col gap-1 text-sm text-gray-500 sm:flex-row sm:items-center"},sJ=ue({__name:"InsightsFeeding",props:{week:{}},setup(t){const e=H(()=>{var o;const r={};for(const a of t.week.meals){const l=a.consumedAt??a.createdAt;if(!l)continue;const u=((o=a.nutrition)==null?void 0:o.calories)??0;if(u===0)continue;const c=l.getDay(),d=l.getHours(),f=r[c]??(r[c]={});f[d]??(f[d]=0),f[d]+=u}const{format:s}=Intl.DateTimeFormat(void 0,{weekday:"short"}),{format:i}=Intl.DateTimeFormat(void 0,{weekday:"narrow"});return Object.entries(r).map(([a,l])=>({shortName:s(new Date(2021,5,Number(a)-1)),narrowName:i(new Date(2021,5,Number(a)-1)),fastingEnd:js(24).find(u=>l&&u in l)??24,fastingStart:js(24).reverse().find(u=>l&&u in l)??0,hours:l??{}}))});function n(r){return r===0?"bg-blue-100":r<250?"bg-blue-300":r<500?"bg-blue-500":"bg-blue-700"}return(r,s)=>(I(),ae("div",KG,[L("div",WG,[s[0]||(s[0]=L("div",null,null,-1)),(I(!0),ae(je,null,at(y(js)(24),i=>(I(),ae("span",{key:i,class:"text-center text-xs md:text-sm"},fe(i),1))),128)),(I(!0),ae(je,null,at(e.value,i=>(I(),ae(je,{key:i.shortName},[L("div",GG,[L("span",JG,fe(i.shortName),1),L("span",YG,fe(i.narrowName),1)]),(I(!0),ae(je,null,at(y(js)(24),o=>(I(),ae("div",{key:o,class:De(["h-4 rounded-sm border border-gray-200 transition-all duration-200 md:h-6",o<i.fastingEnd||o>i.fastingStart?"bg-gray-100":n(i.hours[o]??0)]),title:o<i.fastingEnd||o>i.fastingStart?"Fasting":y(ot)(i.hours[o]??0,"calories")},null,10,XG))),128))],64))),128))]),L("div",QG,[L("div",ZG,[L("div",eJ,fe(r.$t("insights.feedingCalories")),1),L("div",tJ,[s[1]||(s[1]=L("div",{class:"h-4 w-4 rounded-sm border border-gray-200 bg-gray-100"},null,-1)),L("span",nJ,fe(r.$t("insights.feedingFasting")),1)]),s[2]||(s[2]=gS('<div class="flex items-center space-x-2"><div class="h-4 w-4 rounded-sm border border-gray-200 bg-blue-300"></div><span class="text-xs text-gray-500">0-250</span></div><div class="flex items-center space-x-2"><div class="h-4 w-4 rounded-sm border border-gray-200 bg-blue-500"></div><span class="text-xs text-gray-500">250-500</span></div><div class="flex items-center space-x-2"><div class="h-4 w-4 rounded-sm border border-gray-200 bg-blue-700"></div><span class="text-xs text-gray-500">500+</span></div>',3))]),L("div",rJ,[L("span",null,fe(r.$t("insights.feedingFastingAverage")),1),L("span",null,fe(y(ot)(y(zG)(e.value.map(i=>23-i.fastingStart+i.fastingEnd)),"hours")),1)])])]))}}),iJ={viewBox:"0 0 24 24","aria-hidden":"true",width:"1.2em",height:"1.2em"};function oJ(t,e){return I(),ae("svg",iJ,[...e[0]||(e[0]=[L("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m21.73 18l-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3M12 9v4m0 4h.01"},null,-1)])])}const s$=Qe({name:"lucide-alert-triangle",render:oJ}),aJ={class:"flex items-center space-x-2"},lJ=ue({__name:"InsightsIncompleteMeals",props:{week:{}},setup(t){const e=H(()=>df(t.week.meals.filter(n=>n.incomplete)));return(n,r)=>{const s=s$,i=ff,o=Ia;return e.value.length?(I(),Z(o,{key:0,label:n.$t("insights.incompleteMeals",{n:e.value.length}),"content-class":"pl-0 w-full space-y-4","summary-class":"text-red-500"},{label:K(()=>[L("div",aJ,[N(s,{class:"size-4"}),L("span",null,fe(n.$t("insights.incompleteMeals",{n:e.value.length})),1)])]),default:K(()=>[(I(!0),ae(je,null,at(e.value,a=>(I(),Z(i,{key:a.url,meal:a},null,8,["meal"]))),128))]),_:1},8,["label"])):ke("",!0)}}}),uJ={class:"rounded-lg border bg-white shadow-sm"},cJ={class:"flex items-end p-6"},dJ=["onClick"],fJ={class:"relative flex h-64 w-full items-end"},pJ={class:"mt-2 text-xs text-gray-600"},hJ={class:"text-xs font-medium text-gray-900"},mJ=ue({__name:"InsightsWeeks",props:{weeks:{},selectedWeek:{}},emits:["selectWeek"],setup(t){const e=ri("$container"),n=H(()=>HG(t.weeks.map(r=>r.totalCalories)));return Ke(e,()=>e.value&&(e.value.scrollLeft=e.value.scrollWidth)),(r,s)=>{const i=s$;return I(),ae("div",uJ,[L("div",{ref_key:"$container",ref:e,class:"overflow-x-auto overflow-y-hidden"},[L("div",cJ,[(I(!0),ae(je,null,at(t.weeks,(o,a)=>(I(),ae("button",{key:a,type:"button",class:De(["flex w-20 shrink-0 flex-col items-center p-2 transition-all duration-200 hover:scale-105",{"bg-blue-700/15":t.selectedWeek===o}]),onClick:l=>r.$emit("selectWeek",o)},[L("div",fJ,[L("div",{class:"flex w-full flex-col transition-all duration-200",style:Xt({height:`${o.totalCalories*100/n.value}%`})},[L("div",{class:"bg-protein-500 w-full rounded-t transition-all duration-200",style:Xt({flex:`${o.proteinPercentage}`})},null,4),L("div",{class:"bg-carbs-500 w-full transition-all duration-200",style:Xt({flex:`${o.carbsPercentage}`})},null,4),L("div",{class:"bg-fat-500 w-full rounded-b transition-all duration-200",style:Xt({flex:`${o.fatPercentage}`})},null,4)],4),o.hasIncompleteMeals?(I(),Z(i,{key:0,class:"absolute inset-x-0 bottom-2 m-auto size-5 text-red-400"})):ke("",!0)]),L("div",pJ,fe(o.name),1),L("div",hJ,fe(y(ot)(o.totalCalories,"calories")),1)],10,dJ))),128))])],512)])}}});function gJ(t){const e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate())),n=e.getUTCDay()||7;e.setUTCDate(e.getUTCDate()+4-n);const r=new Date(Date.UTC(e.getUTCFullYear(),0,1));return Math.ceil(((e.getTime()-r.getTime())/864e5+1)/7)}const yJ={key:1,class:"text-center text-gray-500"},vJ={class:"text-2xl font-semibold text-gray-900"},bJ={class:"text-2xl font-semibold text-gray-900"},wJ=ue({__name:"Insights",setup(t){const e=Ra(rn),n=H(()=>{const s=e.value.reduce((i,o)=>{const a=o.consumedAt??o.createdAt;if(a){const l=qt("insights.week",{year:a.getFullYear(),number:gJ(a)});i[l]??(i[l]=[]),i[l].push(o)}return i},{});return ki(Object.entries(s).map(([i,o])=>{const a=o.map(h=>h.nutrition??{}),l=a.reduce((h,g)=>h+(g.protein??0),0),u=a.reduce((h,g)=>h+(g.carbs??0),0),c=a.reduce((h,g)=>h+(g.fat??0),0),d=a.reduce((h,g)=>h+(g.calories??0),0),f=sf({protein:l,carbs:u,fat:c}),p=new Set(o.map(h=>(h.consumedAt??h.createdAt).getDay())).size;return{name:i,meals:o,hasIncompleteMeals:o.some(h=>h.incomplete),totalCalories:Math.round(d),caloriesAverage:Math.round(d/p),proteinAverage:Math.round(l/p),carbsAverage:Math.round(u/p),fatAverage:Math.round(c/p),proteinPercentage:f.proteinPercentage,carbsPercentage:f.carbsPercentage,fatPercentage:f.fatPercentage}}),"name")}),r=Mn(null);return Ke(n,()=>{r.value&&n.value.some(s=>s===r.value)||(r.value=n.value[n.value.length-1]??null)},{immediate:!0}),(s,i)=>{const o=mJ,a=lJ,l=sJ,u=BG,c=cf;return I(),Z(c,{header:s.$t("insights.title"),class:"space-y-6"},{default:K(()=>[n.value.length?(I(),Z(o,{key:0,weeks:n.value,"selected-week":r.value,onSelectWeek:i[0]||(i[0]=d=>r.value=d)},null,8,["weeks","selected-week"])):(I(),ae("div",yJ,fe(s.$t("insights.empty")),1)),r.value?(I(),ae(je,{key:2},[N(a,{week:r.value},null,8,["week"]),L("h2",vJ,fe(s.$t("insights.weekFeeding")),1),N(l,{week:r.value},null,8,["week"]),L("h2",bJ,fe(s.$t("insights.weekMacros")),1),N(u,{week:r.value},null,8,["week"])],64)):ke("",!0)]),_:1},8,["header"])}}}),_J=mK([{name:"home",path:"/",component:S9},{name:"history",path:"/history",component:s9,beforeEnter:(t,e,n)=>{if(!fh()){n({name:"home"});return}n()}},{name:"ingredients",path:"/ingredients",component:_G,beforeEnter:(t,e,n)=>{if(!fh()){n({name:"home"});return}n()}},{name:"insights",path:"/insights",component:wJ,beforeEnter:(t,e,n)=>{if(!fh()){n({name:"home"});return}n()}}]),xJ={sedentary:1.2,lightlyActive:1.375,moderatelyActive:1.55,veryActive:1.725,extremelyActive:1.9},SJ={maintainWeight:0,loseWeight:-500,gainMuscle:250,loseAndGain:-250},EJ=[[/sedentary-.*/,.8],[/lightlyActive-loseWeight/,1],[/lightlyActive-(maintainWeight|loseAndGain)/,1.2],[/lightlyActive-gainMuscle/,1.4],[/.*-loseWeight/,1.4],[/.*-(maintainWeight|loseAndGain)/,1.6],[/.*-gainMuscle/,1.8]];function AJ(t){return 10*t.weight+6.25*t.height-5*t.age+(t.sex==="man"?5:-161)}const CJ=["man","woman"],$J=["sedentary","lightlyActive","moderatelyActive","veryActive","extremelyActive"],kJ=["maintainWeight","loseWeight","gainMuscle","loseAndGain"];function IJ(t){var i;const n=AJ(t)*xJ[t.lifestyle],r=`${t.lifestyle}-${t.goal}`,s=((i=EJ.find(([o])=>o.test(r)))==null?void 0:i[1])??1;return{baseCalories:Math.round(n),calories:Math.max(1200,Math.round(n+SJ[t.goal])),protein:Math.round(t.weight*s)}}const RJ={class:"w-full border-collapse border border-gray-300 bg-white text-sm"},OJ={class:"border border-gray-300 bg-gray-50 px-3 py-2 text-left font-semibold text-gray-700"},TJ={class:"border border-gray-300 px-3 py-2 text-gray-900"},DJ={class:"border border-gray-300 bg-gray-50 px-3 py-2 text-left font-semibold text-gray-700"},PJ={class:"border border-gray-300 px-3 py-2 text-gray-900"},MJ={class:"border border-gray-300 bg-gray-50 px-3 py-2 text-left font-semibold text-gray-700"},LJ={class:"border border-gray-300 px-3 py-2 text-gray-900"},NJ={class:"border border-gray-300 bg-gray-50 px-3 py-2 text-left font-semibold text-gray-700"},FJ={class:"border border-gray-300 px-3 py-2 text-gray-900"},jJ={class:"border border-gray-300 bg-gray-50 px-3 py-2 text-left font-semibold text-gray-700"},qJ={class:"border border-gray-300 px-3 py-2 text-gray-900"},UJ={class:"border border-gray-300 bg-gray-50 px-3 py-2 text-left font-semibold text-gray-700"},BJ={class:"border border-gray-300 px-3 py-2 text-gray-900"},zJ=ue({__name:"GoalsWizardStep2",props:{goalsProfile:{}},emits:["submit"],setup(t,{emit:e}){const n=e,r=IJ(t.goalsProfile),s=qi({calories:gn(r.calories),protein:gn(r.protein),carbs:gn(),fat:gn()}),i=H(()=>{if(s.calories)return s.calories-r.baseCalories});function o(){Uy.setState({calories:s.calories,protein:s.protein,carbs:s.carbs,fat:s.fat}),n("submit")}return(a,l)=>{const u=mt,c=As,d=Ia,f=rt,p=Ui;return I(),Z(p,{form:y(s),class:"flex flex-col gap-2",onSubmit:l[0]||(l[0]=h=>o())},{default:K(()=>[N(u,{"lang-key":"goalsWizard.summary"}),N(c,{name:"calories",class:"flex flex-col",label:a.$t("goalsWizard.calories"),description:i.value?a.$t("goalsWizard.caloriesDiff",{diff:i.value>0?`+${i.value}`:i.value}):void 0,"description-class":{"text-xs self-end":!0,"text-green-500":i.value&&i.value>0,"text-red-500":i.value&&i.value<0}},null,8,["label","description","description-class"]),N(c,{name:"protein",label:a.$t("goalsWizard.protein")},null,8,["label"]),N(c,{name:"carbs",label:a.$t("goalsWizard.carbs")},null,8,["label"]),N(c,{name:"fat",label:a.$t("goalsWizard.fat")},null,8,["label"]),N(d,{label:a.$t("goalsWizard.summaryDetails"),"content-class":"pl-0"},{default:K(()=>[L("table",RJ,[L("thead",null,[L("tr",null,[L("th",OJ,fe(a.$t("goalsWizard.sex")),1),L("td",TJ,fe(a.$t(`goalsWizard.sexOptions.${t.goalsProfile.sex}`)),1)]),L("tr",null,[L("th",DJ,fe(a.$t("goalsWizard.weight")),1),L("td",PJ,fe(y(ot)(t.goalsProfile.weight)),1)]),L("tr",null,[L("th",MJ,fe(a.$t("goalsWizard.height")),1),L("td",LJ,fe(y(ot)(t.goalsProfile.height)),1)]),L("tr",null,[L("th",NJ,fe(a.$t("goalsWizard.age")),1),L("td",FJ,fe(t.goalsProfile.age),1)]),L("tr",null,[L("th",jJ,fe(a.$t("goalsWizard.lifestyle")),1),L("td",qJ,fe(a.$t(`goalsWizard.lifestyleOptions.${t.goalsProfile.lifestyle}`)),1)]),L("tr",null,[L("th",UJ,fe(a.$t("goalsWizard.goal")),1),L("td",BJ,fe(a.$t(`goalsWizard.goalOptions.${t.goalsProfile.goal}`)),1)])])])]),_:1},8,["label"]),N(f,{submit:"",class:"w-full"},{default:K(()=>[Ue(fe(a.$t("goalsWizard.submitGoals")),1)]),_:1})]),_:1},8,["form"])}}}),VJ={key:0,class:"rounded-md bg-yellow-50 p-2 text-sm text-yellow-700"},HJ=ue({__name:"GoalsWizardStep1",emits:["submit"],setup(t){const e=qi({sex:ao(),weight:Yp(),height:Yp(),age:Yp(),lifestyle:ao(),goal:ao()});return(n,r)=>{const s=ru,i=As,o=rt,a=Ui;return I(),Z(a,{form:y(e),class:"flex flex-1 flex-col space-y-2 overflow-y-auto",onSubmit:r[0]||(r[0]=l=>n.$emit("submit",{sex:y(e).sex,weight:y(e).weight,height:y(e).height,age:y(e).age,lifestyle:y(e).lifestyle,goal:y(e).goal}))},{default:K(()=>[N(s,{name:"sex",label:n.$t("goalsWizard.sex"),options:y(CJ),"render-option":l=>n.$t(`goalsWizard.sexOptions.${l}`)},null,8,["label","options","render-option"]),N(i,{name:"weight",step:"0.1",label:n.$t("goalsWizard.weight")},null,8,["label"]),N(i,{name:"height",step:"1",label:n.$t("goalsWizard.height")},null,8,["label"]),N(i,{name:"age",step:"1",label:n.$t("goalsWizard.age")},null,8,["label"]),N(s,{name:"lifestyle",label:n.$t("goalsWizard.lifestyle"),options:y($J),"render-option":l=>n.$t(`goalsWizard.lifestyleOptions.${l}`)},null,8,["label","options","render-option"]),N(s,{name:"goal",label:n.$t("goalsWizard.goal"),options:y(kJ),"render-option":l=>n.$t(`goalsWizard.goalOptions.${l}`)},null,8,["label","options","render-option"]),y(e).goal==="loseAndGain"?(I(),ae("div",VJ,fe(n.$t("goalsWizard.loseAndGainWarning")),1)):ke("",!0),r[1]||(r[1]=L("div",{class:"grow"},null,-1)),N(o,{submit:"",class:"w-full"},{default:K(()=>[Ue(fe(n.$t("goalsWizard.submitProfile")),1)]),_:1})]),_:1},8,["form"])}}}),KJ=ue({__name:"GoalsWizardModal",emits:["close"],setup(t){const e=we(null);return(n,r)=>{const s=HJ,i=zJ,o=Jn;return I(),Z(o,{title:n.$t("goalsWizard.title"),"fullscreen-on-mobile":""},{default:K(()=>[e.value?(I(),Z(i,{key:1,"goals-profile":e.value,onSubmit:r[1]||(r[1]=a=>n.$emit("close",!0))},null,8,["goals-profile"])):(I(),Z(s,{key:0,onSubmit:r[0]||(r[0]=a=>e.value=a)}))]),_:1},8,["title"])}}}),WJ={class:"mt-4 ml-4 grid grid-cols-[auto_1fr] gap-2"},GJ=ue({__name:"Goals",setup(t){async function e(){const{response:n}=await $t.modal(KJ);n&&await $t.closeAllModals()}return(n,r)=>{const s=As,i=rt,o=py;return I(),Z(o,{title:n.$t("settings.goals"),description:n.$t("settings.goalsDescription"),layout:"vertical"},{default:K(()=>[L("div",WJ,[N(s,{modelValue:n.$goals.calories,"onUpdate:modelValue":r[0]||(r[0]=a=>n.$goals.calories=a),type:"number",class:"col-span-2 grid grid-cols-subgrid items-center",label:n.$t("settings.goalsCalories")},null,8,["modelValue","label"]),N(s,{modelValue:n.$goals.protein,"onUpdate:modelValue":r[1]||(r[1]=a=>n.$goals.protein=a),type:"number",class:"col-span-2 grid grid-cols-subgrid items-center",label:n.$t("settings.goalsProtein")},null,8,["modelValue","label"]),N(s,{modelValue:n.$goals.carbs,"onUpdate:modelValue":r[2]||(r[2]=a=>n.$goals.carbs=a),type:"number",class:"col-span-2 grid grid-cols-subgrid items-center",label:n.$t("settings.goalsCarbs")},null,8,["modelValue","label"]),N(s,{modelValue:n.$goals.fat,"onUpdate:modelValue":r[3]||(r[3]=a=>n.$goals.fat=a),type:"number",class:"col-span-2 grid grid-cols-subgrid items-center",label:n.$t("settings.goalsFat")},null,8,["modelValue","label"])]),N(i,{class:"mt-4 w-full",variant:"secondary",onClick:r[4]||(r[4]=a=>e())},{default:K(()=>[Ue(fe(n.$t("settings.goalsWizard")),1)]),_:1})]),_:1},8,["title","description"])}}}),JJ={},YJ={class:"mt-4 ml-4 grid grid-cols-[auto_1fr] gap-2"};function XJ(t,e){const n=As,r=py;return I(),Z(r,{title:t.$t("settings.nutritionix"),description:t.$t("settings.nutritionixDescription"),layout:"vertical"},{default:K(()=>[L("div",YJ,[N(n,{modelValue:t.$nutritionix.appId,"onUpdate:modelValue":e[0]||(e[0]=s=>t.$nutritionix.appId=s),label:t.$t("settings.nutritionixAppId"),type:"password",class:"col-span-2 grid grid-cols-subgrid items-center",placeholder:"12345678"},null,8,["modelValue","label"]),N(n,{modelValue:t.$nutritionix.appKey,"onUpdate:modelValue":e[1]||(e[1]=s=>t.$nutritionix.appKey=s),label:t.$t("settings.nutritionixAppKey"),type:"password",class:"col-span-2 grid grid-cols-subgrid items-center",placeholder:"123456789abcdefghijklmnopqrstuvw"},null,8,["modelValue","label"])])]),_:1},8,["title","description"])}const QJ=jy(JJ,[["render",XJ]]),ZJ=[{component:GJ,priority:100},{component:QJ,priority:75}],eY={"required-meal":t=>{if(!(!qo(t)||String(t.name).trim()!==""))return"required"}},tY={$cookbook:qr,$goals:Uy,$nutritionix:wy,$pantry:Wr};f8(IK,{services:tY,settings:ZJ,formValidationRules:eY,settingsFullscreenOnMobile:!0,plugins:[iV({messages:Object.assign({"/src/lang/en.yaml":()=>no(()=>import("./en-im8giPGt.js"),[])})}),yK({routes:_J}),Z8({models:Object.assign({"/src/models/Ingredient.schema.ts":jO,"/src/models/Ingredient.ts":Z5,"/src/models/Meal.schema.ts":J5,"/src/models/Meal.ts":Y5,"/src/models/NutritionInformation.schema.ts":X5,"/src/models/NutritionInformation.ts":Q5,"/src/models/Recipe.schema.ts":H5,"/src/models/Recipe.ts":K5})}),OV(),eH()]});export{_v as c,ov as d,Hk as g,bh as o};
//# sourceMappingURL=index-D1ZqHgdH.js.map
